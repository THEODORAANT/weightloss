{"version":3,"file":"css-anchor-positioning-fn.umd.cjs","sources":["../node_modules/@floating-ui/utils/dist/floating-ui.utils.mjs","../node_modules/@floating-ui/core/dist/floating-ui.core.mjs","../node_modules/@floating-ui/utils/dist/floating-ui.utils.dom.mjs","../node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs","../node_modules/css-tree/lib/tokenizer/types.js","../node_modules/css-tree/lib/tokenizer/char-code-definitions.js","../node_modules/css-tree/lib/tokenizer/utils.js","../node_modules/css-tree/lib/tokenizer/names.js","../node_modules/css-tree/lib/tokenizer/adopt-buffer.js","../node_modules/css-tree/lib/tokenizer/OffsetToLocation.js","../node_modules/css-tree/lib/tokenizer/TokenStream.js","../node_modules/css-tree/lib/tokenizer/index.js","../node_modules/css-tree/lib/utils/List.js","../node_modules/css-tree/lib/utils/create-custom-error.js","../node_modules/css-tree/lib/parser/SyntaxError.js","../node_modules/css-tree/lib/parser/sequence.js","../node_modules/css-tree/lib/parser/create.js","../node_modules/source-map-js/lib/base64.js","../node_modules/source-map-js/lib/base64-vlq.js","../node_modules/source-map-js/lib/util.js","../node_modules/source-map-js/lib/array-set.js","../node_modules/source-map-js/lib/mapping-list.js","../node_modules/source-map-js/lib/source-map-generator.js","../node_modules/css-tree/lib/generator/sourceMap.js","../node_modules/css-tree/lib/generator/token-before.js","../node_modules/css-tree/lib/generator/create.js","../node_modules/css-tree/lib/convertor/create.js","../node_modules/css-tree/lib/walker/create.js","../node_modules/css-tree/lib/definition-syntax/generate.js","../node_modules/css-tree/lib/lexer/error.js","../node_modules/css-tree/lib/utils/names.js","../node_modules/css-tree/lib/lexer/generic-const.js","../node_modules/css-tree/lib/lexer/generic-an-plus-b.js","../node_modules/css-tree/lib/lexer/generic-urange.js","../node_modules/css-tree/lib/lexer/generic.js","../node_modules/css-tree/lib/lexer/units.js","../node_modules/css-tree/lib/definition-syntax/SyntaxError.js","../node_modules/css-tree/lib/definition-syntax/tokenizer.js","../node_modules/css-tree/lib/definition-syntax/parse.js","../node_modules/css-tree/lib/definition-syntax/walk.js","../node_modules/css-tree/lib/lexer/prepare-tokens.js","../node_modules/css-tree/lib/lexer/match-graph.js","../node_modules/css-tree/lib/lexer/match.js","../node_modules/css-tree/lib/lexer/trace.js","../node_modules/css-tree/lib/lexer/search.js","../node_modules/css-tree/lib/lexer/structure.js","../node_modules/css-tree/lib/lexer/Lexer.js","../node_modules/css-tree/lib/syntax/config/mix.js","../node_modules/css-tree/lib/syntax/create.js","../node_modules/css-tree/dist/data.js","../node_modules/css-tree/lib/syntax/node/AnPlusB.js","../node_modules/css-tree/lib/syntax/node/Atrule.js","../node_modules/css-tree/lib/syntax/node/AtrulePrelude.js","../node_modules/css-tree/lib/syntax/node/AttributeSelector.js","../node_modules/css-tree/lib/syntax/node/Block.js","../node_modules/css-tree/lib/syntax/node/Brackets.js","../node_modules/css-tree/lib/syntax/node/CDC.js","../node_modules/css-tree/lib/syntax/node/CDO.js","../node_modules/css-tree/lib/syntax/node/ClassSelector.js","../node_modules/css-tree/lib/syntax/node/Combinator.js","../node_modules/css-tree/lib/syntax/node/Comment.js","../node_modules/css-tree/lib/syntax/node/Condition.js","../node_modules/css-tree/lib/syntax/node/Declaration.js","../node_modules/css-tree/lib/syntax/node/DeclarationList.js","../node_modules/css-tree/lib/syntax/node/Dimension.js","../node_modules/css-tree/lib/syntax/node/Feature.js","../node_modules/css-tree/lib/syntax/node/FeatureFunction.js","../node_modules/css-tree/lib/syntax/node/FeatureRange.js","../node_modules/css-tree/lib/syntax/node/Function.js","../node_modules/css-tree/lib/syntax/node/GeneralEnclosed.js","../node_modules/css-tree/lib/syntax/node/Hash.js","../node_modules/css-tree/lib/syntax/node/Identifier.js","../node_modules/css-tree/lib/syntax/node/IdSelector.js","../node_modules/css-tree/lib/syntax/node/Layer.js","../node_modules/css-tree/lib/syntax/node/LayerList.js","../node_modules/css-tree/lib/syntax/node/MediaQuery.js","../node_modules/css-tree/lib/syntax/node/MediaQueryList.js","../node_modules/css-tree/lib/syntax/node/NestingSelector.js","../node_modules/css-tree/lib/syntax/node/Nth.js","../node_modules/css-tree/lib/syntax/node/Number.js","../node_modules/css-tree/lib/syntax/node/Operator.js","../node_modules/css-tree/lib/syntax/node/Parentheses.js","../node_modules/css-tree/lib/syntax/node/Percentage.js","../node_modules/css-tree/lib/syntax/node/PseudoClassSelector.js","../node_modules/css-tree/lib/syntax/node/PseudoElementSelector.js","../node_modules/css-tree/lib/syntax/node/Ratio.js","../node_modules/css-tree/lib/syntax/node/Raw.js","../node_modules/css-tree/lib/syntax/node/Rule.js","../node_modules/css-tree/lib/syntax/node/Scope.js","../node_modules/css-tree/lib/syntax/node/Selector.js","../node_modules/css-tree/lib/syntax/node/SelectorList.js","../node_modules/css-tree/lib/utils/string.js","../node_modules/css-tree/lib/syntax/node/String.js","../node_modules/css-tree/lib/syntax/node/StyleSheet.js","../node_modules/css-tree/lib/syntax/node/SupportsDeclaration.js","../node_modules/css-tree/lib/syntax/node/TypeSelector.js","../node_modules/css-tree/lib/syntax/node/UnicodeRange.js","../node_modules/css-tree/lib/utils/url.js","../node_modules/css-tree/lib/syntax/node/Url.js","../node_modules/css-tree/lib/syntax/node/Value.js","../node_modules/css-tree/lib/syntax/node/WhiteSpace.js","../node_modules/css-tree/lib/syntax/config/lexer.js","../node_modules/css-tree/lib/syntax/scope/default.js","../node_modules/css-tree/lib/syntax/scope/atrulePrelude.js","../node_modules/css-tree/lib/syntax/scope/selector.js","../node_modules/css-tree/lib/syntax/function/expression.js","../node_modules/css-tree/lib/syntax/function/var.js","../node_modules/css-tree/lib/syntax/scope/value.js","../node_modules/css-tree/lib/syntax/atrule/container.js","../node_modules/css-tree/lib/syntax/atrule/font-face.js","../node_modules/css-tree/lib/syntax/atrule/import.js","../node_modules/css-tree/lib/syntax/atrule/index.js","../node_modules/css-tree/lib/syntax/atrule/layer.js","../node_modules/css-tree/lib/syntax/atrule/media.js","../node_modules/css-tree/lib/syntax/atrule/nest.js","../node_modules/css-tree/lib/syntax/atrule/page.js","../node_modules/css-tree/lib/syntax/atrule/scope.js","../node_modules/css-tree/lib/syntax/atrule/starting-style.js","../node_modules/css-tree/lib/syntax/atrule/supports.js","../node_modules/css-tree/lib/syntax/pseudo/lang.js","../node_modules/css-tree/lib/syntax/pseudo/index.js","../node_modules/css-tree/lib/syntax/config/parser.js","../node_modules/css-tree/lib/syntax/config/walker.js","../node_modules/css-tree/lib/syntax/index.js","../node_modules/css-tree/lib/utils/clone.js","../node_modules/css-tree/lib/index.js","../node_modules/nanoid/non-secure/index.js","../src/utils.ts","../src/cascade.ts","../src/dom.ts","../src/fetch.ts","../src/syntax.ts","../src/fallback.ts","../src/validate.ts","../src/parse.ts","../src/transform.ts","../src/polyfill.ts"],"sourcesContent":["/**\n * Custom positioning reference element.\n * @see https://floating-ui.com/docs/virtual-elements\n */\n\nconst sides = ['top', 'right', 'bottom', 'left'];\nconst alignments = ['start', 'end'];\nconst placements = /*#__PURE__*/sides.reduce((acc, side) => acc.concat(side, side + \"-\" + alignments[0], side + \"-\" + alignments[1]), []);\nconst min = Math.min;\nconst max = Math.max;\nconst round = Math.round;\nconst floor = Math.floor;\nconst createCoords = v => ({\n  x: v,\n  y: v\n});\nconst oppositeSideMap = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nconst oppositeAlignmentMap = {\n  start: 'end',\n  end: 'start'\n};\nfunction clamp(start, value, end) {\n  return max(start, min(value, end));\n}\nfunction evaluate(value, param) {\n  return typeof value === 'function' ? value(param) : value;\n}\nfunction getSide(placement) {\n  return placement.split('-')[0];\n}\nfunction getAlignment(placement) {\n  return placement.split('-')[1];\n}\nfunction getOppositeAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}\nfunction getAxisLength(axis) {\n  return axis === 'y' ? 'height' : 'width';\n}\nfunction getSideAxis(placement) {\n  return ['top', 'bottom'].includes(getSide(placement)) ? 'y' : 'x';\n}\nfunction getAlignmentAxis(placement) {\n  return getOppositeAxis(getSideAxis(placement));\n}\nfunction getAlignmentSides(placement, rects, rtl) {\n  if (rtl === void 0) {\n    rtl = false;\n  }\n  const alignment = getAlignment(placement);\n  const alignmentAxis = getAlignmentAxis(placement);\n  const length = getAxisLength(alignmentAxis);\n  let mainAlignmentSide = alignmentAxis === 'x' ? alignment === (rtl ? 'end' : 'start') ? 'right' : 'left' : alignment === 'start' ? 'bottom' : 'top';\n  if (rects.reference[length] > rects.floating[length]) {\n    mainAlignmentSide = getOppositePlacement(mainAlignmentSide);\n  }\n  return [mainAlignmentSide, getOppositePlacement(mainAlignmentSide)];\n}\nfunction getExpandedPlacements(placement) {\n  const oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeAlignmentPlacement(placement), oppositePlacement, getOppositeAlignmentPlacement(oppositePlacement)];\n}\nfunction getOppositeAlignmentPlacement(placement) {\n  return placement.replace(/start|end/g, alignment => oppositeAlignmentMap[alignment]);\n}\nfunction getSideList(side, isStart, rtl) {\n  const lr = ['left', 'right'];\n  const rl = ['right', 'left'];\n  const tb = ['top', 'bottom'];\n  const bt = ['bottom', 'top'];\n  switch (side) {\n    case 'top':\n    case 'bottom':\n      if (rtl) return isStart ? rl : lr;\n      return isStart ? lr : rl;\n    case 'left':\n    case 'right':\n      return isStart ? tb : bt;\n    default:\n      return [];\n  }\n}\nfunction getOppositeAxisPlacements(placement, flipAlignment, direction, rtl) {\n  const alignment = getAlignment(placement);\n  let list = getSideList(getSide(placement), direction === 'start', rtl);\n  if (alignment) {\n    list = list.map(side => side + \"-\" + alignment);\n    if (flipAlignment) {\n      list = list.concat(list.map(getOppositeAlignmentPlacement));\n    }\n  }\n  return list;\n}\nfunction getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, side => oppositeSideMap[side]);\n}\nfunction expandPaddingObject(padding) {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    ...padding\n  };\n}\nfunction getPaddingObject(padding) {\n  return typeof padding !== 'number' ? expandPaddingObject(padding) : {\n    top: padding,\n    right: padding,\n    bottom: padding,\n    left: padding\n  };\n}\nfunction rectToClientRect(rect) {\n  const {\n    x,\n    y,\n    width,\n    height\n  } = rect;\n  return {\n    width,\n    height,\n    top: y,\n    left: x,\n    right: x + width,\n    bottom: y + height,\n    x,\n    y\n  };\n}\n\nexport { alignments, clamp, createCoords, evaluate, expandPaddingObject, floor, getAlignment, getAlignmentAxis, getAlignmentSides, getAxisLength, getExpandedPlacements, getOppositeAlignmentPlacement, getOppositeAxis, getOppositeAxisPlacements, getOppositePlacement, getPaddingObject, getSide, getSideAxis, max, min, placements, rectToClientRect, round, sides };\n","import { getSideAxis, getAlignmentAxis, getAxisLength, getSide, getAlignment, evaluate, getPaddingObject, rectToClientRect, min, clamp, placements, getAlignmentSides, getOppositeAlignmentPlacement, getOppositePlacement, getExpandedPlacements, getOppositeAxisPlacements, sides, max, getOppositeAxis } from '@floating-ui/utils';\nexport { rectToClientRect } from '@floating-ui/utils';\n\nfunction computeCoordsFromPlacement(_ref, placement, rtl) {\n  let {\n    reference,\n    floating\n  } = _ref;\n  const sideAxis = getSideAxis(placement);\n  const alignmentAxis = getAlignmentAxis(placement);\n  const alignLength = getAxisLength(alignmentAxis);\n  const side = getSide(placement);\n  const isVertical = sideAxis === 'y';\n  const commonX = reference.x + reference.width / 2 - floating.width / 2;\n  const commonY = reference.y + reference.height / 2 - floating.height / 2;\n  const commonAlign = reference[alignLength] / 2 - floating[alignLength] / 2;\n  let coords;\n  switch (side) {\n    case 'top':\n      coords = {\n        x: commonX,\n        y: reference.y - floating.height\n      };\n      break;\n    case 'bottom':\n      coords = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n    case 'right':\n      coords = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n    case 'left':\n      coords = {\n        x: reference.x - floating.width,\n        y: commonY\n      };\n      break;\n    default:\n      coords = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n  switch (getAlignment(placement)) {\n    case 'start':\n      coords[alignmentAxis] -= commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n    case 'end':\n      coords[alignmentAxis] += commonAlign * (rtl && isVertical ? -1 : 1);\n      break;\n  }\n  return coords;\n}\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a given reference element.\n *\n * This export does not have any `platform` interface logic. You will need to\n * write one for the platform you are using Floating UI with.\n */\nconst computePosition = async (reference, floating, config) => {\n  const {\n    placement = 'bottom',\n    strategy = 'absolute',\n    middleware = [],\n    platform\n  } = config;\n  const validMiddleware = middleware.filter(Boolean);\n  const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(floating));\n  let rects = await platform.getElementRects({\n    reference,\n    floating,\n    strategy\n  });\n  let {\n    x,\n    y\n  } = computeCoordsFromPlacement(rects, placement, rtl);\n  let statefulPlacement = placement;\n  let middlewareData = {};\n  let resetCount = 0;\n  for (let i = 0; i < validMiddleware.length; i++) {\n    const {\n      name,\n      fn\n    } = validMiddleware[i];\n    const {\n      x: nextX,\n      y: nextY,\n      data,\n      reset\n    } = await fn({\n      x,\n      y,\n      initialPlacement: placement,\n      placement: statefulPlacement,\n      strategy,\n      middlewareData,\n      rects,\n      platform,\n      elements: {\n        reference,\n        floating\n      }\n    });\n    x = nextX != null ? nextX : x;\n    y = nextY != null ? nextY : y;\n    middlewareData = {\n      ...middlewareData,\n      [name]: {\n        ...middlewareData[name],\n        ...data\n      }\n    };\n    if (reset && resetCount <= 50) {\n      resetCount++;\n      if (typeof reset === 'object') {\n        if (reset.placement) {\n          statefulPlacement = reset.placement;\n        }\n        if (reset.rects) {\n          rects = reset.rects === true ? await platform.getElementRects({\n            reference,\n            floating,\n            strategy\n          }) : reset.rects;\n        }\n        ({\n          x,\n          y\n        } = computeCoordsFromPlacement(rects, statefulPlacement, rtl));\n      }\n      i = -1;\n    }\n  }\n  return {\n    x,\n    y,\n    placement: statefulPlacement,\n    strategy,\n    middlewareData\n  };\n};\n\n/**\n * Resolves with an object of overflow side offsets that determine how much the\n * element is overflowing a given clipping boundary on each side.\n * - positive = overflowing the boundary by that number of pixels\n * - negative = how many pixels left before it will overflow\n * - 0 = lies flush with the boundary\n * @see https://floating-ui.com/docs/detectOverflow\n */\nasync function detectOverflow(state, options) {\n  var _await$platform$isEle;\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    x,\n    y,\n    platform,\n    rects,\n    elements,\n    strategy\n  } = state;\n  const {\n    boundary = 'clippingAncestors',\n    rootBoundary = 'viewport',\n    elementContext = 'floating',\n    altBoundary = false,\n    padding = 0\n  } = evaluate(options, state);\n  const paddingObject = getPaddingObject(padding);\n  const altContext = elementContext === 'floating' ? 'reference' : 'floating';\n  const element = elements[altBoundary ? altContext : elementContext];\n  const clippingClientRect = rectToClientRect(await platform.getClippingRect({\n    element: ((_await$platform$isEle = await (platform.isElement == null ? void 0 : platform.isElement(element))) != null ? _await$platform$isEle : true) ? element : element.contextElement || (await (platform.getDocumentElement == null ? void 0 : platform.getDocumentElement(elements.floating))),\n    boundary,\n    rootBoundary,\n    strategy\n  }));\n  const rect = elementContext === 'floating' ? {\n    x,\n    y,\n    width: rects.floating.width,\n    height: rects.floating.height\n  } : rects.reference;\n  const offsetParent = await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(elements.floating));\n  const offsetScale = (await (platform.isElement == null ? void 0 : platform.isElement(offsetParent))) ? (await (platform.getScale == null ? void 0 : platform.getScale(offsetParent))) || {\n    x: 1,\n    y: 1\n  } : {\n    x: 1,\n    y: 1\n  };\n  const elementClientRect = rectToClientRect(platform.convertOffsetParentRelativeRectToViewportRelativeRect ? await platform.convertOffsetParentRelativeRectToViewportRelativeRect({\n    elements,\n    rect,\n    offsetParent,\n    strategy\n  }) : rect);\n  return {\n    top: (clippingClientRect.top - elementClientRect.top + paddingObject.top) / offsetScale.y,\n    bottom: (elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom) / offsetScale.y,\n    left: (clippingClientRect.left - elementClientRect.left + paddingObject.left) / offsetScale.x,\n    right: (elementClientRect.right - clippingClientRect.right + paddingObject.right) / offsetScale.x\n  };\n}\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = options => ({\n  name: 'arrow',\n  options,\n  async fn(state) {\n    const {\n      x,\n      y,\n      placement,\n      rects,\n      platform,\n      elements,\n      middlewareData\n    } = state;\n    // Since `element` is required, we don't Partial<> the type.\n    const {\n      element,\n      padding = 0\n    } = evaluate(options, state) || {};\n    if (element == null) {\n      return {};\n    }\n    const paddingObject = getPaddingObject(padding);\n    const coords = {\n      x,\n      y\n    };\n    const axis = getAlignmentAxis(placement);\n    const length = getAxisLength(axis);\n    const arrowDimensions = await platform.getDimensions(element);\n    const isYAxis = axis === 'y';\n    const minProp = isYAxis ? 'top' : 'left';\n    const maxProp = isYAxis ? 'bottom' : 'right';\n    const clientProp = isYAxis ? 'clientHeight' : 'clientWidth';\n    const endDiff = rects.reference[length] + rects.reference[axis] - coords[axis] - rects.floating[length];\n    const startDiff = coords[axis] - rects.reference[axis];\n    const arrowOffsetParent = await (platform.getOffsetParent == null ? void 0 : platform.getOffsetParent(element));\n    let clientSize = arrowOffsetParent ? arrowOffsetParent[clientProp] : 0;\n\n    // DOM platform can return `window` as the `offsetParent`.\n    if (!clientSize || !(await (platform.isElement == null ? void 0 : platform.isElement(arrowOffsetParent)))) {\n      clientSize = elements.floating[clientProp] || rects.floating[length];\n    }\n    const centerToReference = endDiff / 2 - startDiff / 2;\n\n    // If the padding is large enough that it causes the arrow to no longer be\n    // centered, modify the padding so that it is centered.\n    const largestPossiblePadding = clientSize / 2 - arrowDimensions[length] / 2 - 1;\n    const minPadding = min(paddingObject[minProp], largestPossiblePadding);\n    const maxPadding = min(paddingObject[maxProp], largestPossiblePadding);\n\n    // Make sure the arrow doesn't overflow the floating element if the center\n    // point is outside the floating element's bounds.\n    const min$1 = minPadding;\n    const max = clientSize - arrowDimensions[length] - maxPadding;\n    const center = clientSize / 2 - arrowDimensions[length] / 2 + centerToReference;\n    const offset = clamp(min$1, center, max);\n\n    // If the reference is small enough that the arrow's padding causes it to\n    // to point to nothing for an aligned placement, adjust the offset of the\n    // floating element itself. To ensure `shift()` continues to take action,\n    // a single reset is performed when this is true.\n    const shouldAddOffset = !middlewareData.arrow && getAlignment(placement) != null && center !== offset && rects.reference[length] / 2 - (center < min$1 ? minPadding : maxPadding) - arrowDimensions[length] / 2 < 0;\n    const alignmentOffset = shouldAddOffset ? center < min$1 ? center - min$1 : center - max : 0;\n    return {\n      [axis]: coords[axis] + alignmentOffset,\n      data: {\n        [axis]: offset,\n        centerOffset: center - offset - alignmentOffset,\n        ...(shouldAddOffset && {\n          alignmentOffset\n        })\n      },\n      reset: shouldAddOffset\n    };\n  }\n});\n\nfunction getPlacementList(alignment, autoAlignment, allowedPlacements) {\n  const allowedPlacementsSortedByAlignment = alignment ? [...allowedPlacements.filter(placement => getAlignment(placement) === alignment), ...allowedPlacements.filter(placement => getAlignment(placement) !== alignment)] : allowedPlacements.filter(placement => getSide(placement) === placement);\n  return allowedPlacementsSortedByAlignment.filter(placement => {\n    if (alignment) {\n      return getAlignment(placement) === alignment || (autoAlignment ? getOppositeAlignmentPlacement(placement) !== placement : false);\n    }\n    return true;\n  });\n}\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'autoPlacement',\n    options,\n    async fn(state) {\n      var _middlewareData$autoP, _middlewareData$autoP2, _placementsThatFitOnE;\n      const {\n        rects,\n        middlewareData,\n        placement,\n        platform,\n        elements\n      } = state;\n      const {\n        crossAxis = false,\n        alignment,\n        allowedPlacements = placements,\n        autoAlignment = true,\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const placements$1 = alignment !== undefined || allowedPlacements === placements ? getPlacementList(alignment || null, autoAlignment, allowedPlacements) : allowedPlacements;\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const currentIndex = ((_middlewareData$autoP = middlewareData.autoPlacement) == null ? void 0 : _middlewareData$autoP.index) || 0;\n      const currentPlacement = placements$1[currentIndex];\n      if (currentPlacement == null) {\n        return {};\n      }\n      const alignmentSides = getAlignmentSides(currentPlacement, rects, await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating)));\n\n      // Make `computeCoords` start from the right place.\n      if (placement !== currentPlacement) {\n        return {\n          reset: {\n            placement: placements$1[0]\n          }\n        };\n      }\n      const currentOverflows = [overflow[getSide(currentPlacement)], overflow[alignmentSides[0]], overflow[alignmentSides[1]]];\n      const allOverflows = [...(((_middlewareData$autoP2 = middlewareData.autoPlacement) == null ? void 0 : _middlewareData$autoP2.overflows) || []), {\n        placement: currentPlacement,\n        overflows: currentOverflows\n      }];\n      const nextPlacement = placements$1[currentIndex + 1];\n\n      // There are more placements to check.\n      if (nextPlacement) {\n        return {\n          data: {\n            index: currentIndex + 1,\n            overflows: allOverflows\n          },\n          reset: {\n            placement: nextPlacement\n          }\n        };\n      }\n      const placementsSortedByMostSpace = allOverflows.map(d => {\n        const alignment = getAlignment(d.placement);\n        return [d.placement, alignment && crossAxis ?\n        // Check along the mainAxis and main crossAxis side.\n        d.overflows.slice(0, 2).reduce((acc, v) => acc + v, 0) :\n        // Check only the mainAxis.\n        d.overflows[0], d.overflows];\n      }).sort((a, b) => a[1] - b[1]);\n      const placementsThatFitOnEachSide = placementsSortedByMostSpace.filter(d => d[2].slice(0,\n      // Aligned placements should not check their opposite crossAxis\n      // side.\n      getAlignment(d[0]) ? 2 : 3).every(v => v <= 0));\n      const resetPlacement = ((_placementsThatFitOnE = placementsThatFitOnEachSide[0]) == null ? void 0 : _placementsThatFitOnE[0]) || placementsSortedByMostSpace[0][0];\n      if (resetPlacement !== placement) {\n        return {\n          data: {\n            index: currentIndex + 1,\n            overflows: allOverflows\n          },\n          reset: {\n            placement: resetPlacement\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'flip',\n    options,\n    async fn(state) {\n      var _middlewareData$arrow, _middlewareData$flip;\n      const {\n        placement,\n        middlewareData,\n        rects,\n        initialPlacement,\n        platform,\n        elements\n      } = state;\n      const {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true,\n        fallbackPlacements: specifiedFallbackPlacements,\n        fallbackStrategy = 'bestFit',\n        fallbackAxisSideDirection = 'none',\n        flipAlignment = true,\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n\n      // If a reset by the arrow was caused due to an alignment offset being\n      // added, we should skip any logic now since `flip()` has already done its\n      // work.\n      // https://github.com/floating-ui/floating-ui/issues/2549#issuecomment-1719601643\n      if ((_middlewareData$arrow = middlewareData.arrow) != null && _middlewareData$arrow.alignmentOffset) {\n        return {};\n      }\n      const side = getSide(placement);\n      const initialSideAxis = getSideAxis(initialPlacement);\n      const isBasePlacement = getSide(initialPlacement) === initialPlacement;\n      const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating));\n      const fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipAlignment ? [getOppositePlacement(initialPlacement)] : getExpandedPlacements(initialPlacement));\n      const hasFallbackAxisSideDirection = fallbackAxisSideDirection !== 'none';\n      if (!specifiedFallbackPlacements && hasFallbackAxisSideDirection) {\n        fallbackPlacements.push(...getOppositeAxisPlacements(initialPlacement, flipAlignment, fallbackAxisSideDirection, rtl));\n      }\n      const placements = [initialPlacement, ...fallbackPlacements];\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const overflows = [];\n      let overflowsData = ((_middlewareData$flip = middlewareData.flip) == null ? void 0 : _middlewareData$flip.overflows) || [];\n      if (checkMainAxis) {\n        overflows.push(overflow[side]);\n      }\n      if (checkCrossAxis) {\n        const sides = getAlignmentSides(placement, rects, rtl);\n        overflows.push(overflow[sides[0]], overflow[sides[1]]);\n      }\n      overflowsData = [...overflowsData, {\n        placement,\n        overflows\n      }];\n\n      // One or more sides is overflowing.\n      if (!overflows.every(side => side <= 0)) {\n        var _middlewareData$flip2, _overflowsData$filter;\n        const nextIndex = (((_middlewareData$flip2 = middlewareData.flip) == null ? void 0 : _middlewareData$flip2.index) || 0) + 1;\n        const nextPlacement = placements[nextIndex];\n        if (nextPlacement) {\n          // Try next placement and re-run the lifecycle.\n          return {\n            data: {\n              index: nextIndex,\n              overflows: overflowsData\n            },\n            reset: {\n              placement: nextPlacement\n            }\n          };\n        }\n\n        // First, find the candidates that fit on the mainAxis side of overflow,\n        // then find the placement that fits the best on the main crossAxis side.\n        let resetPlacement = (_overflowsData$filter = overflowsData.filter(d => d.overflows[0] <= 0).sort((a, b) => a.overflows[1] - b.overflows[1])[0]) == null ? void 0 : _overflowsData$filter.placement;\n\n        // Otherwise fallback.\n        if (!resetPlacement) {\n          switch (fallbackStrategy) {\n            case 'bestFit':\n              {\n                var _overflowsData$filter2;\n                const placement = (_overflowsData$filter2 = overflowsData.filter(d => {\n                  if (hasFallbackAxisSideDirection) {\n                    const currentSideAxis = getSideAxis(d.placement);\n                    return currentSideAxis === initialSideAxis ||\n                    // Create a bias to the `y` side axis due to horizontal\n                    // reading directions favoring greater width.\n                    currentSideAxis === 'y';\n                  }\n                  return true;\n                }).map(d => [d.placement, d.overflows.filter(overflow => overflow > 0).reduce((acc, overflow) => acc + overflow, 0)]).sort((a, b) => a[1] - b[1])[0]) == null ? void 0 : _overflowsData$filter2[0];\n                if (placement) {\n                  resetPlacement = placement;\n                }\n                break;\n              }\n            case 'initialPlacement':\n              resetPlacement = initialPlacement;\n              break;\n          }\n        }\n        if (placement !== resetPlacement) {\n          return {\n            reset: {\n              placement: resetPlacement\n            }\n          };\n        }\n      }\n      return {};\n    }\n  };\n};\n\nfunction getSideOffsets(overflow, rect) {\n  return {\n    top: overflow.top - rect.height,\n    right: overflow.right - rect.width,\n    bottom: overflow.bottom - rect.height,\n    left: overflow.left - rect.width\n  };\n}\nfunction isAnySideFullyClipped(overflow) {\n  return sides.some(side => overflow[side] >= 0);\n}\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'hide',\n    options,\n    async fn(state) {\n      const {\n        rects\n      } = state;\n      const {\n        strategy = 'referenceHidden',\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      switch (strategy) {\n        case 'referenceHidden':\n          {\n            const overflow = await detectOverflow(state, {\n              ...detectOverflowOptions,\n              elementContext: 'reference'\n            });\n            const offsets = getSideOffsets(overflow, rects.reference);\n            return {\n              data: {\n                referenceHiddenOffsets: offsets,\n                referenceHidden: isAnySideFullyClipped(offsets)\n              }\n            };\n          }\n        case 'escaped':\n          {\n            const overflow = await detectOverflow(state, {\n              ...detectOverflowOptions,\n              altBoundary: true\n            });\n            const offsets = getSideOffsets(overflow, rects.floating);\n            return {\n              data: {\n                escapedOffsets: offsets,\n                escaped: isAnySideFullyClipped(offsets)\n              }\n            };\n          }\n        default:\n          {\n            return {};\n          }\n      }\n    }\n  };\n};\n\nfunction getBoundingRect(rects) {\n  const minX = min(...rects.map(rect => rect.left));\n  const minY = min(...rects.map(rect => rect.top));\n  const maxX = max(...rects.map(rect => rect.right));\n  const maxY = max(...rects.map(rect => rect.bottom));\n  return {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY\n  };\n}\nfunction getRectsByLine(rects) {\n  const sortedRects = rects.slice().sort((a, b) => a.y - b.y);\n  const groups = [];\n  let prevRect = null;\n  for (let i = 0; i < sortedRects.length; i++) {\n    const rect = sortedRects[i];\n    if (!prevRect || rect.y - prevRect.y > prevRect.height / 2) {\n      groups.push([rect]);\n    } else {\n      groups[groups.length - 1].push(rect);\n    }\n    prevRect = rect;\n  }\n  return groups.map(rect => rectToClientRect(getBoundingRect(rect)));\n}\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'inline',\n    options,\n    async fn(state) {\n      const {\n        placement,\n        elements,\n        rects,\n        platform,\n        strategy\n      } = state;\n      // A MouseEvent's client{X,Y} coords can be up to 2 pixels off a\n      // ClientRect's bounds, despite the event listener being triggered. A\n      // padding of 2 seems to handle this issue.\n      const {\n        padding = 2,\n        x,\n        y\n      } = evaluate(options, state);\n      const nativeClientRects = Array.from((await (platform.getClientRects == null ? void 0 : platform.getClientRects(elements.reference))) || []);\n      const clientRects = getRectsByLine(nativeClientRects);\n      const fallback = rectToClientRect(getBoundingRect(nativeClientRects));\n      const paddingObject = getPaddingObject(padding);\n      function getBoundingClientRect() {\n        // There are two rects and they are disjoined.\n        if (clientRects.length === 2 && clientRects[0].left > clientRects[1].right && x != null && y != null) {\n          // Find the first rect in which the point is fully inside.\n          return clientRects.find(rect => x > rect.left - paddingObject.left && x < rect.right + paddingObject.right && y > rect.top - paddingObject.top && y < rect.bottom + paddingObject.bottom) || fallback;\n        }\n\n        // There are 2 or more connected rects.\n        if (clientRects.length >= 2) {\n          if (getSideAxis(placement) === 'y') {\n            const firstRect = clientRects[0];\n            const lastRect = clientRects[clientRects.length - 1];\n            const isTop = getSide(placement) === 'top';\n            const top = firstRect.top;\n            const bottom = lastRect.bottom;\n            const left = isTop ? firstRect.left : lastRect.left;\n            const right = isTop ? firstRect.right : lastRect.right;\n            const width = right - left;\n            const height = bottom - top;\n            return {\n              top,\n              bottom,\n              left,\n              right,\n              width,\n              height,\n              x: left,\n              y: top\n            };\n          }\n          const isLeftSide = getSide(placement) === 'left';\n          const maxRight = max(...clientRects.map(rect => rect.right));\n          const minLeft = min(...clientRects.map(rect => rect.left));\n          const measureRects = clientRects.filter(rect => isLeftSide ? rect.left === minLeft : rect.right === maxRight);\n          const top = measureRects[0].top;\n          const bottom = measureRects[measureRects.length - 1].bottom;\n          const left = minLeft;\n          const right = maxRight;\n          const width = right - left;\n          const height = bottom - top;\n          return {\n            top,\n            bottom,\n            left,\n            right,\n            width,\n            height,\n            x: left,\n            y: top\n          };\n        }\n        return fallback;\n      }\n      const resetRects = await platform.getElementRects({\n        reference: {\n          getBoundingClientRect\n        },\n        floating: elements.floating,\n        strategy\n      });\n      if (rects.reference.x !== resetRects.reference.x || rects.reference.y !== resetRects.reference.y || rects.reference.width !== resetRects.reference.width || rects.reference.height !== resetRects.reference.height) {\n        return {\n          reset: {\n            rects: resetRects\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\n// For type backwards-compatibility, the `OffsetOptions` type was also\n// Derivable.\n\nasync function convertValueToCoords(state, options) {\n  const {\n    placement,\n    platform,\n    elements\n  } = state;\n  const rtl = await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating));\n  const side = getSide(placement);\n  const alignment = getAlignment(placement);\n  const isVertical = getSideAxis(placement) === 'y';\n  const mainAxisMulti = ['left', 'top'].includes(side) ? -1 : 1;\n  const crossAxisMulti = rtl && isVertical ? -1 : 1;\n  const rawValue = evaluate(options, state);\n\n  // eslint-disable-next-line prefer-const\n  let {\n    mainAxis,\n    crossAxis,\n    alignmentAxis\n  } = typeof rawValue === 'number' ? {\n    mainAxis: rawValue,\n    crossAxis: 0,\n    alignmentAxis: null\n  } : {\n    mainAxis: rawValue.mainAxis || 0,\n    crossAxis: rawValue.crossAxis || 0,\n    alignmentAxis: rawValue.alignmentAxis\n  };\n  if (alignment && typeof alignmentAxis === 'number') {\n    crossAxis = alignment === 'end' ? alignmentAxis * -1 : alignmentAxis;\n  }\n  return isVertical ? {\n    x: crossAxis * crossAxisMulti,\n    y: mainAxis * mainAxisMulti\n  } : {\n    x: mainAxis * mainAxisMulti,\n    y: crossAxis * crossAxisMulti\n  };\n}\n\n/**\n * Modifies the placement by translating the floating element along the\n * specified axes.\n * A number (shorthand for `mainAxis` or distance), or an axes configuration\n * object may be passed.\n * @see https://floating-ui.com/docs/offset\n */\nconst offset = function (options) {\n  if (options === void 0) {\n    options = 0;\n  }\n  return {\n    name: 'offset',\n    options,\n    async fn(state) {\n      var _middlewareData$offse, _middlewareData$arrow;\n      const {\n        x,\n        y,\n        placement,\n        middlewareData\n      } = state;\n      const diffCoords = await convertValueToCoords(state, options);\n\n      // If the placement is the same and the arrow caused an alignment offset\n      // then we don't need to change the positioning coordinates.\n      if (placement === ((_middlewareData$offse = middlewareData.offset) == null ? void 0 : _middlewareData$offse.placement) && (_middlewareData$arrow = middlewareData.arrow) != null && _middlewareData$arrow.alignmentOffset) {\n        return {};\n      }\n      return {\n        x: x + diffCoords.x,\n        y: y + diffCoords.y,\n        data: {\n          ...diffCoords,\n          placement\n        }\n      };\n    }\n  };\n};\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'shift',\n    options,\n    async fn(state) {\n      const {\n        x,\n        y,\n        placement\n      } = state;\n      const {\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = false,\n        limiter = {\n          fn: _ref => {\n            let {\n              x,\n              y\n            } = _ref;\n            return {\n              x,\n              y\n            };\n          }\n        },\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const coords = {\n        x,\n        y\n      };\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const crossAxis = getSideAxis(getSide(placement));\n      const mainAxis = getOppositeAxis(crossAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      if (checkMainAxis) {\n        const minSide = mainAxis === 'y' ? 'top' : 'left';\n        const maxSide = mainAxis === 'y' ? 'bottom' : 'right';\n        const min = mainAxisCoord + overflow[minSide];\n        const max = mainAxisCoord - overflow[maxSide];\n        mainAxisCoord = clamp(min, mainAxisCoord, max);\n      }\n      if (checkCrossAxis) {\n        const minSide = crossAxis === 'y' ? 'top' : 'left';\n        const maxSide = crossAxis === 'y' ? 'bottom' : 'right';\n        const min = crossAxisCoord + overflow[minSide];\n        const max = crossAxisCoord - overflow[maxSide];\n        crossAxisCoord = clamp(min, crossAxisCoord, max);\n      }\n      const limitedCoords = limiter.fn({\n        ...state,\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      });\n      return {\n        ...limitedCoords,\n        data: {\n          x: limitedCoords.x - x,\n          y: limitedCoords.y - y,\n          enabled: {\n            [mainAxis]: checkMainAxis,\n            [crossAxis]: checkCrossAxis\n          }\n        }\n      };\n    }\n  };\n};\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    options,\n    fn(state) {\n      const {\n        x,\n        y,\n        placement,\n        rects,\n        middlewareData\n      } = state;\n      const {\n        offset = 0,\n        mainAxis: checkMainAxis = true,\n        crossAxis: checkCrossAxis = true\n      } = evaluate(options, state);\n      const coords = {\n        x,\n        y\n      };\n      const crossAxis = getSideAxis(placement);\n      const mainAxis = getOppositeAxis(crossAxis);\n      let mainAxisCoord = coords[mainAxis];\n      let crossAxisCoord = coords[crossAxis];\n      const rawOffset = evaluate(offset, state);\n      const computedOffset = typeof rawOffset === 'number' ? {\n        mainAxis: rawOffset,\n        crossAxis: 0\n      } : {\n        mainAxis: 0,\n        crossAxis: 0,\n        ...rawOffset\n      };\n      if (checkMainAxis) {\n        const len = mainAxis === 'y' ? 'height' : 'width';\n        const limitMin = rects.reference[mainAxis] - rects.floating[len] + computedOffset.mainAxis;\n        const limitMax = rects.reference[mainAxis] + rects.reference[len] - computedOffset.mainAxis;\n        if (mainAxisCoord < limitMin) {\n          mainAxisCoord = limitMin;\n        } else if (mainAxisCoord > limitMax) {\n          mainAxisCoord = limitMax;\n        }\n      }\n      if (checkCrossAxis) {\n        var _middlewareData$offse, _middlewareData$offse2;\n        const len = mainAxis === 'y' ? 'width' : 'height';\n        const isOriginSide = ['top', 'left'].includes(getSide(placement));\n        const limitMin = rects.reference[crossAxis] - rects.floating[len] + (isOriginSide ? ((_middlewareData$offse = middlewareData.offset) == null ? void 0 : _middlewareData$offse[crossAxis]) || 0 : 0) + (isOriginSide ? 0 : computedOffset.crossAxis);\n        const limitMax = rects.reference[crossAxis] + rects.reference[len] + (isOriginSide ? 0 : ((_middlewareData$offse2 = middlewareData.offset) == null ? void 0 : _middlewareData$offse2[crossAxis]) || 0) - (isOriginSide ? computedOffset.crossAxis : 0);\n        if (crossAxisCoord < limitMin) {\n          crossAxisCoord = limitMin;\n        } else if (crossAxisCoord > limitMax) {\n          crossAxisCoord = limitMax;\n        }\n      }\n      return {\n        [mainAxis]: mainAxisCoord,\n        [crossAxis]: crossAxisCoord\n      };\n    }\n  };\n};\n\n/**\n * Provides data that allows you to change the size of the floating element —\n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = function (options) {\n  if (options === void 0) {\n    options = {};\n  }\n  return {\n    name: 'size',\n    options,\n    async fn(state) {\n      var _state$middlewareData, _state$middlewareData2;\n      const {\n        placement,\n        rects,\n        platform,\n        elements\n      } = state;\n      const {\n        apply = () => {},\n        ...detectOverflowOptions\n      } = evaluate(options, state);\n      const overflow = await detectOverflow(state, detectOverflowOptions);\n      const side = getSide(placement);\n      const alignment = getAlignment(placement);\n      const isYAxis = getSideAxis(placement) === 'y';\n      const {\n        width,\n        height\n      } = rects.floating;\n      let heightSide;\n      let widthSide;\n      if (side === 'top' || side === 'bottom') {\n        heightSide = side;\n        widthSide = alignment === ((await (platform.isRTL == null ? void 0 : platform.isRTL(elements.floating))) ? 'start' : 'end') ? 'left' : 'right';\n      } else {\n        widthSide = side;\n        heightSide = alignment === 'end' ? 'top' : 'bottom';\n      }\n      const maximumClippingHeight = height - overflow.top - overflow.bottom;\n      const maximumClippingWidth = width - overflow.left - overflow.right;\n      const overflowAvailableHeight = min(height - overflow[heightSide], maximumClippingHeight);\n      const overflowAvailableWidth = min(width - overflow[widthSide], maximumClippingWidth);\n      const noShift = !state.middlewareData.shift;\n      let availableHeight = overflowAvailableHeight;\n      let availableWidth = overflowAvailableWidth;\n      if ((_state$middlewareData = state.middlewareData.shift) != null && _state$middlewareData.enabled.x) {\n        availableWidth = maximumClippingWidth;\n      }\n      if ((_state$middlewareData2 = state.middlewareData.shift) != null && _state$middlewareData2.enabled.y) {\n        availableHeight = maximumClippingHeight;\n      }\n      if (noShift && !alignment) {\n        const xMin = max(overflow.left, 0);\n        const xMax = max(overflow.right, 0);\n        const yMin = max(overflow.top, 0);\n        const yMax = max(overflow.bottom, 0);\n        if (isYAxis) {\n          availableWidth = width - 2 * (xMin !== 0 || xMax !== 0 ? xMin + xMax : max(overflow.left, overflow.right));\n        } else {\n          availableHeight = height - 2 * (yMin !== 0 || yMax !== 0 ? yMin + yMax : max(overflow.top, overflow.bottom));\n        }\n      }\n      await apply({\n        ...state,\n        availableWidth,\n        availableHeight\n      });\n      const nextDimensions = await platform.getDimensions(elements.floating);\n      if (width !== nextDimensions.width || height !== nextDimensions.height) {\n        return {\n          reset: {\n            rects: true\n          }\n        };\n      }\n      return {};\n    }\n  };\n};\n\nexport { arrow, autoPlacement, computePosition, detectOverflow, flip, hide, inline, limitShift, offset, shift, size };\n","function hasWindow() {\n  return typeof window !== 'undefined';\n}\nfunction getNodeName(node) {\n  if (isNode(node)) {\n    return (node.nodeName || '').toLowerCase();\n  }\n  // Mocked nodes in testing environments may not be instances of Node. By\n  // returning `#document` an infinite loop won't occur.\n  // https://github.com/floating-ui/floating-ui/issues/2317\n  return '#document';\n}\nfunction getWindow(node) {\n  var _node$ownerDocument;\n  return (node == null || (_node$ownerDocument = node.ownerDocument) == null ? void 0 : _node$ownerDocument.defaultView) || window;\n}\nfunction getDocumentElement(node) {\n  var _ref;\n  return (_ref = (isNode(node) ? node.ownerDocument : node.document) || window.document) == null ? void 0 : _ref.documentElement;\n}\nfunction isNode(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof Node || value instanceof getWindow(value).Node;\n}\nfunction isElement(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof Element || value instanceof getWindow(value).Element;\n}\nfunction isHTMLElement(value) {\n  if (!hasWindow()) {\n    return false;\n  }\n  return value instanceof HTMLElement || value instanceof getWindow(value).HTMLElement;\n}\nfunction isShadowRoot(value) {\n  if (!hasWindow() || typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n  return value instanceof ShadowRoot || value instanceof getWindow(value).ShadowRoot;\n}\nfunction isOverflowElement(element) {\n  const {\n    overflow,\n    overflowX,\n    overflowY,\n    display\n  } = getComputedStyle(element);\n  return /auto|scroll|overlay|hidden|clip/.test(overflow + overflowY + overflowX) && !['inline', 'contents'].includes(display);\n}\nfunction isTableElement(element) {\n  return ['table', 'td', 'th'].includes(getNodeName(element));\n}\nfunction isTopLayer(element) {\n  return [':popover-open', ':modal'].some(selector => {\n    try {\n      return element.matches(selector);\n    } catch (e) {\n      return false;\n    }\n  });\n}\nfunction isContainingBlock(elementOrCss) {\n  const webkit = isWebKit();\n  const css = isElement(elementOrCss) ? getComputedStyle(elementOrCss) : elementOrCss;\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n  return css.transform !== 'none' || css.perspective !== 'none' || (css.containerType ? css.containerType !== 'normal' : false) || !webkit && (css.backdropFilter ? css.backdropFilter !== 'none' : false) || !webkit && (css.filter ? css.filter !== 'none' : false) || ['transform', 'perspective', 'filter'].some(value => (css.willChange || '').includes(value)) || ['paint', 'layout', 'strict', 'content'].some(value => (css.contain || '').includes(value));\n}\nfunction getContainingBlock(element) {\n  let currentNode = getParentNode(element);\n  while (isHTMLElement(currentNode) && !isLastTraversableNode(currentNode)) {\n    if (isContainingBlock(currentNode)) {\n      return currentNode;\n    } else if (isTopLayer(currentNode)) {\n      return null;\n    }\n    currentNode = getParentNode(currentNode);\n  }\n  return null;\n}\nfunction isWebKit() {\n  if (typeof CSS === 'undefined' || !CSS.supports) return false;\n  return CSS.supports('-webkit-backdrop-filter', 'none');\n}\nfunction isLastTraversableNode(node) {\n  return ['html', 'body', '#document'].includes(getNodeName(node));\n}\nfunction getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}\nfunction getNodeScroll(element) {\n  if (isElement(element)) {\n    return {\n      scrollLeft: element.scrollLeft,\n      scrollTop: element.scrollTop\n    };\n  }\n  return {\n    scrollLeft: element.scrollX,\n    scrollTop: element.scrollY\n  };\n}\nfunction getParentNode(node) {\n  if (getNodeName(node) === 'html') {\n    return node;\n  }\n  const result =\n  // Step into the shadow DOM of the parent of a slotted node.\n  node.assignedSlot ||\n  // DOM Element detected.\n  node.parentNode ||\n  // ShadowRoot detected.\n  isShadowRoot(node) && node.host ||\n  // Fallback.\n  getDocumentElement(node);\n  return isShadowRoot(result) ? result.host : result;\n}\nfunction getNearestOverflowAncestor(node) {\n  const parentNode = getParentNode(node);\n  if (isLastTraversableNode(parentNode)) {\n    return node.ownerDocument ? node.ownerDocument.body : node.body;\n  }\n  if (isHTMLElement(parentNode) && isOverflowElement(parentNode)) {\n    return parentNode;\n  }\n  return getNearestOverflowAncestor(parentNode);\n}\nfunction getOverflowAncestors(node, list, traverseIframes) {\n  var _node$ownerDocument2;\n  if (list === void 0) {\n    list = [];\n  }\n  if (traverseIframes === void 0) {\n    traverseIframes = true;\n  }\n  const scrollableAncestor = getNearestOverflowAncestor(node);\n  const isBody = scrollableAncestor === ((_node$ownerDocument2 = node.ownerDocument) == null ? void 0 : _node$ownerDocument2.body);\n  const win = getWindow(scrollableAncestor);\n  if (isBody) {\n    const frameElement = getFrameElement(win);\n    return list.concat(win, win.visualViewport || [], isOverflowElement(scrollableAncestor) ? scrollableAncestor : [], frameElement && traverseIframes ? getOverflowAncestors(frameElement) : []);\n  }\n  return list.concat(scrollableAncestor, getOverflowAncestors(scrollableAncestor, [], traverseIframes));\n}\nfunction getFrameElement(win) {\n  return win.parent && Object.getPrototypeOf(win.parent) ? win.frameElement : null;\n}\n\nexport { getComputedStyle, getContainingBlock, getDocumentElement, getFrameElement, getNearestOverflowAncestor, getNodeName, getNodeScroll, getOverflowAncestors, getParentNode, getWindow, isContainingBlock, isElement, isHTMLElement, isLastTraversableNode, isNode, isOverflowElement, isShadowRoot, isTableElement, isTopLayer, isWebKit };\n","import { rectToClientRect, detectOverflow as detectOverflow$1, offset as offset$1, autoPlacement as autoPlacement$1, shift as shift$1, flip as flip$1, size as size$1, hide as hide$1, arrow as arrow$1, inline as inline$1, limitShift as limitShift$1, computePosition as computePosition$1 } from '@floating-ui/core';\nimport { round, createCoords, max, min, floor } from '@floating-ui/utils';\nimport { getComputedStyle, isHTMLElement, isElement, getWindow, isWebKit, getFrameElement, getNodeScroll, getDocumentElement, isTopLayer, getNodeName, isOverflowElement, getOverflowAncestors, getParentNode, isLastTraversableNode, isContainingBlock, isTableElement, getContainingBlock } from '@floating-ui/utils/dom';\nexport { getOverflowAncestors } from '@floating-ui/utils/dom';\n\nfunction getCssDimensions(element) {\n  const css = getComputedStyle(element);\n  // In testing environments, the `width` and `height` properties are empty\n  // strings for SVG elements, returning NaN. Fallback to `0` in this case.\n  let width = parseFloat(css.width) || 0;\n  let height = parseFloat(css.height) || 0;\n  const hasOffset = isHTMLElement(element);\n  const offsetWidth = hasOffset ? element.offsetWidth : width;\n  const offsetHeight = hasOffset ? element.offsetHeight : height;\n  const shouldFallback = round(width) !== offsetWidth || round(height) !== offsetHeight;\n  if (shouldFallback) {\n    width = offsetWidth;\n    height = offsetHeight;\n  }\n  return {\n    width,\n    height,\n    $: shouldFallback\n  };\n}\n\nfunction unwrapElement(element) {\n  return !isElement(element) ? element.contextElement : element;\n}\n\nfunction getScale(element) {\n  const domElement = unwrapElement(element);\n  if (!isHTMLElement(domElement)) {\n    return createCoords(1);\n  }\n  const rect = domElement.getBoundingClientRect();\n  const {\n    width,\n    height,\n    $\n  } = getCssDimensions(domElement);\n  let x = ($ ? round(rect.width) : rect.width) / width;\n  let y = ($ ? round(rect.height) : rect.height) / height;\n\n  // 0, NaN, or Infinity should always fallback to 1.\n\n  if (!x || !Number.isFinite(x)) {\n    x = 1;\n  }\n  if (!y || !Number.isFinite(y)) {\n    y = 1;\n  }\n  return {\n    x,\n    y\n  };\n}\n\nconst noOffsets = /*#__PURE__*/createCoords(0);\nfunction getVisualOffsets(element) {\n  const win = getWindow(element);\n  if (!isWebKit() || !win.visualViewport) {\n    return noOffsets;\n  }\n  return {\n    x: win.visualViewport.offsetLeft,\n    y: win.visualViewport.offsetTop\n  };\n}\nfunction shouldAddVisualOffsets(element, isFixed, floatingOffsetParent) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n  if (!floatingOffsetParent || isFixed && floatingOffsetParent !== getWindow(element)) {\n    return false;\n  }\n  return isFixed;\n}\n\nfunction getBoundingClientRect(element, includeScale, isFixedStrategy, offsetParent) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n  if (isFixedStrategy === void 0) {\n    isFixedStrategy = false;\n  }\n  const clientRect = element.getBoundingClientRect();\n  const domElement = unwrapElement(element);\n  let scale = createCoords(1);\n  if (includeScale) {\n    if (offsetParent) {\n      if (isElement(offsetParent)) {\n        scale = getScale(offsetParent);\n      }\n    } else {\n      scale = getScale(element);\n    }\n  }\n  const visualOffsets = shouldAddVisualOffsets(domElement, isFixedStrategy, offsetParent) ? getVisualOffsets(domElement) : createCoords(0);\n  let x = (clientRect.left + visualOffsets.x) / scale.x;\n  let y = (clientRect.top + visualOffsets.y) / scale.y;\n  let width = clientRect.width / scale.x;\n  let height = clientRect.height / scale.y;\n  if (domElement) {\n    const win = getWindow(domElement);\n    const offsetWin = offsetParent && isElement(offsetParent) ? getWindow(offsetParent) : offsetParent;\n    let currentWin = win;\n    let currentIFrame = getFrameElement(currentWin);\n    while (currentIFrame && offsetParent && offsetWin !== currentWin) {\n      const iframeScale = getScale(currentIFrame);\n      const iframeRect = currentIFrame.getBoundingClientRect();\n      const css = getComputedStyle(currentIFrame);\n      const left = iframeRect.left + (currentIFrame.clientLeft + parseFloat(css.paddingLeft)) * iframeScale.x;\n      const top = iframeRect.top + (currentIFrame.clientTop + parseFloat(css.paddingTop)) * iframeScale.y;\n      x *= iframeScale.x;\n      y *= iframeScale.y;\n      width *= iframeScale.x;\n      height *= iframeScale.y;\n      x += left;\n      y += top;\n      currentWin = getWindow(currentIFrame);\n      currentIFrame = getFrameElement(currentWin);\n    }\n  }\n  return rectToClientRect({\n    width,\n    height,\n    x,\n    y\n  });\n}\n\n// If <html> has a CSS width greater than the viewport, then this will be\n// incorrect for RTL.\nfunction getWindowScrollBarX(element, rect) {\n  const leftScroll = getNodeScroll(element).scrollLeft;\n  if (!rect) {\n    return getBoundingClientRect(getDocumentElement(element)).left + leftScroll;\n  }\n  return rect.left + leftScroll;\n}\n\nfunction getHTMLOffset(documentElement, scroll, ignoreScrollbarX) {\n  if (ignoreScrollbarX === void 0) {\n    ignoreScrollbarX = false;\n  }\n  const htmlRect = documentElement.getBoundingClientRect();\n  const x = htmlRect.left + scroll.scrollLeft - (ignoreScrollbarX ? 0 :\n  // RTL <body> scrollbar.\n  getWindowScrollBarX(documentElement, htmlRect));\n  const y = htmlRect.top + scroll.scrollTop;\n  return {\n    x,\n    y\n  };\n}\n\nfunction convertOffsetParentRelativeRectToViewportRelativeRect(_ref) {\n  let {\n    elements,\n    rect,\n    offsetParent,\n    strategy\n  } = _ref;\n  const isFixed = strategy === 'fixed';\n  const documentElement = getDocumentElement(offsetParent);\n  const topLayer = elements ? isTopLayer(elements.floating) : false;\n  if (offsetParent === documentElement || topLayer && isFixed) {\n    return rect;\n  }\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  let scale = createCoords(1);\n  const offsets = createCoords(0);\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isHTMLElement(offsetParent)) {\n      const offsetRect = getBoundingClientRect(offsetParent);\n      scale = getScale(offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    }\n  }\n  const htmlOffset = documentElement && !isOffsetParentAnElement && !isFixed ? getHTMLOffset(documentElement, scroll, true) : createCoords(0);\n  return {\n    width: rect.width * scale.x,\n    height: rect.height * scale.y,\n    x: rect.x * scale.x - scroll.scrollLeft * scale.x + offsets.x + htmlOffset.x,\n    y: rect.y * scale.y - scroll.scrollTop * scale.y + offsets.y + htmlOffset.y\n  };\n}\n\nfunction getClientRects(element) {\n  return Array.from(element.getClientRects());\n}\n\n// Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable.\nfunction getDocumentRect(element) {\n  const html = getDocumentElement(element);\n  const scroll = getNodeScroll(element);\n  const body = element.ownerDocument.body;\n  const width = max(html.scrollWidth, html.clientWidth, body.scrollWidth, body.clientWidth);\n  const height = max(html.scrollHeight, html.clientHeight, body.scrollHeight, body.clientHeight);\n  let x = -scroll.scrollLeft + getWindowScrollBarX(element);\n  const y = -scroll.scrollTop;\n  if (getComputedStyle(body).direction === 'rtl') {\n    x += max(html.clientWidth, body.clientWidth) - width;\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\nfunction getViewportRect(element, strategy) {\n  const win = getWindow(element);\n  const html = getDocumentElement(element);\n  const visualViewport = win.visualViewport;\n  let width = html.clientWidth;\n  let height = html.clientHeight;\n  let x = 0;\n  let y = 0;\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    const visualViewportBased = isWebKit();\n    if (!visualViewportBased || visualViewportBased && strategy === 'fixed') {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\n\n// Returns the inner client rect, subtracting scrollbars if present.\nfunction getInnerBoundingClientRect(element, strategy) {\n  const clientRect = getBoundingClientRect(element, true, strategy === 'fixed');\n  const top = clientRect.top + element.clientTop;\n  const left = clientRect.left + element.clientLeft;\n  const scale = isHTMLElement(element) ? getScale(element) : createCoords(1);\n  const width = element.clientWidth * scale.x;\n  const height = element.clientHeight * scale.y;\n  const x = left * scale.x;\n  const y = top * scale.y;\n  return {\n    width,\n    height,\n    x,\n    y\n  };\n}\nfunction getClientRectFromClippingAncestor(element, clippingAncestor, strategy) {\n  let rect;\n  if (clippingAncestor === 'viewport') {\n    rect = getViewportRect(element, strategy);\n  } else if (clippingAncestor === 'document') {\n    rect = getDocumentRect(getDocumentElement(element));\n  } else if (isElement(clippingAncestor)) {\n    rect = getInnerBoundingClientRect(clippingAncestor, strategy);\n  } else {\n    const visualOffsets = getVisualOffsets(element);\n    rect = {\n      x: clippingAncestor.x - visualOffsets.x,\n      y: clippingAncestor.y - visualOffsets.y,\n      width: clippingAncestor.width,\n      height: clippingAncestor.height\n    };\n  }\n  return rectToClientRect(rect);\n}\nfunction hasFixedPositionAncestor(element, stopNode) {\n  const parentNode = getParentNode(element);\n  if (parentNode === stopNode || !isElement(parentNode) || isLastTraversableNode(parentNode)) {\n    return false;\n  }\n  return getComputedStyle(parentNode).position === 'fixed' || hasFixedPositionAncestor(parentNode, stopNode);\n}\n\n// A \"clipping ancestor\" is an `overflow` element with the characteristic of\n// clipping (or hiding) child elements. This returns all clipping ancestors\n// of the given element up the tree.\nfunction getClippingElementAncestors(element, cache) {\n  const cachedResult = cache.get(element);\n  if (cachedResult) {\n    return cachedResult;\n  }\n  let result = getOverflowAncestors(element, [], false).filter(el => isElement(el) && getNodeName(el) !== 'body');\n  let currentContainingBlockComputedStyle = null;\n  const elementIsFixed = getComputedStyle(element).position === 'fixed';\n  let currentNode = elementIsFixed ? getParentNode(element) : element;\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n  while (isElement(currentNode) && !isLastTraversableNode(currentNode)) {\n    const computedStyle = getComputedStyle(currentNode);\n    const currentNodeIsContaining = isContainingBlock(currentNode);\n    if (!currentNodeIsContaining && computedStyle.position === 'fixed') {\n      currentContainingBlockComputedStyle = null;\n    }\n    const shouldDropCurrentNode = elementIsFixed ? !currentNodeIsContaining && !currentContainingBlockComputedStyle : !currentNodeIsContaining && computedStyle.position === 'static' && !!currentContainingBlockComputedStyle && ['absolute', 'fixed'].includes(currentContainingBlockComputedStyle.position) || isOverflowElement(currentNode) && !currentNodeIsContaining && hasFixedPositionAncestor(element, currentNode);\n    if (shouldDropCurrentNode) {\n      // Drop non-containing blocks.\n      result = result.filter(ancestor => ancestor !== currentNode);\n    } else {\n      // Record last containing block for next iteration.\n      currentContainingBlockComputedStyle = computedStyle;\n    }\n    currentNode = getParentNode(currentNode);\n  }\n  cache.set(element, result);\n  return result;\n}\n\n// Gets the maximum area that the element is visible in due to any number of\n// clipping ancestors.\nfunction getClippingRect(_ref) {\n  let {\n    element,\n    boundary,\n    rootBoundary,\n    strategy\n  } = _ref;\n  const elementClippingAncestors = boundary === 'clippingAncestors' ? isTopLayer(element) ? [] : getClippingElementAncestors(element, this._c) : [].concat(boundary);\n  const clippingAncestors = [...elementClippingAncestors, rootBoundary];\n  const firstClippingAncestor = clippingAncestors[0];\n  const clippingRect = clippingAncestors.reduce((accRect, clippingAncestor) => {\n    const rect = getClientRectFromClippingAncestor(element, clippingAncestor, strategy);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromClippingAncestor(element, firstClippingAncestor, strategy));\n  return {\n    width: clippingRect.right - clippingRect.left,\n    height: clippingRect.bottom - clippingRect.top,\n    x: clippingRect.left,\n    y: clippingRect.top\n  };\n}\n\nfunction getDimensions(element) {\n  const {\n    width,\n    height\n  } = getCssDimensions(element);\n  return {\n    width,\n    height\n  };\n}\n\nfunction getRectRelativeToOffsetParent(element, offsetParent, strategy) {\n  const isOffsetParentAnElement = isHTMLElement(offsetParent);\n  const documentElement = getDocumentElement(offsetParent);\n  const isFixed = strategy === 'fixed';\n  const rect = getBoundingClientRect(element, true, isFixed, offsetParent);\n  let scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  const offsets = createCoords(0);\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || isOverflowElement(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n    if (isOffsetParentAnElement) {\n      const offsetRect = getBoundingClientRect(offsetParent, true, isFixed, offsetParent);\n      offsets.x = offsetRect.x + offsetParent.clientLeft;\n      offsets.y = offsetRect.y + offsetParent.clientTop;\n    } else if (documentElement) {\n      // If the <body> scrollbar appears on the left (e.g. RTL systems). Use\n      // Firefox with layout.scrollbar.side = 3 in about:config to test this.\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n  const htmlOffset = documentElement && !isOffsetParentAnElement && !isFixed ? getHTMLOffset(documentElement, scroll) : createCoords(0);\n  const x = rect.left + scroll.scrollLeft - offsets.x - htmlOffset.x;\n  const y = rect.top + scroll.scrollTop - offsets.y - htmlOffset.y;\n  return {\n    x,\n    y,\n    width: rect.width,\n    height: rect.height\n  };\n}\n\nfunction isStaticPositioned(element) {\n  return getComputedStyle(element).position === 'static';\n}\n\nfunction getTrueOffsetParent(element, polyfill) {\n  if (!isHTMLElement(element) || getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n  if (polyfill) {\n    return polyfill(element);\n  }\n  let rawOffsetParent = element.offsetParent;\n\n  // Firefox returns the <html> element as the offsetParent if it's non-static,\n  // while Chrome and Safari return the <body> element. The <body> element must\n  // be used to perform the correct calculations even if the <html> element is\n  // non-static.\n  if (getDocumentElement(element) === rawOffsetParent) {\n    rawOffsetParent = rawOffsetParent.ownerDocument.body;\n  }\n  return rawOffsetParent;\n}\n\n// Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\nfunction getOffsetParent(element, polyfill) {\n  const win = getWindow(element);\n  if (isTopLayer(element)) {\n    return win;\n  }\n  if (!isHTMLElement(element)) {\n    let svgOffsetParent = getParentNode(element);\n    while (svgOffsetParent && !isLastTraversableNode(svgOffsetParent)) {\n      if (isElement(svgOffsetParent) && !isStaticPositioned(svgOffsetParent)) {\n        return svgOffsetParent;\n      }\n      svgOffsetParent = getParentNode(svgOffsetParent);\n    }\n    return win;\n  }\n  let offsetParent = getTrueOffsetParent(element, polyfill);\n  while (offsetParent && isTableElement(offsetParent) && isStaticPositioned(offsetParent)) {\n    offsetParent = getTrueOffsetParent(offsetParent, polyfill);\n  }\n  if (offsetParent && isLastTraversableNode(offsetParent) && isStaticPositioned(offsetParent) && !isContainingBlock(offsetParent)) {\n    return win;\n  }\n  return offsetParent || getContainingBlock(element) || win;\n}\n\nconst getElementRects = async function (data) {\n  const getOffsetParentFn = this.getOffsetParent || getOffsetParent;\n  const getDimensionsFn = this.getDimensions;\n  const floatingDimensions = await getDimensionsFn(data.floating);\n  return {\n    reference: getRectRelativeToOffsetParent(data.reference, await getOffsetParentFn(data.floating), data.strategy),\n    floating: {\n      x: 0,\n      y: 0,\n      width: floatingDimensions.width,\n      height: floatingDimensions.height\n    }\n  };\n};\n\nfunction isRTL(element) {\n  return getComputedStyle(element).direction === 'rtl';\n}\n\nconst platform = {\n  convertOffsetParentRelativeRectToViewportRelativeRect,\n  getDocumentElement,\n  getClippingRect,\n  getOffsetParent,\n  getElementRects,\n  getClientRects,\n  getDimensions,\n  getScale,\n  isElement,\n  isRTL\n};\n\n// https://samthor.au/2021/observing-dom/\nfunction observeMove(element, onMove) {\n  let io = null;\n  let timeoutId;\n  const root = getDocumentElement(element);\n  function cleanup() {\n    var _io;\n    clearTimeout(timeoutId);\n    (_io = io) == null || _io.disconnect();\n    io = null;\n  }\n  function refresh(skip, threshold) {\n    if (skip === void 0) {\n      skip = false;\n    }\n    if (threshold === void 0) {\n      threshold = 1;\n    }\n    cleanup();\n    const {\n      left,\n      top,\n      width,\n      height\n    } = element.getBoundingClientRect();\n    if (!skip) {\n      onMove();\n    }\n    if (!width || !height) {\n      return;\n    }\n    const insetTop = floor(top);\n    const insetRight = floor(root.clientWidth - (left + width));\n    const insetBottom = floor(root.clientHeight - (top + height));\n    const insetLeft = floor(left);\n    const rootMargin = -insetTop + \"px \" + -insetRight + \"px \" + -insetBottom + \"px \" + -insetLeft + \"px\";\n    const options = {\n      rootMargin,\n      threshold: max(0, min(1, threshold)) || 1\n    };\n    let isFirstUpdate = true;\n    function handleObserve(entries) {\n      const ratio = entries[0].intersectionRatio;\n      if (ratio !== threshold) {\n        if (!isFirstUpdate) {\n          return refresh();\n        }\n        if (!ratio) {\n          // If the reference is clipped, the ratio is 0. Throttle the refresh\n          // to prevent an infinite loop of updates.\n          timeoutId = setTimeout(() => {\n            refresh(false, 1e-7);\n          }, 1000);\n        } else {\n          refresh(false, ratio);\n        }\n      }\n      isFirstUpdate = false;\n    }\n\n    // Older browsers don't support a `document` as the root and will throw an\n    // error.\n    try {\n      io = new IntersectionObserver(handleObserve, {\n        ...options,\n        // Handle <iframe>s\n        root: root.ownerDocument\n      });\n    } catch (e) {\n      io = new IntersectionObserver(handleObserve, options);\n    }\n    io.observe(element);\n  }\n  refresh(true);\n  return cleanup;\n}\n\n/**\n * Automatically updates the position of the floating element when necessary.\n * Should only be called when the floating element is mounted on the DOM or\n * visible on the screen.\n * @returns cleanup function that should be invoked when the floating element is\n * removed from the DOM or hidden from the screen.\n * @see https://floating-ui.com/docs/autoUpdate\n */\nfunction autoUpdate(reference, floating, update, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  const {\n    ancestorScroll = true,\n    ancestorResize = true,\n    elementResize = typeof ResizeObserver === 'function',\n    layoutShift = typeof IntersectionObserver === 'function',\n    animationFrame = false\n  } = options;\n  const referenceEl = unwrapElement(reference);\n  const ancestors = ancestorScroll || ancestorResize ? [...(referenceEl ? getOverflowAncestors(referenceEl) : []), ...getOverflowAncestors(floating)] : [];\n  ancestors.forEach(ancestor => {\n    ancestorScroll && ancestor.addEventListener('scroll', update, {\n      passive: true\n    });\n    ancestorResize && ancestor.addEventListener('resize', update);\n  });\n  const cleanupIo = referenceEl && layoutShift ? observeMove(referenceEl, update) : null;\n  let reobserveFrame = -1;\n  let resizeObserver = null;\n  if (elementResize) {\n    resizeObserver = new ResizeObserver(_ref => {\n      let [firstEntry] = _ref;\n      if (firstEntry && firstEntry.target === referenceEl && resizeObserver) {\n        // Prevent update loops when using the `size` middleware.\n        // https://github.com/floating-ui/floating-ui/issues/1740\n        resizeObserver.unobserve(floating);\n        cancelAnimationFrame(reobserveFrame);\n        reobserveFrame = requestAnimationFrame(() => {\n          var _resizeObserver;\n          (_resizeObserver = resizeObserver) == null || _resizeObserver.observe(floating);\n        });\n      }\n      update();\n    });\n    if (referenceEl && !animationFrame) {\n      resizeObserver.observe(referenceEl);\n    }\n    resizeObserver.observe(floating);\n  }\n  let frameId;\n  let prevRefRect = animationFrame ? getBoundingClientRect(reference) : null;\n  if (animationFrame) {\n    frameLoop();\n  }\n  function frameLoop() {\n    const nextRefRect = getBoundingClientRect(reference);\n    if (prevRefRect && (nextRefRect.x !== prevRefRect.x || nextRefRect.y !== prevRefRect.y || nextRefRect.width !== prevRefRect.width || nextRefRect.height !== prevRefRect.height)) {\n      update();\n    }\n    prevRefRect = nextRefRect;\n    frameId = requestAnimationFrame(frameLoop);\n  }\n  update();\n  return () => {\n    var _resizeObserver2;\n    ancestors.forEach(ancestor => {\n      ancestorScroll && ancestor.removeEventListener('scroll', update);\n      ancestorResize && ancestor.removeEventListener('resize', update);\n    });\n    cleanupIo == null || cleanupIo();\n    (_resizeObserver2 = resizeObserver) == null || _resizeObserver2.disconnect();\n    resizeObserver = null;\n    if (animationFrame) {\n      cancelAnimationFrame(frameId);\n    }\n  };\n}\n\n/**\n * Resolves with an object of overflow side offsets that determine how much the\n * element is overflowing a given clipping boundary on each side.\n * - positive = overflowing the boundary by that number of pixels\n * - negative = how many pixels left before it will overflow\n * - 0 = lies flush with the boundary\n * @see https://floating-ui.com/docs/detectOverflow\n */\nconst detectOverflow = detectOverflow$1;\n\n/**\n * Modifies the placement by translating the floating element along the\n * specified axes.\n * A number (shorthand for `mainAxis` or distance), or an axes configuration\n * object may be passed.\n * @see https://floating-ui.com/docs/offset\n */\nconst offset = offset$1;\n\n/**\n * Optimizes the visibility of the floating element by choosing the placement\n * that has the most space available automatically, without needing to specify a\n * preferred placement. Alternative to `flip`.\n * @see https://floating-ui.com/docs/autoPlacement\n */\nconst autoPlacement = autoPlacement$1;\n\n/**\n * Optimizes the visibility of the floating element by shifting it in order to\n * keep it in view when it will overflow the clipping boundary.\n * @see https://floating-ui.com/docs/shift\n */\nconst shift = shift$1;\n\n/**\n * Optimizes the visibility of the floating element by flipping the `placement`\n * in order to keep it in view when the preferred placement(s) will overflow the\n * clipping boundary. Alternative to `autoPlacement`.\n * @see https://floating-ui.com/docs/flip\n */\nconst flip = flip$1;\n\n/**\n * Provides data that allows you to change the size of the floating element —\n * for instance, prevent it from overflowing the clipping boundary or match the\n * width of the reference element.\n * @see https://floating-ui.com/docs/size\n */\nconst size = size$1;\n\n/**\n * Provides data to hide the floating element in applicable situations, such as\n * when it is not in the same clipping context as the reference element.\n * @see https://floating-ui.com/docs/hide\n */\nconst hide = hide$1;\n\n/**\n * Provides data to position an inner element of the floating element so that it\n * appears centered to the reference element.\n * @see https://floating-ui.com/docs/arrow\n */\nconst arrow = arrow$1;\n\n/**\n * Provides improved positioning for inline reference elements that can span\n * over multiple lines, such as hyperlinks or range selections.\n * @see https://floating-ui.com/docs/inline\n */\nconst inline = inline$1;\n\n/**\n * Built-in `limiter` that will stop `shift()` at a certain point.\n */\nconst limitShift = limitShift$1;\n\n/**\n * Computes the `x` and `y` coordinates that will place the floating element\n * next to a given reference element.\n */\nconst computePosition = (reference, floating, options) => {\n  // This caches the expensive `getClippingElementAncestors` function so that\n  // multiple lifecycle resets re-use the same result. It only lives for a\n  // single call. If other functions become expensive, we can add them as well.\n  const cache = new Map();\n  const mergedOptions = {\n    platform,\n    ...options\n  };\n  const platformWithCache = {\n    ...mergedOptions.platform,\n    _c: cache\n  };\n  return computePosition$1(reference, floating, {\n    ...mergedOptions,\n    platform: platformWithCache\n  });\n};\n\nexport { arrow, autoPlacement, autoUpdate, computePosition, detectOverflow, flip, hide, inline, limitShift, offset, platform, shift, size };\n","// CSS Syntax Module Level 3\n// https://www.w3.org/TR/css-syntax-3/\nexport const EOF = 0;                 // <EOF-token>\nexport const Ident = 1;               // <ident-token>\nexport const Function = 2;            // <function-token>\nexport const AtKeyword = 3;           // <at-keyword-token>\nexport const Hash = 4;                // <hash-token>\nexport const String = 5;              // <string-token>\nexport const BadString = 6;           // <bad-string-token>\nexport const Url = 7;                 // <url-token>\nexport const BadUrl = 8;              // <bad-url-token>\nexport const Delim = 9;               // <delim-token>\nexport const Number = 10;             // <number-token>\nexport const Percentage = 11;         // <percentage-token>\nexport const Dimension = 12;          // <dimension-token>\nexport const WhiteSpace = 13;         // <whitespace-token>\nexport const CDO = 14;                // <CDO-token>\nexport const CDC = 15;                // <CDC-token>\nexport const Colon = 16;              // <colon-token>     :\nexport const Semicolon = 17;          // <semicolon-token> ;\nexport const Comma = 18;              // <comma-token>     ,\nexport const LeftSquareBracket = 19;  // <[-token>\nexport const RightSquareBracket = 20; // <]-token>\nexport const LeftParenthesis = 21;    // <(-token>\nexport const RightParenthesis = 22;   // <)-token>\nexport const LeftCurlyBracket = 23;   // <{-token>\nexport const RightCurlyBracket = 24;  // <}-token>\nexport const Comment = 25;\n","const EOF = 0;\n\n// https://drafts.csswg.org/css-syntax-3/\n// § 4.2. Definitions\n\n// digit\n// A code point between U+0030 DIGIT ZERO (0) and U+0039 DIGIT NINE (9).\nexport function isDigit(code) {\n    return code >= 0x0030 && code <= 0x0039;\n}\n\n// hex digit\n// A digit, or a code point between U+0041 LATIN CAPITAL LETTER A (A) and U+0046 LATIN CAPITAL LETTER F (F),\n// or a code point between U+0061 LATIN SMALL LETTER A (a) and U+0066 LATIN SMALL LETTER F (f).\nexport function isHexDigit(code) {\n    return (\n        isDigit(code) || // 0 .. 9\n        (code >= 0x0041 && code <= 0x0046) || // A .. F\n        (code >= 0x0061 && code <= 0x0066)    // a .. f\n    );\n}\n\n// uppercase letter\n// A code point between U+0041 LATIN CAPITAL LETTER A (A) and U+005A LATIN CAPITAL LETTER Z (Z).\nexport function isUppercaseLetter(code) {\n    return code >= 0x0041 && code <= 0x005A;\n}\n\n// lowercase letter\n// A code point between U+0061 LATIN SMALL LETTER A (a) and U+007A LATIN SMALL LETTER Z (z).\nexport function isLowercaseLetter(code) {\n    return code >= 0x0061 && code <= 0x007A;\n}\n\n// letter\n// An uppercase letter or a lowercase letter.\nexport function isLetter(code) {\n    return isUppercaseLetter(code) || isLowercaseLetter(code);\n}\n\n// non-ASCII code point\n// A code point with a value equal to or greater than U+0080 <control>.\n//\n// 2024-09-02: The latest spec narrows the range for non-ASCII characters (see https://github.com/csstree/csstree/issues/188).\n// However, all modern browsers support a wider range, and strictly following the latest spec could result\n// in some CSS being parsed incorrectly, even though it works in the browser. Therefore, this function adheres\n// to the previous, broader definition of non-ASCII characters.\nexport function isNonAscii(code) {\n    return code >= 0x0080;\n}\n\n// name-start code point\n// A letter, a non-ASCII code point, or U+005F LOW LINE (_).\nexport function isNameStart(code) {\n    return isLetter(code) || isNonAscii(code) || code === 0x005F;\n}\n\n// name code point\n// A name-start code point, a digit, or U+002D HYPHEN-MINUS (-).\nexport function isName(code) {\n    return isNameStart(code) || isDigit(code) || code === 0x002D;\n}\n\n// non-printable code point\n// A code point between U+0000 NULL and U+0008 BACKSPACE, or U+000B LINE TABULATION,\n// or a code point between U+000E SHIFT OUT and U+001F INFORMATION SEPARATOR ONE, or U+007F DELETE.\nexport function isNonPrintable(code) {\n    return (\n        (code >= 0x0000 && code <= 0x0008) ||\n        (code === 0x000B) ||\n        (code >= 0x000E && code <= 0x001F) ||\n        (code === 0x007F)\n    );\n}\n\n// newline\n// U+000A LINE FEED. Note that U+000D CARRIAGE RETURN and U+000C FORM FEED are not included in this definition,\n// as they are converted to U+000A LINE FEED during preprocessing.\n// TODO: we doesn't do a preprocessing, so check a code point for U+000D CARRIAGE RETURN and U+000C FORM FEED\nexport function isNewline(code) {\n    return code === 0x000A || code === 0x000D || code === 0x000C;\n}\n\n// whitespace\n// A newline, U+0009 CHARACTER TABULATION, or U+0020 SPACE.\nexport function isWhiteSpace(code) {\n    return isNewline(code) || code === 0x0020 || code === 0x0009;\n}\n\n// § 4.3.8. Check if two code points are a valid escape\nexport function isValidEscape(first, second) {\n    // If the first code point is not U+005C REVERSE SOLIDUS (\\), return false.\n    if (first !== 0x005C) {\n        return false;\n    }\n\n    // Otherwise, if the second code point is a newline or EOF, return false.\n    if (isNewline(second) || second === EOF) {\n        return false;\n    }\n\n    // Otherwise, return true.\n    return true;\n}\n\n// § 4.3.9. Check if three code points would start an identifier\nexport function isIdentifierStart(first, second, third) {\n    // Look at the first code point:\n\n    // U+002D HYPHEN-MINUS\n    if (first === 0x002D) {\n        // If the second code point is a name-start code point or a U+002D HYPHEN-MINUS,\n        // or the second and third code points are a valid escape, return true. Otherwise, return false.\n        return (\n            isNameStart(second) ||\n            second === 0x002D ||\n            isValidEscape(second, third)\n        );\n    }\n\n    // name-start code point\n    if (isNameStart(first)) {\n        // Return true.\n        return true;\n    }\n\n    // U+005C REVERSE SOLIDUS (\\)\n    if (first === 0x005C) {\n        // If the first and second code points are a valid escape, return true. Otherwise, return false.\n        return isValidEscape(first, second);\n    }\n\n    // anything else\n    // Return false.\n    return false;\n}\n\n// § 4.3.10. Check if three code points would start a number\nexport function isNumberStart(first, second, third) {\n    // Look at the first code point:\n\n    // U+002B PLUS SIGN (+)\n    // U+002D HYPHEN-MINUS (-)\n    if (first === 0x002B || first === 0x002D) {\n        // If the second code point is a digit, return true.\n        if (isDigit(second)) {\n            return 2;\n        }\n\n        // Otherwise, if the second code point is a U+002E FULL STOP (.)\n        // and the third code point is a digit, return true.\n        // Otherwise, return false.\n        return second === 0x002E && isDigit(third) ? 3 : 0;\n    }\n\n    // U+002E FULL STOP (.)\n    if (first === 0x002E) {\n        // If the second code point is a digit, return true. Otherwise, return false.\n        return isDigit(second) ? 2 : 0;\n    }\n\n    // digit\n    if (isDigit(first)) {\n        // Return true.\n        return 1;\n    }\n\n    // anything else\n    // Return false.\n    return 0;\n}\n\n//\n// Misc\n//\n\n// detect BOM (https://en.wikipedia.org/wiki/Byte_order_mark)\nexport function isBOM(code) {\n    // UTF-16BE\n    if (code === 0xFEFF) {\n        return 1;\n    }\n\n    // UTF-16LE\n    if (code === 0xFFFE) {\n        return 1;\n    }\n\n    return 0;\n}\n\n// Fast code category\n// Only ASCII code points has a special meaning, that's why we define a maps for 0..127 codes only\nconst CATEGORY = new Array(0x80);\nexport const EofCategory = 0x80;\nexport const WhiteSpaceCategory = 0x82;\nexport const DigitCategory = 0x83;\nexport const NameStartCategory = 0x84;\nexport const NonPrintableCategory = 0x85;\n\nfor (let i = 0; i < CATEGORY.length; i++) {\n    CATEGORY[i] =\n        isWhiteSpace(i) && WhiteSpaceCategory ||\n        isDigit(i) && DigitCategory ||\n        isNameStart(i) && NameStartCategory ||\n        isNonPrintable(i) && NonPrintableCategory ||\n        i || EofCategory;\n}\n\nexport function charCodeCategory(code) {\n    return code < 0x80 ? CATEGORY[code] : NameStartCategory;\n}\n","import {\n    isDigit,\n    isHexDigit,\n    isUppercaseLetter,\n    isName,\n    isWhiteSpace,\n    isValidEscape\n} from './char-code-definitions.js';\n\nfunction getCharCode(source, offset) {\n    return offset < source.length ? source.charCodeAt(offset) : 0;\n}\n\nexport function getNewlineLength(source, offset, code) {\n    if (code === 13 /* \\r */ && getCharCode(source, offset + 1) === 10 /* \\n */) {\n        return 2;\n    }\n\n    return 1;\n}\n\nexport function cmpChar(testStr, offset, referenceCode) {\n    let code = testStr.charCodeAt(offset);\n\n    // code.toLowerCase() for A..Z\n    if (isUppercaseLetter(code)) {\n        code = code | 32;\n    }\n\n    return code === referenceCode;\n}\n\nexport function cmpStr(testStr, start, end, referenceStr) {\n    if (end - start !== referenceStr.length) {\n        return false;\n    }\n\n    if (start < 0 || end > testStr.length) {\n        return false;\n    }\n\n    for (let i = start; i < end; i++) {\n        const referenceCode = referenceStr.charCodeAt(i - start);\n        let testCode = testStr.charCodeAt(i);\n\n        // testCode.toLowerCase() for A..Z\n        if (isUppercaseLetter(testCode)) {\n            testCode = testCode | 32;\n        }\n\n        if (testCode !== referenceCode) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\nexport function findWhiteSpaceStart(source, offset) {\n    for (; offset >= 0; offset--) {\n        if (!isWhiteSpace(source.charCodeAt(offset))) {\n            break;\n        }\n    }\n\n    return offset + 1;\n}\n\nexport function findWhiteSpaceEnd(source, offset) {\n    for (; offset < source.length; offset++) {\n        if (!isWhiteSpace(source.charCodeAt(offset))) {\n            break;\n        }\n    }\n\n    return offset;\n}\n\nexport function findDecimalNumberEnd(source, offset) {\n    for (; offset < source.length; offset++) {\n        if (!isDigit(source.charCodeAt(offset))) {\n            break;\n        }\n    }\n\n    return offset;\n}\n\n// § 4.3.7. Consume an escaped code point\nexport function consumeEscaped(source, offset) {\n    // It assumes that the U+005C REVERSE SOLIDUS (\\) has already been consumed and\n    // that the next input code point has already been verified to be part of a valid escape.\n    offset += 2;\n\n    // hex digit\n    if (isHexDigit(getCharCode(source, offset - 1))) {\n        // Consume as many hex digits as possible, but no more than 5.\n        // Note that this means 1-6 hex digits have been consumed in total.\n        for (const maxOffset = Math.min(source.length, offset + 5); offset < maxOffset; offset++) {\n            if (!isHexDigit(getCharCode(source, offset))) {\n                break;\n            }\n        }\n\n        // If the next input code point is whitespace, consume it as well.\n        const code = getCharCode(source, offset);\n        if (isWhiteSpace(code)) {\n            offset += getNewlineLength(source, offset, code);\n        }\n    }\n\n    return offset;\n}\n\n// §4.3.11. Consume a name\n// Note: This algorithm does not do the verification of the first few code points that are necessary\n// to ensure the returned code points would constitute an <ident-token>. If that is the intended use,\n// ensure that the stream starts with an identifier before calling this algorithm.\nexport function consumeName(source, offset) {\n    // Let result initially be an empty string.\n    // Repeatedly consume the next input code point from the stream:\n    for (; offset < source.length; offset++) {\n        const code = source.charCodeAt(offset);\n\n        // name code point\n        if (isName(code)) {\n            // Append the code point to result.\n            continue;\n        }\n\n        // the stream starts with a valid escape\n        if (isValidEscape(code, getCharCode(source, offset + 1))) {\n            // Consume an escaped code point. Append the returned code point to result.\n            offset = consumeEscaped(source, offset) - 1;\n            continue;\n        }\n\n        // anything else\n        // Reconsume the current input code point. Return result.\n        break;\n    }\n\n    return offset;\n}\n\n// §4.3.12. Consume a number\nexport function consumeNumber(source, offset) {\n    let code = source.charCodeAt(offset);\n\n    // 2. If the next input code point is U+002B PLUS SIGN (+) or U+002D HYPHEN-MINUS (-),\n    // consume it and append it to repr.\n    if (code === 0x002B || code === 0x002D) {\n        code = source.charCodeAt(offset += 1);\n    }\n\n    // 3. While the next input code point is a digit, consume it and append it to repr.\n    if (isDigit(code)) {\n        offset = findDecimalNumberEnd(source, offset + 1);\n        code = source.charCodeAt(offset);\n    }\n\n    // 4. If the next 2 input code points are U+002E FULL STOP (.) followed by a digit, then:\n    if (code === 0x002E && isDigit(source.charCodeAt(offset + 1))) {\n        // 4.1 Consume them.\n        // 4.2 Append them to repr.\n        offset += 2;\n\n        // 4.3 Set type to \"number\".\n        // TODO\n\n        // 4.4 While the next input code point is a digit, consume it and append it to repr.\n\n        offset = findDecimalNumberEnd(source, offset);\n    }\n\n    // 5. If the next 2 or 3 input code points are U+0045 LATIN CAPITAL LETTER E (E)\n    // or U+0065 LATIN SMALL LETTER E (e), ... , followed by a digit, then:\n    if (cmpChar(source, offset, 101 /* e */)) {\n        let sign = 0;\n        code = source.charCodeAt(offset + 1);\n\n        // ... optionally followed by U+002D HYPHEN-MINUS (-) or U+002B PLUS SIGN (+) ...\n        if (code === 0x002D || code === 0x002B) {\n            sign = 1;\n            code = source.charCodeAt(offset + 2);\n        }\n\n        // ... followed by a digit\n        if (isDigit(code)) {\n            // 5.1 Consume them.\n            // 5.2 Append them to repr.\n\n            // 5.3 Set type to \"number\".\n            // TODO\n\n            // 5.4 While the next input code point is a digit, consume it and append it to repr.\n            offset = findDecimalNumberEnd(source, offset + 1 + sign + 1);\n        }\n    }\n\n    return offset;\n}\n\n// § 4.3.14. Consume the remnants of a bad url\n// ... its sole use is to consume enough of the input stream to reach a recovery point\n// where normal tokenizing can resume.\nexport function consumeBadUrlRemnants(source, offset) {\n    // Repeatedly consume the next input code point from the stream:\n    for (; offset < source.length; offset++) {\n        const code = source.charCodeAt(offset);\n\n        // U+0029 RIGHT PARENTHESIS ())\n        // EOF\n        if (code === 0x0029) {\n            // Return.\n            offset++;\n            break;\n        }\n\n        if (isValidEscape(code, getCharCode(source, offset + 1))) {\n            // Consume an escaped code point.\n            // Note: This allows an escaped right parenthesis (\"\\)\") to be encountered\n            // without ending the <bad-url-token>. This is otherwise identical to\n            // the \"anything else\" clause.\n            offset = consumeEscaped(source, offset);\n        }\n    }\n\n    return offset;\n}\n\n// § 4.3.7. Consume an escaped code point\n// Note: This algorithm assumes that escaped is valid without leading U+005C REVERSE SOLIDUS (\\)\nexport function decodeEscaped(escaped) {\n    // Single char escaped that's not a hex digit\n    if (escaped.length === 1 && !isHexDigit(escaped.charCodeAt(0))) {\n        return escaped[0];\n    }\n\n    // Interpret the hex digits as a hexadecimal number.\n    let code = parseInt(escaped, 16);\n\n    if (\n        (code === 0) ||                       // If this number is zero,\n        (code >= 0xD800 && code <= 0xDFFF) || // or is for a surrogate,\n        (code > 0x10FFFF)                     // or is greater than the maximum allowed code point\n    ) {\n        // ... return U+FFFD REPLACEMENT CHARACTER\n        code = 0xFFFD;\n    }\n\n    // Otherwise, return the code point with that value.\n    return String.fromCodePoint(code);\n}\n","export default [\n    'EOF-token',\n    'ident-token',\n    'function-token',\n    'at-keyword-token',\n    'hash-token',\n    'string-token',\n    'bad-string-token',\n    'url-token',\n    'bad-url-token',\n    'delim-token',\n    'number-token',\n    'percentage-token',\n    'dimension-token',\n    'whitespace-token',\n    'CDO-token',\n    'CDC-token',\n    'colon-token',\n    'semicolon-token',\n    'comma-token',\n    '[-token',\n    ']-token',\n    '(-token',\n    ')-token',\n    '{-token',\n    '}-token',\n    'comment-token'\n];\n","const MIN_SIZE = 16 * 1024;\n\nexport function adoptBuffer(buffer = null, size) {\n    if (buffer === null || buffer.length < size) {\n        return new Uint32Array(Math.max(size + 1024, MIN_SIZE));\n    }\n\n    return buffer;\n};\n","import { adoptBuffer } from './adopt-buffer.js';\nimport { isBOM } from './char-code-definitions.js';\n\nconst N = 10;\nconst F = 12;\nconst R = 13;\n\nfunction computeLinesAndColumns(host) {\n    const source = host.source;\n    const sourceLength = source.length;\n    const startOffset = source.length > 0 ? isBOM(source.charCodeAt(0)) : 0;\n    const lines = adoptBuffer(host.lines, sourceLength);\n    const columns = adoptBuffer(host.columns, sourceLength);\n    let line = host.startLine;\n    let column = host.startColumn;\n\n    for (let i = startOffset; i < sourceLength; i++) {\n        const code = source.charCodeAt(i);\n\n        lines[i] = line;\n        columns[i] = column++;\n\n        if (code === N || code === R || code === F) {\n            if (code === R && i + 1 < sourceLength && source.charCodeAt(i + 1) === N) {\n                i++;\n                lines[i] = line;\n                columns[i] = column;\n            }\n\n            line++;\n            column = 1;\n        }\n    }\n\n    lines[sourceLength] = line;\n    columns[sourceLength] = column;\n\n    host.lines = lines;\n    host.columns = columns;\n    host.computed = true;\n}\n\nexport class OffsetToLocation {\n    constructor() {\n        this.lines = null;\n        this.columns = null;\n        this.computed = false;\n    }\n    setSource(source, startOffset = 0, startLine = 1, startColumn = 1) {\n        this.source = source;\n        this.startOffset = startOffset;\n        this.startLine = startLine;\n        this.startColumn = startColumn;\n        this.computed = false;\n    }\n    getLocation(offset, filename) {\n        if (!this.computed) {\n            computeLinesAndColumns(this);\n        }\n\n        return {\n            source: filename,\n            offset: this.startOffset + offset,\n            line: this.lines[offset],\n            column: this.columns[offset]\n        };\n    }\n    getLocationRange(start, end, filename) {\n        if (!this.computed) {\n            computeLinesAndColumns(this);\n        }\n\n        return {\n            source: filename,\n            start: {\n                offset: this.startOffset + start,\n                line: this.lines[start],\n                column: this.columns[start]\n            },\n            end: {\n                offset: this.startOffset + end,\n                line: this.lines[end],\n                column: this.columns[end]\n            }\n        };\n    }\n};\n","import { adoptBuffer } from './adopt-buffer.js';\nimport { cmpStr } from './utils.js';\nimport tokenNames from './names.js';\nimport {\n    WhiteSpace,\n    Comment,\n    Delim,\n    EOF,\n    Function as FunctionToken,\n    LeftParenthesis,\n    RightParenthesis,\n    LeftSquareBracket,\n    RightSquareBracket,\n    LeftCurlyBracket,\n    RightCurlyBracket\n} from './types.js';\n\nconst OFFSET_MASK = 0x00FFFFFF;\nconst TYPE_SHIFT = 24;\nconst balancePair = new Map([\n    [FunctionToken, RightParenthesis],\n    [LeftParenthesis, RightParenthesis],\n    [LeftSquareBracket, RightSquareBracket],\n    [LeftCurlyBracket, RightCurlyBracket]\n]);\n\nexport class TokenStream {\n    constructor(source, tokenize) {\n        this.setSource(source, tokenize);\n    }\n    reset() {\n        this.eof = false;\n        this.tokenIndex = -1;\n        this.tokenType = 0;\n        this.tokenStart = this.firstCharOffset;\n        this.tokenEnd = this.firstCharOffset;\n    }\n    setSource(source = '', tokenize = () => {}) {\n        source = String(source || '');\n\n        const sourceLength = source.length;\n        const offsetAndType = adoptBuffer(this.offsetAndType, source.length + 1); // +1 because of eof-token\n        const balance = adoptBuffer(this.balance, source.length + 1);\n        let tokenCount = 0;\n        let balanceCloseType = 0;\n        let balanceStart = 0;\n        let firstCharOffset = -1;\n\n        // capture buffers\n        this.offsetAndType = null;\n        this.balance = null;\n\n        tokenize(source, (type, start, end) => {\n            switch (type) {\n                default:\n                    balance[tokenCount] = sourceLength;\n                    break;\n\n                case balanceCloseType: {\n                    let balancePrev = balanceStart & OFFSET_MASK;\n                    balanceStart = balance[balancePrev];\n                    balanceCloseType = balanceStart >> TYPE_SHIFT;\n                    balance[tokenCount] = balancePrev;\n                    balance[balancePrev++] = tokenCount;\n                    for (; balancePrev < tokenCount; balancePrev++) {\n                        if (balance[balancePrev] === sourceLength) {\n                            balance[balancePrev] = tokenCount;\n                        }\n                    }\n                    break;\n                }\n\n                case LeftParenthesis:\n                case FunctionToken:\n                case LeftSquareBracket:\n                case LeftCurlyBracket:\n                    balance[tokenCount] = balanceStart;\n                    balanceCloseType = balancePair.get(type);\n                    balanceStart = (balanceCloseType << TYPE_SHIFT) | tokenCount;\n                    break;\n            }\n\n            offsetAndType[tokenCount++] = (type << TYPE_SHIFT) | end;\n            if (firstCharOffset === -1) {\n                firstCharOffset = start;\n            }\n        });\n\n        // finalize buffers\n        offsetAndType[tokenCount] = (EOF << TYPE_SHIFT) | sourceLength; // <EOF-token>\n        balance[tokenCount] = sourceLength;\n        balance[sourceLength] = sourceLength; // prevents false positive balance match with any token\n        while (balanceStart !== 0) {\n            const balancePrev = balanceStart & OFFSET_MASK;\n            balanceStart = balance[balancePrev];\n            balance[balancePrev] = sourceLength;\n        }\n\n        this.source = source;\n        this.firstCharOffset = firstCharOffset === -1 ? 0 : firstCharOffset;\n        this.tokenCount = tokenCount;\n        this.offsetAndType = offsetAndType;\n        this.balance = balance;\n\n        this.reset();\n        this.next();\n    }\n\n    lookupType(offset) {\n        offset += this.tokenIndex;\n\n        if (offset < this.tokenCount) {\n            return this.offsetAndType[offset] >> TYPE_SHIFT;\n        }\n\n        return EOF;\n    }\n    lookupTypeNonSC(idx) {\n        for (let offset = this.tokenIndex; offset < this.tokenCount; offset++) {\n            const tokenType = this.offsetAndType[offset] >> TYPE_SHIFT;\n\n            if (tokenType !== WhiteSpace && tokenType !== Comment) {\n                if (idx-- === 0) {\n                    return tokenType;\n                }\n            }\n        }\n\n        return EOF;\n    }\n    lookupOffset(offset) {\n        offset += this.tokenIndex;\n\n        if (offset < this.tokenCount) {\n            return this.offsetAndType[offset - 1] & OFFSET_MASK;\n        }\n\n        return this.source.length;\n    }\n    lookupOffsetNonSC(idx) {\n        for (let offset = this.tokenIndex; offset < this.tokenCount; offset++) {\n            const tokenType = this.offsetAndType[offset] >> TYPE_SHIFT;\n\n            if (tokenType !== WhiteSpace && tokenType !== Comment) {\n                if (idx-- === 0) {\n                    return offset - this.tokenIndex;\n                }\n            }\n        }\n\n        return EOF;\n    }\n    lookupValue(offset, referenceStr) {\n        offset += this.tokenIndex;\n\n        if (offset < this.tokenCount) {\n            return cmpStr(\n                this.source,\n                this.offsetAndType[offset - 1] & OFFSET_MASK,\n                this.offsetAndType[offset] & OFFSET_MASK,\n                referenceStr\n            );\n        }\n\n        return false;\n    }\n    getTokenStart(tokenIndex) {\n        if (tokenIndex === this.tokenIndex) {\n            return this.tokenStart;\n        }\n\n        if (tokenIndex > 0) {\n            return tokenIndex < this.tokenCount\n                ? this.offsetAndType[tokenIndex - 1] & OFFSET_MASK\n                : this.offsetAndType[this.tokenCount] & OFFSET_MASK;\n        }\n\n        return this.firstCharOffset;\n    }\n    substrToCursor(start) {\n        return this.source.substring(start, this.tokenStart);\n    }\n\n    isBalanceEdge(pos) {\n        return this.balance[this.tokenIndex] < pos;\n    }\n    isDelim(code, offset) {\n        if (offset) {\n            return (\n                this.lookupType(offset) === Delim &&\n                this.source.charCodeAt(this.lookupOffset(offset)) === code\n            );\n        }\n\n        return (\n            this.tokenType === Delim &&\n            this.source.charCodeAt(this.tokenStart) === code\n        );\n    }\n\n    skip(tokenCount) {\n        let next = this.tokenIndex + tokenCount;\n\n        if (next < this.tokenCount) {\n            this.tokenIndex = next;\n            this.tokenStart = this.offsetAndType[next - 1] & OFFSET_MASK;\n            next = this.offsetAndType[next];\n            this.tokenType = next >> TYPE_SHIFT;\n            this.tokenEnd = next & OFFSET_MASK;\n        } else {\n            this.tokenIndex = this.tokenCount;\n            this.next();\n        }\n    }\n    next() {\n        let next = this.tokenIndex + 1;\n\n        if (next < this.tokenCount) {\n            this.tokenIndex = next;\n            this.tokenStart = this.tokenEnd;\n            next = this.offsetAndType[next];\n            this.tokenType = next >> TYPE_SHIFT;\n            this.tokenEnd = next & OFFSET_MASK;\n        } else {\n            this.eof = true;\n            this.tokenIndex = this.tokenCount;\n            this.tokenType = EOF;\n            this.tokenStart = this.tokenEnd = this.source.length;\n        }\n    }\n    skipSC() {\n        while (this.tokenType === WhiteSpace || this.tokenType === Comment) {\n            this.next();\n        }\n    }\n    skipUntilBalanced(startToken, stopConsume) {\n        let cursor = startToken;\n        let balanceEnd;\n        let offset;\n\n        loop:\n        for (; cursor < this.tokenCount; cursor++) {\n            balanceEnd = this.balance[cursor];\n\n            // stop scanning on balance edge that points to offset before start token\n            if (balanceEnd < startToken) {\n                break loop;\n            }\n\n            offset = cursor > 0 ? this.offsetAndType[cursor - 1] & OFFSET_MASK : this.firstCharOffset;\n\n            // check stop condition\n            switch (stopConsume(this.source.charCodeAt(offset))) {\n                case 1: // just stop\n                    break loop;\n\n                case 2: // stop & included\n                    cursor++;\n                    break loop;\n\n                default:\n                    // fast forward to the end of balanced block\n                    if (this.balance[balanceEnd] === cursor) {\n                        cursor = balanceEnd;\n                    }\n            }\n        }\n\n        this.skip(cursor - this.tokenIndex);\n    }\n\n    forEachToken(fn) {\n        for (let i = 0, offset = this.firstCharOffset; i < this.tokenCount; i++) {\n            const start = offset;\n            const item = this.offsetAndType[i];\n            const end = item & OFFSET_MASK;\n            const type = item >> TYPE_SHIFT;\n\n            offset = end;\n\n            fn(type, start, end, i);\n        }\n    }\n    dump() {\n        const tokens = new Array(this.tokenCount);\n\n        this.forEachToken((type, start, end, index) => {\n            tokens[index] = {\n                idx: index,\n                type: tokenNames[type],\n                chunk: this.source.substring(start, end),\n                balance: this.balance[index]\n            };\n        });\n\n        return tokens;\n    }\n};\n","import * as TYPE from './types.js';\nimport {\n    isNewline,\n    isName,\n    isValidEscape,\n    isNumberStart,\n    isIdentifierStart,\n    isBOM,\n    charCodeCategory,\n    WhiteSpaceCategory,\n    DigitCategory,\n    NameStartCategory,\n    NonPrintableCategory\n} from './char-code-definitions.js';\nimport {\n    cmpStr,\n    getNewlineLength,\n    findWhiteSpaceEnd,\n    consumeEscaped,\n    consumeName,\n    consumeNumber,\n    consumeBadUrlRemnants\n} from './utils.js';\n\nexport function tokenize(source, onToken) {\n    function getCharCode(offset) {\n        return offset < sourceLength ? source.charCodeAt(offset) : 0;\n    }\n\n    // § 4.3.3. Consume a numeric token\n    function consumeNumericToken() {\n        // Consume a number and let number be the result.\n        offset = consumeNumber(source, offset);\n\n        // If the next 3 input code points would start an identifier, then:\n        if (isIdentifierStart(getCharCode(offset), getCharCode(offset + 1), getCharCode(offset + 2))) {\n            // Create a <dimension-token> with the same value and type flag as number, and a unit set initially to the empty string.\n            // Consume a name. Set the <dimension-token>’s unit to the returned value.\n            // Return the <dimension-token>.\n            type = TYPE.Dimension;\n            offset = consumeName(source, offset);\n            return;\n        }\n\n        // Otherwise, if the next input code point is U+0025 PERCENTAGE SIGN (%), consume it.\n        if (getCharCode(offset) === 0x0025) {\n            // Create a <percentage-token> with the same value as number, and return it.\n            type = TYPE.Percentage;\n            offset++;\n            return;\n        }\n\n        // Otherwise, create a <number-token> with the same value and type flag as number, and return it.\n        type = TYPE.Number;\n    }\n\n    // § 4.3.4. Consume an ident-like token\n    function consumeIdentLikeToken() {\n        const nameStartOffset = offset;\n\n        // Consume a name, and let string be the result.\n        offset = consumeName(source, offset);\n\n        // If string’s value is an ASCII case-insensitive match for \"url\",\n        // and the next input code point is U+0028 LEFT PARENTHESIS ((), consume it.\n        if (cmpStr(source, nameStartOffset, offset, 'url') && getCharCode(offset) === 0x0028) {\n            // While the next two input code points are whitespace, consume the next input code point.\n            offset = findWhiteSpaceEnd(source, offset + 1);\n\n            // If the next one or two input code points are U+0022 QUOTATION MARK (\"), U+0027 APOSTROPHE ('),\n            // or whitespace followed by U+0022 QUOTATION MARK (\") or U+0027 APOSTROPHE ('),\n            // then create a <function-token> with its value set to string and return it.\n            if (getCharCode(offset) === 0x0022 ||\n                getCharCode(offset) === 0x0027) {\n                type = TYPE.Function;\n                offset = nameStartOffset + 4;\n                return;\n            }\n\n            // Otherwise, consume a url token, and return it.\n            consumeUrlToken();\n            return;\n        }\n\n        // Otherwise, if the next input code point is U+0028 LEFT PARENTHESIS ((), consume it.\n        // Create a <function-token> with its value set to string and return it.\n        if (getCharCode(offset) === 0x0028) {\n            type = TYPE.Function;\n            offset++;\n            return;\n        }\n\n        // Otherwise, create an <ident-token> with its value set to string and return it.\n        type = TYPE.Ident;\n    }\n\n    // § 4.3.5. Consume a string token\n    function consumeStringToken(endingCodePoint) {\n        // This algorithm may be called with an ending code point, which denotes the code point\n        // that ends the string. If an ending code point is not specified,\n        // the current input code point is used.\n        if (!endingCodePoint) {\n            endingCodePoint = getCharCode(offset++);\n        }\n\n        // Initially create a <string-token> with its value set to the empty string.\n        type = TYPE.String;\n\n        // Repeatedly consume the next input code point from the stream:\n        for (; offset < source.length; offset++) {\n            const code = source.charCodeAt(offset);\n\n            switch (charCodeCategory(code)) {\n                // ending code point\n                case endingCodePoint:\n                    // Return the <string-token>.\n                    offset++;\n                    return;\n\n                    // EOF\n                    // case EofCategory:\n                    // This is a parse error. Return the <string-token>.\n                    // return;\n\n                // newline\n                case WhiteSpaceCategory:\n                    if (isNewline(code)) {\n                        // This is a parse error. Reconsume the current input code point,\n                        // create a <bad-string-token>, and return it.\n                        offset += getNewlineLength(source, offset, code);\n                        type = TYPE.BadString;\n                        return;\n                    }\n                    break;\n\n                // U+005C REVERSE SOLIDUS (\\)\n                case 0x005C:\n                    // If the next input code point is EOF, do nothing.\n                    if (offset === source.length - 1) {\n                        break;\n                    }\n\n                    const nextCode = getCharCode(offset + 1);\n\n                    // Otherwise, if the next input code point is a newline, consume it.\n                    if (isNewline(nextCode)) {\n                        offset += getNewlineLength(source, offset + 1, nextCode);\n                    } else if (isValidEscape(code, nextCode)) {\n                        // Otherwise, (the stream starts with a valid escape) consume\n                        // an escaped code point and append the returned code point to\n                        // the <string-token>’s value.\n                        offset = consumeEscaped(source, offset) - 1;\n                    }\n                    break;\n\n                // anything else\n                // Append the current input code point to the <string-token>’s value.\n            }\n        }\n    }\n\n    // § 4.3.6. Consume a url token\n    // Note: This algorithm assumes that the initial \"url(\" has already been consumed.\n    // This algorithm also assumes that it’s being called to consume an \"unquoted\" value, like url(foo).\n    // A quoted value, like url(\"foo\"), is parsed as a <function-token>. Consume an ident-like token\n    // automatically handles this distinction; this algorithm shouldn’t be called directly otherwise.\n    function consumeUrlToken() {\n        // Initially create a <url-token> with its value set to the empty string.\n        type = TYPE.Url;\n\n        // Consume as much whitespace as possible.\n        offset = findWhiteSpaceEnd(source, offset);\n\n        // Repeatedly consume the next input code point from the stream:\n        for (; offset < source.length; offset++) {\n            const code = source.charCodeAt(offset);\n\n            switch (charCodeCategory(code)) {\n                // U+0029 RIGHT PARENTHESIS ())\n                case 0x0029:\n                    // Return the <url-token>.\n                    offset++;\n                    return;\n\n                    // EOF\n                    // case EofCategory:\n                    // This is a parse error. Return the <url-token>.\n                    // return;\n\n                // whitespace\n                case WhiteSpaceCategory:\n                    // Consume as much whitespace as possible.\n                    offset = findWhiteSpaceEnd(source, offset);\n\n                    // If the next input code point is U+0029 RIGHT PARENTHESIS ()) or EOF,\n                    // consume it and return the <url-token>\n                    // (if EOF was encountered, this is a parse error);\n                    if (getCharCode(offset) === 0x0029 || offset >= source.length) {\n                        if (offset < source.length) {\n                            offset++;\n                        }\n                        return;\n                    }\n\n                    // otherwise, consume the remnants of a bad url, create a <bad-url-token>,\n                    // and return it.\n                    offset = consumeBadUrlRemnants(source, offset);\n                    type = TYPE.BadUrl;\n                    return;\n\n                // U+0022 QUOTATION MARK (\")\n                // U+0027 APOSTROPHE (')\n                // U+0028 LEFT PARENTHESIS (()\n                // non-printable code point\n                case 0x0022:\n                case 0x0027:\n                case 0x0028:\n                case NonPrintableCategory:\n                    // This is a parse error. Consume the remnants of a bad url,\n                    // create a <bad-url-token>, and return it.\n                    offset = consumeBadUrlRemnants(source, offset);\n                    type = TYPE.BadUrl;\n                    return;\n\n                // U+005C REVERSE SOLIDUS (\\)\n                case 0x005C:\n                    // If the stream starts with a valid escape, consume an escaped code point and\n                    // append the returned code point to the <url-token>’s value.\n                    if (isValidEscape(code, getCharCode(offset + 1))) {\n                        offset = consumeEscaped(source, offset) - 1;\n                        break;\n                    }\n\n                    // Otherwise, this is a parse error. Consume the remnants of a bad url,\n                    // create a <bad-url-token>, and return it.\n                    offset = consumeBadUrlRemnants(source, offset);\n                    type = TYPE.BadUrl;\n                    return;\n\n                // anything else\n                // Append the current input code point to the <url-token>’s value.\n            }\n        }\n    }\n\n    // ensure source is a string\n    source = String(source || '');\n\n    const sourceLength = source.length;\n    let start = isBOM(getCharCode(0));\n    let offset = start;\n    let type;\n\n    // https://drafts.csswg.org/css-syntax-3/#consume-token\n    // § 4.3.1. Consume a token\n    while (offset < sourceLength) {\n        const code = source.charCodeAt(offset);\n\n        switch (charCodeCategory(code)) {\n            // whitespace\n            case WhiteSpaceCategory:\n                // Consume as much whitespace as possible. Return a <whitespace-token>.\n                type = TYPE.WhiteSpace;\n                offset = findWhiteSpaceEnd(source, offset + 1);\n                break;\n\n            // U+0022 QUOTATION MARK (\")\n            case 0x0022:\n                // Consume a string token and return it.\n                consumeStringToken();\n                break;\n\n            // U+0023 NUMBER SIGN (#)\n            case 0x0023:\n                // If the next input code point is a name code point or the next two input code points are a valid escape, then:\n                if (isName(getCharCode(offset + 1)) || isValidEscape(getCharCode(offset + 1), getCharCode(offset + 2))) {\n                    // Create a <hash-token>.\n                    type = TYPE.Hash;\n\n                    // If the next 3 input code points would start an identifier, set the <hash-token>’s type flag to \"id\".\n                    // if (isIdentifierStart(getCharCode(offset + 1), getCharCode(offset + 2), getCharCode(offset + 3))) {\n                    //     // TODO: set id flag\n                    // }\n\n                    // Consume a name, and set the <hash-token>’s value to the returned string.\n                    offset = consumeName(source, offset + 1);\n\n                    // Return the <hash-token>.\n                } else {\n                    // Otherwise, return a <delim-token> with its value set to the current input code point.\n                    type = TYPE.Delim;\n                    offset++;\n                }\n\n                break;\n\n            // U+0027 APOSTROPHE (')\n            case 0x0027:\n                // Consume a string token and return it.\n                consumeStringToken();\n                break;\n\n            // U+0028 LEFT PARENTHESIS (()\n            case 0x0028:\n                // Return a <(-token>.\n                type = TYPE.LeftParenthesis;\n                offset++;\n                break;\n\n            // U+0029 RIGHT PARENTHESIS ())\n            case 0x0029:\n                // Return a <)-token>.\n                type = TYPE.RightParenthesis;\n                offset++;\n                break;\n\n            // U+002B PLUS SIGN (+)\n            case 0x002B:\n                // If the input stream starts with a number, ...\n                if (isNumberStart(code, getCharCode(offset + 1), getCharCode(offset + 2))) {\n                    // ... reconsume the current input code point, consume a numeric token, and return it.\n                    consumeNumericToken();\n                } else {\n                    // Otherwise, return a <delim-token> with its value set to the current input code point.\n                    type = TYPE.Delim;\n                    offset++;\n                }\n                break;\n\n            // U+002C COMMA (,)\n            case 0x002C:\n                // Return a <comma-token>.\n                type = TYPE.Comma;\n                offset++;\n                break;\n\n            // U+002D HYPHEN-MINUS (-)\n            case 0x002D:\n                // If the input stream starts with a number, reconsume the current input code point, consume a numeric token, and return it.\n                if (isNumberStart(code, getCharCode(offset + 1), getCharCode(offset + 2))) {\n                    consumeNumericToken();\n                } else {\n                    // Otherwise, if the next 2 input code points are U+002D HYPHEN-MINUS U+003E GREATER-THAN SIGN (->), consume them and return a <CDC-token>.\n                    if (getCharCode(offset + 1) === 0x002D &&\n                        getCharCode(offset + 2) === 0x003E) {\n                        type = TYPE.CDC;\n                        offset = offset + 3;\n                    } else {\n                        // Otherwise, if the input stream starts with an identifier, ...\n                        if (isIdentifierStart(code, getCharCode(offset + 1), getCharCode(offset + 2))) {\n                            // ... reconsume the current input code point, consume an ident-like token, and return it.\n                            consumeIdentLikeToken();\n                        } else {\n                            // Otherwise, return a <delim-token> with its value set to the current input code point.\n                            type = TYPE.Delim;\n                            offset++;\n                        }\n                    }\n                }\n                break;\n\n            // U+002E FULL STOP (.)\n            case 0x002E:\n                // If the input stream starts with a number, ...\n                if (isNumberStart(code, getCharCode(offset + 1), getCharCode(offset + 2))) {\n                    // ... reconsume the current input code point, consume a numeric token, and return it.\n                    consumeNumericToken();\n                } else {\n                    // Otherwise, return a <delim-token> with its value set to the current input code point.\n                    type = TYPE.Delim;\n                    offset++;\n                }\n\n                break;\n\n            // U+002F SOLIDUS (/)\n            case 0x002F:\n                // If the next two input code point are U+002F SOLIDUS (/) followed by a U+002A ASTERISK (*),\n                if (getCharCode(offset + 1) === 0x002A) {\n                    // ... consume them and all following code points up to and including the first U+002A ASTERISK (*)\n                    // followed by a U+002F SOLIDUS (/), or up to an EOF code point.\n                    type = TYPE.Comment;\n                    offset = source.indexOf('*/', offset + 2);\n                    offset = offset === -1 ? source.length : offset + 2;\n                } else {\n                    type = TYPE.Delim;\n                    offset++;\n                }\n                break;\n\n            // U+003A COLON (:)\n            case 0x003A:\n                // Return a <colon-token>.\n                type = TYPE.Colon;\n                offset++;\n                break;\n\n            // U+003B SEMICOLON (;)\n            case 0x003B:\n                // Return a <semicolon-token>.\n                type = TYPE.Semicolon;\n                offset++;\n                break;\n\n            // U+003C LESS-THAN SIGN (<)\n            case 0x003C:\n                // If the next 3 input code points are U+0021 EXCLAMATION MARK U+002D HYPHEN-MINUS U+002D HYPHEN-MINUS (!--), ...\n                if (getCharCode(offset + 1) === 0x0021 &&\n                    getCharCode(offset + 2) === 0x002D &&\n                    getCharCode(offset + 3) === 0x002D) {\n                    // ... consume them and return a <CDO-token>.\n                    type = TYPE.CDO;\n                    offset = offset + 4;\n                } else {\n                    // Otherwise, return a <delim-token> with its value set to the current input code point.\n                    type = TYPE.Delim;\n                    offset++;\n                }\n\n                break;\n\n            // U+0040 COMMERCIAL AT (@)\n            case 0x0040:\n                // If the next 3 input code points would start an identifier, ...\n                if (isIdentifierStart(getCharCode(offset + 1), getCharCode(offset + 2), getCharCode(offset + 3))) {\n                    // ... consume a name, create an <at-keyword-token> with its value set to the returned value, and return it.\n                    type = TYPE.AtKeyword;\n                    offset = consumeName(source, offset + 1);\n                } else {\n                    // Otherwise, return a <delim-token> with its value set to the current input code point.\n                    type = TYPE.Delim;\n                    offset++;\n                }\n\n                break;\n\n            // U+005B LEFT SQUARE BRACKET ([)\n            case 0x005B:\n                // Return a <[-token>.\n                type = TYPE.LeftSquareBracket;\n                offset++;\n                break;\n\n            // U+005C REVERSE SOLIDUS (\\)\n            case 0x005C:\n                // If the input stream starts with a valid escape, ...\n                if (isValidEscape(code, getCharCode(offset + 1))) {\n                    // ... reconsume the current input code point, consume an ident-like token, and return it.\n                    consumeIdentLikeToken();\n                } else {\n                    // Otherwise, this is a parse error. Return a <delim-token> with its value set to the current input code point.\n                    type = TYPE.Delim;\n                    offset++;\n                }\n                break;\n\n            // U+005D RIGHT SQUARE BRACKET (])\n            case 0x005D:\n                // Return a <]-token>.\n                type = TYPE.RightSquareBracket;\n                offset++;\n                break;\n\n            // U+007B LEFT CURLY BRACKET ({)\n            case 0x007B:\n                // Return a <{-token>.\n                type = TYPE.LeftCurlyBracket;\n                offset++;\n                break;\n\n            // U+007D RIGHT CURLY BRACKET (})\n            case 0x007D:\n                // Return a <}-token>.\n                type = TYPE.RightCurlyBracket;\n                offset++;\n                break;\n\n            // digit\n            case DigitCategory:\n                // Reconsume the current input code point, consume a numeric token, and return it.\n                consumeNumericToken();\n                break;\n\n            // name-start code point\n            case NameStartCategory:\n                // Reconsume the current input code point, consume an ident-like token, and return it.\n                consumeIdentLikeToken();\n                break;\n\n                // EOF\n                // case EofCategory:\n                // Return an <EOF-token>.\n                // break;\n\n            // anything else\n            default:\n                // Return a <delim-token> with its value set to the current input code point.\n                type = TYPE.Delim;\n                offset++;\n        }\n\n        // put token to stream\n        onToken(type, start, start = offset);\n    }\n}\n\nexport * from './types.js';\nexport * as tokenTypes from './types.js';\nexport { default as tokenNames } from './names.js';\nexport * from './char-code-definitions.js';\nexport * from './utils.js';\nexport * from './OffsetToLocation.js';\nexport * from './TokenStream.js';\n","//\n//                              list\n//                            ┌──────┐\n//             ┌──────────────┼─head │\n//             │              │ tail─┼──────────────┐\n//             │              └──────┘              │\n//             ▼                                    ▼\n//            item        item        item        item\n//          ┌──────┐    ┌──────┐    ┌──────┐    ┌──────┐\n//  null ◀──┼─prev │◀───┼─prev │◀───┼─prev │◀───┼─prev │\n//          │ next─┼───▶│ next─┼───▶│ next─┼───▶│ next─┼──▶ null\n//          ├──────┤    ├──────┤    ├──────┤    ├──────┤\n//          │ data │    │ data │    │ data │    │ data │\n//          └──────┘    └──────┘    └──────┘    └──────┘\n//\n\nlet releasedCursors = null;\n\nexport class List {\n    static createItem(data) {\n        return {\n            prev: null,\n            next: null,\n            data\n        };\n    }\n\n    constructor() {\n        this.head = null;\n        this.tail = null;\n        this.cursor = null;\n    }\n    createItem(data) {\n        return List.createItem(data);\n    }\n\n    // cursor helpers\n    allocateCursor(prev, next) {\n        let cursor;\n\n        if (releasedCursors !== null) {\n            cursor = releasedCursors;\n            releasedCursors = releasedCursors.cursor;\n            cursor.prev = prev;\n            cursor.next = next;\n            cursor.cursor = this.cursor;\n        } else {\n            cursor = {\n                prev,\n                next,\n                cursor: this.cursor\n            };\n        }\n\n        this.cursor = cursor;\n\n        return cursor;\n    }\n    releaseCursor() {\n        const { cursor } = this;\n\n        this.cursor = cursor.cursor;\n        cursor.prev = null;\n        cursor.next = null;\n        cursor.cursor = releasedCursors;\n        releasedCursors = cursor;\n    }\n    updateCursors(prevOld, prevNew, nextOld, nextNew) {\n        let { cursor } = this;\n\n        while (cursor !== null) {\n            if (cursor.prev === prevOld) {\n                cursor.prev = prevNew;\n            }\n\n            if (cursor.next === nextOld) {\n                cursor.next = nextNew;\n            }\n\n            cursor = cursor.cursor;\n        }\n    }\n    *[Symbol.iterator]() {\n        for (let cursor = this.head; cursor !== null; cursor = cursor.next) {\n            yield cursor.data;\n        }\n    }\n\n    // getters\n    get size() {\n        let size = 0;\n\n        for (let cursor = this.head; cursor !== null; cursor = cursor.next) {\n            size++;\n        }\n\n        return size;\n    }\n    get isEmpty() {\n        return this.head === null;\n    }\n    get first() {\n        return this.head && this.head.data;\n    }\n    get last() {\n        return this.tail && this.tail.data;\n    }\n\n    // convertors\n    fromArray(array) {\n        let cursor = null;\n        this.head = null;\n\n        for (let data of array) {\n            const item = List.createItem(data);\n\n            if (cursor !== null) {\n                cursor.next = item;\n            } else {\n                this.head = item;\n            }\n\n            item.prev = cursor;\n            cursor = item;\n        }\n\n        this.tail = cursor;\n        return this;\n    }\n    toArray() {\n        return [...this];\n    }\n    toJSON() {\n        return [...this];\n    }\n\n    // array-like methods\n    forEach(fn, thisArg = this) {\n        // push cursor\n        const cursor = this.allocateCursor(null, this.head);\n\n        while (cursor.next !== null) {\n            const item = cursor.next;\n            cursor.next = item.next;\n            fn.call(thisArg, item.data, item, this);\n        }\n\n        // pop cursor\n        this.releaseCursor();\n    }\n    forEachRight(fn, thisArg = this) {\n        // push cursor\n        const cursor = this.allocateCursor(this.tail, null);\n\n        while (cursor.prev !== null) {\n            const item = cursor.prev;\n            cursor.prev = item.prev;\n            fn.call(thisArg, item.data, item, this);\n        }\n\n        // pop cursor\n        this.releaseCursor();\n    }\n    reduce(fn, initialValue, thisArg = this) {\n        // push cursor\n        let cursor = this.allocateCursor(null, this.head);\n        let acc = initialValue;\n        let item;\n\n        while (cursor.next !== null) {\n            item = cursor.next;\n            cursor.next = item.next;\n\n            acc = fn.call(thisArg, acc, item.data, item, this);\n        }\n\n        // pop cursor\n        this.releaseCursor();\n\n        return acc;\n    }\n    reduceRight(fn, initialValue, thisArg = this) {\n        // push cursor\n        let cursor = this.allocateCursor(this.tail, null);\n        let acc = initialValue;\n        let item;\n\n        while (cursor.prev !== null) {\n            item = cursor.prev;\n            cursor.prev = item.prev;\n\n            acc = fn.call(thisArg, acc, item.data, item, this);\n        }\n\n        // pop cursor\n        this.releaseCursor();\n\n        return acc;\n    }\n    some(fn, thisArg = this) {\n        for (let cursor = this.head; cursor !== null; cursor = cursor.next) {\n            if (fn.call(thisArg, cursor.data, cursor, this)) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n    map(fn, thisArg = this) {\n        const result = new List();\n\n        for (let cursor = this.head; cursor !== null; cursor = cursor.next) {\n            result.appendData(fn.call(thisArg, cursor.data, cursor, this));\n        }\n\n        return result;\n    }\n    filter(fn, thisArg = this) {\n        const result = new List();\n\n        for (let cursor = this.head; cursor !== null; cursor = cursor.next) {\n            if (fn.call(thisArg, cursor.data, cursor, this)) {\n                result.appendData(cursor.data);\n            }\n        }\n\n        return result;\n    }\n\n    nextUntil(start, fn, thisArg = this) {\n        if (start === null) {\n            return;\n        }\n\n        // push cursor\n        const cursor = this.allocateCursor(null, start);\n\n        while (cursor.next !== null) {\n            const item = cursor.next;\n            cursor.next = item.next;\n            if (fn.call(thisArg, item.data, item, this)) {\n                break;\n            }\n        }\n\n        // pop cursor\n        this.releaseCursor();\n    }\n    prevUntil(start, fn, thisArg = this) {\n        if (start === null) {\n            return;\n        }\n\n        // push cursor\n        const cursor = this.allocateCursor(start, null);\n\n        while (cursor.prev !== null) {\n            const item = cursor.prev;\n            cursor.prev = item.prev;\n            if (fn.call(thisArg, item.data, item, this)) {\n                break;\n            }\n        }\n\n        // pop cursor\n        this.releaseCursor();\n    }\n\n    // mutation\n    clear() {\n        this.head = null;\n        this.tail = null;\n    }\n    copy() {\n        const result = new List();\n\n        for (let data of this) {\n            result.appendData(data);\n        }\n\n        return result;\n    }\n    prepend(item) {\n        //      head\n        //    ^\n        // item\n        this.updateCursors(null, item, this.head, item);\n\n        // insert to the beginning of the list\n        if (this.head !== null) {\n            // new item <- first item\n            this.head.prev = item;\n            // new item -> first item\n            item.next = this.head;\n        } else {\n            // if list has no head, then it also has no tail\n            // in this case tail points to the new item\n            this.tail = item;\n        }\n\n        // head always points to new item\n        this.head = item;\n        return this;\n    }\n    prependData(data) {\n        return this.prepend(List.createItem(data));\n    }\n    append(item) {\n        return this.insert(item);\n    }\n    appendData(data) {\n        return this.insert(List.createItem(data));\n    }\n    insert(item, before = null) {\n        if (before !== null) {\n            // prev   before\n            //      ^\n            //     item\n            this.updateCursors(before.prev, item, before, item);\n\n            if (before.prev === null) {\n                // insert to the beginning of list\n                if (this.head !== before) {\n                    throw new Error('before doesn\\'t belong to list');\n                }\n                // since head points to before therefore list doesn't empty\n                // no need to check tail\n                this.head = item;\n                before.prev = item;\n                item.next = before;\n                this.updateCursors(null, item);\n            } else {\n                // insert between two items\n                before.prev.next = item;\n                item.prev = before.prev;\n                before.prev = item;\n                item.next = before;\n            }\n        } else {\n            // tail\n            //      ^\n            //      item\n            this.updateCursors(this.tail, item, null, item);\n\n            // insert to the ending of the list\n            if (this.tail !== null) {\n                // last item -> new item\n                this.tail.next = item;\n                // last item <- new item\n                item.prev = this.tail;\n            } else {\n                // if list has no tail, then it also has no head\n                // in this case head points to new item\n                this.head = item;\n            }\n\n            // tail always points to new item\n            this.tail = item;\n        }\n\n        return this;\n    }\n    insertData(data, before) {\n        return this.insert(List.createItem(data), before);\n    }\n    remove(item) {\n        //      item\n        //       ^\n        // prev     next\n        this.updateCursors(item, item.prev, item, item.next);\n\n        if (item.prev !== null) {\n            item.prev.next = item.next;\n        } else {\n            if (this.head !== item) {\n                throw new Error('item doesn\\'t belong to list');\n            }\n\n            this.head = item.next;\n        }\n\n        if (item.next !== null) {\n            item.next.prev = item.prev;\n        } else {\n            if (this.tail !== item) {\n                throw new Error('item doesn\\'t belong to list');\n            }\n\n            this.tail = item.prev;\n        }\n\n        item.prev = null;\n        item.next = null;\n\n        return item;\n    }\n    push(data) {\n        this.insert(List.createItem(data));\n    }\n    pop() {\n        return this.tail !== null ? this.remove(this.tail) : null;\n    }\n    unshift(data) {\n        this.prepend(List.createItem(data));\n    }\n    shift() {\n        return this.head !== null ? this.remove(this.head) : null;\n    }\n    prependList(list) {\n        return this.insertList(list, this.head);\n    }\n    appendList(list) {\n        return this.insertList(list);\n    }\n    insertList(list, before) {\n        // ignore empty lists\n        if (list.head === null) {\n            return this;\n        }\n\n        if (before !== undefined && before !== null) {\n            this.updateCursors(before.prev, list.tail, before, list.head);\n\n            // insert in the middle of dist list\n            if (before.prev !== null) {\n                // before.prev <-> list.head\n                before.prev.next = list.head;\n                list.head.prev = before.prev;\n            } else {\n                this.head = list.head;\n            }\n\n            before.prev = list.tail;\n            list.tail.next = before;\n        } else {\n            this.updateCursors(this.tail, list.tail, null, list.head);\n\n            // insert to end of the list\n            if (this.tail !== null) {\n                // if destination list has a tail, then it also has a head,\n                // but head doesn't change\n                // dest tail -> source head\n                this.tail.next = list.head;\n                // dest tail <- source head\n                list.head.prev = this.tail;\n            } else {\n                // if list has no a tail, then it also has no a head\n                // in this case points head to new item\n                this.head = list.head;\n            }\n\n            // tail always start point to new item\n            this.tail = list.tail;\n        }\n\n        list.head = null;\n        list.tail = null;\n        return this;\n    }\n    replace(oldItem, newItemOrList) {\n        if ('head' in newItemOrList) {\n            this.insertList(newItemOrList, oldItem);\n        } else {\n            this.insert(newItemOrList, oldItem);\n        }\n\n        this.remove(oldItem);\n    }\n}\n","export function createCustomError(name, message) {\n    // use Object.create(), because some VMs prevent setting line/column otherwise\n    // (iOS Safari 10 even throws an exception)\n    const error = Object.create(SyntaxError.prototype);\n    const errorStack = new Error();\n\n    return Object.assign(error, {\n        name,\n        message,\n        get stack() {\n            return (errorStack.stack || '').replace(/^(.+\\n){1,3}/, `${name}: ${message}\\n`);\n        }\n    });\n};\n","import { createCustomError } from '../utils/create-custom-error.js';\n\nconst MAX_LINE_LENGTH = 100;\nconst OFFSET_CORRECTION = 60;\nconst TAB_REPLACEMENT = '    ';\n\nfunction sourceFragment({ source, line, column, baseLine, baseColumn }, extraLines) {\n    function processLines(start, end) {\n        return lines\n            .slice(start, end)\n            .map((line, idx) =>\n                String(start + idx + 1).padStart(maxNumLength) + ' |' + line\n            ).join('\\n');\n    }\n\n    const prelines = '\\n'.repeat(Math.max(baseLine - 1, 0));\n    const precolumns = ' '.repeat(Math.max(baseColumn - 1, 0));\n    const lines = (prelines + precolumns + source).split(/\\r\\n?|\\n|\\f/);\n    const startLine = Math.max(1, line - extraLines) - 1;\n    const endLine = Math.min(line + extraLines, lines.length + 1);\n    const maxNumLength = Math.max(4, String(endLine).length) + 1;\n    let cutLeft = 0;\n\n    // column correction according to replaced tab before column\n    column += (TAB_REPLACEMENT.length - 1) * (lines[line - 1].substr(0, column - 1).match(/\\t/g) || []).length;\n\n    if (column > MAX_LINE_LENGTH) {\n        cutLeft = column - OFFSET_CORRECTION + 3;\n        column = OFFSET_CORRECTION - 2;\n    }\n\n    for (let i = startLine; i <= endLine; i++) {\n        if (i >= 0 && i < lines.length) {\n            lines[i] = lines[i].replace(/\\t/g, TAB_REPLACEMENT);\n            lines[i] =\n                (cutLeft > 0 && lines[i].length > cutLeft ? '\\u2026' : '') +\n                lines[i].substr(cutLeft, MAX_LINE_LENGTH - 2) +\n                (lines[i].length > cutLeft + MAX_LINE_LENGTH - 1 ? '\\u2026' : '');\n        }\n    }\n\n    return [\n        processLines(startLine, line),\n        new Array(column + maxNumLength + 2).join('-') + '^',\n        processLines(line, endLine)\n    ].filter(Boolean)\n        .join('\\n')\n        .replace(/^(\\s+\\d+\\s+\\|\\n)+/, '')\n        .replace(/\\n(\\s+\\d+\\s+\\|)+$/, '');\n}\n\nexport function SyntaxError(message, source, offset, line, column, baseLine = 1, baseColumn = 1) {\n    const error = Object.assign(createCustomError('SyntaxError', message), {\n        source,\n        offset,\n        line,\n        column,\n        sourceFragment(extraLines) {\n            return sourceFragment({ source, line, column, baseLine, baseColumn }, isNaN(extraLines) ? 0 : extraLines);\n        },\n        get formattedMessage() {\n            return (\n                `Parse error: ${message}\\n` +\n                sourceFragment({ source, line, column, baseLine, baseColumn }, 2)\n            );\n        }\n    });\n\n    return error;\n}\n","import { WhiteSpace, Comment } from '../tokenizer/index.js';\n\nexport function readSequence(recognizer) {\n    const children = this.createList();\n    let space = false;\n    const context = {\n        recognizer\n    };\n\n    while (!this.eof) {\n        switch (this.tokenType) {\n            case Comment:\n                this.next();\n                continue;\n\n            case WhiteSpace:\n                space = true;\n                this.next();\n                continue;\n        }\n\n        let child = recognizer.getNode.call(this, context);\n\n        if (child === undefined) {\n            break;\n        }\n\n        if (space) {\n            if (recognizer.onWhiteSpace) {\n                recognizer.onWhiteSpace.call(this, child, children, context);\n            }\n            space = false;\n        }\n\n        children.push(child);\n    }\n\n    if (space && recognizer.onWhiteSpace) {\n        recognizer.onWhiteSpace.call(this, null, children, context);\n    }\n\n    return children;\n};\n","import { List } from '../utils/List.js';\nimport { SyntaxError } from './SyntaxError.js';\nimport {\n    tokenize,\n    OffsetToLocation,\n    TokenStream,\n    tokenNames,\n\n    consumeNumber,\n    findWhiteSpaceStart,\n    cmpChar,\n    cmpStr,\n\n    WhiteSpace,\n    Comment,\n    Ident,\n    Function as FunctionToken,\n    Url,\n    Hash,\n    Percentage,\n    Number as NumberToken\n} from '../tokenizer/index.js';\nimport { readSequence } from './sequence.js';\n\nconst NOOP = () => {};\nconst EXCLAMATIONMARK = 0x0021;  // U+0021 EXCLAMATION MARK (!)\nconst NUMBERSIGN = 0x0023;       // U+0023 NUMBER SIGN (#)\nconst SEMICOLON = 0x003B;        // U+003B SEMICOLON (;)\nconst LEFTCURLYBRACKET = 0x007B; // U+007B LEFT CURLY BRACKET ({)\nconst NULL = 0;\n\nfunction createParseContext(name) {\n    return function() {\n        return this[name]();\n    };\n}\n\nfunction fetchParseValues(dict) {\n    const result = Object.create(null);\n\n    for (const name of Object.keys(dict)) {\n        const item = dict[name];\n        const fn = item.parse || item;\n\n        if (fn) {\n            result[name] = fn;\n        }\n    }\n\n    return result;\n}\n\nfunction processConfig(config) {\n    const parseConfig = {\n        context: Object.create(null),\n        features: Object.assign(Object.create(null), config.features),\n        scope: Object.assign(Object.create(null), config.scope),\n        atrule: fetchParseValues(config.atrule),\n        pseudo: fetchParseValues(config.pseudo),\n        node: fetchParseValues(config.node)\n    };\n\n    for (const [name, context] of Object.entries(config.parseContext)) {\n        switch (typeof context) {\n            case 'function':\n                parseConfig.context[name] = context;\n                break;\n\n            case 'string':\n                parseConfig.context[name] = createParseContext(context);\n                break;\n        }\n    }\n\n    return {\n        config: parseConfig,\n        ...parseConfig,\n        ...parseConfig.node\n    };\n}\n\nexport function createParser(config) {\n    let source = '';\n    let filename = '<unknown>';\n    let needPositions = false;\n    let onParseError = NOOP;\n    let onParseErrorThrow = false;\n\n    const locationMap = new OffsetToLocation();\n    const parser = Object.assign(new TokenStream(), processConfig(config || {}), {\n        parseAtrulePrelude: true,\n        parseRulePrelude: true,\n        parseValue: true,\n        parseCustomProperty: false,\n\n        readSequence,\n\n        consumeUntilBalanceEnd: () => 0,\n        consumeUntilLeftCurlyBracket(code) {\n            return code === LEFTCURLYBRACKET ? 1 : 0;\n        },\n        consumeUntilLeftCurlyBracketOrSemicolon(code) {\n            return code === LEFTCURLYBRACKET || code === SEMICOLON ? 1 : 0;\n        },\n        consumeUntilExclamationMarkOrSemicolon(code) {\n            return code === EXCLAMATIONMARK || code === SEMICOLON ? 1 : 0;\n        },\n        consumeUntilSemicolonIncluded(code) {\n            return code === SEMICOLON ? 2 : 0;\n        },\n\n        createList() {\n            return new List();\n        },\n        createSingleNodeList(node) {\n            return new List().appendData(node);\n        },\n        getFirstListNode(list) {\n            return list && list.first;\n        },\n        getLastListNode(list) {\n            return list && list.last;\n        },\n\n        parseWithFallback(consumer, fallback) {\n            const startIndex = this.tokenIndex;\n\n            try {\n                return consumer.call(this);\n            } catch (e) {\n                if (onParseErrorThrow) {\n                    throw e;\n                }\n\n                this.skip(startIndex - this.tokenIndex);\n                const fallbackNode = fallback.call(this);\n\n                onParseErrorThrow = true;\n                onParseError(e, fallbackNode);\n                onParseErrorThrow = false;\n\n                return fallbackNode;\n            }\n        },\n\n        lookupNonWSType(offset) {\n            let type;\n\n            do {\n                type = this.lookupType(offset++);\n                if (type !== WhiteSpace && type !== Comment) {\n                    return type;\n                }\n            } while (type !== NULL);\n\n            return NULL;\n        },\n\n        charCodeAt(offset) {\n            return offset >= 0 && offset < source.length ? source.charCodeAt(offset) : 0;\n        },\n        substring(offsetStart, offsetEnd) {\n            return source.substring(offsetStart, offsetEnd);\n        },\n        substrToCursor(start) {\n            return this.source.substring(start, this.tokenStart);\n        },\n\n        cmpChar(offset, charCode) {\n            return cmpChar(source, offset, charCode);\n        },\n        cmpStr(offsetStart, offsetEnd, str) {\n            return cmpStr(source, offsetStart, offsetEnd, str);\n        },\n\n        consume(tokenType) {\n            const start = this.tokenStart;\n\n            this.eat(tokenType);\n\n            return this.substrToCursor(start);\n        },\n        consumeFunctionName() {\n            const name = source.substring(this.tokenStart, this.tokenEnd - 1);\n\n            this.eat(FunctionToken);\n\n            return name;\n        },\n        consumeNumber(type) {\n            const number = source.substring(this.tokenStart, consumeNumber(source, this.tokenStart));\n\n            this.eat(type);\n\n            return number;\n        },\n\n        eat(tokenType) {\n            if (this.tokenType !== tokenType) {\n                const tokenName = tokenNames[tokenType].slice(0, -6).replace(/-/g, ' ').replace(/^./, m => m.toUpperCase());\n                let message = `${/[[\\](){}]/.test(tokenName) ? `\"${tokenName}\"` : tokenName} is expected`;\n                let offset = this.tokenStart;\n\n                // tweak message and offset\n                switch (tokenType) {\n                    case Ident:\n                        // when identifier is expected but there is a function or url\n                        if (this.tokenType === FunctionToken || this.tokenType === Url) {\n                            offset = this.tokenEnd - 1;\n                            message = 'Identifier is expected but function found';\n                        } else {\n                            message = 'Identifier is expected';\n                        }\n                        break;\n\n                    case Hash:\n                        if (this.isDelim(NUMBERSIGN)) {\n                            this.next();\n                            offset++;\n                            message = 'Name is expected';\n                        }\n                        break;\n\n                    case Percentage:\n                        if (this.tokenType === NumberToken) {\n                            offset = this.tokenEnd;\n                            message = 'Percent sign is expected';\n                        }\n                        break;\n                }\n\n                this.error(message, offset);\n            }\n\n            this.next();\n        },\n        eatIdent(name) {\n            if (this.tokenType !== Ident || this.lookupValue(0, name) === false) {\n                this.error(`Identifier \"${name}\" is expected`);\n            }\n\n            this.next();\n        },\n        eatDelim(code) {\n            if (!this.isDelim(code)) {\n                this.error(`Delim \"${String.fromCharCode(code)}\" is expected`);\n            }\n\n            this.next();\n        },\n\n        getLocation(start, end) {\n            if (needPositions) {\n                return locationMap.getLocationRange(\n                    start,\n                    end,\n                    filename\n                );\n            }\n\n            return null;\n        },\n        getLocationFromList(list) {\n            if (needPositions) {\n                const head = this.getFirstListNode(list);\n                const tail = this.getLastListNode(list);\n                return locationMap.getLocationRange(\n                    head !== null ? head.loc.start.offset - locationMap.startOffset : this.tokenStart,\n                    tail !== null ? tail.loc.end.offset - locationMap.startOffset : this.tokenStart,\n                    filename\n                );\n            }\n\n            return null;\n        },\n\n        error(message, offset) {\n            const location = typeof offset !== 'undefined' && offset < source.length\n                ? locationMap.getLocation(offset)\n                : this.eof\n                    ? locationMap.getLocation(findWhiteSpaceStart(source, source.length - 1))\n                    : locationMap.getLocation(this.tokenStart);\n\n            throw new SyntaxError(\n                message || 'Unexpected input',\n                source,\n                location.offset,\n                location.line,\n                location.column,\n                locationMap.startLine,\n                locationMap.startColumn\n            );\n        }\n    });\n\n    const parse = function(source_, options) {\n        source = source_;\n        options = options || {};\n\n        parser.setSource(source, tokenize);\n        locationMap.setSource(\n            source,\n            options.offset,\n            options.line,\n            options.column\n        );\n\n        filename = options.filename || '<unknown>';\n        needPositions = Boolean(options.positions);\n        onParseError = typeof options.onParseError === 'function' ? options.onParseError : NOOP;\n        onParseErrorThrow = false;\n\n        parser.parseAtrulePrelude = 'parseAtrulePrelude' in options ? Boolean(options.parseAtrulePrelude) : true;\n        parser.parseRulePrelude = 'parseRulePrelude' in options ? Boolean(options.parseRulePrelude) : true;\n        parser.parseValue = 'parseValue' in options ? Boolean(options.parseValue) : true;\n        parser.parseCustomProperty = 'parseCustomProperty' in options ? Boolean(options.parseCustomProperty) : false;\n\n        const { context = 'default', onComment } = options;\n\n        if (context in parser.context === false) {\n            throw new Error('Unknown context `' + context + '`');\n        }\n\n        if (typeof onComment === 'function') {\n            parser.forEachToken((type, start, end) => {\n                if (type === Comment) {\n                    const loc = parser.getLocation(start, end);\n                    const value = cmpStr(source, end - 2, end, '*/')\n                        ? source.slice(start + 2, end - 2)\n                        : source.slice(start + 2, end);\n\n                    onComment(value, loc);\n                }\n            });\n        }\n\n        const ast = parser.context[context].call(parser, options);\n\n        if (!parser.eof) {\n            parser.error();\n        }\n\n        return ast;\n    };\n\n    return Object.assign(parse, {\n        SyntaxError,\n        config: parser.config\n    });\n};\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar intToCharMap = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');\n\n/**\n * Encode an integer in the range of 0 to 63 to a single base 64 digit.\n */\nexports.encode = function (number) {\n  if (0 <= number && number < intToCharMap.length) {\n    return intToCharMap[number];\n  }\n  throw new TypeError(\"Must be between 0 and 63: \" + number);\n};\n\n/**\n * Decode a single base 64 character code digit to an integer. Returns -1 on\n * failure.\n */\nexports.decode = function (charCode) {\n  var bigA = 65;     // 'A'\n  var bigZ = 90;     // 'Z'\n\n  var littleA = 97;  // 'a'\n  var littleZ = 122; // 'z'\n\n  var zero = 48;     // '0'\n  var nine = 57;     // '9'\n\n  var plus = 43;     // '+'\n  var slash = 47;    // '/'\n\n  var littleOffset = 26;\n  var numberOffset = 52;\n\n  // 0 - 25: ABCDEFGHIJKLMNOPQRSTUVWXYZ\n  if (bigA <= charCode && charCode <= bigZ) {\n    return (charCode - bigA);\n  }\n\n  // 26 - 51: abcdefghijklmnopqrstuvwxyz\n  if (littleA <= charCode && charCode <= littleZ) {\n    return (charCode - littleA + littleOffset);\n  }\n\n  // 52 - 61: 0123456789\n  if (zero <= charCode && charCode <= nine) {\n    return (charCode - zero + numberOffset);\n  }\n\n  // 62: +\n  if (charCode == plus) {\n    return 62;\n  }\n\n  // 63: /\n  if (charCode == slash) {\n    return 63;\n  }\n\n  // Invalid base64 digit.\n  return -1;\n};\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n *\n * Based on the Base 64 VLQ implementation in Closure Compiler:\n * https://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/debugging/sourcemap/Base64VLQ.java\n *\n * Copyright 2011 The Closure Compiler Authors. All rights reserved.\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *  * Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above\n *    copyright notice, this list of conditions and the following\n *    disclaimer in the documentation and/or other materials provided\n *    with the distribution.\n *  * Neither the name of Google Inc. nor the names of its\n *    contributors may be used to endorse or promote products derived\n *    from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nvar base64 = require('./base64');\n\n// A single base 64 digit can contain 6 bits of data. For the base 64 variable\n// length quantities we use in the source map spec, the first bit is the sign,\n// the next four bits are the actual value, and the 6th bit is the\n// continuation bit. The continuation bit tells us whether there are more\n// digits in this value following this digit.\n//\n//   Continuation\n//   |    Sign\n//   |    |\n//   V    V\n//   101011\n\nvar VLQ_BASE_SHIFT = 5;\n\n// binary: 100000\nvar VLQ_BASE = 1 << VLQ_BASE_SHIFT;\n\n// binary: 011111\nvar VLQ_BASE_MASK = VLQ_BASE - 1;\n\n// binary: 100000\nvar VLQ_CONTINUATION_BIT = VLQ_BASE;\n\n/**\n * Converts from a two-complement value to a value where the sign bit is\n * placed in the least significant bit.  For example, as decimals:\n *   1 becomes 2 (10 binary), -1 becomes 3 (11 binary)\n *   2 becomes 4 (100 binary), -2 becomes 5 (101 binary)\n */\nfunction toVLQSigned(aValue) {\n  return aValue < 0\n    ? ((-aValue) << 1) + 1\n    : (aValue << 1) + 0;\n}\n\n/**\n * Converts to a two-complement value from a value where the sign bit is\n * placed in the least significant bit.  For example, as decimals:\n *   2 (10 binary) becomes 1, 3 (11 binary) becomes -1\n *   4 (100 binary) becomes 2, 5 (101 binary) becomes -2\n */\nfunction fromVLQSigned(aValue) {\n  var isNegative = (aValue & 1) === 1;\n  var shifted = aValue >> 1;\n  return isNegative\n    ? -shifted\n    : shifted;\n}\n\n/**\n * Returns the base 64 VLQ encoded value.\n */\nexports.encode = function base64VLQ_encode(aValue) {\n  var encoded = \"\";\n  var digit;\n\n  var vlq = toVLQSigned(aValue);\n\n  do {\n    digit = vlq & VLQ_BASE_MASK;\n    vlq >>>= VLQ_BASE_SHIFT;\n    if (vlq > 0) {\n      // There are still more digits in this value, so we must make sure the\n      // continuation bit is marked.\n      digit |= VLQ_CONTINUATION_BIT;\n    }\n    encoded += base64.encode(digit);\n  } while (vlq > 0);\n\n  return encoded;\n};\n\n/**\n * Decodes the next base 64 VLQ value from the given string and returns the\n * value and the rest of the string via the out parameter.\n */\nexports.decode = function base64VLQ_decode(aStr, aIndex, aOutParam) {\n  var strLen = aStr.length;\n  var result = 0;\n  var shift = 0;\n  var continuation, digit;\n\n  do {\n    if (aIndex >= strLen) {\n      throw new Error(\"Expected more digits in base 64 VLQ value.\");\n    }\n\n    digit = base64.decode(aStr.charCodeAt(aIndex++));\n    if (digit === -1) {\n      throw new Error(\"Invalid base64 digit: \" + aStr.charAt(aIndex - 1));\n    }\n\n    continuation = !!(digit & VLQ_CONTINUATION_BIT);\n    digit &= VLQ_BASE_MASK;\n    result = result + (digit << shift);\n    shift += VLQ_BASE_SHIFT;\n  } while (continuation);\n\n  aOutParam.value = fromVLQSigned(result);\n  aOutParam.rest = aIndex;\n};\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\n/**\n * This is a helper function for getting values from parameter/options\n * objects.\n *\n * @param args The object we are extracting values from\n * @param name The name of the property we are getting.\n * @param defaultValue An optional value to return if the property is missing\n * from the object. If this is not specified and the property is missing, an\n * error will be thrown.\n */\nfunction getArg(aArgs, aName, aDefaultValue) {\n  if (aName in aArgs) {\n    return aArgs[aName];\n  } else if (arguments.length === 3) {\n    return aDefaultValue;\n  } else {\n    throw new Error('\"' + aName + '\" is a required argument.');\n  }\n}\nexports.getArg = getArg;\n\nvar urlRegexp = /^(?:([\\w+\\-.]+):)?\\/\\/(?:(\\w+:\\w+)@)?([\\w.-]*)(?::(\\d+))?(.*)$/;\nvar dataUrlRegexp = /^data:.+\\,.+$/;\n\nfunction urlParse(aUrl) {\n  var match = aUrl.match(urlRegexp);\n  if (!match) {\n    return null;\n  }\n  return {\n    scheme: match[1],\n    auth: match[2],\n    host: match[3],\n    port: match[4],\n    path: match[5]\n  };\n}\nexports.urlParse = urlParse;\n\nfunction urlGenerate(aParsedUrl) {\n  var url = '';\n  if (aParsedUrl.scheme) {\n    url += aParsedUrl.scheme + ':';\n  }\n  url += '//';\n  if (aParsedUrl.auth) {\n    url += aParsedUrl.auth + '@';\n  }\n  if (aParsedUrl.host) {\n    url += aParsedUrl.host;\n  }\n  if (aParsedUrl.port) {\n    url += \":\" + aParsedUrl.port\n  }\n  if (aParsedUrl.path) {\n    url += aParsedUrl.path;\n  }\n  return url;\n}\nexports.urlGenerate = urlGenerate;\n\nvar MAX_CACHED_INPUTS = 32;\n\n/**\n * Takes some function `f(input) -> result` and returns a memoized version of\n * `f`.\n *\n * We keep at most `MAX_CACHED_INPUTS` memoized results of `f` alive. The\n * memoization is a dumb-simple, linear least-recently-used cache.\n */\nfunction lruMemoize(f) {\n  var cache = [];\n\n  return function(input) {\n    for (var i = 0; i < cache.length; i++) {\n      if (cache[i].input === input) {\n        var temp = cache[0];\n        cache[0] = cache[i];\n        cache[i] = temp;\n        return cache[0].result;\n      }\n    }\n\n    var result = f(input);\n\n    cache.unshift({\n      input,\n      result,\n    });\n\n    if (cache.length > MAX_CACHED_INPUTS) {\n      cache.pop();\n    }\n\n    return result;\n  };\n}\n\n/**\n * Normalizes a path, or the path portion of a URL:\n *\n * - Replaces consecutive slashes with one slash.\n * - Removes unnecessary '.' parts.\n * - Removes unnecessary '<dir>/..' parts.\n *\n * Based on code in the Node.js 'path' core module.\n *\n * @param aPath The path or url to normalize.\n */\nvar normalize = lruMemoize(function normalize(aPath) {\n  var path = aPath;\n  var url = urlParse(aPath);\n  if (url) {\n    if (!url.path) {\n      return aPath;\n    }\n    path = url.path;\n  }\n  var isAbsolute = exports.isAbsolute(path);\n  // Split the path into parts between `/` characters. This is much faster than\n  // using `.split(/\\/+/g)`.\n  var parts = [];\n  var start = 0;\n  var i = 0;\n  while (true) {\n    start = i;\n    i = path.indexOf(\"/\", start);\n    if (i === -1) {\n      parts.push(path.slice(start));\n      break;\n    } else {\n      parts.push(path.slice(start, i));\n      while (i < path.length && path[i] === \"/\") {\n        i++;\n      }\n    }\n  }\n\n  for (var part, up = 0, i = parts.length - 1; i >= 0; i--) {\n    part = parts[i];\n    if (part === '.') {\n      parts.splice(i, 1);\n    } else if (part === '..') {\n      up++;\n    } else if (up > 0) {\n      if (part === '') {\n        // The first part is blank if the path is absolute. Trying to go\n        // above the root is a no-op. Therefore we can remove all '..' parts\n        // directly after the root.\n        parts.splice(i + 1, up);\n        up = 0;\n      } else {\n        parts.splice(i, 2);\n        up--;\n      }\n    }\n  }\n  path = parts.join('/');\n\n  if (path === '') {\n    path = isAbsolute ? '/' : '.';\n  }\n\n  if (url) {\n    url.path = path;\n    return urlGenerate(url);\n  }\n  return path;\n});\nexports.normalize = normalize;\n\n/**\n * Joins two paths/URLs.\n *\n * @param aRoot The root path or URL.\n * @param aPath The path or URL to be joined with the root.\n *\n * - If aPath is a URL or a data URI, aPath is returned, unless aPath is a\n *   scheme-relative URL: Then the scheme of aRoot, if any, is prepended\n *   first.\n * - Otherwise aPath is a path. If aRoot is a URL, then its path portion\n *   is updated with the result and aRoot is returned. Otherwise the result\n *   is returned.\n *   - If aPath is absolute, the result is aPath.\n *   - Otherwise the two paths are joined with a slash.\n * - Joining for example 'http://' and 'www.example.com' is also supported.\n */\nfunction join(aRoot, aPath) {\n  if (aRoot === \"\") {\n    aRoot = \".\";\n  }\n  if (aPath === \"\") {\n    aPath = \".\";\n  }\n  var aPathUrl = urlParse(aPath);\n  var aRootUrl = urlParse(aRoot);\n  if (aRootUrl) {\n    aRoot = aRootUrl.path || '/';\n  }\n\n  // `join(foo, '//www.example.org')`\n  if (aPathUrl && !aPathUrl.scheme) {\n    if (aRootUrl) {\n      aPathUrl.scheme = aRootUrl.scheme;\n    }\n    return urlGenerate(aPathUrl);\n  }\n\n  if (aPathUrl || aPath.match(dataUrlRegexp)) {\n    return aPath;\n  }\n\n  // `join('http://', 'www.example.com')`\n  if (aRootUrl && !aRootUrl.host && !aRootUrl.path) {\n    aRootUrl.host = aPath;\n    return urlGenerate(aRootUrl);\n  }\n\n  var joined = aPath.charAt(0) === '/'\n    ? aPath\n    : normalize(aRoot.replace(/\\/+$/, '') + '/' + aPath);\n\n  if (aRootUrl) {\n    aRootUrl.path = joined;\n    return urlGenerate(aRootUrl);\n  }\n  return joined;\n}\nexports.join = join;\n\nexports.isAbsolute = function (aPath) {\n  return aPath.charAt(0) === '/' || urlRegexp.test(aPath);\n};\n\n/**\n * Make a path relative to a URL or another path.\n *\n * @param aRoot The root path or URL.\n * @param aPath The path or URL to be made relative to aRoot.\n */\nfunction relative(aRoot, aPath) {\n  if (aRoot === \"\") {\n    aRoot = \".\";\n  }\n\n  aRoot = aRoot.replace(/\\/$/, '');\n\n  // It is possible for the path to be above the root. In this case, simply\n  // checking whether the root is a prefix of the path won't work. Instead, we\n  // need to remove components from the root one by one, until either we find\n  // a prefix that fits, or we run out of components to remove.\n  var level = 0;\n  while (aPath.indexOf(aRoot + '/') !== 0) {\n    var index = aRoot.lastIndexOf(\"/\");\n    if (index < 0) {\n      return aPath;\n    }\n\n    // If the only part of the root that is left is the scheme (i.e. http://,\n    // file:///, etc.), one or more slashes (/), or simply nothing at all, we\n    // have exhausted all components, so the path is not relative to the root.\n    aRoot = aRoot.slice(0, index);\n    if (aRoot.match(/^([^\\/]+:\\/)?\\/*$/)) {\n      return aPath;\n    }\n\n    ++level;\n  }\n\n  // Make sure we add a \"../\" for each component we removed from the root.\n  return Array(level + 1).join(\"../\") + aPath.substr(aRoot.length + 1);\n}\nexports.relative = relative;\n\nvar supportsNullProto = (function () {\n  var obj = Object.create(null);\n  return !('__proto__' in obj);\n}());\n\nfunction identity (s) {\n  return s;\n}\n\n/**\n * Because behavior goes wacky when you set `__proto__` on objects, we\n * have to prefix all the strings in our set with an arbitrary character.\n *\n * See https://github.com/mozilla/source-map/pull/31 and\n * https://github.com/mozilla/source-map/issues/30\n *\n * @param String aStr\n */\nfunction toSetString(aStr) {\n  if (isProtoString(aStr)) {\n    return '$' + aStr;\n  }\n\n  return aStr;\n}\nexports.toSetString = supportsNullProto ? identity : toSetString;\n\nfunction fromSetString(aStr) {\n  if (isProtoString(aStr)) {\n    return aStr.slice(1);\n  }\n\n  return aStr;\n}\nexports.fromSetString = supportsNullProto ? identity : fromSetString;\n\nfunction isProtoString(s) {\n  if (!s) {\n    return false;\n  }\n\n  var length = s.length;\n\n  if (length < 9 /* \"__proto__\".length */) {\n    return false;\n  }\n\n  if (s.charCodeAt(length - 1) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 2) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 3) !== 111 /* 'o' */ ||\n      s.charCodeAt(length - 4) !== 116 /* 't' */ ||\n      s.charCodeAt(length - 5) !== 111 /* 'o' */ ||\n      s.charCodeAt(length - 6) !== 114 /* 'r' */ ||\n      s.charCodeAt(length - 7) !== 112 /* 'p' */ ||\n      s.charCodeAt(length - 8) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 9) !== 95  /* '_' */) {\n    return false;\n  }\n\n  for (var i = length - 10; i >= 0; i--) {\n    if (s.charCodeAt(i) !== 36 /* '$' */) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Comparator between two mappings where the original positions are compared.\n *\n * Optionally pass in `true` as `onlyCompareGenerated` to consider two\n * mappings with the same original source/line/column, but different generated\n * line and column the same. Useful when searching for a mapping with a\n * stubbed out mapping.\n */\nfunction compareByOriginalPositions(mappingA, mappingB, onlyCompareOriginal) {\n  var cmp = strcmp(mappingA.source, mappingB.source);\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0 || onlyCompareOriginal) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByOriginalPositions = compareByOriginalPositions;\n\nfunction compareByOriginalPositionsNoSource(mappingA, mappingB, onlyCompareOriginal) {\n  var cmp\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0 || onlyCompareOriginal) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByOriginalPositionsNoSource = compareByOriginalPositionsNoSource;\n\n/**\n * Comparator between two mappings with deflated source and name indices where\n * the generated positions are compared.\n *\n * Optionally pass in `true` as `onlyCompareGenerated` to consider two\n * mappings with the same generated line and column, but different\n * source/name/original line and column the same. Useful when searching for a\n * mapping with a stubbed out mapping.\n */\nfunction compareByGeneratedPositionsDeflated(mappingA, mappingB, onlyCompareGenerated) {\n  var cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0 || onlyCompareGenerated) {\n    return cmp;\n  }\n\n  cmp = strcmp(mappingA.source, mappingB.source);\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByGeneratedPositionsDeflated = compareByGeneratedPositionsDeflated;\n\nfunction compareByGeneratedPositionsDeflatedNoLine(mappingA, mappingB, onlyCompareGenerated) {\n  var cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0 || onlyCompareGenerated) {\n    return cmp;\n  }\n\n  cmp = strcmp(mappingA.source, mappingB.source);\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByGeneratedPositionsDeflatedNoLine = compareByGeneratedPositionsDeflatedNoLine;\n\nfunction strcmp(aStr1, aStr2) {\n  if (aStr1 === aStr2) {\n    return 0;\n  }\n\n  if (aStr1 === null) {\n    return 1; // aStr2 !== null\n  }\n\n  if (aStr2 === null) {\n    return -1; // aStr1 !== null\n  }\n\n  if (aStr1 > aStr2) {\n    return 1;\n  }\n\n  return -1;\n}\n\n/**\n * Comparator between two mappings with inflated source and name strings where\n * the generated positions are compared.\n */\nfunction compareByGeneratedPositionsInflated(mappingA, mappingB) {\n  var cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = strcmp(mappingA.source, mappingB.source);\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByGeneratedPositionsInflated = compareByGeneratedPositionsInflated;\n\n/**\n * Strip any JSON XSSI avoidance prefix from the string (as documented\n * in the source maps specification), and then parse the string as\n * JSON.\n */\nfunction parseSourceMapInput(str) {\n  return JSON.parse(str.replace(/^\\)]}'[^\\n]*\\n/, ''));\n}\nexports.parseSourceMapInput = parseSourceMapInput;\n\n/**\n * Compute the URL of a source given the the source root, the source's\n * URL, and the source map's URL.\n */\nfunction computeSourceURL(sourceRoot, sourceURL, sourceMapURL) {\n  sourceURL = sourceURL || '';\n\n  if (sourceRoot) {\n    // This follows what Chrome does.\n    if (sourceRoot[sourceRoot.length - 1] !== '/' && sourceURL[0] !== '/') {\n      sourceRoot += '/';\n    }\n    // The spec says:\n    //   Line 4: An optional source root, useful for relocating source\n    //   files on a server or removing repeated values in the\n    //   “sources” entry.  This value is prepended to the individual\n    //   entries in the “source” field.\n    sourceURL = sourceRoot + sourceURL;\n  }\n\n  // Historically, SourceMapConsumer did not take the sourceMapURL as\n  // a parameter.  This mode is still somewhat supported, which is why\n  // this code block is conditional.  However, it's preferable to pass\n  // the source map URL to SourceMapConsumer, so that this function\n  // can implement the source URL resolution algorithm as outlined in\n  // the spec.  This block is basically the equivalent of:\n  //    new URL(sourceURL, sourceMapURL).toString()\n  // ... except it avoids using URL, which wasn't available in the\n  // older releases of node still supported by this library.\n  //\n  // The spec says:\n  //   If the sources are not absolute URLs after prepending of the\n  //   “sourceRoot”, the sources are resolved relative to the\n  //   SourceMap (like resolving script src in a html document).\n  if (sourceMapURL) {\n    var parsed = urlParse(sourceMapURL);\n    if (!parsed) {\n      throw new Error(\"sourceMapURL could not be parsed\");\n    }\n    if (parsed.path) {\n      // Strip the last path component, but keep the \"/\".\n      var index = parsed.path.lastIndexOf('/');\n      if (index >= 0) {\n        parsed.path = parsed.path.substring(0, index + 1);\n      }\n    }\n    sourceURL = join(urlGenerate(parsed), sourceURL);\n  }\n\n  return normalize(sourceURL);\n}\nexports.computeSourceURL = computeSourceURL;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = require('./util');\nvar has = Object.prototype.hasOwnProperty;\nvar hasNativeMap = typeof Map !== \"undefined\";\n\n/**\n * A data structure which is a combination of an array and a set. Adding a new\n * member is O(1), testing for membership is O(1), and finding the index of an\n * element is O(1). Removing elements from the set is not supported. Only\n * strings are supported for membership.\n */\nfunction ArraySet() {\n  this._array = [];\n  this._set = hasNativeMap ? new Map() : Object.create(null);\n}\n\n/**\n * Static method for creating ArraySet instances from an existing array.\n */\nArraySet.fromArray = function ArraySet_fromArray(aArray, aAllowDuplicates) {\n  var set = new ArraySet();\n  for (var i = 0, len = aArray.length; i < len; i++) {\n    set.add(aArray[i], aAllowDuplicates);\n  }\n  return set;\n};\n\n/**\n * Return how many unique items are in this ArraySet. If duplicates have been\n * added, than those do not count towards the size.\n *\n * @returns Number\n */\nArraySet.prototype.size = function ArraySet_size() {\n  return hasNativeMap ? this._set.size : Object.getOwnPropertyNames(this._set).length;\n};\n\n/**\n * Add the given string to this set.\n *\n * @param String aStr\n */\nArraySet.prototype.add = function ArraySet_add(aStr, aAllowDuplicates) {\n  var sStr = hasNativeMap ? aStr : util.toSetString(aStr);\n  var isDuplicate = hasNativeMap ? this.has(aStr) : has.call(this._set, sStr);\n  var idx = this._array.length;\n  if (!isDuplicate || aAllowDuplicates) {\n    this._array.push(aStr);\n  }\n  if (!isDuplicate) {\n    if (hasNativeMap) {\n      this._set.set(aStr, idx);\n    } else {\n      this._set[sStr] = idx;\n    }\n  }\n};\n\n/**\n * Is the given string a member of this set?\n *\n * @param String aStr\n */\nArraySet.prototype.has = function ArraySet_has(aStr) {\n  if (hasNativeMap) {\n    return this._set.has(aStr);\n  } else {\n    var sStr = util.toSetString(aStr);\n    return has.call(this._set, sStr);\n  }\n};\n\n/**\n * What is the index of the given string in the array?\n *\n * @param String aStr\n */\nArraySet.prototype.indexOf = function ArraySet_indexOf(aStr) {\n  if (hasNativeMap) {\n    var idx = this._set.get(aStr);\n    if (idx >= 0) {\n        return idx;\n    }\n  } else {\n    var sStr = util.toSetString(aStr);\n    if (has.call(this._set, sStr)) {\n      return this._set[sStr];\n    }\n  }\n\n  throw new Error('\"' + aStr + '\" is not in the set.');\n};\n\n/**\n * What is the element at the given index?\n *\n * @param Number aIdx\n */\nArraySet.prototype.at = function ArraySet_at(aIdx) {\n  if (aIdx >= 0 && aIdx < this._array.length) {\n    return this._array[aIdx];\n  }\n  throw new Error('No element indexed by ' + aIdx);\n};\n\n/**\n * Returns the array representation of this set (which has the proper indices\n * indicated by indexOf). Note that this is a copy of the internal array used\n * for storing the members so that no one can mess with internal state.\n */\nArraySet.prototype.toArray = function ArraySet_toArray() {\n  return this._array.slice();\n};\n\nexports.ArraySet = ArraySet;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2014 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = require('./util');\n\n/**\n * Determine whether mappingB is after mappingA with respect to generated\n * position.\n */\nfunction generatedPositionAfter(mappingA, mappingB) {\n  // Optimized for most common case\n  var lineA = mappingA.generatedLine;\n  var lineB = mappingB.generatedLine;\n  var columnA = mappingA.generatedColumn;\n  var columnB = mappingB.generatedColumn;\n  return lineB > lineA || lineB == lineA && columnB >= columnA ||\n         util.compareByGeneratedPositionsInflated(mappingA, mappingB) <= 0;\n}\n\n/**\n * A data structure to provide a sorted view of accumulated mappings in a\n * performance conscious manner. It trades a neglibable overhead in general\n * case for a large speedup in case of mappings being added in order.\n */\nfunction MappingList() {\n  this._array = [];\n  this._sorted = true;\n  // Serves as infimum\n  this._last = {generatedLine: -1, generatedColumn: 0};\n}\n\n/**\n * Iterate through internal items. This method takes the same arguments that\n * `Array.prototype.forEach` takes.\n *\n * NOTE: The order of the mappings is NOT guaranteed.\n */\nMappingList.prototype.unsortedForEach =\n  function MappingList_forEach(aCallback, aThisArg) {\n    this._array.forEach(aCallback, aThisArg);\n  };\n\n/**\n * Add the given source mapping.\n *\n * @param Object aMapping\n */\nMappingList.prototype.add = function MappingList_add(aMapping) {\n  if (generatedPositionAfter(this._last, aMapping)) {\n    this._last = aMapping;\n    this._array.push(aMapping);\n  } else {\n    this._sorted = false;\n    this._array.push(aMapping);\n  }\n};\n\n/**\n * Returns the flat, sorted array of mappings. The mappings are sorted by\n * generated position.\n *\n * WARNING: This method returns internal data without copying, for\n * performance. The return value must NOT be mutated, and should be treated as\n * an immutable borrow. If you want to take ownership, you must make your own\n * copy.\n */\nMappingList.prototype.toArray = function MappingList_toArray() {\n  if (!this._sorted) {\n    this._array.sort(util.compareByGeneratedPositionsInflated);\n    this._sorted = true;\n  }\n  return this._array;\n};\n\nexports.MappingList = MappingList;\n","/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar base64VLQ = require('./base64-vlq');\nvar util = require('./util');\nvar ArraySet = require('./array-set').ArraySet;\nvar MappingList = require('./mapping-list').MappingList;\n\n/**\n * An instance of the SourceMapGenerator represents a source map which is\n * being built incrementally. You may pass an object with the following\n * properties:\n *\n *   - file: The filename of the generated source.\n *   - sourceRoot: A root for all relative URLs in this source map.\n */\nfunction SourceMapGenerator(aArgs) {\n  if (!aArgs) {\n    aArgs = {};\n  }\n  this._file = util.getArg(aArgs, 'file', null);\n  this._sourceRoot = util.getArg(aArgs, 'sourceRoot', null);\n  this._skipValidation = util.getArg(aArgs, 'skipValidation', false);\n  this._ignoreInvalidMapping = util.getArg(aArgs, 'ignoreInvalidMapping', false);\n  this._sources = new ArraySet();\n  this._names = new ArraySet();\n  this._mappings = new MappingList();\n  this._sourcesContents = null;\n}\n\nSourceMapGenerator.prototype._version = 3;\n\n/**\n * Creates a new SourceMapGenerator based on a SourceMapConsumer\n *\n * @param aSourceMapConsumer The SourceMap.\n */\nSourceMapGenerator.fromSourceMap =\n  function SourceMapGenerator_fromSourceMap(aSourceMapConsumer, generatorOps) {\n    var sourceRoot = aSourceMapConsumer.sourceRoot;\n    var generator = new SourceMapGenerator(Object.assign(generatorOps || {}, {\n      file: aSourceMapConsumer.file,\n      sourceRoot: sourceRoot\n    }));\n    aSourceMapConsumer.eachMapping(function (mapping) {\n      var newMapping = {\n        generated: {\n          line: mapping.generatedLine,\n          column: mapping.generatedColumn\n        }\n      };\n\n      if (mapping.source != null) {\n        newMapping.source = mapping.source;\n        if (sourceRoot != null) {\n          newMapping.source = util.relative(sourceRoot, newMapping.source);\n        }\n\n        newMapping.original = {\n          line: mapping.originalLine,\n          column: mapping.originalColumn\n        };\n\n        if (mapping.name != null) {\n          newMapping.name = mapping.name;\n        }\n      }\n\n      generator.addMapping(newMapping);\n    });\n    aSourceMapConsumer.sources.forEach(function (sourceFile) {\n      var sourceRelative = sourceFile;\n      if (sourceRoot !== null) {\n        sourceRelative = util.relative(sourceRoot, sourceFile);\n      }\n\n      if (!generator._sources.has(sourceRelative)) {\n        generator._sources.add(sourceRelative);\n      }\n\n      var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n      if (content != null) {\n        generator.setSourceContent(sourceFile, content);\n      }\n    });\n    return generator;\n  };\n\n/**\n * Add a single mapping from original source line and column to the generated\n * source's line and column for this source map being created. The mapping\n * object should have the following properties:\n *\n *   - generated: An object with the generated line and column positions.\n *   - original: An object with the original line and column positions.\n *   - source: The original source file (relative to the sourceRoot).\n *   - name: An optional original token name for this mapping.\n */\nSourceMapGenerator.prototype.addMapping =\n  function SourceMapGenerator_addMapping(aArgs) {\n    var generated = util.getArg(aArgs, 'generated');\n    var original = util.getArg(aArgs, 'original', null);\n    var source = util.getArg(aArgs, 'source', null);\n    var name = util.getArg(aArgs, 'name', null);\n\n    if (!this._skipValidation) {\n      if (this._validateMapping(generated, original, source, name) === false) {\n        return;\n      }\n    }\n\n    if (source != null) {\n      source = String(source);\n      if (!this._sources.has(source)) {\n        this._sources.add(source);\n      }\n    }\n\n    if (name != null) {\n      name = String(name);\n      if (!this._names.has(name)) {\n        this._names.add(name);\n      }\n    }\n\n    this._mappings.add({\n      generatedLine: generated.line,\n      generatedColumn: generated.column,\n      originalLine: original != null && original.line,\n      originalColumn: original != null && original.column,\n      source: source,\n      name: name\n    });\n  };\n\n/**\n * Set the source content for a source file.\n */\nSourceMapGenerator.prototype.setSourceContent =\n  function SourceMapGenerator_setSourceContent(aSourceFile, aSourceContent) {\n    var source = aSourceFile;\n    if (this._sourceRoot != null) {\n      source = util.relative(this._sourceRoot, source);\n    }\n\n    if (aSourceContent != null) {\n      // Add the source content to the _sourcesContents map.\n      // Create a new _sourcesContents map if the property is null.\n      if (!this._sourcesContents) {\n        this._sourcesContents = Object.create(null);\n      }\n      this._sourcesContents[util.toSetString(source)] = aSourceContent;\n    } else if (this._sourcesContents) {\n      // Remove the source file from the _sourcesContents map.\n      // If the _sourcesContents map is empty, set the property to null.\n      delete this._sourcesContents[util.toSetString(source)];\n      if (Object.keys(this._sourcesContents).length === 0) {\n        this._sourcesContents = null;\n      }\n    }\n  };\n\n/**\n * Applies the mappings of a sub-source-map for a specific source file to the\n * source map being generated. Each mapping to the supplied source file is\n * rewritten using the supplied source map. Note: The resolution for the\n * resulting mappings is the minimium of this map and the supplied map.\n *\n * @param aSourceMapConsumer The source map to be applied.\n * @param aSourceFile Optional. The filename of the source file.\n *        If omitted, SourceMapConsumer's file property will be used.\n * @param aSourceMapPath Optional. The dirname of the path to the source map\n *        to be applied. If relative, it is relative to the SourceMapConsumer.\n *        This parameter is needed when the two source maps aren't in the same\n *        directory, and the source map to be applied contains relative source\n *        paths. If so, those relative source paths need to be rewritten\n *        relative to the SourceMapGenerator.\n */\nSourceMapGenerator.prototype.applySourceMap =\n  function SourceMapGenerator_applySourceMap(aSourceMapConsumer, aSourceFile, aSourceMapPath) {\n    var sourceFile = aSourceFile;\n    // If aSourceFile is omitted, we will use the file property of the SourceMap\n    if (aSourceFile == null) {\n      if (aSourceMapConsumer.file == null) {\n        throw new Error(\n          'SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, ' +\n          'or the source map\\'s \"file\" property. Both were omitted.'\n        );\n      }\n      sourceFile = aSourceMapConsumer.file;\n    }\n    var sourceRoot = this._sourceRoot;\n    // Make \"sourceFile\" relative if an absolute Url is passed.\n    if (sourceRoot != null) {\n      sourceFile = util.relative(sourceRoot, sourceFile);\n    }\n    // Applying the SourceMap can add and remove items from the sources and\n    // the names array.\n    var newSources = new ArraySet();\n    var newNames = new ArraySet();\n\n    // Find mappings for the \"sourceFile\"\n    this._mappings.unsortedForEach(function (mapping) {\n      if (mapping.source === sourceFile && mapping.originalLine != null) {\n        // Check if it can be mapped by the source map, then update the mapping.\n        var original = aSourceMapConsumer.originalPositionFor({\n          line: mapping.originalLine,\n          column: mapping.originalColumn\n        });\n        if (original.source != null) {\n          // Copy mapping\n          mapping.source = original.source;\n          if (aSourceMapPath != null) {\n            mapping.source = util.join(aSourceMapPath, mapping.source)\n          }\n          if (sourceRoot != null) {\n            mapping.source = util.relative(sourceRoot, mapping.source);\n          }\n          mapping.originalLine = original.line;\n          mapping.originalColumn = original.column;\n          if (original.name != null) {\n            mapping.name = original.name;\n          }\n        }\n      }\n\n      var source = mapping.source;\n      if (source != null && !newSources.has(source)) {\n        newSources.add(source);\n      }\n\n      var name = mapping.name;\n      if (name != null && !newNames.has(name)) {\n        newNames.add(name);\n      }\n\n    }, this);\n    this._sources = newSources;\n    this._names = newNames;\n\n    // Copy sourcesContents of applied map.\n    aSourceMapConsumer.sources.forEach(function (sourceFile) {\n      var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n      if (content != null) {\n        if (aSourceMapPath != null) {\n          sourceFile = util.join(aSourceMapPath, sourceFile);\n        }\n        if (sourceRoot != null) {\n          sourceFile = util.relative(sourceRoot, sourceFile);\n        }\n        this.setSourceContent(sourceFile, content);\n      }\n    }, this);\n  };\n\n/**\n * A mapping can have one of the three levels of data:\n *\n *   1. Just the generated position.\n *   2. The Generated position, original position, and original source.\n *   3. Generated and original position, original source, as well as a name\n *      token.\n *\n * To maintain consistency, we validate that any new mapping being added falls\n * in to one of these categories.\n */\nSourceMapGenerator.prototype._validateMapping =\n  function SourceMapGenerator_validateMapping(aGenerated, aOriginal, aSource,\n                                              aName) {\n    // When aOriginal is truthy but has empty values for .line and .column,\n    // it is most likely a programmer error. In this case we throw a very\n    // specific error message to try to guide them the right way.\n    // For example: https://github.com/Polymer/polymer-bundler/pull/519\n    if (aOriginal && typeof aOriginal.line !== 'number' && typeof aOriginal.column !== 'number') {\n      var message = 'original.line and original.column are not numbers -- you probably meant to omit ' +\n      'the original mapping entirely and only map the generated position. If so, pass ' +\n      'null for the original mapping instead of an object with empty or null values.'\n\n      if (this._ignoreInvalidMapping) {\n        if (typeof console !== 'undefined' && console.warn) {\n          console.warn(message);\n        }\n        return false;\n      } else {\n        throw new Error(message);\n      }\n    }\n\n    if (aGenerated && 'line' in aGenerated && 'column' in aGenerated\n        && aGenerated.line > 0 && aGenerated.column >= 0\n        && !aOriginal && !aSource && !aName) {\n      // Case 1.\n      return;\n    }\n    else if (aGenerated && 'line' in aGenerated && 'column' in aGenerated\n             && aOriginal && 'line' in aOriginal && 'column' in aOriginal\n             && aGenerated.line > 0 && aGenerated.column >= 0\n             && aOriginal.line > 0 && aOriginal.column >= 0\n             && aSource) {\n      // Cases 2 and 3.\n      return;\n    }\n    else {\n      var message = 'Invalid mapping: ' + JSON.stringify({\n        generated: aGenerated,\n        source: aSource,\n        original: aOriginal,\n        name: aName\n      });\n\n      if (this._ignoreInvalidMapping) {\n        if (typeof console !== 'undefined' && console.warn) {\n          console.warn(message);\n        }\n        return false;\n      } else {\n        throw new Error(message)\n      }\n    }\n  };\n\n/**\n * Serialize the accumulated mappings in to the stream of base 64 VLQs\n * specified by the source map format.\n */\nSourceMapGenerator.prototype._serializeMappings =\n  function SourceMapGenerator_serializeMappings() {\n    var previousGeneratedColumn = 0;\n    var previousGeneratedLine = 1;\n    var previousOriginalColumn = 0;\n    var previousOriginalLine = 0;\n    var previousName = 0;\n    var previousSource = 0;\n    var result = '';\n    var next;\n    var mapping;\n    var nameIdx;\n    var sourceIdx;\n\n    var mappings = this._mappings.toArray();\n    for (var i = 0, len = mappings.length; i < len; i++) {\n      mapping = mappings[i];\n      next = ''\n\n      if (mapping.generatedLine !== previousGeneratedLine) {\n        previousGeneratedColumn = 0;\n        while (mapping.generatedLine !== previousGeneratedLine) {\n          next += ';';\n          previousGeneratedLine++;\n        }\n      }\n      else {\n        if (i > 0) {\n          if (!util.compareByGeneratedPositionsInflated(mapping, mappings[i - 1])) {\n            continue;\n          }\n          next += ',';\n        }\n      }\n\n      next += base64VLQ.encode(mapping.generatedColumn\n                                 - previousGeneratedColumn);\n      previousGeneratedColumn = mapping.generatedColumn;\n\n      if (mapping.source != null) {\n        sourceIdx = this._sources.indexOf(mapping.source);\n        next += base64VLQ.encode(sourceIdx - previousSource);\n        previousSource = sourceIdx;\n\n        // lines are stored 0-based in SourceMap spec version 3\n        next += base64VLQ.encode(mapping.originalLine - 1\n                                   - previousOriginalLine);\n        previousOriginalLine = mapping.originalLine - 1;\n\n        next += base64VLQ.encode(mapping.originalColumn\n                                   - previousOriginalColumn);\n        previousOriginalColumn = mapping.originalColumn;\n\n        if (mapping.name != null) {\n          nameIdx = this._names.indexOf(mapping.name);\n          next += base64VLQ.encode(nameIdx - previousName);\n          previousName = nameIdx;\n        }\n      }\n\n      result += next;\n    }\n\n    return result;\n  };\n\nSourceMapGenerator.prototype._generateSourcesContent =\n  function SourceMapGenerator_generateSourcesContent(aSources, aSourceRoot) {\n    return aSources.map(function (source) {\n      if (!this._sourcesContents) {\n        return null;\n      }\n      if (aSourceRoot != null) {\n        source = util.relative(aSourceRoot, source);\n      }\n      var key = util.toSetString(source);\n      return Object.prototype.hasOwnProperty.call(this._sourcesContents, key)\n        ? this._sourcesContents[key]\n        : null;\n    }, this);\n  };\n\n/**\n * Externalize the source map.\n */\nSourceMapGenerator.prototype.toJSON =\n  function SourceMapGenerator_toJSON() {\n    var map = {\n      version: this._version,\n      sources: this._sources.toArray(),\n      names: this._names.toArray(),\n      mappings: this._serializeMappings()\n    };\n    if (this._file != null) {\n      map.file = this._file;\n    }\n    if (this._sourceRoot != null) {\n      map.sourceRoot = this._sourceRoot;\n    }\n    if (this._sourcesContents) {\n      map.sourcesContent = this._generateSourcesContent(map.sources, map.sourceRoot);\n    }\n\n    return map;\n  };\n\n/**\n * Render the source map being generated to a string.\n */\nSourceMapGenerator.prototype.toString =\n  function SourceMapGenerator_toString() {\n    return JSON.stringify(this.toJSON());\n  };\n\nexports.SourceMapGenerator = SourceMapGenerator;\n","import { SourceMapGenerator } from 'source-map-js/lib/source-map-generator.js';\n\nconst trackNodes = new Set(['Atrule', 'Selector', 'Declaration']);\n\nexport function generateSourceMap(handlers) {\n    const map = new SourceMapGenerator();\n    const generated = {\n        line: 1,\n        column: 0\n    };\n    const original = {\n        line: 0, // should be zero to add first mapping\n        column: 0\n    };\n    const activatedGenerated = {\n        line: 1,\n        column: 0\n    };\n    const activatedMapping = {\n        generated: activatedGenerated\n    };\n    let line = 1;\n    let column = 0;\n    let sourceMappingActive = false;\n\n    const origHandlersNode = handlers.node;\n    handlers.node = function(node) {\n        if (node.loc && node.loc.start && trackNodes.has(node.type)) {\n            const nodeLine = node.loc.start.line;\n            const nodeColumn = node.loc.start.column - 1;\n\n            if (original.line !== nodeLine ||\n                original.column !== nodeColumn) {\n                original.line = nodeLine;\n                original.column = nodeColumn;\n\n                generated.line = line;\n                generated.column = column;\n\n                if (sourceMappingActive) {\n                    sourceMappingActive = false;\n                    if (generated.line !== activatedGenerated.line ||\n                        generated.column !== activatedGenerated.column) {\n                        map.addMapping(activatedMapping);\n                    }\n                }\n\n                sourceMappingActive = true;\n                map.addMapping({\n                    source: node.loc.source,\n                    original,\n                    generated\n                });\n            }\n        }\n\n        origHandlersNode.call(this, node);\n\n        if (sourceMappingActive && trackNodes.has(node.type)) {\n            activatedGenerated.line = line;\n            activatedGenerated.column = column;\n        }\n    };\n\n    const origHandlersEmit = handlers.emit;\n    handlers.emit = function(value, type, auto) {\n        for (let i = 0; i < value.length; i++) {\n            if (value.charCodeAt(i) === 10) { // \\n\n                line++;\n                column = 0;\n            } else {\n                column++;\n            }\n        }\n\n        origHandlersEmit(value, type, auto);\n    };\n\n    const origHandlersResult = handlers.result;\n    handlers.result = function() {\n        if (sourceMappingActive) {\n            map.addMapping(activatedMapping);\n        }\n\n        return {\n            css: origHandlersResult(),\n            map\n        };\n    };\n\n    return handlers;\n};\n","import {\n    WhiteSpace,\n    Delim,\n    Ident,\n    Function as FunctionToken,\n    Url,\n    BadUrl,\n    AtKeyword,\n    Hash,\n    Percentage,\n    Dimension,\n    Number as NumberToken,\n    String as StringToken,\n    Colon,\n    LeftParenthesis,\n    RightParenthesis,\n    CDC\n} from '../tokenizer/index.js';\n\nconst PLUSSIGN = 0x002B;    // U+002B PLUS SIGN (+)\nconst HYPHENMINUS = 0x002D; // U+002D HYPHEN-MINUS (-)\n\nconst code = (type, value) => {\n    if (type === Delim) {\n        type = value;\n    }\n\n    if (typeof type === 'string') {\n        const charCode = type.charCodeAt(0);\n        return charCode > 0x7F ? 0x8000 : charCode << 8;\n    }\n\n    return type;\n};\n\n// https://www.w3.org/TR/css-syntax-3/#serialization\n// The only requirement for serialization is that it must \"round-trip\" with parsing,\n// that is, parsing the stylesheet must produce the same data structures as parsing,\n// serializing, and parsing again, except for consecutive <whitespace-token>s,\n// which may be collapsed into a single token.\n\nconst specPairs = [\n    [Ident, Ident],\n    [Ident, FunctionToken],\n    [Ident, Url],\n    [Ident, BadUrl],\n    [Ident, '-'],\n    [Ident, NumberToken],\n    [Ident, Percentage],\n    [Ident, Dimension],\n    [Ident, CDC],\n    [Ident, LeftParenthesis],\n\n    [AtKeyword, Ident],\n    [AtKeyword, FunctionToken],\n    [AtKeyword, Url],\n    [AtKeyword, BadUrl],\n    [AtKeyword, '-'],\n    [AtKeyword, NumberToken],\n    [AtKeyword, Percentage],\n    [AtKeyword, Dimension],\n    [AtKeyword, CDC],\n\n    [Hash, Ident],\n    [Hash, FunctionToken],\n    [Hash, Url],\n    [Hash, BadUrl],\n    [Hash, '-'],\n    [Hash, NumberToken],\n    [Hash, Percentage],\n    [Hash, Dimension],\n    [Hash, CDC],\n\n    [Dimension, Ident],\n    [Dimension, FunctionToken],\n    [Dimension, Url],\n    [Dimension, BadUrl],\n    [Dimension, '-'],\n    [Dimension, NumberToken],\n    [Dimension, Percentage],\n    [Dimension, Dimension],\n    [Dimension, CDC],\n\n    ['#', Ident],\n    ['#', FunctionToken],\n    ['#', Url],\n    ['#', BadUrl],\n    ['#', '-'],\n    ['#', NumberToken],\n    ['#', Percentage],\n    ['#', Dimension],\n    ['#', CDC], // https://github.com/w3c/csswg-drafts/pull/6874\n\n    ['-', Ident],\n    ['-', FunctionToken],\n    ['-', Url],\n    ['-', BadUrl],\n    ['-', '-'],\n    ['-', NumberToken],\n    ['-', Percentage],\n    ['-', Dimension],\n    ['-', CDC], // https://github.com/w3c/csswg-drafts/pull/6874\n\n    [NumberToken, Ident],\n    [NumberToken, FunctionToken],\n    [NumberToken, Url],\n    [NumberToken, BadUrl],\n    [NumberToken, NumberToken],\n    [NumberToken, Percentage],\n    [NumberToken, Dimension],\n    [NumberToken, '%'],\n    [NumberToken, CDC], // https://github.com/w3c/csswg-drafts/pull/6874\n\n    ['@', Ident],\n    ['@', FunctionToken],\n    ['@', Url],\n    ['@', BadUrl],\n    ['@', '-'],\n    ['@', CDC], // https://github.com/w3c/csswg-drafts/pull/6874\n\n    ['.', NumberToken],\n    ['.', Percentage],\n    ['.', Dimension],\n\n    ['+', NumberToken],\n    ['+', Percentage],\n    ['+', Dimension],\n\n    ['/', '*']\n];\n// validate with scripts/generate-safe\nconst safePairs = specPairs.concat([\n    [Ident, Hash],\n\n    [Dimension, Hash],\n\n    [Hash, Hash],\n\n    [AtKeyword, LeftParenthesis],\n    [AtKeyword, StringToken],\n    [AtKeyword, Colon],\n\n    [Percentage, Percentage],\n    [Percentage, Dimension],\n    [Percentage, FunctionToken],\n    [Percentage, '-'],\n\n    [RightParenthesis, Ident],\n    [RightParenthesis, FunctionToken],\n    [RightParenthesis, Percentage],\n    [RightParenthesis, Dimension],\n    [RightParenthesis, Hash],\n    [RightParenthesis, '-']\n]);\n\nfunction createMap(pairs) {\n    const isWhiteSpaceRequired = new Set(\n        pairs.map(([prev, next]) => (code(prev) << 16 | code(next)))\n    );\n\n    return function(prevCode, type, value) {\n        const nextCode = code(type, value);\n        const nextCharCode = value.charCodeAt(0);\n        const emitWs =\n            (nextCharCode === HYPHENMINUS &&\n                type !== Ident &&\n                type !== FunctionToken &&\n                type !== CDC) ||\n            (nextCharCode === PLUSSIGN)\n                ? isWhiteSpaceRequired.has(prevCode << 16 | nextCharCode << 8)\n                : isWhiteSpaceRequired.has(prevCode << 16 | nextCode);\n\n        if (emitWs) {\n            this.emit(' ', WhiteSpace, true);\n        }\n\n        return nextCode;\n    };\n}\n\nexport const spec = createMap(specPairs);\nexport const safe = createMap(safePairs);\n","import { tokenize, Delim, WhiteSpace } from '../tokenizer/index.js';\nimport { generateSourceMap } from './sourceMap.js';\nimport * as tokenBefore from './token-before.js';\n\nconst REVERSESOLIDUS = 0x005c; // U+005C REVERSE SOLIDUS (\\)\n\nfunction processChildren(node, delimeter) {\n    if (typeof delimeter === 'function') {\n        let prev = null;\n\n        node.children.forEach(node => {\n            if (prev !== null) {\n                delimeter.call(this, prev);\n            }\n\n            this.node(node);\n            prev = node;\n        });\n\n        return;\n    }\n\n    node.children.forEach(this.node, this);\n}\n\nfunction processChunk(chunk) {\n    tokenize(chunk, (type, start, end) => {\n        this.token(type, chunk.slice(start, end));\n    });\n}\n\nexport function createGenerator(config) {\n    const types = new Map();\n\n    for (let [name, item] of Object.entries(config.node)) {\n        const fn = item.generate || item;\n\n        if (typeof fn === 'function') {\n            types.set(name, item.generate || item);\n        }\n    }\n\n    return function(node, options) {\n        let buffer = '';\n        let prevCode = 0;\n        let handlers = {\n            node(node) {\n                if (types.has(node.type)) {\n                    types.get(node.type).call(publicApi, node);\n                } else {\n                    throw new Error('Unknown node type: ' + node.type);\n                }\n            },\n            tokenBefore: tokenBefore.safe,\n            token(type, value) {\n                prevCode = this.tokenBefore(prevCode, type, value);\n\n                this.emit(value, type, false);\n\n                if (type === Delim && value.charCodeAt(0) === REVERSESOLIDUS) {\n                    this.emit('\\n', WhiteSpace, true);\n                }\n            },\n            emit(value) {\n                buffer += value;\n            },\n            result() {\n                return buffer;\n            }\n        };\n\n        if (options) {\n            if (typeof options.decorator === 'function') {\n                handlers = options.decorator(handlers);\n            }\n\n            if (options.sourceMap) {\n                handlers = generateSourceMap(handlers);\n            }\n\n            if (options.mode in tokenBefore) {\n                handlers.tokenBefore = tokenBefore[options.mode];\n            }\n        }\n\n        const publicApi = {\n            node: (node) => handlers.node(node),\n            children: processChildren,\n            token: (type, value) => handlers.token(type, value),\n            tokenize: processChunk\n        };\n\n        handlers.node(node);\n\n        return handlers.result();\n    };\n};\n","import { List } from '../utils/List.js';\n\nexport function createConvertor(walk) {\n    return {\n        fromPlainObject(ast) {\n            walk(ast, {\n                enter(node) {\n                    if (node.children && node.children instanceof List === false) {\n                        node.children = new List().fromArray(node.children);\n                    }\n                }\n            });\n\n            return ast;\n        },\n        toPlainObject(ast) {\n            walk(ast, {\n                leave(node) {\n                    if (node.children && node.children instanceof List) {\n                        node.children = node.children.toArray();\n                    }\n                }\n            });\n\n            return ast;\n        }\n    };\n};\n","const { hasOwnProperty } = Object.prototype;\nconst noop = function() {};\n\nfunction ensureFunction(value) {\n    return typeof value === 'function' ? value : noop;\n}\n\nfunction invokeForType(fn, type) {\n    return function(node, item, list) {\n        if (node.type === type) {\n            fn.call(this, node, item, list);\n        }\n    };\n}\n\nfunction getWalkersFromStructure(name, nodeType) {\n    const structure = nodeType.structure;\n    const walkers = [];\n\n    for (const key in structure) {\n        if (hasOwnProperty.call(structure, key) === false) {\n            continue;\n        }\n\n        let fieldTypes = structure[key];\n        const walker = {\n            name: key,\n            type: false,\n            nullable: false\n        };\n\n        if (!Array.isArray(fieldTypes)) {\n            fieldTypes = [fieldTypes];\n        }\n\n        for (const fieldType of fieldTypes) {\n            if (fieldType === null) {\n                walker.nullable = true;\n            } else if (typeof fieldType === 'string') {\n                walker.type = 'node';\n            } else if (Array.isArray(fieldType)) {\n                walker.type = 'list';\n            }\n        }\n\n        if (walker.type) {\n            walkers.push(walker);\n        }\n    }\n\n    if (walkers.length) {\n        return {\n            context: nodeType.walkContext,\n            fields: walkers\n        };\n    }\n\n    return null;\n}\n\nfunction getTypesFromConfig(config) {\n    const types = {};\n\n    for (const name in config.node) {\n        if (hasOwnProperty.call(config.node, name)) {\n            const nodeType = config.node[name];\n\n            if (!nodeType.structure) {\n                throw new Error('Missed `structure` field in `' + name + '` node type definition');\n            }\n\n            types[name] = getWalkersFromStructure(name, nodeType);\n        }\n    }\n\n    return types;\n}\n\nfunction createTypeIterator(config, reverse) {\n    const fields = config.fields.slice();\n    const contextName = config.context;\n    const useContext = typeof contextName === 'string';\n\n    if (reverse) {\n        fields.reverse();\n    }\n\n    return function(node, context, walk, walkReducer) {\n        let prevContextValue;\n\n        if (useContext) {\n            prevContextValue = context[contextName];\n            context[contextName] = node;\n        }\n\n        for (const field of fields) {\n            const ref = node[field.name];\n\n            if (!field.nullable || ref) {\n                if (field.type === 'list') {\n                    const breakWalk = reverse\n                        ? ref.reduceRight(walkReducer, false)\n                        : ref.reduce(walkReducer, false);\n\n                    if (breakWalk) {\n                        return true;\n                    }\n                } else if (walk(ref)) {\n                    return true;\n                }\n            }\n        }\n\n        if (useContext) {\n            context[contextName] = prevContextValue;\n        }\n    };\n}\n\nfunction createFastTraveralMap({\n    StyleSheet,\n    Atrule,\n    Rule,\n    Block,\n    DeclarationList\n}) {\n    return {\n        Atrule: {\n            StyleSheet,\n            Atrule,\n            Rule,\n            Block\n        },\n        Rule: {\n            StyleSheet,\n            Atrule,\n            Rule,\n            Block\n        },\n        Declaration: {\n            StyleSheet,\n            Atrule,\n            Rule,\n            Block,\n            DeclarationList\n        }\n    };\n}\n\nexport function createWalker(config) {\n    const types = getTypesFromConfig(config);\n    const iteratorsNatural = {};\n    const iteratorsReverse = {};\n    const breakWalk = Symbol('break-walk');\n    const skipNode = Symbol('skip-node');\n\n    for (const name in types) {\n        if (hasOwnProperty.call(types, name) && types[name] !== null) {\n            iteratorsNatural[name] = createTypeIterator(types[name], false);\n            iteratorsReverse[name] = createTypeIterator(types[name], true);\n        }\n    }\n\n    const fastTraversalIteratorsNatural = createFastTraveralMap(iteratorsNatural);\n    const fastTraversalIteratorsReverse = createFastTraveralMap(iteratorsReverse);\n\n    const walk = function(root, options) {\n        function walkNode(node, item, list) {\n            const enterRet = enter.call(context, node, item, list);\n\n            if (enterRet === breakWalk) {\n                return true;\n            }\n\n            if (enterRet === skipNode) {\n                return false;\n            }\n\n            if (iterators.hasOwnProperty(node.type)) {\n                if (iterators[node.type](node, context, walkNode, walkReducer)) {\n                    return true;\n                }\n            }\n\n            if (leave.call(context, node, item, list) === breakWalk) {\n                return true;\n            }\n\n            return false;\n        }\n\n        let enter = noop;\n        let leave = noop;\n        let iterators = iteratorsNatural;\n        let walkReducer = (ret, data, item, list) => ret || walkNode(data, item, list);\n        const context = {\n            break: breakWalk,\n            skip: skipNode,\n\n            root,\n            stylesheet: null,\n            atrule: null,\n            atrulePrelude: null,\n            rule: null,\n            selector: null,\n            block: null,\n            declaration: null,\n            function: null\n        };\n\n        if (typeof options === 'function') {\n            enter = options;\n        } else if (options) {\n            enter = ensureFunction(options.enter);\n            leave = ensureFunction(options.leave);\n\n            if (options.reverse) {\n                iterators = iteratorsReverse;\n            }\n\n            if (options.visit) {\n                if (fastTraversalIteratorsNatural.hasOwnProperty(options.visit)) {\n                    iterators = options.reverse\n                        ? fastTraversalIteratorsReverse[options.visit]\n                        : fastTraversalIteratorsNatural[options.visit];\n                } else if (!types.hasOwnProperty(options.visit)) {\n                    throw new Error('Bad value `' + options.visit + '` for `visit` option (should be: ' + Object.keys(types).sort().join(', ') + ')');\n                }\n\n                enter = invokeForType(enter, options.visit);\n                leave = invokeForType(leave, options.visit);\n            }\n        }\n\n        if (enter === noop && leave === noop) {\n            throw new Error('Neither `enter` nor `leave` walker handler is set or both aren\\'t a function');\n        }\n\n        walkNode(root);\n    };\n\n    walk.break = breakWalk;\n    walk.skip = skipNode;\n\n    walk.find = function(ast, fn) {\n        let found = null;\n\n        walk(ast, function(node, item, list) {\n            if (fn.call(this, node, item, list)) {\n                found = node;\n                return breakWalk;\n            }\n        });\n\n        return found;\n    };\n\n    walk.findLast = function(ast, fn) {\n        let found = null;\n\n        walk(ast, {\n            reverse: true,\n            enter(node, item, list) {\n                if (fn.call(this, node, item, list)) {\n                    found = node;\n                    return breakWalk;\n                }\n            }\n        });\n\n        return found;\n    };\n\n    walk.findAll = function(ast, fn) {\n        const found = [];\n\n        walk(ast, function(node, item, list) {\n            if (fn.call(this, node, item, list)) {\n                found.push(node);\n            }\n        });\n\n        return found;\n    };\n\n    return walk;\n};\n","function noop(value) {\n    return value;\n}\n\nfunction generateMultiplier(multiplier) {\n    const { min, max, comma } = multiplier;\n\n    if (min === 0 && max === 0) {\n        return comma ? '#?' : '*';\n    }\n\n    if (min === 0 && max === 1) {\n        return '?';\n    }\n\n    if (min === 1 && max === 0) {\n        return comma ? '#' : '+';\n    }\n\n    if (min === 1 && max === 1) {\n        return '';\n    }\n\n    return (\n        (comma ? '#' : '') +\n        (min === max\n            ? '{' + min + '}'\n            : '{' + min + ',' + (max !== 0 ? max : '') + '}'\n        )\n    );\n}\n\nfunction generateTypeOpts(node) {\n    switch (node.type) {\n        case 'Range':\n            return (\n                ' [' +\n                (node.min === null ? '-∞' : node.min) +\n                ',' +\n                (node.max === null ? '∞' : node.max) +\n                ']'\n            );\n\n        default:\n            throw new Error('Unknown node type `' + node.type + '`');\n    }\n}\n\nfunction generateSequence(node, decorate, forceBraces, compact) {\n    const combinator = node.combinator === ' ' || compact ? node.combinator : ' ' + node.combinator + ' ';\n    const result = node.terms\n        .map(term => internalGenerate(term, decorate, forceBraces, compact))\n        .join(combinator);\n\n    if (node.explicit || forceBraces) {\n        return (compact || result[0] === ',' ? '[' : '[ ') + result + (compact ? ']' : ' ]');\n    }\n\n    return result;\n}\n\nfunction internalGenerate(node, decorate, forceBraces, compact) {\n    let result;\n\n    switch (node.type) {\n        case 'Group':\n            result =\n                generateSequence(node, decorate, forceBraces, compact) +\n                (node.disallowEmpty ? '!' : '');\n            break;\n\n        case 'Multiplier':\n            // return since node is a composition\n            return (\n                internalGenerate(node.term, decorate, forceBraces, compact) +\n                decorate(generateMultiplier(node), node)\n            );\n\n        case 'Type':\n            result = '<' + node.name + (node.opts ? decorate(generateTypeOpts(node.opts), node.opts) : '') + '>';\n            break;\n\n        case 'Property':\n            result = '<\\'' + node.name + '\\'>';\n            break;\n\n        case 'Keyword':\n            result = node.name;\n            break;\n\n        case 'AtKeyword':\n            result = '@' + node.name;\n            break;\n\n        case 'Function':\n            result = node.name + '(';\n            break;\n\n        case 'String':\n        case 'Token':\n            result = node.value;\n            break;\n\n        case 'Comma':\n            result = ',';\n            break;\n\n        default:\n            throw new Error('Unknown node type `' + node.type + '`');\n    }\n\n    return decorate(result, node);\n}\n\nexport function generate(node, options) {\n    let decorate = noop;\n    let forceBraces = false;\n    let compact = false;\n\n    if (typeof options === 'function') {\n        decorate = options;\n    } else if (options) {\n        forceBraces = Boolean(options.forceBraces);\n        compact = Boolean(options.compact);\n        if (typeof options.decorate === 'function') {\n            decorate = options.decorate;\n        }\n    }\n\n    return internalGenerate(node, decorate, forceBraces, compact);\n};\n","import { createCustomError } from '../utils/create-custom-error.js';\nimport { generate } from '../definition-syntax/generate.js';\n\nconst defaultLoc = { offset: 0, line: 1, column: 1 };\n\nfunction locateMismatch(matchResult, node) {\n    const tokens = matchResult.tokens;\n    const longestMatch = matchResult.longestMatch;\n    const mismatchNode = longestMatch < tokens.length ? tokens[longestMatch].node || null : null;\n    const badNode = mismatchNode !== node ? mismatchNode : null;\n    let mismatchOffset = 0;\n    let mismatchLength = 0;\n    let entries = 0;\n    let css = '';\n    let start;\n    let end;\n\n    for (let i = 0; i < tokens.length; i++) {\n        const token = tokens[i].value;\n\n        if (i === longestMatch) {\n            mismatchLength = token.length;\n            mismatchOffset = css.length;\n        }\n\n        if (badNode !== null && tokens[i].node === badNode) {\n            if (i <= longestMatch) {\n                entries++;\n            } else {\n                entries = 0;\n            }\n        }\n\n        css += token;\n    }\n\n    if (longestMatch === tokens.length || entries > 1) { // last\n        start = fromLoc(badNode || node, 'end') || buildLoc(defaultLoc, css);\n        end = buildLoc(start);\n    } else {\n        start = fromLoc(badNode, 'start') ||\n            buildLoc(fromLoc(node, 'start') || defaultLoc, css.slice(0, mismatchOffset));\n        end = fromLoc(badNode, 'end') ||\n            buildLoc(start, css.substr(mismatchOffset, mismatchLength));\n    }\n\n    return {\n        css,\n        mismatchOffset,\n        mismatchLength,\n        start,\n        end\n    };\n}\n\nfunction fromLoc(node, point) {\n    const value = node && node.loc && node.loc[point];\n\n    if (value) {\n        return 'line' in value ? buildLoc(value) : value;\n    }\n\n    return null;\n}\n\nfunction buildLoc({ offset, line, column }, extra) {\n    const loc = {\n        offset,\n        line,\n        column\n    };\n\n    if (extra) {\n        const lines = extra.split(/\\n|\\r\\n?|\\f/);\n\n        loc.offset += extra.length;\n        loc.line += lines.length - 1;\n        loc.column = lines.length === 1 ? loc.column + extra.length : lines.pop().length + 1;\n    }\n\n    return loc;\n}\n\nexport const SyntaxReferenceError = function(type, referenceName) {\n    const error = createCustomError(\n        'SyntaxReferenceError',\n        type + (referenceName ? ' `' + referenceName + '`' : '')\n    );\n\n    error.reference = referenceName;\n\n    return error;\n};\n\nexport const SyntaxMatchError = function(message, syntax, node, matchResult) {\n    const error = createCustomError('SyntaxMatchError', message);\n    const {\n        css,\n        mismatchOffset,\n        mismatchLength,\n        start,\n        end\n    } = locateMismatch(matchResult, node);\n\n    error.rawMessage = message;\n    error.syntax = syntax ? generate(syntax) : '<generic>';\n    error.css = css;\n    error.mismatchOffset = mismatchOffset;\n    error.mismatchLength = mismatchLength;\n    error.message = message + '\\n' +\n        '  syntax: ' + error.syntax + '\\n' +\n        '   value: ' + (css || '<empty string>') + '\\n' +\n        '  --------' + new Array(error.mismatchOffset + 1).join('-') + '^';\n\n    Object.assign(error, start);\n    error.loc = {\n        source: (node && node.loc && node.loc.source) || '<unknown>',\n        start,\n        end\n    };\n\n    return error;\n};\n","const keywords = new Map();\nconst properties = new Map();\nconst HYPHENMINUS = 45; // '-'.charCodeAt()\n\nexport const keyword = getKeywordDescriptor;\nexport const property = getPropertyDescriptor;\nexport const vendorPrefix = getVendorPrefix;\nexport function isCustomProperty(str, offset) {\n    offset = offset || 0;\n\n    return str.length - offset >= 2 &&\n           str.charCodeAt(offset) === HYPHENMINUS &&\n           str.charCodeAt(offset + 1) === HYPHENMINUS;\n}\n\nfunction getVendorPrefix(str, offset) {\n    offset = offset || 0;\n\n    // verdor prefix should be at least 3 chars length\n    if (str.length - offset >= 3) {\n        // vendor prefix starts with hyper minus following non-hyper minus\n        if (str.charCodeAt(offset) === HYPHENMINUS &&\n            str.charCodeAt(offset + 1) !== HYPHENMINUS) {\n            // vendor prefix should contain a hyper minus at the ending\n            const secondDashIndex = str.indexOf('-', offset + 2);\n\n            if (secondDashIndex !== -1) {\n                return str.substring(offset, secondDashIndex + 1);\n            }\n        }\n    }\n\n    return '';\n}\n\nfunction getKeywordDescriptor(keyword) {\n    if (keywords.has(keyword)) {\n        return keywords.get(keyword);\n    }\n\n    const name = keyword.toLowerCase();\n    let descriptor = keywords.get(name);\n\n    if (descriptor === undefined) {\n        const custom = isCustomProperty(name, 0);\n        const vendor = !custom ? getVendorPrefix(name, 0) : '';\n        descriptor = Object.freeze({\n            basename: name.substr(vendor.length),\n            name,\n            prefix: vendor,\n            vendor,\n            custom\n        });\n    }\n\n    keywords.set(keyword, descriptor);\n\n    return descriptor;\n}\n\nfunction getPropertyDescriptor(property) {\n    if (properties.has(property)) {\n        return properties.get(property);\n    }\n\n    let name = property;\n    let hack = property[0];\n\n    if (hack === '/') {\n        hack = property[1] === '/' ? '//' : '/';\n    } else if (hack !== '_' &&\n               hack !== '*' &&\n               hack !== '$' &&\n               hack !== '#' &&\n               hack !== '+' &&\n               hack !== '&') {\n        hack = '';\n    }\n\n    const custom = isCustomProperty(name, hack.length);\n\n    // re-use result when possible (the same as for lower case)\n    if (!custom) {\n        name = name.toLowerCase();\n        if (properties.has(name)) {\n            const descriptor = properties.get(name);\n            properties.set(property, descriptor);\n            return descriptor;\n        }\n    }\n\n    const vendor = !custom ? getVendorPrefix(name, hack.length) : '';\n    const prefix = name.substr(0, hack.length + vendor.length);\n    const descriptor = Object.freeze({\n        basename: name.substr(prefix.length),\n        name: name.substr(hack.length),\n        hack,\n        vendor,\n        prefix,\n        custom\n    });\n\n    properties.set(property, descriptor);\n\n    return descriptor;\n}\n","// https://drafts.csswg.org/css-cascade-5/\nexport const cssWideKeywords = [\n    'initial',\n    'inherit',\n    'unset',\n    'revert',\n    'revert-layer'\n];\n","import {\n    isDigit,\n    cmpChar,\n    Delim,\n    WhiteSpace,\n    Comment,\n    Ident,\n    Number as NumberToken,\n    Dimension\n} from '../tokenizer/index.js';\n\nconst PLUSSIGN = 0x002B;    // U+002B PLUS SIGN (+)\nconst HYPHENMINUS = 0x002D; // U+002D HYPHEN-MINUS (-)\nconst N = 0x006E;           // U+006E LATIN SMALL LETTER N (n)\nconst DISALLOW_SIGN = true;\nconst ALLOW_SIGN = false;\n\nfunction isDelim(token, code) {\n    return token !== null && token.type === Delim && token.value.charCodeAt(0) === code;\n}\n\nfunction skipSC(token, offset, getNextToken) {\n    while (token !== null && (token.type === WhiteSpace || token.type === Comment)) {\n        token = getNextToken(++offset);\n    }\n\n    return offset;\n}\n\nfunction checkInteger(token, valueOffset, disallowSign, offset) {\n    if (!token) {\n        return 0;\n    }\n\n    const code = token.value.charCodeAt(valueOffset);\n\n    if (code === PLUSSIGN || code === HYPHENMINUS) {\n        if (disallowSign) {\n            // Number sign is not allowed\n            return 0;\n        }\n        valueOffset++;\n    }\n\n    for (; valueOffset < token.value.length; valueOffset++) {\n        if (!isDigit(token.value.charCodeAt(valueOffset))) {\n            // Integer is expected\n            return 0;\n        }\n    }\n\n    return offset + 1;\n}\n\n// ... <signed-integer>\n// ... ['+' | '-'] <signless-integer>\nfunction consumeB(token, offset_, getNextToken) {\n    let sign = false;\n    let offset = skipSC(token, offset_, getNextToken);\n\n    token = getNextToken(offset);\n\n    if (token === null) {\n        return offset_;\n    }\n\n    if (token.type !== NumberToken) {\n        if (isDelim(token, PLUSSIGN) || isDelim(token, HYPHENMINUS)) {\n            sign = true;\n            offset = skipSC(getNextToken(++offset), offset, getNextToken);\n            token = getNextToken(offset);\n\n            if (token === null || token.type !== NumberToken) {\n                return 0;\n            }\n        } else {\n            return offset_;\n        }\n    }\n\n    if (!sign) {\n        const code = token.value.charCodeAt(0);\n        if (code !== PLUSSIGN && code !== HYPHENMINUS) {\n            // Number sign is expected\n            return 0;\n        }\n    }\n\n    return checkInteger(token, sign ? 0 : 1, sign, offset);\n}\n\n// An+B microsyntax https://www.w3.org/TR/css-syntax-3/#anb\nexport default function anPlusB(token, getNextToken) {\n    /* eslint-disable brace-style*/\n    let offset = 0;\n\n    if (!token) {\n        return 0;\n    }\n\n    // <integer>\n    if (token.type === NumberToken) {\n        return checkInteger(token, 0, ALLOW_SIGN, offset); // b\n    }\n\n    // -n\n    // -n <signed-integer>\n    // -n ['+' | '-'] <signless-integer>\n    // -n- <signless-integer>\n    // <dashndashdigit-ident>\n    else if (token.type === Ident && token.value.charCodeAt(0) === HYPHENMINUS) {\n        // expect 1st char is N\n        if (!cmpChar(token.value, 1, N)) {\n            return 0;\n        }\n\n        switch (token.value.length) {\n            // -n\n            // -n <signed-integer>\n            // -n ['+' | '-'] <signless-integer>\n            case 2:\n                return consumeB(getNextToken(++offset), offset, getNextToken);\n\n            // -n- <signless-integer>\n            case 3:\n                if (token.value.charCodeAt(2) !== HYPHENMINUS) {\n                    return 0;\n                }\n\n                offset = skipSC(getNextToken(++offset), offset, getNextToken);\n                token = getNextToken(offset);\n\n                return checkInteger(token, 0, DISALLOW_SIGN, offset);\n\n            // <dashndashdigit-ident>\n            default:\n                if (token.value.charCodeAt(2) !== HYPHENMINUS) {\n                    return 0;\n                }\n\n                return checkInteger(token, 3, DISALLOW_SIGN, offset);\n        }\n    }\n\n    // '+'? n\n    // '+'? n <signed-integer>\n    // '+'? n ['+' | '-'] <signless-integer>\n    // '+'? n- <signless-integer>\n    // '+'? <ndashdigit-ident>\n    else if (token.type === Ident || (isDelim(token, PLUSSIGN) && getNextToken(offset + 1).type === Ident)) {\n        // just ignore a plus\n        if (token.type !== Ident) {\n            token = getNextToken(++offset);\n        }\n\n        if (token === null || !cmpChar(token.value, 0, N)) {\n            return 0;\n        }\n\n        switch (token.value.length) {\n            // '+'? n\n            // '+'? n <signed-integer>\n            // '+'? n ['+' | '-'] <signless-integer>\n            case 1:\n                return consumeB(getNextToken(++offset), offset, getNextToken);\n\n            // '+'? n- <signless-integer>\n            case 2:\n                if (token.value.charCodeAt(1) !== HYPHENMINUS) {\n                    return 0;\n                }\n\n                offset = skipSC(getNextToken(++offset), offset, getNextToken);\n                token = getNextToken(offset);\n\n                return checkInteger(token, 0, DISALLOW_SIGN, offset);\n\n            // '+'? <ndashdigit-ident>\n            default:\n                if (token.value.charCodeAt(1) !== HYPHENMINUS) {\n                    return 0;\n                }\n\n                return checkInteger(token, 2, DISALLOW_SIGN, offset);\n        }\n    }\n\n    // <ndashdigit-dimension>\n    // <ndash-dimension> <signless-integer>\n    // <n-dimension>\n    // <n-dimension> <signed-integer>\n    // <n-dimension> ['+' | '-'] <signless-integer>\n    else if (token.type === Dimension) {\n        let code = token.value.charCodeAt(0);\n        let sign = code === PLUSSIGN || code === HYPHENMINUS ? 1 : 0;\n        let i = sign;\n\n        for (; i < token.value.length; i++) {\n            if (!isDigit(token.value.charCodeAt(i))) {\n                break;\n            }\n        }\n\n        if (i === sign) {\n            // Integer is expected\n            return 0;\n        }\n\n        if (!cmpChar(token.value, i, N)) {\n            return 0;\n        }\n\n        // <n-dimension>\n        // <n-dimension> <signed-integer>\n        // <n-dimension> ['+' | '-'] <signless-integer>\n        if (i + 1 === token.value.length) {\n            return consumeB(getNextToken(++offset), offset, getNextToken);\n        } else {\n            if (token.value.charCodeAt(i + 1) !== HYPHENMINUS) {\n                return 0;\n            }\n\n            // <ndash-dimension> <signless-integer>\n            if (i + 2 === token.value.length) {\n                offset = skipSC(getNextToken(++offset), offset, getNextToken);\n                token = getNextToken(offset);\n\n                return checkInteger(token, 0, DISALLOW_SIGN, offset);\n            }\n            // <ndashdigit-dimension>\n            else {\n                return checkInteger(token, i + 2, DISALLOW_SIGN, offset);\n            }\n        }\n    }\n\n    return 0;\n};\n","import {\n    isHexDigit,\n    cmpChar,\n    Ident,\n    Delim,\n    Number as NumberToken,\n    Dimension\n} from '../tokenizer/index.js';\n\nconst PLUSSIGN = 0x002B;     // U+002B PLUS SIGN (+)\nconst HYPHENMINUS = 0x002D;  // U+002D HYPHEN-MINUS (-)\nconst QUESTIONMARK = 0x003F; // U+003F QUESTION MARK (?)\nconst U = 0x0075;            // U+0075 LATIN SMALL LETTER U (u)\n\nfunction isDelim(token, code) {\n    return token !== null && token.type === Delim && token.value.charCodeAt(0) === code;\n}\n\nfunction startsWith(token, code) {\n    return token.value.charCodeAt(0) === code;\n}\n\nfunction hexSequence(token, offset, allowDash) {\n    let hexlen = 0;\n\n    for (let pos = offset; pos < token.value.length; pos++) {\n        const code = token.value.charCodeAt(pos);\n\n        if (code === HYPHENMINUS && allowDash && hexlen !== 0) {\n            hexSequence(token, offset + hexlen + 1, false);\n            return 6; // dissallow following question marks\n        }\n\n        if (!isHexDigit(code)) {\n            return 0; // not a hex digit\n        }\n\n        if (++hexlen > 6) {\n            return 0; // too many hex digits\n        };\n    }\n\n    return hexlen;\n}\n\nfunction withQuestionMarkSequence(consumed, length, getNextToken) {\n    if (!consumed) {\n        return 0; // nothing consumed\n    }\n\n    while (isDelim(getNextToken(length), QUESTIONMARK)) {\n        if (++consumed > 6) {\n            return 0; // too many question marks\n        }\n\n        length++;\n    }\n\n    return length;\n}\n\n// https://drafts.csswg.org/css-syntax/#urange\n// Informally, the <urange> production has three forms:\n// U+0001\n//      Defines a range consisting of a single code point, in this case the code point \"1\".\n// U+0001-00ff\n//      Defines a range of codepoints between the first and the second value, in this case\n//      the range between \"1\" and \"ff\" (255 in decimal) inclusive.\n// U+00??\n//      Defines a range of codepoints where the \"?\" characters range over all hex digits,\n//      in this case defining the same as the value U+0000-00ff.\n// In each form, a maximum of 6 digits is allowed for each hexadecimal number (if you treat \"?\" as a hexadecimal digit).\n//\n// <urange> =\n//   u '+' <ident-token> '?'* |\n//   u <dimension-token> '?'* |\n//   u <number-token> '?'* |\n//   u <number-token> <dimension-token> |\n//   u <number-token> <number-token> |\n//   u '+' '?'+\nexport default function urange(token, getNextToken) {\n    let length = 0;\n\n    // should start with `u` or `U`\n    if (token === null || token.type !== Ident || !cmpChar(token.value, 0, U)) {\n        return 0;\n    }\n\n    token = getNextToken(++length);\n    if (token === null) {\n        return 0;\n    }\n\n    // u '+' <ident-token> '?'*\n    // u '+' '?'+\n    if (isDelim(token, PLUSSIGN)) {\n        token = getNextToken(++length);\n        if (token === null) {\n            return 0;\n        }\n\n        if (token.type === Ident) {\n            // u '+' <ident-token> '?'*\n            return withQuestionMarkSequence(hexSequence(token, 0, true), ++length, getNextToken);\n        }\n\n        if (isDelim(token, QUESTIONMARK)) {\n            // u '+' '?'+\n            return withQuestionMarkSequence(1, ++length, getNextToken);\n        }\n\n        // Hex digit or question mark is expected\n        return 0;\n    }\n\n    // u <number-token> '?'*\n    // u <number-token> <dimension-token>\n    // u <number-token> <number-token>\n    if (token.type === NumberToken) {\n        const consumedHexLength = hexSequence(token, 1, true);\n        if (consumedHexLength === 0) {\n            return 0;\n        }\n\n        token = getNextToken(++length);\n        if (token === null) {\n            // u <number-token> <eof>\n            return length;\n        }\n\n        if (token.type === Dimension || token.type === NumberToken) {\n            // u <number-token> <dimension-token>\n            // u <number-token> <number-token>\n            if (!startsWith(token, HYPHENMINUS) || !hexSequence(token, 1, false)) {\n                return 0;\n            }\n\n            return length + 1;\n        }\n\n        // u <number-token> '?'*\n        return withQuestionMarkSequence(consumedHexLength, length, getNextToken);\n    }\n\n    // u <dimension-token> '?'*\n    if (token.type === Dimension) {\n        return withQuestionMarkSequence(hexSequence(token, 1, true), ++length, getNextToken);\n    }\n\n    return 0;\n};\n","import { cssWideKeywords } from './generic-const.js';\nimport anPlusB from './generic-an-plus-b.js';\nimport urange from './generic-urange.js';\nimport {\n    isIdentifierStart,\n    isHexDigit,\n    isDigit,\n    cmpStr,\n    consumeNumber,\n\n    Ident,\n    Function as FunctionToken,\n    AtKeyword,\n    Hash,\n    String as StringToken,\n    BadString,\n    Url,\n    BadUrl,\n    Delim,\n    Number as NumberToken,\n    Percentage,\n    Dimension,\n    WhiteSpace,\n    CDO,\n    CDC,\n    Colon,\n    Semicolon,\n    Comma,\n    LeftSquareBracket,\n    RightSquareBracket,\n    LeftParenthesis,\n    RightParenthesis,\n    LeftCurlyBracket,\n    RightCurlyBracket\n} from '../tokenizer/index.js';\n\nconst calcFunctionNames = ['calc(', '-moz-calc(', '-webkit-calc('];\nconst balancePair = new Map([\n    [FunctionToken, RightParenthesis],\n    [LeftParenthesis, RightParenthesis],\n    [LeftSquareBracket, RightSquareBracket],\n    [LeftCurlyBracket, RightCurlyBracket]\n]);\n\n// safe char code getter\nfunction charCodeAt(str, index) {\n    return index < str.length ? str.charCodeAt(index) : 0;\n}\n\nfunction eqStr(actual, expected) {\n    return cmpStr(actual, 0, actual.length, expected);\n}\n\nfunction eqStrAny(actual, expected) {\n    for (let i = 0; i < expected.length; i++) {\n        if (eqStr(actual, expected[i])) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\n// IE postfix hack, i.e. 123\\0 or 123px\\9\nfunction isPostfixIeHack(str, offset) {\n    if (offset !== str.length - 2) {\n        return false;\n    }\n\n    return (\n        charCodeAt(str, offset) === 0x005C &&  // U+005C REVERSE SOLIDUS (\\)\n        isDigit(charCodeAt(str, offset + 1))\n    );\n}\n\nfunction outOfRange(opts, value, numEnd) {\n    if (opts && opts.type === 'Range') {\n        const num = Number(\n            numEnd !== undefined && numEnd !== value.length\n                ? value.substr(0, numEnd)\n                : value\n        );\n\n        if (isNaN(num)) {\n            return true;\n        }\n\n        // FIXME: when opts.min is a string it's a dimension, skip a range validation\n        // for now since it requires a type covertation which is not implmented yet\n        if (opts.min !== null && num < opts.min && typeof opts.min !== 'string') {\n            return true;\n        }\n\n        // FIXME: when opts.max is a string it's a dimension, skip a range validation\n        // for now since it requires a type covertation which is not implmented yet\n        if (opts.max !== null && num > opts.max && typeof opts.max !== 'string') {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction consumeFunction(token, getNextToken) {\n    let balanceCloseType = 0;\n    let balanceStash = [];\n    let length = 0;\n\n    // balanced token consuming\n    scan:\n    do {\n        switch (token.type) {\n            case RightCurlyBracket:\n            case RightParenthesis:\n            case RightSquareBracket:\n                if (token.type !== balanceCloseType) {\n                    break scan;\n                }\n\n                balanceCloseType = balanceStash.pop();\n\n                if (balanceStash.length === 0) {\n                    length++;\n                    break scan;\n                }\n\n                break;\n\n            case FunctionToken:\n            case LeftParenthesis:\n            case LeftSquareBracket:\n            case LeftCurlyBracket:\n                balanceStash.push(balanceCloseType);\n                balanceCloseType = balancePair.get(token.type);\n                break;\n        }\n\n        length++;\n    } while (token = getNextToken(length));\n\n    return length;\n}\n\n// TODO: implement\n// can be used wherever <length>, <frequency>, <angle>, <time>, <percentage>, <number>, or <integer> values are allowed\n// https://drafts.csswg.org/css-values/#calc-notation\nfunction calc(next) {\n    return function(token, getNextToken, opts) {\n        if (token === null) {\n            return 0;\n        }\n\n        if (token.type === FunctionToken && eqStrAny(token.value, calcFunctionNames)) {\n            return consumeFunction(token, getNextToken);\n        }\n\n        return next(token, getNextToken, opts);\n    };\n}\n\nfunction tokenType(expectedTokenType) {\n    return function(token) {\n        if (token === null || token.type !== expectedTokenType) {\n            return 0;\n        }\n\n        return 1;\n    };\n}\n\n// =========================\n// Complex types\n//\n\n// https://drafts.csswg.org/css-values-4/#custom-idents\n// 4.2. Author-defined Identifiers: the <custom-ident> type\n// Some properties accept arbitrary author-defined identifiers as a component value.\n// This generic data type is denoted by <custom-ident>, and represents any valid CSS identifier\n// that would not be misinterpreted as a pre-defined keyword in that property’s value definition.\n//\n// See also: https://developer.mozilla.org/en-US/docs/Web/CSS/custom-ident\nfunction customIdent(token) {\n    if (token === null || token.type !== Ident) {\n        return 0;\n    }\n\n    const name = token.value.toLowerCase();\n\n    // The CSS-wide keywords are not valid <custom-ident>s\n    if (eqStrAny(name, cssWideKeywords)) {\n        return 0;\n    }\n\n    // The default keyword is reserved and is also not a valid <custom-ident>\n    if (eqStr(name, 'default')) {\n        return 0;\n    }\n\n    // TODO: ignore property specific keywords (as described https://developer.mozilla.org/en-US/docs/Web/CSS/custom-ident)\n    // Specifications using <custom-ident> must specify clearly what other keywords\n    // are excluded from <custom-ident>, if any—for example by saying that any pre-defined keywords\n    // in that property’s value definition are excluded. Excluded keywords are excluded\n    // in all ASCII case permutations.\n\n    return 1;\n}\n\n// https://drafts.csswg.org/css-values-4/#dashed-idents\n// The <dashed-ident> production is a <custom-ident>, with all the case-sensitivity that implies,\n// with the additional restriction that it must start with two dashes (U+002D HYPHEN-MINUS).\nfunction dashedIdent(token) {\n    if (token === null || token.type !== Ident) {\n        return 0;\n    }\n\n    // ... must start with two dashes (U+002D HYPHEN-MINUS)\n    if (charCodeAt(token.value, 0) !== 0x002D || charCodeAt(token.value, 1) !== 0x002D) {\n        return 0;\n    }\n\n    return 1;\n}\n\n// https://drafts.csswg.org/css-variables/#typedef-custom-property-name\n// A custom property is any property whose name starts with two dashes (U+002D HYPHEN-MINUS), like --foo.\n// The <custom-property-name> production corresponds to this: it’s defined as any <dashed-ident>\n// (a valid identifier that starts with two dashes), except -- itself, which is reserved for future use by CSS.\nfunction customPropertyName(token) {\n    // ... it’s defined as any <dashed-ident>\n    if (!dashedIdent(token)) {\n        return 0;\n    }\n\n    // ... except -- itself, which is reserved for future use by CSS\n    if (token.value === '--') {\n        return 0;\n    }\n\n    return 1;\n}\n\n// https://drafts.csswg.org/css-color-4/#hex-notation\n// The syntax of a <hex-color> is a <hash-token> token whose value consists of 3, 4, 6, or 8 hexadecimal digits.\n// In other words, a hex color is written as a hash character, \"#\", followed by some number of digits 0-9 or\n// letters a-f (the case of the letters doesn’t matter - #00ff00 is identical to #00FF00).\nfunction hexColor(token) {\n    if (token === null || token.type !== Hash) {\n        return 0;\n    }\n\n    const length = token.value.length;\n\n    // valid values (length): #rgb (4), #rgba (5), #rrggbb (7), #rrggbbaa (9)\n    if (length !== 4 && length !== 5 && length !== 7 && length !== 9) {\n        return 0;\n    }\n\n    for (let i = 1; i < length; i++) {\n        if (!isHexDigit(charCodeAt(token.value, i))) {\n            return 0;\n        }\n    }\n\n    return 1;\n}\n\nfunction idSelector(token) {\n    if (token === null || token.type !== Hash) {\n        return 0;\n    }\n\n    if (!isIdentifierStart(charCodeAt(token.value, 1), charCodeAt(token.value, 2), charCodeAt(token.value, 3))) {\n        return 0;\n    }\n\n    return 1;\n}\n\n// https://drafts.csswg.org/css-syntax/#any-value\n// It represents the entirety of what a valid declaration can have as its value.\nfunction declarationValue(token, getNextToken) {\n    if (!token) {\n        return 0;\n    }\n\n    let balanceCloseType = 0;\n    let balanceStash = [];\n    let length = 0;\n\n    // The <declaration-value> production matches any sequence of one or more tokens,\n    // so long as the sequence does not contain ...\n    scan:\n    do {\n        switch (token.type) {\n            // ... <bad-string-token>, <bad-url-token>,\n            case BadString:\n            case BadUrl:\n                break scan;\n\n            // ... unmatched <)-token>, <]-token>, or <}-token>,\n            case RightCurlyBracket:\n            case RightParenthesis:\n            case RightSquareBracket:\n                if (token.type !== balanceCloseType) {\n                    break scan;\n                }\n\n                balanceCloseType = balanceStash.pop();\n                break;\n\n            // ... or top-level <semicolon-token> tokens\n            case Semicolon:\n                if (balanceCloseType === 0) {\n                    break scan;\n                }\n\n                break;\n\n            // ... or <delim-token> tokens with a value of \"!\"\n            case Delim:\n                if (balanceCloseType === 0 && token.value === '!') {\n                    break scan;\n                }\n\n                break;\n\n            case FunctionToken:\n            case LeftParenthesis:\n            case LeftSquareBracket:\n            case LeftCurlyBracket:\n                balanceStash.push(balanceCloseType);\n                balanceCloseType = balancePair.get(token.type);\n                break;\n        }\n\n        length++;\n    } while (token = getNextToken(length));\n\n    return length;\n}\n\n// https://drafts.csswg.org/css-syntax/#any-value\n// The <any-value> production is identical to <declaration-value>, but also\n// allows top-level <semicolon-token> tokens and <delim-token> tokens\n// with a value of \"!\". It represents the entirety of what valid CSS can be in any context.\nfunction anyValue(token, getNextToken) {\n    if (!token) {\n        return 0;\n    }\n\n    let balanceCloseType = 0;\n    let balanceStash = [];\n    let length = 0;\n\n    // The <any-value> production matches any sequence of one or more tokens,\n    // so long as the sequence ...\n    scan:\n    do {\n        switch (token.type) {\n            // ... does not contain <bad-string-token>, <bad-url-token>,\n            case BadString:\n            case BadUrl:\n                break scan;\n\n            // ... unmatched <)-token>, <]-token>, or <}-token>,\n            case RightCurlyBracket:\n            case RightParenthesis:\n            case RightSquareBracket:\n                if (token.type !== balanceCloseType) {\n                    break scan;\n                }\n\n                balanceCloseType = balanceStash.pop();\n                break;\n\n            case FunctionToken:\n            case LeftParenthesis:\n            case LeftSquareBracket:\n            case LeftCurlyBracket:\n                balanceStash.push(balanceCloseType);\n                balanceCloseType = balancePair.get(token.type);\n                break;\n        }\n\n        length++;\n    } while (token = getNextToken(length));\n\n    return length;\n}\n\n// =========================\n// Dimensions\n//\n\nfunction dimension(type) {\n    if (type) {\n        type = new Set(type);\n    }\n\n    return function(token, getNextToken, opts) {\n        if (token === null || token.type !== Dimension) {\n            return 0;\n        }\n\n        const numberEnd = consumeNumber(token.value, 0);\n\n        // check unit\n        if (type !== null) {\n            // check for IE postfix hack, i.e. 123px\\0 or 123px\\9\n            const reverseSolidusOffset = token.value.indexOf('\\\\', numberEnd);\n            const unit = reverseSolidusOffset === -1 || !isPostfixIeHack(token.value, reverseSolidusOffset)\n                ? token.value.substr(numberEnd)\n                : token.value.substring(numberEnd, reverseSolidusOffset);\n\n            if (type.has(unit.toLowerCase()) === false) {\n                return 0;\n            }\n        }\n\n        // check range if specified\n        if (outOfRange(opts, token.value, numberEnd)) {\n            return 0;\n        }\n\n        return 1;\n    };\n}\n\n// =========================\n// Percentage\n//\n\n// §5.5. Percentages: the <percentage> type\n// https://drafts.csswg.org/css-values-4/#percentages\nfunction percentage(token, getNextToken, opts) {\n    // ... corresponds to the <percentage-token> production\n    if (token === null || token.type !== Percentage) {\n        return 0;\n    }\n\n    // check range if specified\n    if (outOfRange(opts, token.value, token.value.length - 1)) {\n        return 0;\n    }\n\n    return 1;\n}\n\n// =========================\n// Numeric\n//\n\n// https://drafts.csswg.org/css-values-4/#numbers\n// The value <zero> represents a literal number with the value 0. Expressions that merely\n// evaluate to a <number> with the value 0 (for example, calc(0)) do not match <zero>;\n// only literal <number-token>s do.\nfunction zero(next) {\n    if (typeof next !== 'function') {\n        next = function() {\n            return 0;\n        };\n    }\n\n    return function(token, getNextToken, opts) {\n        if (token !== null && token.type === NumberToken) {\n            if (Number(token.value) === 0) {\n                return 1;\n            }\n        }\n\n        return next(token, getNextToken, opts);\n    };\n}\n\n// § 5.3. Real Numbers: the <number> type\n// https://drafts.csswg.org/css-values-4/#numbers\n// Number values are denoted by <number>, and represent real numbers, possibly with a fractional component.\n// ... It corresponds to the <number-token> production\nfunction number(token, getNextToken, opts) {\n    if (token === null) {\n        return 0;\n    }\n\n    const numberEnd = consumeNumber(token.value, 0);\n    const isNumber = numberEnd === token.value.length;\n    if (!isNumber && !isPostfixIeHack(token.value, numberEnd)) {\n        return 0;\n    }\n\n    // check range if specified\n    if (outOfRange(opts, token.value, numberEnd)) {\n        return 0;\n    }\n\n    return 1;\n}\n\n// §5.2. Integers: the <integer> type\n// https://drafts.csswg.org/css-values-4/#integers\nfunction integer(token, getNextToken, opts) {\n    // ... corresponds to a subset of the <number-token> production\n    if (token === null || token.type !== NumberToken) {\n        return 0;\n    }\n\n    // The first digit of an integer may be immediately preceded by `-` or `+` to indicate the integer’s sign.\n    let i = charCodeAt(token.value, 0) === 0x002B ||       // U+002B PLUS SIGN (+)\n            charCodeAt(token.value, 0) === 0x002D ? 1 : 0; // U+002D HYPHEN-MINUS (-)\n\n    // When written literally, an integer is one or more decimal digits 0 through 9 ...\n    for (; i < token.value.length; i++) {\n        if (!isDigit(charCodeAt(token.value, i))) {\n            return 0;\n        }\n    }\n\n    // check range if specified\n    if (outOfRange(opts, token.value, i)) {\n        return 0;\n    }\n\n    return 1;\n}\n\n// token types\nexport const tokenTypes = {\n    'ident-token': tokenType(Ident),\n    'function-token': tokenType(FunctionToken),\n    'at-keyword-token': tokenType(AtKeyword),\n    'hash-token': tokenType(Hash),\n    'string-token': tokenType(StringToken),\n    'bad-string-token': tokenType(BadString),\n    'url-token': tokenType(Url),\n    'bad-url-token': tokenType(BadUrl),\n    'delim-token': tokenType(Delim),\n    'number-token': tokenType(NumberToken),\n    'percentage-token': tokenType(Percentage),\n    'dimension-token': tokenType(Dimension),\n    'whitespace-token': tokenType(WhiteSpace),\n    'CDO-token': tokenType(CDO),\n    'CDC-token': tokenType(CDC),\n    'colon-token': tokenType(Colon),\n    'semicolon-token': tokenType(Semicolon),\n    'comma-token': tokenType(Comma),\n    '[-token': tokenType(LeftSquareBracket),\n    ']-token': tokenType(RightSquareBracket),\n    '(-token': tokenType(LeftParenthesis),\n    ')-token': tokenType(RightParenthesis),\n    '{-token': tokenType(LeftCurlyBracket),\n    '}-token': tokenType(RightCurlyBracket)\n};\n\n// token production types\nexport const productionTypes = {\n    // token type aliases\n    'string': tokenType(StringToken),\n    'ident': tokenType(Ident),\n\n    // percentage\n    'percentage': calc(percentage),\n\n    // numeric\n    'zero': zero(),\n    'number': calc(number),\n    'integer': calc(integer),\n\n    // complex types\n    'custom-ident': customIdent,\n    'dashed-ident': dashedIdent,\n    'custom-property-name': customPropertyName,\n    'hex-color': hexColor,\n    'id-selector': idSelector, // element( <id-selector> )\n    'an-plus-b': anPlusB,\n    'urange': urange,\n    'declaration-value': declarationValue,\n    'any-value': anyValue\n};\n\nexport const unitGroups = [\n    'length',\n    'angle',\n    'time',\n    'frequency',\n    'resolution',\n    'flex',\n    'decibel',\n    'semitones'\n];\n\n// dimensions types depend on units set\nexport function createDemensionTypes(units) {\n    const {\n        angle,\n        decibel,\n        frequency,\n        flex,\n        length,\n        resolution,\n        semitones,\n        time\n    } = units || {};\n\n    return {\n        'dimension': calc(dimension(null)),\n        'angle': calc(dimension(angle)),\n        'decibel': calc(dimension(decibel)),\n        'frequency': calc(dimension(frequency)),\n        'flex': calc(dimension(flex)),\n        'length': calc(zero(dimension(length))),\n        'resolution': calc(dimension(resolution)),\n        'semitones': calc(dimension(semitones)),\n        'time': calc(dimension(time))\n    };\n}\n\nexport function createGenericTypes(units) {\n    return {\n        ...tokenTypes,\n        ...productionTypes,\n        ...createDemensionTypes(units)\n    };\n};\n","export const length = [\n    // absolute length units https://www.w3.org/TR/css-values-3/#lengths\n    'cm', 'mm', 'q', 'in', 'pt', 'pc', 'px',\n    // font-relative length units https://drafts.csswg.org/css-values-4/#font-relative-lengths\n    'em', 'rem',\n    'ex', 'rex',\n    'cap', 'rcap',\n    'ch', 'rch',\n    'ic', 'ric',\n    'lh', 'rlh',\n    // viewport-percentage lengths https://drafts.csswg.org/css-values-4/#viewport-relative-lengths\n    'vw', 'svw', 'lvw', 'dvw',\n    'vh', 'svh', 'lvh', 'dvh',\n    'vi', 'svi', 'lvi', 'dvi',\n    'vb', 'svb', 'lvb', 'dvb',\n    'vmin', 'svmin', 'lvmin', 'dvmin',\n    'vmax', 'svmax', 'lvmax', 'dvmax',\n    // container relative lengths https://drafts.csswg.org/css-contain-3/#container-lengths\n    'cqw', 'cqh', 'cqi', 'cqb', 'cqmin', 'cqmax'\n];\nexport const angle = ['deg', 'grad', 'rad', 'turn'];    // https://www.w3.org/TR/css-values-3/#angles\nexport const time = ['s', 'ms'];                        // https://www.w3.org/TR/css-values-3/#time\nexport const frequency = ['hz', 'khz'];                 // https://www.w3.org/TR/css-values-3/#frequency\nexport const resolution = ['dpi', 'dpcm', 'dppx', 'x']; // https://www.w3.org/TR/css-values-3/#resolution\nexport const flex = ['fr'];                             // https://drafts.csswg.org/css-grid/#fr-unit\nexport const decibel = ['db'];                          // https://www.w3.org/TR/css3-speech/#mixing-props-voice-volume\nexport const semitones = ['st'];                        // https://www.w3.org/TR/css3-speech/#voice-props-voice-pitch\n","import { createCustomError } from '../utils/create-custom-error.js';\n\nexport function SyntaxError(message, input, offset) {\n    return Object.assign(createCustomError('SyntaxError', message), {\n        input,\n        offset,\n        rawMessage: message,\n        message: message + '\\n' +\n            '  ' + input + '\\n' +\n            '--' + new Array((offset || input.length) + 1).join('-') + '^'\n    });\n};\n","import { SyntaxError } from './SyntaxError.js';\n\nconst TAB = 9;\nconst N = 10;\nconst F = 12;\nconst R = 13;\nconst SPACE = 32;\n\nexport class Tokenizer {\n    constructor(str) {\n        this.str = str;\n        this.pos = 0;\n    }\n    charCodeAt(pos) {\n        return pos < this.str.length ? this.str.charCodeAt(pos) : 0;\n    }\n    charCode() {\n        return this.charCodeAt(this.pos);\n    }\n    nextCharCode() {\n        return this.charCodeAt(this.pos + 1);\n    }\n    nextNonWsCode(pos) {\n        return this.charCodeAt(this.findWsEnd(pos));\n    }\n    skipWs() {\n        this.pos = this.findWsEnd(this.pos);\n    }\n    findWsEnd(pos) {\n        for (; pos < this.str.length; pos++) {\n            const code = this.str.charCodeAt(pos);\n            if (code !== R && code !== N && code !== F && code !== SPACE && code !== TAB) {\n                break;\n            }\n        }\n\n        return pos;\n    }\n    substringToPos(end) {\n        return this.str.substring(this.pos, this.pos = end);\n    }\n    eat(code) {\n        if (this.charCode() !== code) {\n            this.error('Expect `' + String.fromCharCode(code) + '`');\n        }\n\n        this.pos++;\n    }\n    peek() {\n        return this.pos < this.str.length ? this.str.charAt(this.pos++) : '';\n    }\n    error(message) {\n        throw new SyntaxError(message, this.str, this.pos);\n    }\n};\n","import { Tokenizer } from './tokenizer.js';\n\nconst TAB = 9;\nconst N = 10;\nconst F = 12;\nconst R = 13;\nconst SPACE = 32;\nconst EXCLAMATIONMARK = 33;    // !\nconst NUMBERSIGN = 35;         // #\nconst AMPERSAND = 38;          // &\nconst APOSTROPHE = 39;         // '\nconst LEFTPARENTHESIS = 40;    // (\nconst RIGHTPARENTHESIS = 41;   // )\nconst ASTERISK = 42;           // *\nconst PLUSSIGN = 43;           // +\nconst COMMA = 44;              // ,\nconst HYPERMINUS = 45;         // -\nconst LESSTHANSIGN = 60;       // <\nconst GREATERTHANSIGN = 62;    // >\nconst QUESTIONMARK = 63;       // ?\nconst COMMERCIALAT = 64;       // @\nconst LEFTSQUAREBRACKET = 91;  // [\nconst RIGHTSQUAREBRACKET = 93; // ]\nconst LEFTCURLYBRACKET = 123;  // {\nconst VERTICALLINE = 124;      // |\nconst RIGHTCURLYBRACKET = 125; // }\nconst INFINITY = 8734;         // ∞\nconst NAME_CHAR = new Uint8Array(128).map((_, idx) =>\n    /[a-zA-Z0-9\\-]/.test(String.fromCharCode(idx)) ? 1 : 0\n);\nconst COMBINATOR_PRECEDENCE = {\n    ' ': 1,\n    '&&': 2,\n    '||': 3,\n    '|': 4\n};\n\nfunction scanSpaces(tokenizer) {\n    return tokenizer.substringToPos(\n        tokenizer.findWsEnd(tokenizer.pos)\n    );\n}\n\nfunction scanWord(tokenizer) {\n    let end = tokenizer.pos;\n\n    for (; end < tokenizer.str.length; end++) {\n        const code = tokenizer.str.charCodeAt(end);\n        if (code >= 128 || NAME_CHAR[code] === 0) {\n            break;\n        }\n    }\n\n    if (tokenizer.pos === end) {\n        tokenizer.error('Expect a keyword');\n    }\n\n    return tokenizer.substringToPos(end);\n}\n\nfunction scanNumber(tokenizer) {\n    let end = tokenizer.pos;\n\n    for (; end < tokenizer.str.length; end++) {\n        const code = tokenizer.str.charCodeAt(end);\n        if (code < 48 || code > 57) {\n            break;\n        }\n    }\n\n    if (tokenizer.pos === end) {\n        tokenizer.error('Expect a number');\n    }\n\n    return tokenizer.substringToPos(end);\n}\n\nfunction scanString(tokenizer) {\n    const end = tokenizer.str.indexOf('\\'', tokenizer.pos + 1);\n\n    if (end === -1) {\n        tokenizer.pos = tokenizer.str.length;\n        tokenizer.error('Expect an apostrophe');\n    }\n\n    return tokenizer.substringToPos(end + 1);\n}\n\nfunction readMultiplierRange(tokenizer) {\n    let min = null;\n    let max = null;\n\n    tokenizer.eat(LEFTCURLYBRACKET);\n    tokenizer.skipWs();\n\n    min = scanNumber(tokenizer);\n    tokenizer.skipWs();\n\n    if (tokenizer.charCode() === COMMA) {\n        tokenizer.pos++;\n        tokenizer.skipWs();\n\n        if (tokenizer.charCode() !== RIGHTCURLYBRACKET) {\n            max = scanNumber(tokenizer);\n            tokenizer.skipWs();\n        }\n    } else {\n        max = min;\n    }\n\n    tokenizer.eat(RIGHTCURLYBRACKET);\n\n    return {\n        min: Number(min),\n        max: max ? Number(max) : 0\n    };\n}\n\nfunction readMultiplier(tokenizer) {\n    let range = null;\n    let comma = false;\n\n    switch (tokenizer.charCode()) {\n        case ASTERISK:\n            tokenizer.pos++;\n\n            range = {\n                min: 0,\n                max: 0\n            };\n\n            break;\n\n        case PLUSSIGN:\n            tokenizer.pos++;\n\n            range = {\n                min: 1,\n                max: 0\n            };\n\n            break;\n\n        case QUESTIONMARK:\n            tokenizer.pos++;\n\n            range = {\n                min: 0,\n                max: 1\n            };\n\n            break;\n\n        case NUMBERSIGN:\n            tokenizer.pos++;\n\n            comma = true;\n\n            if (tokenizer.charCode() === LEFTCURLYBRACKET) {\n                range = readMultiplierRange(tokenizer);\n            } else if (tokenizer.charCode() === QUESTIONMARK) {\n                // https://www.w3.org/TR/css-values-4/#component-multipliers\n                // > the # and ? multipliers may be stacked as #?\n                // In this case just treat \"#?\" as a single multiplier\n                // { min: 0, max: 0, comma: true }\n                tokenizer.pos++;\n                range = {\n                    min: 0,\n                    max: 0\n                };\n            } else {\n                range = {\n                    min: 1,\n                    max: 0\n                };\n            }\n\n            break;\n\n        case LEFTCURLYBRACKET:\n            range = readMultiplierRange(tokenizer);\n            break;\n\n        default:\n            return null;\n    }\n\n    return {\n        type: 'Multiplier',\n        comma,\n        min: range.min,\n        max: range.max,\n        term: null\n    };\n}\n\nfunction maybeMultiplied(tokenizer, node) {\n    const multiplier = readMultiplier(tokenizer);\n\n    if (multiplier !== null) {\n        multiplier.term = node;\n\n        // https://www.w3.org/TR/css-values-4/#component-multipliers\n        // > The + and # multipliers may be stacked as +#;\n        // Represent \"+#\" as nested multipliers:\n        // { ...<multiplier #>,\n        //   term: {\n        //     ...<multipler +>,\n        //     term: node\n        //   }\n        // }\n        if (tokenizer.charCode() === NUMBERSIGN &&\n            tokenizer.charCodeAt(tokenizer.pos - 1) === PLUSSIGN) {\n            return maybeMultiplied(tokenizer, multiplier);\n        }\n\n        return multiplier;\n    }\n\n    return node;\n}\n\nfunction maybeToken(tokenizer) {\n    const ch = tokenizer.peek();\n\n    if (ch === '') {\n        return null;\n    }\n\n    return {\n        type: 'Token',\n        value: ch\n    };\n}\n\nfunction readProperty(tokenizer) {\n    let name;\n\n    tokenizer.eat(LESSTHANSIGN);\n    tokenizer.eat(APOSTROPHE);\n\n    name = scanWord(tokenizer);\n\n    tokenizer.eat(APOSTROPHE);\n    tokenizer.eat(GREATERTHANSIGN);\n\n    return maybeMultiplied(tokenizer, {\n        type: 'Property',\n        name\n    });\n}\n\n// https://drafts.csswg.org/css-values-3/#numeric-ranges\n// 4.1. Range Restrictions and Range Definition Notation\n//\n// Range restrictions can be annotated in the numeric type notation using CSS bracketed\n// range notation—[min,max]—within the angle brackets, after the identifying keyword,\n// indicating a closed range between (and including) min and max.\n// For example, <integer [0, 10]> indicates an integer between 0 and 10, inclusive.\nfunction readTypeRange(tokenizer) {\n    // use null for Infinity to make AST format JSON serializable/deserializable\n    let min = null; // -Infinity\n    let max = null; // Infinity\n    let sign = 1;\n\n    tokenizer.eat(LEFTSQUAREBRACKET);\n\n    if (tokenizer.charCode() === HYPERMINUS) {\n        tokenizer.peek();\n        sign = -1;\n    }\n\n    if (sign == -1 && tokenizer.charCode() === INFINITY) {\n        tokenizer.peek();\n    } else {\n        min = sign * Number(scanNumber(tokenizer));\n\n        if (NAME_CHAR[tokenizer.charCode()] !== 0) {\n            min += scanWord(tokenizer);\n        }\n    }\n\n    scanSpaces(tokenizer);\n    tokenizer.eat(COMMA);\n    scanSpaces(tokenizer);\n\n    if (tokenizer.charCode() === INFINITY) {\n        tokenizer.peek();\n    } else {\n        sign = 1;\n\n        if (tokenizer.charCode() === HYPERMINUS) {\n            tokenizer.peek();\n            sign = -1;\n        }\n\n        max = sign * Number(scanNumber(tokenizer));\n\n        if (NAME_CHAR[tokenizer.charCode()] !== 0) {\n            max += scanWord(tokenizer);\n        }\n    }\n\n    tokenizer.eat(RIGHTSQUAREBRACKET);\n\n    return {\n        type: 'Range',\n        min,\n        max\n    };\n}\n\nfunction readType(tokenizer) {\n    let name;\n    let opts = null;\n\n    tokenizer.eat(LESSTHANSIGN);\n    name = scanWord(tokenizer);\n\n    if (tokenizer.charCode() === LEFTPARENTHESIS &&\n        tokenizer.nextCharCode() === RIGHTPARENTHESIS) {\n        tokenizer.pos += 2;\n        name += '()';\n    }\n\n    if (tokenizer.charCodeAt(tokenizer.findWsEnd(tokenizer.pos)) === LEFTSQUAREBRACKET) {\n        scanSpaces(tokenizer);\n        opts = readTypeRange(tokenizer);\n    }\n\n    tokenizer.eat(GREATERTHANSIGN);\n\n    return maybeMultiplied(tokenizer, {\n        type: 'Type',\n        name,\n        opts\n    });\n}\n\nfunction readKeywordOrFunction(tokenizer) {\n    const name = scanWord(tokenizer);\n\n    if (tokenizer.charCode() === LEFTPARENTHESIS) {\n        tokenizer.pos++;\n\n        return {\n            type: 'Function',\n            name\n        };\n    }\n\n    return maybeMultiplied(tokenizer, {\n        type: 'Keyword',\n        name\n    });\n}\n\nfunction regroupTerms(terms, combinators) {\n    function createGroup(terms, combinator) {\n        return {\n            type: 'Group',\n            terms,\n            combinator,\n            disallowEmpty: false,\n            explicit: false\n        };\n    }\n\n    let combinator;\n\n    combinators = Object.keys(combinators)\n        .sort((a, b) => COMBINATOR_PRECEDENCE[a] - COMBINATOR_PRECEDENCE[b]);\n\n    while (combinators.length > 0) {\n        combinator = combinators.shift();\n\n        let i = 0;\n        let subgroupStart = 0;\n\n        for (; i < terms.length; i++) {\n            const term = terms[i];\n\n            if (term.type === 'Combinator') {\n                if (term.value === combinator) {\n                    if (subgroupStart === -1) {\n                        subgroupStart = i - 1;\n                    }\n                    terms.splice(i, 1);\n                    i--;\n                } else {\n                    if (subgroupStart !== -1 && i - subgroupStart > 1) {\n                        terms.splice(\n                            subgroupStart,\n                            i - subgroupStart,\n                            createGroup(terms.slice(subgroupStart, i), combinator)\n                        );\n                        i = subgroupStart + 1;\n                    }\n                    subgroupStart = -1;\n                }\n            }\n        }\n\n        if (subgroupStart !== -1 && combinators.length) {\n            terms.splice(\n                subgroupStart,\n                i - subgroupStart,\n                createGroup(terms.slice(subgroupStart, i), combinator)\n            );\n        }\n    }\n\n    return combinator;\n}\n\nfunction readImplicitGroup(tokenizer) {\n    const terms = [];\n    const combinators = {};\n    let token;\n    let prevToken = null;\n    let prevTokenPos = tokenizer.pos;\n\n    while (token = peek(tokenizer)) {\n        if (token.type !== 'Spaces') {\n            if (token.type === 'Combinator') {\n                // check for combinator in group beginning and double combinator sequence\n                if (prevToken === null || prevToken.type === 'Combinator') {\n                    tokenizer.pos = prevTokenPos;\n                    tokenizer.error('Unexpected combinator');\n                }\n\n                combinators[token.value] = true;\n            } else if (prevToken !== null && prevToken.type !== 'Combinator') {\n                combinators[' '] = true;  // a b\n                terms.push({\n                    type: 'Combinator',\n                    value: ' '\n                });\n            }\n\n            terms.push(token);\n            prevToken = token;\n            prevTokenPos = tokenizer.pos;\n        }\n    }\n\n    // check for combinator in group ending\n    if (prevToken !== null && prevToken.type === 'Combinator') {\n        tokenizer.pos -= prevTokenPos;\n        tokenizer.error('Unexpected combinator');\n    }\n\n    return {\n        type: 'Group',\n        terms,\n        combinator: regroupTerms(terms, combinators) || ' ',\n        disallowEmpty: false,\n        explicit: false\n    };\n}\n\nfunction readGroup(tokenizer) {\n    let result;\n\n    tokenizer.eat(LEFTSQUAREBRACKET);\n    result = readImplicitGroup(tokenizer);\n    tokenizer.eat(RIGHTSQUAREBRACKET);\n\n    result.explicit = true;\n\n    if (tokenizer.charCode() === EXCLAMATIONMARK) {\n        tokenizer.pos++;\n        result.disallowEmpty = true;\n    }\n\n    return result;\n}\n\nfunction peek(tokenizer) {\n    let code = tokenizer.charCode();\n\n    if (code < 128 && NAME_CHAR[code] === 1) {\n        return readKeywordOrFunction(tokenizer);\n    }\n\n    switch (code) {\n        case RIGHTSQUAREBRACKET:\n            // don't eat, stop scan a group\n            break;\n\n        case LEFTSQUAREBRACKET:\n            return maybeMultiplied(tokenizer, readGroup(tokenizer));\n\n        case LESSTHANSIGN:\n            return tokenizer.nextCharCode() === APOSTROPHE\n                ? readProperty(tokenizer)\n                : readType(tokenizer);\n\n        case VERTICALLINE:\n            return {\n                type: 'Combinator',\n                value: tokenizer.substringToPos(\n                    tokenizer.pos + (tokenizer.nextCharCode() === VERTICALLINE ? 2 : 1)\n                )\n            };\n\n        case AMPERSAND:\n            tokenizer.pos++;\n            tokenizer.eat(AMPERSAND);\n\n            return {\n                type: 'Combinator',\n                value: '&&'\n            };\n\n        case COMMA:\n            tokenizer.pos++;\n            return {\n                type: 'Comma'\n            };\n\n        case APOSTROPHE:\n            return maybeMultiplied(tokenizer, {\n                type: 'String',\n                value: scanString(tokenizer)\n            });\n\n        case SPACE:\n        case TAB:\n        case N:\n        case R:\n        case F:\n            return {\n                type: 'Spaces',\n                value: scanSpaces(tokenizer)\n            };\n\n        case COMMERCIALAT:\n            code = tokenizer.nextCharCode();\n\n            if (code < 128 && NAME_CHAR[code] === 1) {\n                tokenizer.pos++;\n                return {\n                    type: 'AtKeyword',\n                    name: scanWord(tokenizer)\n                };\n            }\n\n            return maybeToken(tokenizer);\n\n        case ASTERISK:\n        case PLUSSIGN:\n        case QUESTIONMARK:\n        case NUMBERSIGN:\n        case EXCLAMATIONMARK:\n            // prohibited tokens (used as a multiplier start)\n            break;\n\n        case LEFTCURLYBRACKET:\n            // LEFTCURLYBRACKET is allowed since mdn/data uses it w/o quoting\n            // check next char isn't a number, because it's likely a disjoined multiplier\n            code = tokenizer.nextCharCode();\n\n            if (code < 48 || code > 57) {\n                return maybeToken(tokenizer);\n            }\n\n            break;\n\n        default:\n            return maybeToken(tokenizer);\n    }\n}\n\nexport function parse(source) {\n    const tokenizer = new Tokenizer(source);\n    const result = readImplicitGroup(tokenizer);\n\n    if (tokenizer.pos !== source.length) {\n        tokenizer.error('Unexpected input');\n    }\n\n    // reduce redundant groups with single group term\n    if (result.terms.length === 1 && result.terms[0].type === 'Group') {\n        return result.terms[0];\n    }\n\n    return result;\n};\n","const noop = function() {};\n\nfunction ensureFunction(value) {\n    return typeof value === 'function' ? value : noop;\n}\n\nexport function walk(node, options, context) {\n    function walk(node) {\n        enter.call(context, node);\n\n        switch (node.type) {\n            case 'Group':\n                node.terms.forEach(walk);\n                break;\n\n            case 'Multiplier':\n                walk(node.term);\n                break;\n\n            case 'Type':\n            case 'Property':\n            case 'Keyword':\n            case 'AtKeyword':\n            case 'Function':\n            case 'String':\n            case 'Token':\n            case 'Comma':\n                break;\n\n            default:\n                throw new Error('Unknown type: ' + node.type);\n        }\n\n        leave.call(context, node);\n    }\n\n    let enter = noop;\n    let leave = noop;\n\n    if (typeof options === 'function') {\n        enter = options;\n    } else if (options) {\n        enter = ensureFunction(options.enter);\n        leave = ensureFunction(options.leave);\n    }\n\n    if (enter === noop && leave === noop) {\n        throw new Error('Neither `enter` nor `leave` walker handler is set or both aren\\'t a function');\n    }\n\n    walk(node, context);\n};\n","import { tokenize } from '../tokenizer/index.js';\n\nconst astToTokens = {\n    decorator(handlers) {\n        const tokens = [];\n        let curNode = null;\n\n        return {\n            ...handlers,\n            node(node) {\n                const tmp = curNode;\n                curNode = node;\n                handlers.node.call(this, node);\n                curNode = tmp;\n            },\n            emit(value, type, auto) {\n                tokens.push({\n                    type,\n                    value,\n                    node: auto ? null : curNode\n                });\n            },\n            result() {\n                return tokens;\n            }\n        };\n    }\n};\n\nfunction stringToTokens(str) {\n    const tokens = [];\n\n    tokenize(str, (type, start, end) =>\n        tokens.push({\n            type,\n            value: str.slice(start, end),\n            node: null\n        })\n    );\n\n    return tokens;\n}\n\nexport default function(value, syntax) {\n    if (typeof value === 'string') {\n        return stringToTokens(value);\n    }\n\n    return syntax.generate(value, astToTokens);\n};\n","import { parse } from '../definition-syntax/parse.js';\n\nexport const MATCH = { type: 'Match' };\nexport const MISMATCH = { type: 'Mismatch' };\nexport const DISALLOW_EMPTY = { type: 'DisallowEmpty' };\n\nconst LEFTPARENTHESIS = 40;  // (\nconst RIGHTPARENTHESIS = 41; // )\n\nfunction createCondition(match, thenBranch, elseBranch) {\n    // reduce node count\n    if (thenBranch === MATCH && elseBranch === MISMATCH) {\n        return match;\n    }\n\n    if (match === MATCH && thenBranch === MATCH && elseBranch === MATCH) {\n        return match;\n    }\n\n    if (match.type === 'If' && match.else === MISMATCH && thenBranch === MATCH) {\n        thenBranch = match.then;\n        match = match.match;\n    }\n\n    return {\n        type: 'If',\n        match,\n        then: thenBranch,\n        else: elseBranch\n    };\n}\n\nfunction isFunctionType(name) {\n    return (\n        name.length > 2 &&\n        name.charCodeAt(name.length - 2) === LEFTPARENTHESIS &&\n        name.charCodeAt(name.length - 1) === RIGHTPARENTHESIS\n    );\n}\n\nfunction isEnumCapatible(term) {\n    return (\n        term.type === 'Keyword' ||\n        term.type === 'AtKeyword' ||\n        term.type === 'Function' ||\n        term.type === 'Type' && isFunctionType(term.name)\n    );\n}\n\nfunction buildGroupMatchGraph(combinator, terms, atLeastOneTermMatched) {\n    switch (combinator) {\n        case ' ': {\n            // Juxtaposing components means that all of them must occur, in the given order.\n            //\n            // a b c\n            // =\n            // match a\n            //   then match b\n            //     then match c\n            //       then MATCH\n            //       else MISMATCH\n            //     else MISMATCH\n            //   else MISMATCH\n            let result = MATCH;\n\n            for (let i = terms.length - 1; i >= 0; i--) {\n                const term = terms[i];\n\n                result = createCondition(\n                    term,\n                    result,\n                    MISMATCH\n                );\n            };\n\n            return result;\n        }\n\n        case '|': {\n            // A bar (|) separates two or more alternatives: exactly one of them must occur.\n            //\n            // a | b | c\n            // =\n            // match a\n            //   then MATCH\n            //   else match b\n            //     then MATCH\n            //     else match c\n            //       then MATCH\n            //       else MISMATCH\n\n            let result = MISMATCH;\n            let map = null;\n\n            for (let i = terms.length - 1; i >= 0; i--) {\n                let term = terms[i];\n\n                // reduce sequence of keywords into a Enum\n                if (isEnumCapatible(term)) {\n                    if (map === null && i > 0 && isEnumCapatible(terms[i - 1])) {\n                        map = Object.create(null);\n                        result = createCondition(\n                            {\n                                type: 'Enum',\n                                map\n                            },\n                            MATCH,\n                            result\n                        );\n                    }\n\n                    if (map !== null) {\n                        const key = (isFunctionType(term.name) ? term.name.slice(0, -1) : term.name).toLowerCase();\n                        if (key in map === false) {\n                            map[key] = term;\n                            continue;\n                        }\n                    }\n                }\n\n                map = null;\n\n                // create a new conditonal node\n                result = createCondition(\n                    term,\n                    MATCH,\n                    result\n                );\n            };\n\n            return result;\n        }\n\n        case '&&': {\n            // A double ampersand (&&) separates two or more components,\n            // all of which must occur, in any order.\n\n            // Use MatchOnce for groups with a large number of terms,\n            // since &&-groups produces at least N!-node trees\n            if (terms.length > 5) {\n                return {\n                    type: 'MatchOnce',\n                    terms,\n                    all: true\n                };\n            }\n\n            // Use a combination tree for groups with small number of terms\n            //\n            // a && b && c\n            // =\n            // match a\n            //   then [b && c]\n            //   else match b\n            //     then [a && c]\n            //     else match c\n            //       then [a && b]\n            //       else MISMATCH\n            //\n            // a && b\n            // =\n            // match a\n            //   then match b\n            //     then MATCH\n            //     else MISMATCH\n            //   else match b\n            //     then match a\n            //       then MATCH\n            //       else MISMATCH\n            //     else MISMATCH\n            let result = MISMATCH;\n\n            for (let i = terms.length - 1; i >= 0; i--) {\n                const term = terms[i];\n                let thenClause;\n\n                if (terms.length > 1) {\n                    thenClause = buildGroupMatchGraph(\n                        combinator,\n                        terms.filter(function(newGroupTerm) {\n                            return newGroupTerm !== term;\n                        }),\n                        false\n                    );\n                } else {\n                    thenClause = MATCH;\n                }\n\n                result = createCondition(\n                    term,\n                    thenClause,\n                    result\n                );\n            };\n\n            return result;\n        }\n\n        case '||': {\n            // A double bar (||) separates two or more options:\n            // one or more of them must occur, in any order.\n\n            // Use MatchOnce for groups with a large number of terms,\n            // since ||-groups produces at least N!-node trees\n            if (terms.length > 5) {\n                return {\n                    type: 'MatchOnce',\n                    terms,\n                    all: false\n                };\n            }\n\n            // Use a combination tree for groups with small number of terms\n            //\n            // a || b || c\n            // =\n            // match a\n            //   then [b || c]\n            //   else match b\n            //     then [a || c]\n            //     else match c\n            //       then [a || b]\n            //       else MISMATCH\n            //\n            // a || b\n            // =\n            // match a\n            //   then match b\n            //     then MATCH\n            //     else MATCH\n            //   else match b\n            //     then match a\n            //       then MATCH\n            //       else MATCH\n            //     else MISMATCH\n            let result = atLeastOneTermMatched ? MATCH : MISMATCH;\n\n            for (let i = terms.length - 1; i >= 0; i--) {\n                const term = terms[i];\n                let thenClause;\n\n                if (terms.length > 1) {\n                    thenClause = buildGroupMatchGraph(\n                        combinator,\n                        terms.filter(function(newGroupTerm) {\n                            return newGroupTerm !== term;\n                        }),\n                        true\n                    );\n                } else {\n                    thenClause = MATCH;\n                }\n\n                result = createCondition(\n                    term,\n                    thenClause,\n                    result\n                );\n            };\n\n            return result;\n        }\n    }\n}\n\nfunction buildMultiplierMatchGraph(node) {\n    let result = MATCH;\n    let matchTerm = buildMatchGraphInternal(node.term);\n\n    if (node.max === 0) {\n        // disable repeating of empty match to prevent infinite loop\n        matchTerm = createCondition(\n            matchTerm,\n            DISALLOW_EMPTY,\n            MISMATCH\n        );\n\n        // an occurrence count is not limited, make a cycle;\n        // to collect more terms on each following matching mismatch\n        result = createCondition(\n            matchTerm,\n            null, // will be a loop\n            MISMATCH\n        );\n\n        result.then = createCondition(\n            MATCH,\n            MATCH,\n            result // make a loop\n        );\n\n        if (node.comma) {\n            result.then.else = createCondition(\n                { type: 'Comma', syntax: node },\n                result,\n                MISMATCH\n            );\n        }\n    } else {\n        // create a match node chain for [min .. max] interval with optional matches\n        for (let i = node.min || 1; i <= node.max; i++) {\n            if (node.comma && result !== MATCH) {\n                result = createCondition(\n                    { type: 'Comma', syntax: node },\n                    result,\n                    MISMATCH\n                );\n            }\n\n            result = createCondition(\n                matchTerm,\n                createCondition(\n                    MATCH,\n                    MATCH,\n                    result\n                ),\n                MISMATCH\n            );\n        }\n    }\n\n    if (node.min === 0) {\n        // allow zero match\n        result = createCondition(\n            MATCH,\n            MATCH,\n            result\n        );\n    } else {\n        // create a match node chain to collect [0 ... min - 1] required matches\n        for (let i = 0; i < node.min - 1; i++) {\n            if (node.comma && result !== MATCH) {\n                result = createCondition(\n                    { type: 'Comma', syntax: node },\n                    result,\n                    MISMATCH\n                );\n            }\n\n            result = createCondition(\n                matchTerm,\n                result,\n                MISMATCH\n            );\n        }\n    }\n\n    return result;\n}\n\nfunction buildMatchGraphInternal(node) {\n    if (typeof node === 'function') {\n        return {\n            type: 'Generic',\n            fn: node\n        };\n    }\n\n    switch (node.type) {\n        case 'Group': {\n            let result = buildGroupMatchGraph(\n                node.combinator,\n                node.terms.map(buildMatchGraphInternal),\n                false\n            );\n\n            if (node.disallowEmpty) {\n                result = createCondition(\n                    result,\n                    DISALLOW_EMPTY,\n                    MISMATCH\n                );\n            }\n\n            return result;\n        }\n\n        case 'Multiplier':\n            return buildMultiplierMatchGraph(node);\n\n        case 'Type':\n        case 'Property':\n            return {\n                type: node.type,\n                name: node.name,\n                syntax: node\n            };\n\n        case 'Keyword':\n            return {\n                type: node.type,\n                name: node.name.toLowerCase(),\n                syntax: node\n            };\n\n        case 'AtKeyword':\n            return {\n                type: node.type,\n                name: '@' + node.name.toLowerCase(),\n                syntax: node\n            };\n\n        case 'Function':\n            return {\n                type: node.type,\n                name: node.name.toLowerCase() + '(',\n                syntax: node\n            };\n\n        case 'String':\n            // convert a one char length String to a Token\n            if (node.value.length === 3) {\n                return {\n                    type: 'Token',\n                    value: node.value.charAt(1),\n                    syntax: node\n                };\n            }\n\n            // otherwise use it as is\n            return {\n                type: node.type,\n                value: node.value.substr(1, node.value.length - 2).replace(/\\\\'/g, '\\''),\n                syntax: node\n            };\n\n        case 'Token':\n            return {\n                type: node.type,\n                value: node.value,\n                syntax: node\n            };\n\n        case 'Comma':\n            return {\n                type: node.type,\n                syntax: node\n            };\n\n        default:\n            throw new Error('Unknown node type:', node.type);\n    }\n}\n\nexport function buildMatchGraph(syntaxTree, ref) {\n    if (typeof syntaxTree === 'string') {\n        syntaxTree = parse(syntaxTree);\n    }\n\n    return {\n        type: 'MatchGraph',\n        match: buildMatchGraphInternal(syntaxTree),\n        syntax: ref || null,\n        source: syntaxTree\n    };\n}\n","import { MATCH, MISMATCH, DISALLOW_EMPTY } from './match-graph.js';\nimport * as TYPE from '../tokenizer/types.js';\n\nconst { hasOwnProperty } = Object.prototype;\nconst STUB = 0;\nconst TOKEN = 1;\nconst OPEN_SYNTAX = 2;\nconst CLOSE_SYNTAX = 3;\n\nconst EXIT_REASON_MATCH = 'Match';\nconst EXIT_REASON_MISMATCH = 'Mismatch';\nconst EXIT_REASON_ITERATION_LIMIT = 'Maximum iteration number exceeded (please fill an issue on https://github.com/csstree/csstree/issues)';\n\nconst ITERATION_LIMIT = 15000;\nexport let totalIterationCount = 0;\n\nfunction reverseList(list) {\n    let prev = null;\n    let next = null;\n    let item = list;\n\n    while (item !== null) {\n        next = item.prev;\n        item.prev = prev;\n        prev = item;\n        item = next;\n    }\n\n    return prev;\n}\n\nfunction areStringsEqualCaseInsensitive(testStr, referenceStr) {\n    if (testStr.length !== referenceStr.length) {\n        return false;\n    }\n\n    for (let i = 0; i < testStr.length; i++) {\n        const referenceCode = referenceStr.charCodeAt(i);\n        let testCode = testStr.charCodeAt(i);\n\n        // testCode.toLowerCase() for U+0041 LATIN CAPITAL LETTER A (A) .. U+005A LATIN CAPITAL LETTER Z (Z).\n        if (testCode >= 0x0041 && testCode <= 0x005A) {\n            testCode = testCode | 32;\n        }\n\n        if (testCode !== referenceCode) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\nfunction isContextEdgeDelim(token) {\n    if (token.type !== TYPE.Delim) {\n        return false;\n    }\n\n    // Fix matching for unicode-range: U+30??, U+FF00-FF9F\n    // Probably we need to check out previous match instead\n    return token.value !== '?';\n}\n\nfunction isCommaContextStart(token) {\n    if (token === null) {\n        return true;\n    }\n\n    return (\n        token.type === TYPE.Comma ||\n        token.type === TYPE.Function ||\n        token.type === TYPE.LeftParenthesis ||\n        token.type === TYPE.LeftSquareBracket ||\n        token.type === TYPE.LeftCurlyBracket ||\n        isContextEdgeDelim(token)\n    );\n}\n\nfunction isCommaContextEnd(token) {\n    if (token === null) {\n        return true;\n    }\n\n    return (\n        token.type === TYPE.RightParenthesis ||\n        token.type === TYPE.RightSquareBracket ||\n        token.type === TYPE.RightCurlyBracket ||\n        (token.type === TYPE.Delim && token.value === '/')\n    );\n}\n\nfunction internalMatch(tokens, state, syntaxes) {\n    function moveToNextToken() {\n        do {\n            tokenIndex++;\n            token = tokenIndex < tokens.length ? tokens[tokenIndex] : null;\n        } while (token !== null && (token.type === TYPE.WhiteSpace || token.type === TYPE.Comment));\n    }\n\n    function getNextToken(offset) {\n        const nextIndex = tokenIndex + offset;\n\n        return nextIndex < tokens.length ? tokens[nextIndex] : null;\n    }\n\n    function stateSnapshotFromSyntax(nextState, prev) {\n        return {\n            nextState,\n            matchStack,\n            syntaxStack,\n            thenStack,\n            tokenIndex,\n            prev\n        };\n    }\n\n    function pushThenStack(nextState) {\n        thenStack = {\n            nextState,\n            matchStack,\n            syntaxStack,\n            prev: thenStack\n        };\n    }\n\n    function pushElseStack(nextState) {\n        elseStack = stateSnapshotFromSyntax(nextState, elseStack);\n    }\n\n    function addTokenToMatch() {\n        matchStack = {\n            type: TOKEN,\n            syntax: state.syntax,\n            token,\n            prev: matchStack\n        };\n\n        moveToNextToken();\n        syntaxStash = null;\n\n        if (tokenIndex > longestMatch) {\n            longestMatch = tokenIndex;\n        }\n    }\n\n    function openSyntax() {\n        syntaxStack = {\n            syntax: state.syntax,\n            opts: state.syntax.opts || (syntaxStack !== null && syntaxStack.opts) || null,\n            prev: syntaxStack\n        };\n\n        matchStack = {\n            type: OPEN_SYNTAX,\n            syntax: state.syntax,\n            token: matchStack.token,\n            prev: matchStack\n        };\n    }\n\n    function closeSyntax() {\n        if (matchStack.type === OPEN_SYNTAX) {\n            matchStack = matchStack.prev;\n        } else {\n            matchStack = {\n                type: CLOSE_SYNTAX,\n                syntax: syntaxStack.syntax,\n                token: matchStack.token,\n                prev: matchStack\n            };\n        }\n\n        syntaxStack = syntaxStack.prev;\n    }\n\n    let syntaxStack = null;\n    let thenStack = null;\n    let elseStack = null;\n\n    // null – stashing allowed, nothing stashed\n    // false – stashing disabled, nothing stashed\n    // anithing else – fail stashable syntaxes, some syntax stashed\n    let syntaxStash = null;\n\n    let iterationCount = 0; // count iterations and prevent infinite loop\n    let exitReason = null;\n\n    let token = null;\n    let tokenIndex = -1;\n    let longestMatch = 0;\n    let matchStack = {\n        type: STUB,\n        syntax: null,\n        token: null,\n        prev: null\n    };\n\n    moveToNextToken();\n\n    while (exitReason === null && ++iterationCount < ITERATION_LIMIT) {\n        // function mapList(list, fn) {\n        //     const result = [];\n        //     while (list) {\n        //         result.unshift(fn(list));\n        //         list = list.prev;\n        //     }\n        //     return result;\n        // }\n        // console.log('--\\n',\n        //     '#' + iterationCount,\n        //     require('util').inspect({\n        //         match: mapList(matchStack, x => x.type === TOKEN ? x.token && x.token.value : x.syntax ? ({ [OPEN_SYNTAX]: '<', [CLOSE_SYNTAX]: '</' }[x.type] || x.type) + '!' + x.syntax.name : null),\n        //         token: token && token.value,\n        //         tokenIndex,\n        //         syntax: syntax.type + (syntax.id ? ' #' + syntax.id : '')\n        //     }, { depth: null })\n        // );\n        switch (state.type) {\n            case 'Match':\n                if (thenStack === null) {\n                    // turn to MISMATCH when some tokens left unmatched\n                    if (token !== null) {\n                        // doesn't mismatch if just one token left and it's an IE hack\n                        if (tokenIndex !== tokens.length - 1 || (token.value !== '\\\\0' && token.value !== '\\\\9')) {\n                            state = MISMATCH;\n                            break;\n                        }\n                    }\n\n                    // break the main loop, return a result - MATCH\n                    exitReason = EXIT_REASON_MATCH;\n                    break;\n                }\n\n                // go to next syntax (`then` branch)\n                state = thenStack.nextState;\n\n                // check match is not empty\n                if (state === DISALLOW_EMPTY) {\n                    if (thenStack.matchStack === matchStack) {\n                        state = MISMATCH;\n                        break;\n                    } else {\n                        state = MATCH;\n                    }\n                }\n\n                // close syntax if needed\n                while (thenStack.syntaxStack !== syntaxStack) {\n                    closeSyntax();\n                }\n\n                // pop stack\n                thenStack = thenStack.prev;\n                break;\n\n            case 'Mismatch':\n                // when some syntax is stashed\n                if (syntaxStash !== null && syntaxStash !== false) {\n                    // there is no else branches or a branch reduce match stack\n                    if (elseStack === null || tokenIndex > elseStack.tokenIndex) {\n                        // restore state from the stash\n                        elseStack = syntaxStash;\n                        syntaxStash = false; // disable stashing\n                    }\n                } else if (elseStack === null) {\n                    // no else branches -> break the main loop\n                    // return a result - MISMATCH\n                    exitReason = EXIT_REASON_MISMATCH;\n                    break;\n                }\n\n                // go to next syntax (`else` branch)\n                state = elseStack.nextState;\n\n                // restore all the rest stack states\n                thenStack = elseStack.thenStack;\n                syntaxStack = elseStack.syntaxStack;\n                matchStack = elseStack.matchStack;\n                tokenIndex = elseStack.tokenIndex;\n                token = tokenIndex < tokens.length ? tokens[tokenIndex] : null;\n\n                // pop stack\n                elseStack = elseStack.prev;\n                break;\n\n            case 'MatchGraph':\n                state = state.match;\n                break;\n\n            case 'If':\n                // IMPORTANT: else stack push must go first,\n                // since it stores the state of thenStack before changes\n                if (state.else !== MISMATCH) {\n                    pushElseStack(state.else);\n                }\n\n                if (state.then !== MATCH) {\n                    pushThenStack(state.then);\n                }\n\n                state = state.match;\n                break;\n\n            case 'MatchOnce':\n                state = {\n                    type: 'MatchOnceBuffer',\n                    syntax: state,\n                    index: 0,\n                    mask: 0\n                };\n                break;\n\n            case 'MatchOnceBuffer': {\n                const terms = state.syntax.terms;\n\n                if (state.index === terms.length) {\n                    // no matches at all or it's required all terms to be matched\n                    if (state.mask === 0 || state.syntax.all) {\n                        state = MISMATCH;\n                        break;\n                    }\n\n                    // a partial match is ok\n                    state = MATCH;\n                    break;\n                }\n\n                // all terms are matched\n                if (state.mask === (1 << terms.length) - 1) {\n                    state = MATCH;\n                    break;\n                }\n\n                for (; state.index < terms.length; state.index++) {\n                    const matchFlag = 1 << state.index;\n\n                    if ((state.mask & matchFlag) === 0) {\n                        // IMPORTANT: else stack push must go first,\n                        // since it stores the state of thenStack before changes\n                        pushElseStack(state);\n                        pushThenStack({\n                            type: 'AddMatchOnce',\n                            syntax: state.syntax,\n                            mask: state.mask | matchFlag\n                        });\n\n                        // match\n                        state = terms[state.index++];\n                        break;\n                    }\n                }\n                break;\n            }\n\n            case 'AddMatchOnce':\n                state = {\n                    type: 'MatchOnceBuffer',\n                    syntax: state.syntax,\n                    index: 0,\n                    mask: state.mask\n                };\n                break;\n\n            case 'Enum':\n                if (token !== null) {\n                    let name = token.value.toLowerCase();\n\n                    // drop \\0 and \\9 hack from keyword name\n                    if (name.indexOf('\\\\') !== -1) {\n                        name = name.replace(/\\\\[09].*$/, '');\n                    }\n\n                    if (hasOwnProperty.call(state.map, name)) {\n                        state = state.map[name];\n                        break;\n                    }\n                }\n\n                state = MISMATCH;\n                break;\n\n            case 'Generic': {\n                const opts = syntaxStack !== null ? syntaxStack.opts : null;\n                const lastTokenIndex = tokenIndex + Math.floor(state.fn(token, getNextToken, opts));\n\n                if (!isNaN(lastTokenIndex) && lastTokenIndex > tokenIndex) {\n                    while (tokenIndex < lastTokenIndex) {\n                        addTokenToMatch();\n                    }\n\n                    state = MATCH;\n                } else {\n                    state = MISMATCH;\n                }\n\n                break;\n            }\n\n            case 'Type':\n            case 'Property': {\n                const syntaxDict = state.type === 'Type' ? 'types' : 'properties';\n                const dictSyntax = hasOwnProperty.call(syntaxes, syntaxDict) ? syntaxes[syntaxDict][state.name] : null;\n\n                if (!dictSyntax || !dictSyntax.match) {\n                    throw new Error(\n                        'Bad syntax reference: ' +\n                        (state.type === 'Type'\n                            ? '<' + state.name + '>'\n                            : '<\\'' + state.name + '\\'>')\n                    );\n                }\n\n                // stash a syntax for types with low priority\n                if (syntaxStash !== false && token !== null && state.type === 'Type') {\n                    const lowPriorityMatching =\n                        // https://drafts.csswg.org/css-values-4/#custom-idents\n                        // When parsing positionally-ambiguous keywords in a property value, a <custom-ident> production\n                        // can only claim the keyword if no other unfulfilled production can claim it.\n                        (state.name === 'custom-ident' && token.type === TYPE.Ident) ||\n\n                        // https://drafts.csswg.org/css-values-4/#lengths\n                        // ... if a `0` could be parsed as either a <number> or a <length> in a property (such as line-height),\n                        // it must parse as a <number>\n                        (state.name === 'length' && token.value === '0');\n\n                    if (lowPriorityMatching) {\n                        if (syntaxStash === null) {\n                            syntaxStash = stateSnapshotFromSyntax(state, elseStack);\n                        }\n\n                        state = MISMATCH;\n                        break;\n                    }\n                }\n\n                openSyntax();\n                state = dictSyntax.matchRef || dictSyntax.match;\n                break;\n            }\n\n            case 'Keyword': {\n                const name = state.name;\n\n                if (token !== null) {\n                    let keywordName = token.value;\n\n                    // drop \\0 and \\9 hack from keyword name\n                    if (keywordName.indexOf('\\\\') !== -1) {\n                        keywordName = keywordName.replace(/\\\\[09].*$/, '');\n                    }\n\n                    if (areStringsEqualCaseInsensitive(keywordName, name)) {\n                        addTokenToMatch();\n                        state = MATCH;\n                        break;\n                    }\n                }\n\n                state = MISMATCH;\n                break;\n            }\n\n            case 'AtKeyword':\n            case 'Function':\n                if (token !== null && areStringsEqualCaseInsensitive(token.value, state.name)) {\n                    addTokenToMatch();\n                    state = MATCH;\n                    break;\n                }\n\n                state = MISMATCH;\n                break;\n\n            case 'Token':\n                if (token !== null && token.value === state.value) {\n                    addTokenToMatch();\n                    state = MATCH;\n                    break;\n                }\n\n                state = MISMATCH;\n                break;\n\n            case 'Comma':\n                if (token !== null && token.type === TYPE.Comma) {\n                    if (isCommaContextStart(matchStack.token)) {\n                        state = MISMATCH;\n                    } else {\n                        addTokenToMatch();\n                        state = isCommaContextEnd(token) ? MISMATCH : MATCH;\n                    }\n                } else {\n                    state = isCommaContextStart(matchStack.token) || isCommaContextEnd(token) ? MATCH : MISMATCH;\n                }\n\n                break;\n\n            case 'String':\n                let string = '';\n                let lastTokenIndex = tokenIndex;\n\n                for (; lastTokenIndex < tokens.length && string.length < state.value.length; lastTokenIndex++) {\n                    string += tokens[lastTokenIndex].value;\n                }\n\n                if (areStringsEqualCaseInsensitive(string, state.value)) {\n                    while (tokenIndex < lastTokenIndex) {\n                        addTokenToMatch();\n                    }\n\n                    state = MATCH;\n                } else {\n                    state = MISMATCH;\n                }\n\n                break;\n\n            default:\n                throw new Error('Unknown node type: ' + state.type);\n        }\n    }\n\n    totalIterationCount += iterationCount;\n\n    switch (exitReason) {\n        case null:\n            console.warn('[csstree-match] BREAK after ' + ITERATION_LIMIT + ' iterations');\n            exitReason = EXIT_REASON_ITERATION_LIMIT;\n            matchStack = null;\n            break;\n\n        case EXIT_REASON_MATCH:\n            while (syntaxStack !== null) {\n                closeSyntax();\n            }\n            break;\n\n        default:\n            matchStack = null;\n    }\n\n    return {\n        tokens,\n        reason: exitReason,\n        iterations: iterationCount,\n        match: matchStack,\n        longestMatch\n    };\n}\n\nexport function matchAsList(tokens, matchGraph, syntaxes) {\n    const matchResult = internalMatch(tokens, matchGraph, syntaxes || {});\n\n    if (matchResult.match !== null) {\n        let item = reverseList(matchResult.match).prev;\n\n        matchResult.match = [];\n\n        while (item !== null) {\n            switch (item.type) {\n                case OPEN_SYNTAX:\n                case CLOSE_SYNTAX:\n                    matchResult.match.push({\n                        type: item.type,\n                        syntax: item.syntax\n                    });\n                    break;\n\n                default:\n                    matchResult.match.push({\n                        token: item.token.value,\n                        node: item.token.node\n                    });\n                    break;\n            }\n\n            item = item.prev;\n        }\n    }\n\n    return matchResult;\n}\n\nexport function matchAsTree(tokens, matchGraph, syntaxes) {\n    const matchResult = internalMatch(tokens, matchGraph, syntaxes || {});\n\n    if (matchResult.match === null) {\n        return matchResult;\n    }\n\n    let item = matchResult.match;\n    let host = matchResult.match = {\n        syntax: matchGraph.syntax || null,\n        match: []\n    };\n    const hostStack = [host];\n\n    // revert a list and start with 2nd item since 1st is a stub item\n    item = reverseList(item).prev;\n\n    // build a tree\n    while (item !== null) {\n        switch (item.type) {\n            case OPEN_SYNTAX:\n                host.match.push(host = {\n                    syntax: item.syntax,\n                    match: []\n                });\n                hostStack.push(host);\n                break;\n\n            case CLOSE_SYNTAX:\n                hostStack.pop();\n                host = hostStack[hostStack.length - 1];\n                break;\n\n            default:\n                host.match.push({\n                    syntax: item.syntax || null,\n                    token: item.token.value,\n                    node: item.token.node\n                });\n        }\n\n        item = item.prev;\n    }\n\n    return matchResult;\n}\n","export function getTrace(node) {\n    function shouldPutToTrace(syntax) {\n        if (syntax === null) {\n            return false;\n        }\n\n        return (\n            syntax.type === 'Type' ||\n            syntax.type === 'Property' ||\n            syntax.type === 'Keyword'\n        );\n    }\n\n    function hasMatch(matchNode) {\n        if (Array.isArray(matchNode.match)) {\n            // use for-loop for better perfomance\n            for (let i = 0; i < matchNode.match.length; i++) {\n                if (hasMatch(matchNode.match[i])) {\n                    if (shouldPutToTrace(matchNode.syntax)) {\n                        result.unshift(matchNode.syntax);\n                    }\n\n                    return true;\n                }\n            }\n        } else if (matchNode.node === node) {\n            result = shouldPutToTrace(matchNode.syntax)\n                ? [matchNode.syntax]\n                : [];\n\n            return true;\n        }\n\n        return false;\n    }\n\n    let result = null;\n\n    if (this.matched !== null) {\n        hasMatch(this.matched);\n    }\n\n    return result;\n}\n\nexport function isType(node, type) {\n    return testNode(this, node, match => match.type === 'Type' && match.name === type);\n}\n\nexport function isProperty(node, property) {\n    return testNode(this, node, match => match.type === 'Property' && match.name === property);\n}\n\nexport function isKeyword(node) {\n    return testNode(this, node, match => match.type === 'Keyword');\n}\n\nfunction testNode(match, node, fn) {\n    const trace = getTrace.call(match, node);\n\n    if (trace === null) {\n        return false;\n    }\n\n    return trace.some(fn);\n}\n","import { List } from '../utils/List.js';\n\nfunction getFirstMatchNode(matchNode) {\n    if ('node' in matchNode) {\n        return matchNode.node;\n    }\n\n    return getFirstMatchNode(matchNode.match[0]);\n}\n\nfunction getLastMatchNode(matchNode) {\n    if ('node' in matchNode) {\n        return matchNode.node;\n    }\n\n    return getLastMatchNode(matchNode.match[matchNode.match.length - 1]);\n}\n\nexport function matchFragments(lexer, ast, match, type, name) {\n    function findFragments(matchNode) {\n        if (matchNode.syntax !== null &&\n            matchNode.syntax.type === type &&\n            matchNode.syntax.name === name) {\n            const start = getFirstMatchNode(matchNode);\n            const end = getLastMatchNode(matchNode);\n\n            lexer.syntax.walk(ast, function(node, item, list) {\n                if (node === start) {\n                    const nodes = new List();\n\n                    do {\n                        nodes.appendData(item.data);\n\n                        if (item.data === end) {\n                            break;\n                        }\n\n                        item = item.next;\n                    } while (item !== null);\n\n                    fragments.push({\n                        parent: list,\n                        nodes\n                    });\n                }\n            });\n        }\n\n        if (Array.isArray(matchNode.match)) {\n            matchNode.match.forEach(findFragments);\n        }\n    }\n\n    const fragments = [];\n\n    if (match.matched !== null) {\n        findFragments(match.matched);\n    }\n\n    return fragments;\n}\n","import { List } from '../utils/List.js';\n\nconst { hasOwnProperty } = Object.prototype;\n\nfunction isValidNumber(value) {\n    // Number.isInteger(value) && value >= 0\n    return (\n        typeof value === 'number' &&\n        isFinite(value) &&\n        Math.floor(value) === value &&\n        value >= 0\n    );\n}\n\nfunction isValidLocation(loc) {\n    return (\n        Boolean(loc) &&\n        isValidNumber(loc.offset) &&\n        isValidNumber(loc.line) &&\n        isValidNumber(loc.column)\n    );\n}\n\nfunction createNodeStructureChecker(type, fields) {\n    return function checkNode(node, warn) {\n        if (!node || node.constructor !== Object) {\n            return warn(node, 'Type of node should be an Object');\n        }\n\n        for (let key in node) {\n            let valid = true;\n\n            if (hasOwnProperty.call(node, key) === false) {\n                continue;\n            }\n\n            if (key === 'type') {\n                if (node.type !== type) {\n                    warn(node, 'Wrong node type `' + node.type + '`, expected `' + type + '`');\n                }\n            } else if (key === 'loc') {\n                if (node.loc === null) {\n                    continue;\n                } else if (node.loc && node.loc.constructor === Object) {\n                    if (typeof node.loc.source !== 'string') {\n                        key += '.source';\n                    } else if (!isValidLocation(node.loc.start)) {\n                        key += '.start';\n                    } else if (!isValidLocation(node.loc.end)) {\n                        key += '.end';\n                    } else {\n                        continue;\n                    }\n                }\n\n                valid = false;\n            } else if (fields.hasOwnProperty(key)) {\n                valid = false;\n\n                for (let i = 0; !valid && i < fields[key].length; i++) {\n                    const fieldType = fields[key][i];\n\n                    switch (fieldType) {\n                        case String:\n                            valid = typeof node[key] === 'string';\n                            break;\n\n                        case Boolean:\n                            valid = typeof node[key] === 'boolean';\n                            break;\n\n                        case null:\n                            valid = node[key] === null;\n                            break;\n\n                        default:\n                            if (typeof fieldType === 'string') {\n                                valid = node[key] && node[key].type === fieldType;\n                            } else if (Array.isArray(fieldType)) {\n                                valid = node[key] instanceof List;\n                            }\n                    }\n                }\n            } else {\n                warn(node, 'Unknown field `' + key + '` for ' + type + ' node type');\n            }\n\n            if (!valid) {\n                warn(node, 'Bad value for `' + type + '.' + key + '`');\n            }\n        }\n\n        for (const key in fields) {\n            if (hasOwnProperty.call(fields, key) &&\n                hasOwnProperty.call(node, key) === false) {\n                warn(node, 'Field `' + type + '.' + key + '` is missed');\n            }\n        }\n    };\n}\n\nfunction genTypesList(fieldTypes, path) {\n    const docsTypes = [];\n\n    for (let i = 0; i < fieldTypes.length; i++) {\n        const fieldType = fieldTypes[i];\n        if (fieldType === String || fieldType === Boolean) {\n            docsTypes.push(fieldType.name.toLowerCase());\n        } else if (fieldType === null) {\n            docsTypes.push('null');\n        } else if (typeof fieldType === 'string') {\n            docsTypes.push(fieldType);\n        } else if (Array.isArray(fieldType)) {\n            docsTypes.push('List<' + (genTypesList(fieldType, path) || 'any') + '>'); // TODO: use type enum\n        } else {\n            throw new Error('Wrong value `' + fieldType + '` in `' + path + '` structure definition');\n        }\n    }\n\n    return docsTypes.join(' | ');\n}\n\nfunction processStructure(name, nodeType) {\n    const structure = nodeType.structure;\n    const fields = {\n        type: String,\n        loc: true\n    };\n    const docs = {\n        type: '\"' + name + '\"'\n    };\n\n    for (const key in structure) {\n        if (hasOwnProperty.call(structure, key) === false) {\n            continue;\n        }\n\n        const fieldTypes = fields[key] = Array.isArray(structure[key])\n            ? structure[key].slice()\n            : [structure[key]];\n\n        docs[key] = genTypesList(fieldTypes, name + '.' + key);\n    }\n\n    return {\n        docs,\n        check: createNodeStructureChecker(name, fields)\n    };\n}\n\nexport function getStructureFromConfig(config) {\n    const structure = {};\n\n    if (config.node) {\n        for (const name in config.node) {\n            if (hasOwnProperty.call(config.node, name)) {\n                const nodeType = config.node[name];\n\n                if (nodeType.structure) {\n                    structure[name] = processStructure(name, nodeType);\n                } else {\n                    throw new Error('Missed `structure` field in `' + name + '` node type definition');\n                }\n            }\n        }\n    }\n\n    return structure;\n};\n","import { SyntaxReferenceError, SyntaxMatchError } from './error.js';\nimport * as names from '../utils/names.js';\nimport { cssWideKeywords } from './generic-const.js';\nimport { createGenericTypes } from './generic.js';\nimport * as units from './units.js';\nimport { parse, generate, walk } from '../definition-syntax/index.js';\nimport prepareTokens from './prepare-tokens.js';\nimport { buildMatchGraph } from './match-graph.js';\nimport { matchAsTree } from './match.js';\nimport * as trace from './trace.js';\nimport { matchFragments } from './search.js';\nimport { getStructureFromConfig } from './structure.js';\n\nconst cssWideKeywordsSyntax = buildMatchGraph(cssWideKeywords.join(' | '));\n\nfunction dumpMapSyntax(map, compact, syntaxAsAst) {\n    const result = {};\n\n    for (const name in map) {\n        if (map[name].syntax) {\n            result[name] = syntaxAsAst\n                ? map[name].syntax\n                : generate(map[name].syntax, { compact });\n        }\n    }\n\n    return result;\n}\n\nfunction dumpAtruleMapSyntax(map, compact, syntaxAsAst) {\n    const result = {};\n\n    for (const [name, atrule] of Object.entries(map)) {\n        result[name] = {\n            prelude: atrule.prelude && (\n                syntaxAsAst\n                    ? atrule.prelude.syntax\n                    : generate(atrule.prelude.syntax, { compact })\n            ),\n            descriptors: atrule.descriptors && dumpMapSyntax(atrule.descriptors, compact, syntaxAsAst)\n        };\n    }\n\n    return result;\n}\n\nfunction valueHasVar(tokens) {\n    for (let i = 0; i < tokens.length; i++) {\n        if (tokens[i].value.toLowerCase() === 'var(') {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction syntaxHasTopLevelCommaMultiplier(syntax) {\n    const singleTerm = syntax.terms[0];\n\n    return (\n        syntax.explicit === false &&\n        syntax.terms.length === 1 &&\n        singleTerm.type === 'Multiplier' &&\n        singleTerm.comma === true\n    );\n}\n\nfunction buildMatchResult(matched, error, iterations) {\n    return {\n        matched,\n        iterations,\n        error,\n        ...trace\n    };\n}\n\nfunction matchSyntax(lexer, syntax, value, useCssWideKeywords) {\n    const tokens = prepareTokens(value, lexer.syntax);\n    let result;\n\n    if (valueHasVar(tokens)) {\n        return buildMatchResult(null, new Error('Matching for a tree with var() is not supported'));\n    }\n\n    if (useCssWideKeywords) {\n        result = matchAsTree(tokens, lexer.cssWideKeywordsSyntax, lexer);\n    }\n\n    if (!useCssWideKeywords || !result.match) {\n        result = matchAsTree(tokens, syntax.match, lexer);\n        if (!result.match) {\n            return buildMatchResult(\n                null,\n                new SyntaxMatchError(result.reason, syntax.syntax, value, result),\n                result.iterations\n            );\n        }\n    }\n\n    return buildMatchResult(result.match, null, result.iterations);\n}\n\nexport class Lexer {\n    constructor(config, syntax, structure) {\n        this.cssWideKeywordsSyntax = cssWideKeywordsSyntax;\n        this.syntax = syntax;\n        this.generic = false;\n        this.units = { ...units };\n        this.atrules = Object.create(null);\n        this.properties = Object.create(null);\n        this.types = Object.create(null);\n        this.structure = structure || getStructureFromConfig(config);\n\n        if (config) {\n            if (config.units) {\n                for (const group of Object.keys(units)) {\n                    if (Array.isArray(config.units[group])) {\n                        this.units[group] = config.units[group];\n                    }\n                }\n            }\n\n            if (config.types) {\n                for (const [name, type] of Object.entries(config.types)) {\n                    this.addType_(name, type);\n                }\n            }\n\n            if (config.generic) {\n                this.generic = true;\n                for (const [name, value] of Object.entries(createGenericTypes(this.units))) {\n                    this.addType_(name, value);\n                }\n            }\n\n            if (config.atrules) {\n                for (const [name, atrule] of Object.entries(config.atrules)) {\n                    this.addAtrule_(name, atrule);\n                }\n            }\n\n            if (config.properties) {\n                for (const [name, property] of Object.entries(config.properties)) {\n                    this.addProperty_(name, property);\n                }\n            }\n        }\n    }\n\n    checkStructure(ast) {\n        function collectWarning(node, message) {\n            warns.push({ node, message });\n        }\n\n        const structure = this.structure;\n        const warns = [];\n\n        this.syntax.walk(ast, function(node) {\n            if (structure.hasOwnProperty(node.type)) {\n                structure[node.type].check(node, collectWarning);\n            } else {\n                collectWarning(node, 'Unknown node type `' + node.type + '`');\n            }\n        });\n\n        return warns.length ? warns : false;\n    }\n\n    createDescriptor(syntax, type, name, parent = null) {\n        const ref = {\n            type,\n            name\n        };\n        const descriptor = {\n            type,\n            name,\n            parent,\n            serializable: typeof syntax === 'string' || (syntax && typeof syntax.type === 'string'),\n            syntax: null,\n            match: null,\n            matchRef: null // used for properties when a syntax referenced as <'property'> in other syntax definitions\n        };\n\n        if (typeof syntax === 'function') {\n            descriptor.match = buildMatchGraph(syntax, ref);\n        } else {\n            if (typeof syntax === 'string') {\n                // lazy parsing on first access\n                Object.defineProperty(descriptor, 'syntax', {\n                    get() {\n                        Object.defineProperty(descriptor, 'syntax', {\n                            value: parse(syntax)\n                        });\n\n                        return descriptor.syntax;\n                    }\n                });\n            } else {\n                descriptor.syntax = syntax;\n            }\n\n            // lazy graph build on first access\n            Object.defineProperty(descriptor, 'match', {\n                get() {\n                    Object.defineProperty(descriptor, 'match', {\n                        value: buildMatchGraph(descriptor.syntax, ref)\n                    });\n\n                    return descriptor.match;\n                }\n            });\n\n            if (type === 'Property') {\n                Object.defineProperty(descriptor, 'matchRef', {\n                    get() {\n                        const syntax = descriptor.syntax;\n                        const value = syntaxHasTopLevelCommaMultiplier(syntax)\n                            ? buildMatchGraph({\n                                ...syntax,\n                                terms: [syntax.terms[0].term]\n                            }, ref)\n                            : null;\n\n                        Object.defineProperty(descriptor, 'matchRef', {\n                            value\n                        });\n\n                        return value;\n                    }\n                });\n            }\n        }\n\n        return descriptor;\n    }\n    addAtrule_(name, syntax) {\n        if (!syntax) {\n            return;\n        }\n\n        this.atrules[name] = {\n            type: 'Atrule',\n            name: name,\n            prelude: syntax.prelude ? this.createDescriptor(syntax.prelude, 'AtrulePrelude', name) : null,\n            descriptors: syntax.descriptors\n                ? Object.keys(syntax.descriptors).reduce(\n                    (map, descName) => {\n                        map[descName] = this.createDescriptor(syntax.descriptors[descName], 'AtruleDescriptor', descName, name);\n                        return map;\n                    },\n                    Object.create(null)\n                )\n                : null\n        };\n    }\n    addProperty_(name, syntax) {\n        if (!syntax) {\n            return;\n        }\n\n        this.properties[name] = this.createDescriptor(syntax, 'Property', name);\n    }\n    addType_(name, syntax) {\n        if (!syntax) {\n            return;\n        }\n\n        this.types[name] = this.createDescriptor(syntax, 'Type', name);\n    }\n\n    checkAtruleName(atruleName) {\n        if (!this.getAtrule(atruleName)) {\n            return new SyntaxReferenceError('Unknown at-rule', '@' + atruleName);\n        }\n    }\n    checkAtrulePrelude(atruleName, prelude) {\n        const error = this.checkAtruleName(atruleName);\n\n        if (error) {\n            return error;\n        }\n\n        const atrule = this.getAtrule(atruleName);\n\n        if (!atrule.prelude && prelude) {\n            return new SyntaxError('At-rule `@' + atruleName + '` should not contain a prelude');\n        }\n\n        if (atrule.prelude && !prelude) {\n            if (!matchSyntax(this, atrule.prelude, '', false).matched) {\n                return new SyntaxError('At-rule `@' + atruleName + '` should contain a prelude');\n            }\n        }\n    }\n    checkAtruleDescriptorName(atruleName, descriptorName) {\n        const error = this.checkAtruleName(atruleName);\n\n        if (error) {\n            return error;\n        }\n\n        const atrule = this.getAtrule(atruleName);\n        const descriptor = names.keyword(descriptorName);\n\n        if (!atrule.descriptors) {\n            return new SyntaxError('At-rule `@' + atruleName + '` has no known descriptors');\n        }\n\n        if (!atrule.descriptors[descriptor.name] &&\n            !atrule.descriptors[descriptor.basename]) {\n            return new SyntaxReferenceError('Unknown at-rule descriptor', descriptorName);\n        }\n    }\n    checkPropertyName(propertyName) {\n        if (!this.getProperty(propertyName)) {\n            return new SyntaxReferenceError('Unknown property', propertyName);\n        }\n    }\n\n    matchAtrulePrelude(atruleName, prelude) {\n        const error = this.checkAtrulePrelude(atruleName, prelude);\n\n        if (error) {\n            return buildMatchResult(null, error);\n        }\n\n        const atrule = this.getAtrule(atruleName);\n\n        if (!atrule.prelude) {\n            return buildMatchResult(null, null);\n        }\n\n        return matchSyntax(this, atrule.prelude, prelude || '', false);\n    }\n    matchAtruleDescriptor(atruleName, descriptorName, value) {\n        const error = this.checkAtruleDescriptorName(atruleName, descriptorName);\n\n        if (error) {\n            return buildMatchResult(null, error);\n        }\n\n        const atrule = this.getAtrule(atruleName);\n        const descriptor = names.keyword(descriptorName);\n\n        return matchSyntax(this, atrule.descriptors[descriptor.name] || atrule.descriptors[descriptor.basename], value, false);\n    }\n    matchDeclaration(node) {\n        if (node.type !== 'Declaration') {\n            return buildMatchResult(null, new Error('Not a Declaration node'));\n        }\n\n        return this.matchProperty(node.property, node.value);\n    }\n    matchProperty(propertyName, value) {\n        // don't match syntax for a custom property at the moment\n        if (names.property(propertyName).custom) {\n            return buildMatchResult(null, new Error('Lexer matching doesn\\'t applicable for custom properties'));\n        }\n\n        const error = this.checkPropertyName(propertyName);\n\n        if (error) {\n            return buildMatchResult(null, error);\n        }\n\n        return matchSyntax(this, this.getProperty(propertyName), value, true);\n    }\n    matchType(typeName, value) {\n        const typeSyntax = this.getType(typeName);\n\n        if (!typeSyntax) {\n            return buildMatchResult(null, new SyntaxReferenceError('Unknown type', typeName));\n        }\n\n        return matchSyntax(this, typeSyntax, value, false);\n    }\n    match(syntax, value) {\n        if (typeof syntax !== 'string' && (!syntax || !syntax.type)) {\n            return buildMatchResult(null, new SyntaxReferenceError('Bad syntax'));\n        }\n\n        if (typeof syntax === 'string' || !syntax.match) {\n            syntax = this.createDescriptor(syntax, 'Type', 'anonymous');\n        }\n\n        return matchSyntax(this, syntax, value, false);\n    }\n\n    findValueFragments(propertyName, value, type, name) {\n        return matchFragments(this, value, this.matchProperty(propertyName, value), type, name);\n    }\n    findDeclarationValueFragments(declaration, type, name) {\n        return matchFragments(this, declaration.value, this.matchDeclaration(declaration), type, name);\n    }\n    findAllFragments(ast, type, name) {\n        const result = [];\n\n        this.syntax.walk(ast, {\n            visit: 'Declaration',\n            enter: (declaration) => {\n                result.push.apply(result, this.findDeclarationValueFragments(declaration, type, name));\n            }\n        });\n\n        return result;\n    }\n\n    getAtrule(atruleName, fallbackBasename = true) {\n        const atrule = names.keyword(atruleName);\n        const atruleEntry = atrule.vendor && fallbackBasename\n            ? this.atrules[atrule.name] || this.atrules[atrule.basename]\n            : this.atrules[atrule.name];\n\n        return atruleEntry || null;\n    }\n    getAtrulePrelude(atruleName, fallbackBasename = true) {\n        const atrule = this.getAtrule(atruleName, fallbackBasename);\n\n        return atrule && atrule.prelude || null;\n    }\n    getAtruleDescriptor(atruleName, name) {\n        return this.atrules.hasOwnProperty(atruleName) && this.atrules.declarators\n            ? this.atrules[atruleName].declarators[name] || null\n            : null;\n    }\n    getProperty(propertyName, fallbackBasename = true) {\n        const property = names.property(propertyName);\n        const propertyEntry = property.vendor && fallbackBasename\n            ? this.properties[property.name] || this.properties[property.basename]\n            : this.properties[property.name];\n\n        return propertyEntry || null;\n    }\n    getType(name) {\n        return hasOwnProperty.call(this.types, name) ? this.types[name] : null;\n    }\n\n    validate() {\n        function validate(syntax, name, broken, descriptor) {\n            if (broken.has(name)) {\n                return broken.get(name);\n            }\n\n            broken.set(name, false);\n            if (descriptor.syntax !== null) {\n                walk(descriptor.syntax, function(node) {\n                    if (node.type !== 'Type' && node.type !== 'Property') {\n                        return;\n                    }\n\n                    const map = node.type === 'Type' ? syntax.types : syntax.properties;\n                    const brokenMap = node.type === 'Type' ? brokenTypes : brokenProperties;\n\n                    if (!hasOwnProperty.call(map, node.name) || validate(syntax, node.name, brokenMap, map[node.name])) {\n                        broken.set(name, true);\n                    }\n                }, this);\n            }\n        }\n\n        let brokenTypes = new Map();\n        let brokenProperties = new Map();\n\n        for (const key in this.types) {\n            validate(this, key, brokenTypes, this.types[key]);\n        }\n\n        for (const key in this.properties) {\n            validate(this, key, brokenProperties, this.properties[key]);\n        }\n\n        brokenTypes = [...brokenTypes.keys()].filter(name => brokenTypes.get(name));\n        brokenProperties = [...brokenProperties.keys()].filter(name => brokenProperties.get(name));\n\n        if (brokenTypes.length || brokenProperties.length) {\n            return {\n                types: brokenTypes,\n                properties: brokenProperties\n            };\n        }\n\n        return null;\n    }\n    dump(syntaxAsAst, pretty) {\n        return {\n            generic: this.generic,\n            units: this.units,\n            types: dumpMapSyntax(this.types, !pretty, syntaxAsAst),\n            properties: dumpMapSyntax(this.properties, !pretty, syntaxAsAst),\n            atrules: dumpAtruleMapSyntax(this.atrules, !pretty, syntaxAsAst)\n        };\n    }\n    toString() {\n        return JSON.stringify(this.dump());\n    }\n};\n","function appendOrSet(a, b) {\n    if (typeof b === 'string' && /^\\s*\\|/.test(b)) {\n        return typeof a === 'string'\n            ? a + b\n            : b.replace(/^\\s*\\|\\s*/, '');\n    }\n\n    return b || null;\n}\n\nfunction sliceProps(obj, props) {\n    const result = Object.create(null);\n\n    for (const [key, value] of Object.entries(obj)) {\n        if (value) {\n            result[key] = {};\n            for (const prop of Object.keys(value)) {\n                if (props.includes(prop)) {\n                    result[key][prop] = value[prop];\n                }\n            }\n        }\n    }\n\n    return result;\n}\n\nexport default function mix(dest, src) {\n    const result = { ...dest };\n\n    for (const [prop, value] of Object.entries(src)) {\n        switch (prop) {\n            case 'generic':\n                result[prop] = Boolean(value);\n                break;\n\n            case 'units':\n                result[prop] = { ...dest[prop] };\n                for (const [name, patch] of Object.entries(value)) {\n                    result[prop][name] = Array.isArray(patch) ? patch : [];\n                }\n                break;\n\n            case 'atrules':\n                result[prop] = { ...dest[prop] };\n\n                for (const [name, atrule] of Object.entries(value)) {\n                    const exists = result[prop][name] || {};\n                    const current = result[prop][name] = {\n                        prelude: exists.prelude || null,\n                        descriptors: {\n                            ...exists.descriptors\n                        }\n                    };\n\n                    if (!atrule) {\n                        continue;\n                    }\n\n                    current.prelude = atrule.prelude\n                        ? appendOrSet(current.prelude, atrule.prelude)\n                        : current.prelude || null;\n\n                    for (const [descriptorName, descriptorValue] of Object.entries(atrule.descriptors || {})) {\n                        current.descriptors[descriptorName] = descriptorValue\n                            ? appendOrSet(current.descriptors[descriptorName], descriptorValue)\n                            : null;\n                    }\n\n                    if (!Object.keys(current.descriptors).length) {\n                        current.descriptors = null;\n                    }\n                }\n                break;\n\n            case 'types':\n            case 'properties':\n                result[prop] = { ...dest[prop] };\n                for (const [name, syntax] of Object.entries(value)) {\n                    result[prop][name] = appendOrSet(result[prop][name], syntax);\n                }\n                break;\n\n            case 'scope':\n            case 'features':\n                result[prop] = { ...dest[prop] };\n                for (const [name, props] of Object.entries(value)) {\n                    result[prop][name] = { ...result[prop][name], ...props };\n                }\n                break;\n\n            case 'parseContext':\n                result[prop] = {\n                    ...dest[prop],\n                    ...value\n                };\n                break;\n\n            case 'atrule':\n            case 'pseudo':\n                result[prop] = {\n                    ...dest[prop],\n                    ...sliceProps(value, ['parse'])\n                };\n                break;\n\n            case 'node':\n                result[prop] = {\n                    ...dest[prop],\n                    ...sliceProps(value, ['name', 'structure', 'parse', 'generate', 'walkContext'])\n                };\n                break;\n        }\n    }\n\n    return result;\n}\n","import { tokenize } from '../tokenizer/index.js';\nimport { createParser } from '../parser/create.js';\nimport { createGenerator } from '../generator/create.js';\nimport { createConvertor } from '../convertor/create.js';\nimport { createWalker } from '../walker/create.js';\nimport { Lexer } from '../lexer/Lexer.js';\nimport mix from './config/mix.js';\n\nfunction createSyntax(config) {\n    const parse = createParser(config);\n    const walk = createWalker(config);\n    const generate = createGenerator(config);\n    const { fromPlainObject, toPlainObject } = createConvertor(walk);\n\n    const syntax = {\n        lexer: null,\n        createLexer: config => new Lexer(config, syntax, syntax.lexer.structure),\n\n        tokenize,\n        parse,\n        generate,\n\n        walk,\n        find: walk.find,\n        findLast: walk.findLast,\n        findAll: walk.findAll,\n\n        fromPlainObject,\n        toPlainObject,\n\n        fork(extension) {\n            const base = mix({}, config); // copy of config\n\n            return createSyntax(\n                typeof extension === 'function'\n                    ? extension(base, Object.assign)\n                    : mix(base, extension)\n            );\n        }\n    };\n\n    syntax.lexer = new Lexer({\n        generic: config.generic,\n        units: config.units,\n        types: config.types,\n        atrules: config.atrules,\n        properties: config.properties,\n        node: config.node\n    }, syntax);\n\n    return syntax;\n};\n\nexport default config => createSyntax(mix({}, config));\n","export default {\n    \"generic\": true,\n    \"units\": {\n        \"angle\": [\n            \"deg\",\n            \"grad\",\n            \"rad\",\n            \"turn\"\n        ],\n        \"decibel\": [\n            \"db\"\n        ],\n        \"flex\": [\n            \"fr\"\n        ],\n        \"frequency\": [\n            \"hz\",\n            \"khz\"\n        ],\n        \"length\": [\n            \"cm\",\n            \"mm\",\n            \"q\",\n            \"in\",\n            \"pt\",\n            \"pc\",\n            \"px\",\n            \"em\",\n            \"rem\",\n            \"ex\",\n            \"rex\",\n            \"cap\",\n            \"rcap\",\n            \"ch\",\n            \"rch\",\n            \"ic\",\n            \"ric\",\n            \"lh\",\n            \"rlh\",\n            \"vw\",\n            \"svw\",\n            \"lvw\",\n            \"dvw\",\n            \"vh\",\n            \"svh\",\n            \"lvh\",\n            \"dvh\",\n            \"vi\",\n            \"svi\",\n            \"lvi\",\n            \"dvi\",\n            \"vb\",\n            \"svb\",\n            \"lvb\",\n            \"dvb\",\n            \"vmin\",\n            \"svmin\",\n            \"lvmin\",\n            \"dvmin\",\n            \"vmax\",\n            \"svmax\",\n            \"lvmax\",\n            \"dvmax\",\n            \"cqw\",\n            \"cqh\",\n            \"cqi\",\n            \"cqb\",\n            \"cqmin\",\n            \"cqmax\"\n        ],\n        \"resolution\": [\n            \"dpi\",\n            \"dpcm\",\n            \"dppx\",\n            \"x\"\n        ],\n        \"semitones\": [\n            \"st\"\n        ],\n        \"time\": [\n            \"s\",\n            \"ms\"\n        ]\n    },\n    \"types\": {\n        \"abs()\": \"abs( <calc-sum> )\",\n        \"absolute-size\": \"xx-small|x-small|small|medium|large|x-large|xx-large|xxx-large\",\n        \"acos()\": \"acos( <calc-sum> )\",\n        \"alpha-value\": \"<number>|<percentage>\",\n        \"angle-percentage\": \"<angle>|<percentage>\",\n        \"angular-color-hint\": \"<angle-percentage>\",\n        \"angular-color-stop\": \"<color>&&<color-stop-angle>?\",\n        \"angular-color-stop-list\": \"[<angular-color-stop> [, <angular-color-hint>]?]# , <angular-color-stop>\",\n        \"animateable-feature\": \"scroll-position|contents|<custom-ident>\",\n        \"asin()\": \"asin( <calc-sum> )\",\n        \"atan()\": \"atan( <calc-sum> )\",\n        \"atan2()\": \"atan2( <calc-sum> , <calc-sum> )\",\n        \"attachment\": \"scroll|fixed|local\",\n        \"attr()\": \"attr( <attr-name> <type-or-unit>? [, <attr-fallback>]? )\",\n        \"attr-matcher\": \"['~'|'|'|'^'|'$'|'*']? '='\",\n        \"attr-modifier\": \"i|s\",\n        \"attribute-selector\": \"'[' <wq-name> ']'|'[' <wq-name> <attr-matcher> [<string-token>|<ident-token>] <attr-modifier>? ']'\",\n        \"auto-repeat\": \"repeat( [auto-fill|auto-fit] , [<line-names>? <fixed-size>]+ <line-names>? )\",\n        \"auto-track-list\": \"[<line-names>? [<fixed-size>|<fixed-repeat>]]* <line-names>? <auto-repeat> [<line-names>? [<fixed-size>|<fixed-repeat>]]* <line-names>?\",\n        \"axis\": \"block|inline|vertical|horizontal\",\n        \"baseline-position\": \"[first|last]? baseline\",\n        \"basic-shape\": \"<inset()>|<circle()>|<ellipse()>|<polygon()>|<path()>\",\n        \"bg-image\": \"none|<image>\",\n        \"bg-layer\": \"<bg-image>||<bg-position> [/ <bg-size>]?||<repeat-style>||<attachment>||<box>||<box>\",\n        \"bg-position\": \"[[left|center|right|top|bottom|<length-percentage>]|[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]|[center|[left|right] <length-percentage>?]&&[center|[top|bottom] <length-percentage>?]]\",\n        \"bg-size\": \"[<length-percentage>|auto]{1,2}|cover|contain\",\n        \"blur()\": \"blur( <length> )\",\n        \"blend-mode\": \"normal|multiply|screen|overlay|darken|lighten|color-dodge|color-burn|hard-light|soft-light|difference|exclusion|hue|saturation|color|luminosity\",\n        \"box\": \"border-box|padding-box|content-box\",\n        \"brightness()\": \"brightness( <number-percentage> )\",\n        \"calc()\": \"calc( <calc-sum> )\",\n        \"calc-sum\": \"<calc-product> [['+'|'-'] <calc-product>]*\",\n        \"calc-product\": \"<calc-value> ['*' <calc-value>|'/' <number>]*\",\n        \"calc-value\": \"<number>|<dimension>|<percentage>|<calc-constant>|( <calc-sum> )\",\n        \"calc-constant\": \"e|pi|infinity|-infinity|NaN\",\n        \"cf-final-image\": \"<image>|<color>\",\n        \"cf-mixing-image\": \"<percentage>?&&<image>\",\n        \"circle()\": \"circle( [<shape-radius>]? [at <position>]? )\",\n        \"clamp()\": \"clamp( <calc-sum>#{3} )\",\n        \"class-selector\": \"'.' <ident-token>\",\n        \"clip-source\": \"<url>\",\n        \"color\": \"<color-base>|currentColor|<system-color>|<device-cmyk()>|<light-dark()>|<-non-standard-color>\",\n        \"color-stop\": \"<color-stop-length>|<color-stop-angle>\",\n        \"color-stop-angle\": \"<angle-percentage>{1,2}\",\n        \"color-stop-length\": \"<length-percentage>{1,2}\",\n        \"color-stop-list\": \"[<linear-color-stop> [, <linear-color-hint>]?]# , <linear-color-stop>\",\n        \"combinator\": \"'>'|'+'|'~'|['|' '|']\",\n        \"common-lig-values\": \"[common-ligatures|no-common-ligatures]\",\n        \"compat-auto\": \"searchfield|textarea|push-button|slider-horizontal|checkbox|radio|square-button|menulist|listbox|meter|progress-bar|button\",\n        \"composite-style\": \"clear|copy|source-over|source-in|source-out|source-atop|destination-over|destination-in|destination-out|destination-atop|xor\",\n        \"compositing-operator\": \"add|subtract|intersect|exclude\",\n        \"compound-selector\": \"[<type-selector>? <subclass-selector>*]!\",\n        \"compound-selector-list\": \"<compound-selector>#\",\n        \"complex-selector\": \"<complex-selector-unit> [<combinator>? <complex-selector-unit>]*\",\n        \"complex-selector-list\": \"<complex-selector>#\",\n        \"conic-gradient()\": \"conic-gradient( [from <angle>]? [at <position>]? , <angular-color-stop-list> )\",\n        \"contextual-alt-values\": \"[contextual|no-contextual]\",\n        \"content-distribution\": \"space-between|space-around|space-evenly|stretch\",\n        \"content-list\": \"[<string>|contents|<image>|<counter>|<quote>|<target>|<leader()>|<attr()>]+\",\n        \"content-position\": \"center|start|end|flex-start|flex-end\",\n        \"content-replacement\": \"<image>\",\n        \"contrast()\": \"contrast( [<number-percentage>] )\",\n        \"cos()\": \"cos( <calc-sum> )\",\n        \"counter\": \"<counter()>|<counters()>\",\n        \"counter()\": \"counter( <counter-name> , <counter-style>? )\",\n        \"counter-name\": \"<custom-ident>\",\n        \"counter-style\": \"<counter-style-name>|symbols( )\",\n        \"counter-style-name\": \"<custom-ident>\",\n        \"counters()\": \"counters( <counter-name> , <string> , <counter-style>? )\",\n        \"cross-fade()\": \"cross-fade( <cf-mixing-image> , <cf-final-image>? )\",\n        \"cubic-bezier-timing-function\": \"ease|ease-in|ease-out|ease-in-out|cubic-bezier( <number [0,1]> , <number> , <number [0,1]> , <number> )\",\n        \"deprecated-system-color\": \"ActiveBorder|ActiveCaption|AppWorkspace|Background|ButtonFace|ButtonHighlight|ButtonShadow|ButtonText|CaptionText|GrayText|Highlight|HighlightText|InactiveBorder|InactiveCaption|InactiveCaptionText|InfoBackground|InfoText|Menu|MenuText|Scrollbar|ThreeDDarkShadow|ThreeDFace|ThreeDHighlight|ThreeDLightShadow|ThreeDShadow|Window|WindowFrame|WindowText\",\n        \"discretionary-lig-values\": \"[discretionary-ligatures|no-discretionary-ligatures]\",\n        \"display-box\": \"contents|none\",\n        \"display-inside\": \"flow|flow-root|table|flex|grid|ruby\",\n        \"display-internal\": \"table-row-group|table-header-group|table-footer-group|table-row|table-cell|table-column-group|table-column|table-caption|ruby-base|ruby-text|ruby-base-container|ruby-text-container\",\n        \"display-legacy\": \"inline-block|inline-list-item|inline-table|inline-flex|inline-grid\",\n        \"display-listitem\": \"<display-outside>?&&[flow|flow-root]?&&list-item\",\n        \"display-outside\": \"block|inline|run-in\",\n        \"drop-shadow()\": \"drop-shadow( <length>{2,3} <color>? )\",\n        \"east-asian-variant-values\": \"[jis78|jis83|jis90|jis04|simplified|traditional]\",\n        \"east-asian-width-values\": \"[full-width|proportional-width]\",\n        \"element()\": \"element( <custom-ident> , [first|start|last|first-except]? )|element( <id-selector> )\",\n        \"ellipse()\": \"ellipse( [<shape-radius>{2}]? [at <position>]? )\",\n        \"ending-shape\": \"circle|ellipse\",\n        \"env()\": \"env( <custom-ident> , <declaration-value>? )\",\n        \"exp()\": \"exp( <calc-sum> )\",\n        \"explicit-track-list\": \"[<line-names>? <track-size>]+ <line-names>?\",\n        \"family-name\": \"<string>|<custom-ident>+\",\n        \"feature-tag-value\": \"<string> [<integer>|on|off]?\",\n        \"feature-type\": \"@stylistic|@historical-forms|@styleset|@character-variant|@swash|@ornaments|@annotation\",\n        \"feature-value-block\": \"<feature-type> '{' <feature-value-declaration-list> '}'\",\n        \"feature-value-block-list\": \"<feature-value-block>+\",\n        \"feature-value-declaration\": \"<custom-ident> : <integer>+ ;\",\n        \"feature-value-declaration-list\": \"<feature-value-declaration>\",\n        \"feature-value-name\": \"<custom-ident>\",\n        \"fill-rule\": \"nonzero|evenodd\",\n        \"filter-function\": \"<blur()>|<brightness()>|<contrast()>|<drop-shadow()>|<grayscale()>|<hue-rotate()>|<invert()>|<opacity()>|<saturate()>|<sepia()>\",\n        \"filter-function-list\": \"[<filter-function>|<url>]+\",\n        \"final-bg-layer\": \"<'background-color'>||<bg-image>||<bg-position> [/ <bg-size>]?||<repeat-style>||<attachment>||<box>||<box>\",\n        \"fixed-breadth\": \"<length-percentage>\",\n        \"fixed-repeat\": \"repeat( [<integer [1,∞]>] , [<line-names>? <fixed-size>]+ <line-names>? )\",\n        \"fixed-size\": \"<fixed-breadth>|minmax( <fixed-breadth> , <track-breadth> )|minmax( <inflexible-breadth> , <fixed-breadth> )\",\n        \"font-stretch-absolute\": \"normal|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded|<percentage>\",\n        \"font-variant-css21\": \"[normal|small-caps]\",\n        \"font-weight-absolute\": \"normal|bold|<number [1,1000]>\",\n        \"frequency-percentage\": \"<frequency>|<percentage>\",\n        \"general-enclosed\": \"[<function-token> <any-value>? )]|[( <any-value>? )]\",\n        \"generic-family\": \"<generic-script-specific>|<generic-complete>|<generic-incomplete>|<-non-standard-generic-family>\",\n        \"generic-name\": \"serif|sans-serif|cursive|fantasy|monospace\",\n        \"geometry-box\": \"<shape-box>|fill-box|stroke-box|view-box\",\n        \"gradient\": \"<linear-gradient()>|<repeating-linear-gradient()>|<radial-gradient()>|<repeating-radial-gradient()>|<conic-gradient()>|<repeating-conic-gradient()>|<-legacy-gradient>\",\n        \"grayscale()\": \"grayscale( <number-percentage> )\",\n        \"grid-line\": \"auto|<custom-ident>|[<integer>&&<custom-ident>?]|[span&&[<integer>||<custom-ident>]]\",\n        \"historical-lig-values\": \"[historical-ligatures|no-historical-ligatures]\",\n        \"hsl()\": \"hsl( <hue> <percentage> <percentage> [/ <alpha-value>]? )|hsl( <hue> , <percentage> , <percentage> , <alpha-value>? )\",\n        \"hsla()\": \"hsla( <hue> <percentage> <percentage> [/ <alpha-value>]? )|hsla( <hue> , <percentage> , <percentage> , <alpha-value>? )\",\n        \"hue\": \"<number>|<angle>\",\n        \"hue-rotate()\": \"hue-rotate( <angle> )\",\n        \"hwb()\": \"hwb( [<hue>|none] [<percentage>|none] [<percentage>|none] [/ [<alpha-value>|none]]? )\",\n        \"hypot()\": \"hypot( <calc-sum># )\",\n        \"image\": \"<url>|<image()>|<image-set()>|<element()>|<paint()>|<cross-fade()>|<gradient>\",\n        \"image()\": \"image( <image-tags>? [<image-src>? , <color>?]! )\",\n        \"image-set()\": \"image-set( <image-set-option># )\",\n        \"image-set-option\": \"[<image>|<string>] [<resolution>||type( <string> )]\",\n        \"image-src\": \"<url>|<string>\",\n        \"image-tags\": \"ltr|rtl\",\n        \"inflexible-breadth\": \"<length-percentage>|min-content|max-content|auto\",\n        \"inset()\": \"inset( <length-percentage>{1,4} [round <'border-radius'>]? )\",\n        \"invert()\": \"invert( <number-percentage> )\",\n        \"keyframes-name\": \"<custom-ident>|<string>\",\n        \"keyframe-block\": \"<keyframe-selector># { <declaration-list> }\",\n        \"keyframe-block-list\": \"<keyframe-block>+\",\n        \"keyframe-selector\": \"from|to|<percentage>|<timeline-range-name> <percentage>\",\n        \"lab()\": \"lab( [<percentage>|<number>|none] [<percentage>|<number>|none] [<percentage>|<number>|none] [/ [<alpha-value>|none]]? )\",\n        \"layer()\": \"layer( <layer-name> )\",\n        \"layer-name\": \"<ident> ['.' <ident>]*\",\n        \"lch()\": \"lch( [<percentage>|<number>|none] [<percentage>|<number>|none] [<hue>|none] [/ [<alpha-value>|none]]? )\",\n        \"leader()\": \"leader( <leader-type> )\",\n        \"leader-type\": \"dotted|solid|space|<string>\",\n        \"length-percentage\": \"<length>|<percentage>\",\n        \"light-dark()\": \"light-dark( <color> , <color> )\",\n        \"line-names\": \"'[' <custom-ident>* ']'\",\n        \"line-name-list\": \"[<line-names>|<name-repeat>]+\",\n        \"line-style\": \"none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset\",\n        \"line-width\": \"<length>|thin|medium|thick\",\n        \"linear-color-hint\": \"<length-percentage>\",\n        \"linear-color-stop\": \"<color> <color-stop-length>?\",\n        \"linear-gradient()\": \"linear-gradient( [<angle>|to <side-or-corner>]? , <color-stop-list> )\",\n        \"log()\": \"log( <calc-sum> , <calc-sum>? )\",\n        \"mask-layer\": \"<mask-reference>||<position> [/ <bg-size>]?||<repeat-style>||<geometry-box>||[<geometry-box>|no-clip]||<compositing-operator>||<masking-mode>\",\n        \"mask-position\": \"[<length-percentage>|left|center|right] [<length-percentage>|top|center|bottom]?\",\n        \"mask-reference\": \"none|<image>|<mask-source>\",\n        \"mask-source\": \"<url>\",\n        \"masking-mode\": \"alpha|luminance|match-source\",\n        \"matrix()\": \"matrix( <number>#{6} )\",\n        \"matrix3d()\": \"matrix3d( <number>#{16} )\",\n        \"max()\": \"max( <calc-sum># )\",\n        \"media-and\": \"<media-in-parens> [and <media-in-parens>]+\",\n        \"media-condition\": \"<media-not>|<media-and>|<media-or>|<media-in-parens>\",\n        \"media-condition-without-or\": \"<media-not>|<media-and>|<media-in-parens>\",\n        \"media-feature\": \"( [<mf-plain>|<mf-boolean>|<mf-range>] )\",\n        \"media-in-parens\": \"( <media-condition> )|<media-feature>|<general-enclosed>\",\n        \"media-not\": \"not <media-in-parens>\",\n        \"media-or\": \"<media-in-parens> [or <media-in-parens>]+\",\n        \"media-query\": \"<media-condition>|[not|only]? <media-type> [and <media-condition-without-or>]?\",\n        \"media-query-list\": \"<media-query>#\",\n        \"media-type\": \"<ident>\",\n        \"mf-boolean\": \"<mf-name>\",\n        \"mf-name\": \"<ident>\",\n        \"mf-plain\": \"<mf-name> : <mf-value>\",\n        \"mf-range\": \"<mf-name> ['<'|'>']? '='? <mf-value>|<mf-value> ['<'|'>']? '='? <mf-name>|<mf-value> '<' '='? <mf-name> '<' '='? <mf-value>|<mf-value> '>' '='? <mf-name> '>' '='? <mf-value>\",\n        \"mf-value\": \"<number>|<dimension>|<ident>|<ratio>\",\n        \"min()\": \"min( <calc-sum># )\",\n        \"minmax()\": \"minmax( [<length-percentage>|min-content|max-content|auto] , [<length-percentage>|<flex>|min-content|max-content|auto] )\",\n        \"mod()\": \"mod( <calc-sum> , <calc-sum> )\",\n        \"name-repeat\": \"repeat( [<integer [1,∞]>|auto-fill] , <line-names>+ )\",\n        \"named-color\": \"transparent|aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkgrey|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|grey|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgray|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightslategrey|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|rebeccapurple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|violet|wheat|white|whitesmoke|yellow|yellowgreen\",\n        \"namespace-prefix\": \"<ident>\",\n        \"ns-prefix\": \"[<ident-token>|'*']? '|'\",\n        \"number-percentage\": \"<number>|<percentage>\",\n        \"numeric-figure-values\": \"[lining-nums|oldstyle-nums]\",\n        \"numeric-fraction-values\": \"[diagonal-fractions|stacked-fractions]\",\n        \"numeric-spacing-values\": \"[proportional-nums|tabular-nums]\",\n        \"nth\": \"<an-plus-b>|even|odd\",\n        \"opacity()\": \"opacity( [<number-percentage>] )\",\n        \"overflow-position\": \"unsafe|safe\",\n        \"outline-radius\": \"<length>|<percentage>\",\n        \"page-body\": \"<declaration>? [; <page-body>]?|<page-margin-box> <page-body>\",\n        \"page-margin-box\": \"<page-margin-box-type> '{' <declaration-list> '}'\",\n        \"page-margin-box-type\": \"@top-left-corner|@top-left|@top-center|@top-right|@top-right-corner|@bottom-left-corner|@bottom-left|@bottom-center|@bottom-right|@bottom-right-corner|@left-top|@left-middle|@left-bottom|@right-top|@right-middle|@right-bottom\",\n        \"page-selector-list\": \"[<page-selector>#]?\",\n        \"page-selector\": \"<pseudo-page>+|<ident> <pseudo-page>*\",\n        \"page-size\": \"A5|A4|A3|B5|B4|JIS-B5|JIS-B4|letter|legal|ledger\",\n        \"path()\": \"path( [<fill-rule> ,]? <string> )\",\n        \"paint()\": \"paint( <ident> , <declaration-value>? )\",\n        \"perspective()\": \"perspective( [<length [0,∞]>|none] )\",\n        \"polygon()\": \"polygon( <fill-rule>? , [<length-percentage> <length-percentage>]# )\",\n        \"position\": \"[[left|center|right]||[top|center|bottom]|[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]?|[[left|right] <length-percentage>]&&[[top|bottom] <length-percentage>]]\",\n        \"pow()\": \"pow( <calc-sum> , <calc-sum> )\",\n        \"pseudo-class-selector\": \"':' <ident-token>|':' <function-token> <any-value> ')'\",\n        \"pseudo-element-selector\": \"':' <pseudo-class-selector>|<legacy-pseudo-element-selector>\",\n        \"pseudo-page\": \": [left|right|first|blank]\",\n        \"quote\": \"open-quote|close-quote|no-open-quote|no-close-quote\",\n        \"radial-gradient()\": \"radial-gradient( [<ending-shape>||<size>]? [at <position>]? , <color-stop-list> )\",\n        \"ratio\": \"<number [0,∞]> [/ <number [0,∞]>]?\",\n        \"ray()\": \"ray( <angle>&&<ray-size>?&&contain?&&[at <position>]? )\",\n        \"ray-size\": \"closest-side|closest-corner|farthest-side|farthest-corner|sides\",\n        \"relative-selector\": \"<combinator>? <complex-selector>\",\n        \"relative-selector-list\": \"<relative-selector>#\",\n        \"relative-size\": \"larger|smaller\",\n        \"rem()\": \"rem( <calc-sum> , <calc-sum> )\",\n        \"repeat-style\": \"repeat-x|repeat-y|[repeat|space|round|no-repeat]{1,2}\",\n        \"repeating-conic-gradient()\": \"repeating-conic-gradient( [from <angle>]? [at <position>]? , <angular-color-stop-list> )\",\n        \"repeating-linear-gradient()\": \"repeating-linear-gradient( [<angle>|to <side-or-corner>]? , <color-stop-list> )\",\n        \"repeating-radial-gradient()\": \"repeating-radial-gradient( [<ending-shape>||<size>]? [at <position>]? , <color-stop-list> )\",\n        \"reversed-counter-name\": \"reversed( <counter-name> )\",\n        \"rgb()\": \"rgb( <percentage>{3} [/ <alpha-value>]? )|rgb( <number>{3} [/ <alpha-value>]? )|rgb( <percentage>#{3} , <alpha-value>? )|rgb( <number>#{3} , <alpha-value>? )\",\n        \"rgba()\": \"rgba( <percentage>{3} [/ <alpha-value>]? )|rgba( <number>{3} [/ <alpha-value>]? )|rgba( <percentage>#{3} , <alpha-value>? )|rgba( <number>#{3} , <alpha-value>? )\",\n        \"rotate()\": \"rotate( [<angle>|<zero>] )\",\n        \"rotate3d()\": \"rotate3d( <number> , <number> , <number> , [<angle>|<zero>] )\",\n        \"rotateX()\": \"rotateX( [<angle>|<zero>] )\",\n        \"rotateY()\": \"rotateY( [<angle>|<zero>] )\",\n        \"rotateZ()\": \"rotateZ( [<angle>|<zero>] )\",\n        \"round()\": \"round( <rounding-strategy>? , <calc-sum> , <calc-sum> )\",\n        \"rounding-strategy\": \"nearest|up|down|to-zero\",\n        \"saturate()\": \"saturate( <number-percentage> )\",\n        \"scale()\": \"scale( [<number>|<percentage>]#{1,2} )\",\n        \"scale3d()\": \"scale3d( [<number>|<percentage>]#{3} )\",\n        \"scaleX()\": \"scaleX( [<number>|<percentage>] )\",\n        \"scaleY()\": \"scaleY( [<number>|<percentage>] )\",\n        \"scaleZ()\": \"scaleZ( [<number>|<percentage>] )\",\n        \"scroll()\": \"scroll( [<axis>||<scroller>]? )\",\n        \"scroller\": \"root|nearest\",\n        \"self-position\": \"center|start|end|self-start|self-end|flex-start|flex-end\",\n        \"shape-radius\": \"<length-percentage>|closest-side|farthest-side\",\n        \"sign()\": \"sign( <calc-sum> )\",\n        \"skew()\": \"skew( [<angle>|<zero>] , [<angle>|<zero>]? )\",\n        \"skewX()\": \"skewX( [<angle>|<zero>] )\",\n        \"skewY()\": \"skewY( [<angle>|<zero>] )\",\n        \"sepia()\": \"sepia( <number-percentage> )\",\n        \"shadow\": \"inset?&&<length>{2,4}&&<color>?\",\n        \"shadow-t\": \"[<length>{2,3}&&<color>?]\",\n        \"shape\": \"rect( <top> , <right> , <bottom> , <left> )|rect( <top> <right> <bottom> <left> )\",\n        \"shape-box\": \"<box>|margin-box\",\n        \"side-or-corner\": \"[left|right]||[top|bottom]\",\n        \"sin()\": \"sin( <calc-sum> )\",\n        \"single-animation\": \"<'animation-duration'>||<easing-function>||<'animation-delay'>||<single-animation-iteration-count>||<single-animation-direction>||<single-animation-fill-mode>||<single-animation-play-state>||[none|<keyframes-name>]||<single-animation-timeline>\",\n        \"single-animation-direction\": \"normal|reverse|alternate|alternate-reverse\",\n        \"single-animation-fill-mode\": \"none|forwards|backwards|both\",\n        \"single-animation-iteration-count\": \"infinite|<number>\",\n        \"single-animation-play-state\": \"running|paused\",\n        \"single-animation-timeline\": \"auto|none|<dashed-ident>|<scroll()>|<view()>\",\n        \"single-transition\": \"[none|<single-transition-property>]||<time>||<easing-function>||<time>||<transition-behavior-value>\",\n        \"single-transition-property\": \"all|<custom-ident>\",\n        \"size\": \"closest-side|farthest-side|closest-corner|farthest-corner|<length>|<length-percentage>{2}\",\n        \"sqrt()\": \"sqrt( <calc-sum> )\",\n        \"step-position\": \"jump-start|jump-end|jump-none|jump-both|start|end\",\n        \"step-timing-function\": \"step-start|step-end|steps( <integer> [, <step-position>]? )\",\n        \"subclass-selector\": \"<id-selector>|<class-selector>|<attribute-selector>|<pseudo-class-selector>\",\n        \"supports-condition\": \"not <supports-in-parens>|<supports-in-parens> [and <supports-in-parens>]*|<supports-in-parens> [or <supports-in-parens>]*\",\n        \"supports-in-parens\": \"( <supports-condition> )|<supports-feature>|<general-enclosed>\",\n        \"supports-feature\": \"<supports-decl>|<supports-selector-fn>\",\n        \"supports-decl\": \"( <declaration> )\",\n        \"supports-selector-fn\": \"selector( <complex-selector> )\",\n        \"symbol\": \"<string>|<image>|<custom-ident>\",\n        \"tan()\": \"tan( <calc-sum> )\",\n        \"target\": \"<target-counter()>|<target-counters()>|<target-text()>\",\n        \"target-counter()\": \"target-counter( [<string>|<url>] , <custom-ident> , <counter-style>? )\",\n        \"target-counters()\": \"target-counters( [<string>|<url>] , <custom-ident> , <string> , <counter-style>? )\",\n        \"target-text()\": \"target-text( [<string>|<url>] , [content|before|after|first-letter]? )\",\n        \"time-percentage\": \"<time>|<percentage>\",\n        \"timeline-range-name\": \"cover|contain|entry|exit|entry-crossing|exit-crossing\",\n        \"easing-function\": \"linear|<cubic-bezier-timing-function>|<step-timing-function>\",\n        \"track-breadth\": \"<length-percentage>|<flex>|min-content|max-content|auto\",\n        \"track-list\": \"[<line-names>? [<track-size>|<track-repeat>]]+ <line-names>?\",\n        \"track-repeat\": \"repeat( [<integer [1,∞]>] , [<line-names>? <track-size>]+ <line-names>? )\",\n        \"track-size\": \"<track-breadth>|minmax( <inflexible-breadth> , <track-breadth> )|fit-content( <length-percentage> )\",\n        \"transform-function\": \"<matrix()>|<translate()>|<translateX()>|<translateY()>|<scale()>|<scaleX()>|<scaleY()>|<rotate()>|<skew()>|<skewX()>|<skewY()>|<matrix3d()>|<translate3d()>|<translateZ()>|<scale3d()>|<scaleZ()>|<rotate3d()>|<rotateX()>|<rotateY()>|<rotateZ()>|<perspective()>\",\n        \"transform-list\": \"<transform-function>+\",\n        \"transition-behavior-value\": \"normal|allow-discrete\",\n        \"translate()\": \"translate( <length-percentage> , <length-percentage>? )\",\n        \"translate3d()\": \"translate3d( <length-percentage> , <length-percentage> , <length> )\",\n        \"translateX()\": \"translateX( <length-percentage> )\",\n        \"translateY()\": \"translateY( <length-percentage> )\",\n        \"translateZ()\": \"translateZ( <length> )\",\n        \"type-or-unit\": \"string|color|url|integer|number|length|angle|time|frequency|cap|ch|em|ex|ic|lh|rlh|rem|vb|vi|vw|vh|vmin|vmax|mm|Q|cm|in|pt|pc|px|deg|grad|rad|turn|ms|s|Hz|kHz|%\",\n        \"type-selector\": \"<wq-name>|<ns-prefix>? '*'\",\n        \"var()\": \"var( <custom-property-name> , <declaration-value>? )\",\n        \"view()\": \"view( [<axis>||<'view-timeline-inset'>]? )\",\n        \"viewport-length\": \"auto|<length-percentage>\",\n        \"visual-box\": \"content-box|padding-box|border-box\",\n        \"wq-name\": \"<ns-prefix>? <ident-token>\",\n        \"-legacy-gradient\": \"<-webkit-gradient()>|<-legacy-linear-gradient>|<-legacy-repeating-linear-gradient>|<-legacy-radial-gradient>|<-legacy-repeating-radial-gradient>\",\n        \"-legacy-linear-gradient\": \"-moz-linear-gradient( <-legacy-linear-gradient-arguments> )|-webkit-linear-gradient( <-legacy-linear-gradient-arguments> )|-o-linear-gradient( <-legacy-linear-gradient-arguments> )\",\n        \"-legacy-repeating-linear-gradient\": \"-moz-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )|-webkit-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )|-o-repeating-linear-gradient( <-legacy-linear-gradient-arguments> )\",\n        \"-legacy-linear-gradient-arguments\": \"[<angle>|<side-or-corner>]? , <color-stop-list>\",\n        \"-legacy-radial-gradient\": \"-moz-radial-gradient( <-legacy-radial-gradient-arguments> )|-webkit-radial-gradient( <-legacy-radial-gradient-arguments> )|-o-radial-gradient( <-legacy-radial-gradient-arguments> )\",\n        \"-legacy-repeating-radial-gradient\": \"-moz-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )|-webkit-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )|-o-repeating-radial-gradient( <-legacy-radial-gradient-arguments> )\",\n        \"-legacy-radial-gradient-arguments\": \"[<position> ,]? [[[<-legacy-radial-gradient-shape>||<-legacy-radial-gradient-size>]|[<length>|<percentage>]{2}] ,]? <color-stop-list>\",\n        \"-legacy-radial-gradient-size\": \"closest-side|closest-corner|farthest-side|farthest-corner|contain|cover\",\n        \"-legacy-radial-gradient-shape\": \"circle|ellipse\",\n        \"-non-standard-font\": \"-apple-system-body|-apple-system-headline|-apple-system-subheadline|-apple-system-caption1|-apple-system-caption2|-apple-system-footnote|-apple-system-short-body|-apple-system-short-headline|-apple-system-short-subheadline|-apple-system-short-caption1|-apple-system-short-footnote|-apple-system-tall-body\",\n        \"-non-standard-color\": \"-moz-ButtonDefault|-moz-ButtonHoverFace|-moz-ButtonHoverText|-moz-CellHighlight|-moz-CellHighlightText|-moz-Combobox|-moz-ComboboxText|-moz-Dialog|-moz-DialogText|-moz-dragtargetzone|-moz-EvenTreeRow|-moz-Field|-moz-FieldText|-moz-html-CellHighlight|-moz-html-CellHighlightText|-moz-mac-accentdarkestshadow|-moz-mac-accentdarkshadow|-moz-mac-accentface|-moz-mac-accentlightesthighlight|-moz-mac-accentlightshadow|-moz-mac-accentregularhighlight|-moz-mac-accentregularshadow|-moz-mac-chrome-active|-moz-mac-chrome-inactive|-moz-mac-focusring|-moz-mac-menuselect|-moz-mac-menushadow|-moz-mac-menutextselect|-moz-MenuHover|-moz-MenuHoverText|-moz-MenuBarText|-moz-MenuBarHoverText|-moz-nativehyperlinktext|-moz-OddTreeRow|-moz-win-communicationstext|-moz-win-mediatext|-moz-activehyperlinktext|-moz-default-background-color|-moz-default-color|-moz-hyperlinktext|-moz-visitedhyperlinktext|-webkit-activelink|-webkit-focus-ring-color|-webkit-link|-webkit-text\",\n        \"-non-standard-image-rendering\": \"optimize-contrast|-moz-crisp-edges|-o-crisp-edges|-webkit-optimize-contrast\",\n        \"-non-standard-overflow\": \"overlay|-moz-scrollbars-none|-moz-scrollbars-horizontal|-moz-scrollbars-vertical|-moz-hidden-unscrollable\",\n        \"-non-standard-size\": \"intrinsic|min-intrinsic|-webkit-fill-available|-webkit-fit-content|-webkit-min-content|-webkit-max-content|-moz-available|-moz-fit-content|-moz-min-content|-moz-max-content\",\n        \"-webkit-gradient()\": \"-webkit-gradient( <-webkit-gradient-type> , <-webkit-gradient-point> [, <-webkit-gradient-point>|, <-webkit-gradient-radius> , <-webkit-gradient-point>] [, <-webkit-gradient-radius>]? [, <-webkit-gradient-color-stop>]* )\",\n        \"-webkit-gradient-color-stop\": \"from( <color> )|color-stop( [<number-zero-one>|<percentage>] , <color> )|to( <color> )\",\n        \"-webkit-gradient-point\": \"[left|center|right|<length-percentage>] [top|center|bottom|<length-percentage>]\",\n        \"-webkit-gradient-radius\": \"<length>|<percentage>\",\n        \"-webkit-gradient-type\": \"linear|radial\",\n        \"-webkit-mask-box-repeat\": \"repeat|stretch|round\",\n        \"-ms-filter-function-list\": \"<-ms-filter-function>+\",\n        \"-ms-filter-function\": \"<-ms-filter-function-progid>|<-ms-filter-function-legacy>\",\n        \"-ms-filter-function-progid\": \"'progid:' [<ident-token> '.']* [<ident-token>|<function-token> <any-value>? )]\",\n        \"-ms-filter-function-legacy\": \"<ident-token>|<function-token> <any-value>? )\",\n        \"absolute-color-base\": \"<hex-color>|<absolute-color-function>|<named-color>|transparent\",\n        \"absolute-color-function\": \"rgb( ) >|<rgba()>|<hsl()>|<hsla()>|<hwb()>|<lab()>|<lch()>|<oklab()>|<oklch()>|<color()>\",\n        \"age\": \"child|young|old\",\n        \"attr-name\": \"<wq-name>\",\n        \"attr-fallback\": \"<any-value>\",\n        \"bg-clip\": \"<box>|border|text\",\n        \"bottom\": \"<length>|auto\",\n        \"container-name\": \"<custom-ident>\",\n        \"container-condition\": \"not <query-in-parens>|<query-in-parens> [[and <query-in-parens>]*|[or <query-in-parens>]*]\",\n        \"coord-box\": \"content-box|padding-box|border-box|fill-box|stroke-box|view-box\",\n        \"generic-voice\": \"[<age>? <gender> <integer>?]\",\n        \"gender\": \"male|female|neutral\",\n        \"generic-script-specific\": \"generic( kai )|generic( fangsong )|generic( nastaliq )\",\n        \"generic-complete\": \"serif|sans-serif|system-ui|cursive|fantasy|math|monospace\",\n        \"generic-incomplete\": \"ui-serif|ui-sans-serif|ui-monospace|ui-rounded\",\n        \"-non-standard-generic-family\": \"-apple-system|BlinkMacSystemFont\",\n        \"left\": \"<length>|auto\",\n        \"color-base\": \"<hex-color>|<color-function>|<named-color>|<color-mix()>|transparent\",\n        \"color-function\": \"<rgb()>|<rgba()>|<hsl()>|<hsla()>|<hwb()>|<lab()>|<lch()>|<oklab()>|<oklch()>|<color()>\",\n        \"system-color\": \"AccentColor|AccentColorText|ActiveText|ButtonBorder|ButtonFace|ButtonText|Canvas|CanvasText|Field|FieldText|GrayText|Highlight|HighlightText|LinkText|Mark|MarkText|SelectedItem|SelectedItemText|VisitedText\",\n        \"device-cmyk()\": \"<legacy-device-cmyk-syntax>|<modern-device-cmyk-syntax>\",\n        \"legacy-device-cmyk-syntax\": \"device-cmyk( <number>#{4} )\",\n        \"modern-device-cmyk-syntax\": \"device-cmyk( <cmyk-component>{4} [/ [<alpha-value>|none]]? )\",\n        \"cmyk-component\": \"<number>|<percentage>|none\",\n        \"color-mix()\": \"color-mix( <color-interpolation-method> , [<color>&&<percentage [0,100]>?]#{2} )\",\n        \"color-interpolation-method\": \"in [<rectangular-color-space>|<polar-color-space> <hue-interpolation-method>?|<custom-color-space>]\",\n        \"color-space\": \"<rectangular-color-space>|<polar-color-space>|<custom-color-space>\",\n        \"rectangular-color-space\": \"srgb|srgb-linear|display-p3|a98-rgb|prophoto-rgb|rec2020|lab|oklab|xyz|xyz-d50|xyz-d65\",\n        \"polar-color-space\": \"hsl|hwb|lch|oklch\",\n        \"custom-color-space\": \"<dashed-ident>\",\n        \"hue-interpolation-method\": \"[shorter|longer|increasing|decreasing] hue\",\n        \"paint\": \"none|<color>|<url> [none|<color>]?|context-fill|context-stroke\",\n        \"palette-identifier\": \"<dashed-ident>\",\n        \"right\": \"<length>|auto\",\n        \"scope-start\": \"<forgiving-selector-list>\",\n        \"scope-end\": \"<forgiving-selector-list>\",\n        \"forgiving-selector-list\": \"<complex-real-selector-list>\",\n        \"forgiving-relative-selector-list\": \"<relative-real-selector-list>\",\n        \"selector-list\": \"<complex-selector-list>\",\n        \"complex-real-selector-list\": \"<complex-real-selector>#\",\n        \"simple-selector-list\": \"<simple-selector>#\",\n        \"relative-real-selector-list\": \"<relative-real-selector>#\",\n        \"complex-selector-unit\": \"[<compound-selector>? <pseudo-compound-selector>*]!\",\n        \"complex-real-selector\": \"<compound-selector> [<combinator>? <compound-selector>]*\",\n        \"relative-real-selector\": \"<combinator>? <complex-real-selector>\",\n        \"pseudo-compound-selector\": \"<pseudo-element-selector> <pseudo-class-selector>*\",\n        \"simple-selector\": \"<type-selector>|<subclass-selector>\",\n        \"legacy-pseudo-element-selector\": \"':' [before|after|first-line|first-letter]\",\n        \"single-animation-composition\": \"replace|add|accumulate\",\n        \"svg-length\": \"<percentage>|<length>|<number>\",\n        \"svg-writing-mode\": \"lr-tb|rl-tb|tb-rl|lr|rl|tb\",\n        \"top\": \"<length>|auto\",\n        \"x\": \"<number>\",\n        \"y\": \"<number>\",\n        \"declaration\": \"<ident-token> : <declaration-value>? ['!' important]?\",\n        \"declaration-list\": \"[<declaration>? ';']* <declaration>?\",\n        \"url\": \"url( <string> <url-modifier>* )|<url-token>\",\n        \"url-modifier\": \"<ident>|<function-token> <any-value> )\",\n        \"number-zero-one\": \"<number [0,1]>\",\n        \"number-one-or-greater\": \"<number [1,∞]>\",\n        \"color()\": \"color( <colorspace-params> [/ [<alpha-value>|none]]? )\",\n        \"colorspace-params\": \"[<predefined-rgb-params>|<xyz-params>]\",\n        \"predefined-rgb-params\": \"<predefined-rgb> [<number>|<percentage>|none]{3}\",\n        \"predefined-rgb\": \"srgb|srgb-linear|display-p3|a98-rgb|prophoto-rgb|rec2020\",\n        \"xyz-params\": \"<xyz-space> [<number>|<percentage>|none]{3}\",\n        \"xyz-space\": \"xyz|xyz-d50|xyz-d65\",\n        \"oklab()\": \"oklab( [<percentage>|<number>|none] [<percentage>|<number>|none] [<percentage>|<number>|none] [/ [<alpha-value>|none]]? )\",\n        \"oklch()\": \"oklch( [<percentage>|<number>|none] [<percentage>|<number>|none] [<hue>|none] [/ [<alpha-value>|none]]? )\",\n        \"offset-path\": \"<ray()>|<url>|<basic-shape>\",\n        \"query-in-parens\": \"( <container-condition> )|( <size-feature> )|style( <style-query> )|<general-enclosed>\",\n        \"size-feature\": \"<mf-plain>|<mf-boolean>|<mf-range>\",\n        \"style-feature\": \"<declaration>\",\n        \"style-query\": \"<style-condition>|<style-feature>\",\n        \"style-condition\": \"not <style-in-parens>|<style-in-parens> [[and <style-in-parens>]*|[or <style-in-parens>]*]\",\n        \"style-in-parens\": \"( <style-condition> )|( <style-feature> )|<general-enclosed>\",\n        \"-non-standard-display\": \"-ms-inline-flexbox|-ms-grid|-ms-inline-grid|-webkit-flex|-webkit-inline-flex|-webkit-box|-webkit-inline-box|-moz-inline-stack|-moz-box|-moz-inline-box\",\n        \"inset-area\": \"[[left|center|right|span-left|span-right|x-start|x-end|span-x-start|span-x-end|x-self-start|x-self-end|span-x-self-start|span-x-self-end|span-all]||[top|center|bottom|span-top|span-bottom|y-start|y-end|span-y-start|span-y-end|y-self-start|y-self-end|span-y-self-start|span-y-self-end|span-all]|[block-start|center|block-end|span-block-start|span-block-end|span-all]||[inline-start|center|inline-end|span-inline-start|span-inline-end|span-all]|[self-block-start|self-block-end|span-self-block-start|span-self-block-end|span-all]||[self-inline-start|self-inline-end|span-self-inline-start|span-self-inline-end|span-all]|[start|center|end|span-start|span-end|span-all]{1,2}|[self-start|center|self-end|span-self-start|span-self-end|span-all]{1,2}]\",\n        \"position-area\": \"[[left|center|right|span-left|span-right|x-start|x-end|span-x-start|span-x-end|x-self-start|x-self-end|span-x-self-start|span-x-self-end|span-all]||[top|center|bottom|span-top|span-bottom|y-start|y-end|span-y-start|span-y-end|y-self-start|y-self-end|span-y-self-start|span-y-self-end|span-all]|[block-start|center|block-end|span-block-start|span-block-end|span-all]||[inline-start|center|inline-end|span-inline-start|span-inline-end|span-all]|[self-block-start|center|self-block-end|span-self-block-start|span-self-block-end|span-all]||[self-inline-start|center|self-inline-end|span-self-inline-start|span-self-inline-end|span-all]|[start|center|end|span-start|span-end|span-all]{1,2}|[self-start|center|self-end|span-self-start|span-self-end|span-all]{1,2}]\",\n        \"anchor()\": \"anchor( <anchor-element>?&&<anchor-side> , <length-percentage>? )\",\n        \"anchor-side\": \"inside|outside|top|left|right|bottom|start|end|self-start|self-end|<percentage>|center\",\n        \"anchor-size()\": \"anchor-size( [<anchor-element>||<anchor-size>]? , <length-percentage>? )\",\n        \"anchor-size\": \"width|height|block|inline|self-block|self-inline\",\n        \"anchor-element\": \"<dashed-ident>\",\n        \"try-size\": \"most-width|most-height|most-block-size|most-inline-size\",\n        \"try-tactic\": \"flip-block||flip-inline||flip-start\",\n        \"font-variant-css2\": \"normal|small-caps\",\n        \"font-width-css3\": \"normal|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded\",\n        \"system-family-name\": \"caption|icon|menu|message-box|small-caption|status-bar\"\n    },\n    \"properties\": {\n        \"--*\": \"<declaration-value>\",\n        \"-ms-accelerator\": \"false|true\",\n        \"-ms-block-progression\": \"tb|rl|bt|lr\",\n        \"-ms-content-zoom-chaining\": \"none|chained\",\n        \"-ms-content-zooming\": \"none|zoom\",\n        \"-ms-content-zoom-limit\": \"<'-ms-content-zoom-limit-min'> <'-ms-content-zoom-limit-max'>\",\n        \"-ms-content-zoom-limit-max\": \"<percentage>\",\n        \"-ms-content-zoom-limit-min\": \"<percentage>\",\n        \"-ms-content-zoom-snap\": \"<'-ms-content-zoom-snap-type'>||<'-ms-content-zoom-snap-points'>\",\n        \"-ms-content-zoom-snap-points\": \"snapInterval( <percentage> , <percentage> )|snapList( <percentage># )\",\n        \"-ms-content-zoom-snap-type\": \"none|proximity|mandatory\",\n        \"-ms-filter\": \"<string>\",\n        \"-ms-flow-from\": \"[none|<custom-ident>]#\",\n        \"-ms-flow-into\": \"[none|<custom-ident>]#\",\n        \"-ms-grid-columns\": \"none|<track-list>|<auto-track-list>\",\n        \"-ms-grid-rows\": \"none|<track-list>|<auto-track-list>\",\n        \"-ms-high-contrast-adjust\": \"auto|none\",\n        \"-ms-hyphenate-limit-chars\": \"auto|<integer>{1,3}\",\n        \"-ms-hyphenate-limit-lines\": \"no-limit|<integer>\",\n        \"-ms-hyphenate-limit-zone\": \"<percentage>|<length>\",\n        \"-ms-ime-align\": \"auto|after\",\n        \"-ms-overflow-style\": \"auto|none|scrollbar|-ms-autohiding-scrollbar\",\n        \"-ms-scrollbar-3dlight-color\": \"<color>\",\n        \"-ms-scrollbar-arrow-color\": \"<color>\",\n        \"-ms-scrollbar-base-color\": \"<color>\",\n        \"-ms-scrollbar-darkshadow-color\": \"<color>\",\n        \"-ms-scrollbar-face-color\": \"<color>\",\n        \"-ms-scrollbar-highlight-color\": \"<color>\",\n        \"-ms-scrollbar-shadow-color\": \"<color>\",\n        \"-ms-scrollbar-track-color\": \"<color>\",\n        \"-ms-scroll-chaining\": \"chained|none\",\n        \"-ms-scroll-limit\": \"<'-ms-scroll-limit-x-min'> <'-ms-scroll-limit-y-min'> <'-ms-scroll-limit-x-max'> <'-ms-scroll-limit-y-max'>\",\n        \"-ms-scroll-limit-x-max\": \"auto|<length>\",\n        \"-ms-scroll-limit-x-min\": \"<length>\",\n        \"-ms-scroll-limit-y-max\": \"auto|<length>\",\n        \"-ms-scroll-limit-y-min\": \"<length>\",\n        \"-ms-scroll-rails\": \"none|railed\",\n        \"-ms-scroll-snap-points-x\": \"snapInterval( <length-percentage> , <length-percentage> )|snapList( <length-percentage># )\",\n        \"-ms-scroll-snap-points-y\": \"snapInterval( <length-percentage> , <length-percentage> )|snapList( <length-percentage># )\",\n        \"-ms-scroll-snap-type\": \"none|proximity|mandatory\",\n        \"-ms-scroll-snap-x\": \"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-x'>\",\n        \"-ms-scroll-snap-y\": \"<'-ms-scroll-snap-type'> <'-ms-scroll-snap-points-y'>\",\n        \"-ms-scroll-translation\": \"none|vertical-to-horizontal\",\n        \"-ms-text-autospace\": \"none|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space\",\n        \"-ms-touch-select\": \"grippers|none\",\n        \"-ms-user-select\": \"none|element|text\",\n        \"-ms-wrap-flow\": \"auto|both|start|end|maximum|clear\",\n        \"-ms-wrap-margin\": \"<length>\",\n        \"-ms-wrap-through\": \"wrap|none\",\n        \"-moz-appearance\": \"none|button|button-arrow-down|button-arrow-next|button-arrow-previous|button-arrow-up|button-bevel|button-focus|caret|checkbox|checkbox-container|checkbox-label|checkmenuitem|dualbutton|groupbox|listbox|listitem|menuarrow|menubar|menucheckbox|menuimage|menuitem|menuitemtext|menulist|menulist-button|menulist-text|menulist-textfield|menupopup|menuradio|menuseparator|meterbar|meterchunk|progressbar|progressbar-vertical|progresschunk|progresschunk-vertical|radio|radio-container|radio-label|radiomenuitem|range|range-thumb|resizer|resizerpanel|scale-horizontal|scalethumbend|scalethumb-horizontal|scalethumbstart|scalethumbtick|scalethumb-vertical|scale-vertical|scrollbarbutton-down|scrollbarbutton-left|scrollbarbutton-right|scrollbarbutton-up|scrollbarthumb-horizontal|scrollbarthumb-vertical|scrollbartrack-horizontal|scrollbartrack-vertical|searchfield|separator|sheet|spinner|spinner-downbutton|spinner-textfield|spinner-upbutton|splitter|statusbar|statusbarpanel|tab|tabpanel|tabpanels|tab-scroll-arrow-back|tab-scroll-arrow-forward|textfield|textfield-multiline|toolbar|toolbarbutton|toolbarbutton-dropdown|toolbargripper|toolbox|tooltip|treeheader|treeheadercell|treeheadersortarrow|treeitem|treeline|treetwisty|treetwistyopen|treeview|-moz-mac-unified-toolbar|-moz-win-borderless-glass|-moz-win-browsertabbar-toolbox|-moz-win-communicationstext|-moz-win-communications-toolbox|-moz-win-exclude-glass|-moz-win-glass|-moz-win-mediatext|-moz-win-media-toolbox|-moz-window-button-box|-moz-window-button-box-maximized|-moz-window-button-close|-moz-window-button-maximize|-moz-window-button-minimize|-moz-window-button-restore|-moz-window-frame-bottom|-moz-window-frame-left|-moz-window-frame-right|-moz-window-titlebar|-moz-window-titlebar-maximized\",\n        \"-moz-binding\": \"<url>|none\",\n        \"-moz-border-bottom-colors\": \"<color>+|none\",\n        \"-moz-border-left-colors\": \"<color>+|none\",\n        \"-moz-border-right-colors\": \"<color>+|none\",\n        \"-moz-border-top-colors\": \"<color>+|none\",\n        \"-moz-context-properties\": \"none|[fill|fill-opacity|stroke|stroke-opacity]#\",\n        \"-moz-float-edge\": \"border-box|content-box|margin-box|padding-box\",\n        \"-moz-force-broken-image-icon\": \"0|1\",\n        \"-moz-image-region\": \"<shape>|auto\",\n        \"-moz-orient\": \"inline|block|horizontal|vertical\",\n        \"-moz-outline-radius\": \"<outline-radius>{1,4} [/ <outline-radius>{1,4}]?\",\n        \"-moz-outline-radius-bottomleft\": \"<outline-radius>\",\n        \"-moz-outline-radius-bottomright\": \"<outline-radius>\",\n        \"-moz-outline-radius-topleft\": \"<outline-radius>\",\n        \"-moz-outline-radius-topright\": \"<outline-radius>\",\n        \"-moz-stack-sizing\": \"ignore|stretch-to-fit\",\n        \"-moz-text-blink\": \"none|blink\",\n        \"-moz-user-focus\": \"ignore|normal|select-after|select-before|select-menu|select-same|select-all|none\",\n        \"-moz-user-input\": \"auto|none|enabled|disabled\",\n        \"-moz-user-modify\": \"read-only|read-write|write-only\",\n        \"-moz-window-dragging\": \"drag|no-drag\",\n        \"-moz-window-shadow\": \"default|menu|tooltip|sheet|none\",\n        \"-webkit-appearance\": \"none|button|button-bevel|caps-lock-indicator|caret|checkbox|default-button|inner-spin-button|listbox|listitem|media-controls-background|media-controls-fullscreen-background|media-current-time-display|media-enter-fullscreen-button|media-exit-fullscreen-button|media-fullscreen-button|media-mute-button|media-overlay-play-button|media-play-button|media-seek-back-button|media-seek-forward-button|media-slider|media-sliderthumb|media-time-remaining-display|media-toggle-closed-captions-button|media-volume-slider|media-volume-slider-container|media-volume-sliderthumb|menulist|menulist-button|menulist-text|menulist-textfield|meter|progress-bar|progress-bar-value|push-button|radio|scrollbarbutton-down|scrollbarbutton-left|scrollbarbutton-right|scrollbarbutton-up|scrollbargripper-horizontal|scrollbargripper-vertical|scrollbarthumb-horizontal|scrollbarthumb-vertical|scrollbartrack-horizontal|scrollbartrack-vertical|searchfield|searchfield-cancel-button|searchfield-decoration|searchfield-results-button|searchfield-results-decoration|slider-horizontal|slider-vertical|sliderthumb-horizontal|sliderthumb-vertical|square-button|textarea|textfield|-apple-pay-button\",\n        \"-webkit-border-before\": \"<'border-width'>||<'border-style'>||<color>\",\n        \"-webkit-border-before-color\": \"<color>\",\n        \"-webkit-border-before-style\": \"<'border-style'>\",\n        \"-webkit-border-before-width\": \"<'border-width'>\",\n        \"-webkit-box-reflect\": \"[above|below|right|left]? <length>? <image>?\",\n        \"-webkit-line-clamp\": \"none|<integer>\",\n        \"-webkit-mask\": \"[<mask-reference>||<position> [/ <bg-size>]?||<repeat-style>||[<box>|border|padding|content|text]||[<box>|border|padding|content]]#\",\n        \"-webkit-mask-attachment\": \"<attachment>#\",\n        \"-webkit-mask-clip\": \"[<box>|border|padding|content|text]#\",\n        \"-webkit-mask-composite\": \"<composite-style>#\",\n        \"-webkit-mask-image\": \"<mask-reference>#\",\n        \"-webkit-mask-origin\": \"[<box>|border|padding|content]#\",\n        \"-webkit-mask-position\": \"<position>#\",\n        \"-webkit-mask-position-x\": \"[<length-percentage>|left|center|right]#\",\n        \"-webkit-mask-position-y\": \"[<length-percentage>|top|center|bottom]#\",\n        \"-webkit-mask-repeat\": \"<repeat-style>#\",\n        \"-webkit-mask-repeat-x\": \"repeat|no-repeat|space|round\",\n        \"-webkit-mask-repeat-y\": \"repeat|no-repeat|space|round\",\n        \"-webkit-mask-size\": \"<bg-size>#\",\n        \"-webkit-overflow-scrolling\": \"auto|touch\",\n        \"-webkit-tap-highlight-color\": \"<color>\",\n        \"-webkit-text-fill-color\": \"<color>\",\n        \"-webkit-text-stroke\": \"<length>||<color>\",\n        \"-webkit-text-stroke-color\": \"<color>\",\n        \"-webkit-text-stroke-width\": \"<length>\",\n        \"-webkit-touch-callout\": \"default|none\",\n        \"-webkit-user-modify\": \"read-only|read-write|read-write-plaintext-only\",\n        \"accent-color\": \"auto|<color>\",\n        \"align-content\": \"normal|<baseline-position>|<content-distribution>|<overflow-position>? <content-position>\",\n        \"align-items\": \"normal|stretch|<baseline-position>|[<overflow-position>? <self-position>]\",\n        \"align-self\": \"auto|normal|stretch|<baseline-position>|<overflow-position>? <self-position>\",\n        \"align-tracks\": \"[normal|<baseline-position>|<content-distribution>|<overflow-position>? <content-position>]#\",\n        \"all\": \"initial|inherit|unset|revert|revert-layer\",\n        \"anchor-name\": \"none|<dashed-ident>#\",\n        \"anchor-scope\": \"none|all|<dashed-ident>#\",\n        \"animation\": \"<single-animation>#\",\n        \"animation-composition\": \"<single-animation-composition>#\",\n        \"animation-delay\": \"<time>#\",\n        \"animation-direction\": \"<single-animation-direction>#\",\n        \"animation-duration\": \"<time>#\",\n        \"animation-fill-mode\": \"<single-animation-fill-mode>#\",\n        \"animation-iteration-count\": \"<single-animation-iteration-count>#\",\n        \"animation-name\": \"[none|<keyframes-name>]#\",\n        \"animation-play-state\": \"<single-animation-play-state>#\",\n        \"animation-range\": \"[<'animation-range-start'> <'animation-range-end'>?]#\",\n        \"animation-range-end\": \"[normal|<length-percentage>|<timeline-range-name> <length-percentage>?]#\",\n        \"animation-range-start\": \"[normal|<length-percentage>|<timeline-range-name> <length-percentage>?]#\",\n        \"animation-timing-function\": \"<easing-function>#\",\n        \"animation-timeline\": \"<single-animation-timeline>#\",\n        \"appearance\": \"none|auto|textfield|menulist-button|<compat-auto>\",\n        \"aspect-ratio\": \"auto|<ratio>\",\n        \"azimuth\": \"<angle>|[[left-side|far-left|left|center-left|center|center-right|right|far-right|right-side]||behind]|leftwards|rightwards\",\n        \"backdrop-filter\": \"none|<filter-function-list>\",\n        \"backface-visibility\": \"visible|hidden\",\n        \"background\": \"[<bg-layer> ,]* <final-bg-layer>\",\n        \"background-attachment\": \"<attachment>#\",\n        \"background-blend-mode\": \"<blend-mode>#\",\n        \"background-clip\": \"<bg-clip>#\",\n        \"background-color\": \"<color>\",\n        \"background-image\": \"<bg-image>#\",\n        \"background-origin\": \"<box>#\",\n        \"background-position\": \"<bg-position>#\",\n        \"background-position-x\": \"[center|[[left|right|x-start|x-end]? <length-percentage>?]!]#\",\n        \"background-position-y\": \"[center|[[top|bottom|y-start|y-end]? <length-percentage>?]!]#\",\n        \"background-repeat\": \"<repeat-style>#\",\n        \"background-size\": \"<bg-size>#\",\n        \"block-size\": \"<'width'>\",\n        \"border\": \"<line-width>||<line-style>||<color>\",\n        \"border-block\": \"<'border-top-width'>||<'border-top-style'>||<color>\",\n        \"border-block-color\": \"<'border-top-color'>{1,2}\",\n        \"border-block-style\": \"<'border-top-style'>\",\n        \"border-block-width\": \"<'border-top-width'>\",\n        \"border-block-end\": \"<'border-top-width'>||<'border-top-style'>||<color>\",\n        \"border-block-end-color\": \"<'border-top-color'>\",\n        \"border-block-end-style\": \"<'border-top-style'>\",\n        \"border-block-end-width\": \"<'border-top-width'>\",\n        \"border-block-start\": \"<'border-top-width'>||<'border-top-style'>||<color>\",\n        \"border-block-start-color\": \"<'border-top-color'>\",\n        \"border-block-start-style\": \"<'border-top-style'>\",\n        \"border-block-start-width\": \"<'border-top-width'>\",\n        \"border-bottom\": \"<line-width>||<line-style>||<color>\",\n        \"border-bottom-color\": \"<'border-top-color'>\",\n        \"border-bottom-left-radius\": \"<length-percentage>{1,2}\",\n        \"border-bottom-right-radius\": \"<length-percentage>{1,2}\",\n        \"border-bottom-style\": \"<line-style>\",\n        \"border-bottom-width\": \"<line-width>\",\n        \"border-collapse\": \"collapse|separate\",\n        \"border-color\": \"<color>{1,4}\",\n        \"border-end-end-radius\": \"<length-percentage>{1,2}\",\n        \"border-end-start-radius\": \"<length-percentage>{1,2}\",\n        \"border-image\": \"<'border-image-source'>||<'border-image-slice'> [/ <'border-image-width'>|/ <'border-image-width'>? / <'border-image-outset'>]?||<'border-image-repeat'>\",\n        \"border-image-outset\": \"[<length>|<number>]{1,4}\",\n        \"border-image-repeat\": \"[stretch|repeat|round|space]{1,2}\",\n        \"border-image-slice\": \"<number-percentage>{1,4}&&fill?\",\n        \"border-image-source\": \"none|<image>\",\n        \"border-image-width\": \"[<length-percentage>|<number>|auto]{1,4}\",\n        \"border-inline\": \"<'border-top-width'>||<'border-top-style'>||<color>\",\n        \"border-inline-end\": \"<'border-top-width'>||<'border-top-style'>||<color>\",\n        \"border-inline-color\": \"<'border-top-color'>{1,2}\",\n        \"border-inline-style\": \"<'border-top-style'>\",\n        \"border-inline-width\": \"<'border-top-width'>\",\n        \"border-inline-end-color\": \"<'border-top-color'>\",\n        \"border-inline-end-style\": \"<'border-top-style'>\",\n        \"border-inline-end-width\": \"<'border-top-width'>\",\n        \"border-inline-start\": \"<'border-top-width'>||<'border-top-style'>||<color>\",\n        \"border-inline-start-color\": \"<'border-top-color'>\",\n        \"border-inline-start-style\": \"<'border-top-style'>\",\n        \"border-inline-start-width\": \"<'border-top-width'>\",\n        \"border-left\": \"<line-width>||<line-style>||<color>\",\n        \"border-left-color\": \"<color>\",\n        \"border-left-style\": \"<line-style>\",\n        \"border-left-width\": \"<line-width>\",\n        \"border-radius\": \"<length-percentage>{1,4} [/ <length-percentage>{1,4}]?\",\n        \"border-right\": \"<line-width>||<line-style>||<color>\",\n        \"border-right-color\": \"<color>\",\n        \"border-right-style\": \"<line-style>\",\n        \"border-right-width\": \"<line-width>\",\n        \"border-spacing\": \"<length> <length>?\",\n        \"border-start-end-radius\": \"<length-percentage>{1,2}\",\n        \"border-start-start-radius\": \"<length-percentage>{1,2}\",\n        \"border-style\": \"<line-style>{1,4}\",\n        \"border-top\": \"<line-width>||<line-style>||<color>\",\n        \"border-top-color\": \"<color>\",\n        \"border-top-left-radius\": \"<length-percentage>{1,2}\",\n        \"border-top-right-radius\": \"<length-percentage>{1,2}\",\n        \"border-top-style\": \"<line-style>\",\n        \"border-top-width\": \"<line-width>\",\n        \"border-width\": \"<line-width>{1,4}\",\n        \"bottom\": \"<length>|<percentage>|auto\",\n        \"box-align\": \"start|center|end|baseline|stretch\",\n        \"box-decoration-break\": \"slice|clone\",\n        \"box-direction\": \"normal|reverse|inherit\",\n        \"box-flex\": \"<number>\",\n        \"box-flex-group\": \"<integer>\",\n        \"box-lines\": \"single|multiple\",\n        \"box-ordinal-group\": \"<integer>\",\n        \"box-orient\": \"horizontal|vertical|inline-axis|block-axis|inherit\",\n        \"box-pack\": \"start|center|end|justify\",\n        \"box-shadow\": \"none|<shadow>#\",\n        \"box-sizing\": \"content-box|border-box\",\n        \"break-after\": \"auto|avoid|always|all|avoid-page|page|left|right|recto|verso|avoid-column|column|avoid-region|region\",\n        \"break-before\": \"auto|avoid|always|all|avoid-page|page|left|right|recto|verso|avoid-column|column|avoid-region|region\",\n        \"break-inside\": \"auto|avoid|avoid-page|avoid-column|avoid-region\",\n        \"caption-side\": \"top|bottom|block-start|block-end|inline-start|inline-end\",\n        \"caret\": \"<'caret-color'>||<'caret-shape'>\",\n        \"caret-color\": \"auto|<color>\",\n        \"caret-shape\": \"auto|bar|block|underscore\",\n        \"clear\": \"none|left|right|both|inline-start|inline-end\",\n        \"clip\": \"<shape>|auto\",\n        \"clip-path\": \"<clip-source>|[<basic-shape>||<geometry-box>]|none\",\n        \"clip-rule\": \"nonzero|evenodd\",\n        \"color\": \"<color>\",\n        \"color-interpolation-filters\": \"auto|sRGB|linearRGB\",\n        \"color-scheme\": \"normal|[light|dark|<custom-ident>]+&&only?\",\n        \"column-count\": \"<integer>|auto\",\n        \"column-fill\": \"auto|balance|balance-all\",\n        \"column-gap\": \"normal|<length-percentage>\",\n        \"column-rule\": \"<'column-rule-width'>||<'column-rule-style'>||<'column-rule-color'>\",\n        \"column-rule-color\": \"<color>\",\n        \"column-rule-style\": \"<'border-style'>\",\n        \"column-rule-width\": \"<'border-width'>\",\n        \"column-span\": \"none|all\",\n        \"column-width\": \"<length>|auto\",\n        \"columns\": \"<'column-width'>||<'column-count'>\",\n        \"contain\": \"none|strict|content|[[size||inline-size]||layout||style||paint]\",\n        \"contain-intrinsic-size\": \"[auto? [none|<length>]]{1,2}\",\n        \"contain-intrinsic-block-size\": \"auto? [none|<length>]\",\n        \"contain-intrinsic-height\": \"auto? [none|<length>]\",\n        \"contain-intrinsic-inline-size\": \"auto? [none|<length>]\",\n        \"contain-intrinsic-width\": \"auto? [none|<length>]\",\n        \"container\": \"<'container-name'> [/ <'container-type'>]?\",\n        \"container-name\": \"none|<custom-ident>+\",\n        \"container-type\": \"normal||[size|inline-size]\",\n        \"content\": \"normal|none|[<content-replacement>|<content-list>] [/ [<string>|<counter>]+]?\",\n        \"content-visibility\": \"visible|auto|hidden\",\n        \"counter-increment\": \"[<counter-name> <integer>?]+|none\",\n        \"counter-reset\": \"[<counter-name> <integer>?|<reversed-counter-name> <integer>?]+|none\",\n        \"counter-set\": \"[<counter-name> <integer>?]+|none\",\n        \"cursor\": \"[[<url> [<x> <y>]? ,]* [auto|default|none|context-menu|help|pointer|progress|wait|cell|crosshair|text|vertical-text|alias|copy|move|no-drop|not-allowed|e-resize|n-resize|ne-resize|nw-resize|s-resize|se-resize|sw-resize|w-resize|ew-resize|ns-resize|nesw-resize|nwse-resize|col-resize|row-resize|all-scroll|zoom-in|zoom-out|grab|grabbing|hand|-webkit-grab|-webkit-grabbing|-webkit-zoom-in|-webkit-zoom-out|-moz-grab|-moz-grabbing|-moz-zoom-in|-moz-zoom-out]]\",\n        \"d\": \"none|path( <string> )\",\n        \"cx\": \"<length>|<percentage>\",\n        \"cy\": \"<length>|<percentage>\",\n        \"direction\": \"ltr|rtl\",\n        \"display\": \"[<display-outside>||<display-inside>]|<display-listitem>|<display-internal>|<display-box>|<display-legacy>|<-non-standard-display>\",\n        \"dominant-baseline\": \"auto|use-script|no-change|reset-size|ideographic|alphabetic|hanging|mathematical|central|middle|text-after-edge|text-before-edge\",\n        \"empty-cells\": \"show|hide\",\n        \"field-sizing\": \"content|fixed\",\n        \"fill\": \"<paint>\",\n        \"fill-opacity\": \"<number-zero-one>\",\n        \"fill-rule\": \"nonzero|evenodd\",\n        \"filter\": \"none|<filter-function-list>|<-ms-filter-function-list>\",\n        \"flex\": \"none|[<'flex-grow'> <'flex-shrink'>?||<'flex-basis'>]\",\n        \"flex-basis\": \"content|<'width'>\",\n        \"flex-direction\": \"row|row-reverse|column|column-reverse\",\n        \"flex-flow\": \"<'flex-direction'>||<'flex-wrap'>\",\n        \"flex-grow\": \"<number>\",\n        \"flex-shrink\": \"<number>\",\n        \"flex-wrap\": \"nowrap|wrap|wrap-reverse\",\n        \"float\": \"left|right|none|inline-start|inline-end\",\n        \"font\": \"[[<'font-style'>||<font-variant-css2>||<'font-weight'>||<font-width-css3>]? <'font-size'> [/ <'line-height'>]? <'font-family'>#]|<system-family-name>|<-non-standard-font>\",\n        \"font-family\": \"[<family-name>|<generic-family>]#\",\n        \"font-feature-settings\": \"normal|<feature-tag-value>#\",\n        \"font-kerning\": \"auto|normal|none\",\n        \"font-language-override\": \"normal|<string>\",\n        \"font-optical-sizing\": \"auto|none\",\n        \"font-palette\": \"normal|light|dark|<palette-identifier>\",\n        \"font-variation-settings\": \"normal|[<string> <number>]#\",\n        \"font-size\": \"<absolute-size>|<relative-size>|<length-percentage>\",\n        \"font-size-adjust\": \"none|[ex-height|cap-height|ch-width|ic-width|ic-height]? [from-font|<number>]\",\n        \"font-smooth\": \"auto|never|always|<absolute-size>|<length>\",\n        \"font-stretch\": \"<font-stretch-absolute>\",\n        \"font-style\": \"normal|italic|oblique <angle>?\",\n        \"font-synthesis\": \"none|[weight||style||small-caps||position]\",\n        \"font-synthesis-position\": \"auto|none\",\n        \"font-synthesis-small-caps\": \"auto|none\",\n        \"font-synthesis-style\": \"auto|none\",\n        \"font-synthesis-weight\": \"auto|none\",\n        \"font-variant\": \"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>||stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )||[small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps]||<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero||<east-asian-variant-values>||<east-asian-width-values>||ruby]\",\n        \"font-variant-alternates\": \"normal|[stylistic( <feature-value-name> )||historical-forms||styleset( <feature-value-name># )||character-variant( <feature-value-name># )||swash( <feature-value-name> )||ornaments( <feature-value-name> )||annotation( <feature-value-name> )]\",\n        \"font-variant-caps\": \"normal|small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps\",\n        \"font-variant-east-asian\": \"normal|[<east-asian-variant-values>||<east-asian-width-values>||ruby]\",\n        \"font-variant-emoji\": \"normal|text|emoji|unicode\",\n        \"font-variant-ligatures\": \"normal|none|[<common-lig-values>||<discretionary-lig-values>||<historical-lig-values>||<contextual-alt-values>]\",\n        \"font-variant-numeric\": \"normal|[<numeric-figure-values>||<numeric-spacing-values>||<numeric-fraction-values>||ordinal||slashed-zero]\",\n        \"font-variant-position\": \"normal|sub|super\",\n        \"font-weight\": \"<font-weight-absolute>|bolder|lighter\",\n        \"forced-color-adjust\": \"auto|none\",\n        \"gap\": \"<'row-gap'> <'column-gap'>?\",\n        \"grid\": \"<'grid-template'>|<'grid-template-rows'> / [auto-flow&&dense?] <'grid-auto-columns'>?|[auto-flow&&dense?] <'grid-auto-rows'>? / <'grid-template-columns'>\",\n        \"grid-area\": \"<grid-line> [/ <grid-line>]{0,3}\",\n        \"grid-auto-columns\": \"<track-size>+\",\n        \"grid-auto-flow\": \"[row|column]||dense\",\n        \"grid-auto-rows\": \"<track-size>+\",\n        \"grid-column\": \"<grid-line> [/ <grid-line>]?\",\n        \"grid-column-end\": \"<grid-line>\",\n        \"grid-column-gap\": \"<length-percentage>\",\n        \"grid-column-start\": \"<grid-line>\",\n        \"grid-gap\": \"<'grid-row-gap'> <'grid-column-gap'>?\",\n        \"grid-row\": \"<grid-line> [/ <grid-line>]?\",\n        \"grid-row-end\": \"<grid-line>\",\n        \"grid-row-gap\": \"<length-percentage>\",\n        \"grid-row-start\": \"<grid-line>\",\n        \"grid-template\": \"none|[<'grid-template-rows'> / <'grid-template-columns'>]|[<line-names>? <string> <track-size>? <line-names>?]+ [/ <explicit-track-list>]?\",\n        \"grid-template-areas\": \"none|<string>+\",\n        \"grid-template-columns\": \"none|<track-list>|<auto-track-list>|subgrid <line-name-list>?\",\n        \"grid-template-rows\": \"none|<track-list>|<auto-track-list>|subgrid <line-name-list>?\",\n        \"hanging-punctuation\": \"none|[first||[force-end|allow-end]||last]\",\n        \"height\": \"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>\",\n        \"hyphenate-character\": \"auto|<string>\",\n        \"hyphenate-limit-chars\": \"[auto|<integer>]{1,3}\",\n        \"hyphens\": \"none|manual|auto\",\n        \"image-orientation\": \"from-image|<angle>|[<angle>? flip]\",\n        \"image-rendering\": \"auto|crisp-edges|pixelated|optimizeSpeed|optimizeQuality|<-non-standard-image-rendering>\",\n        \"image-resolution\": \"[from-image||<resolution>]&&snap?\",\n        \"ime-mode\": \"auto|normal|active|inactive|disabled\",\n        \"initial-letter\": \"normal|[<number> <integer>?]\",\n        \"initial-letter-align\": \"[auto|alphabetic|hanging|ideographic]\",\n        \"inline-size\": \"<'width'>\",\n        \"input-security\": \"auto|none\",\n        \"inset\": \"<'top'>{1,4}\",\n        \"inset-area\": \"none|<inset-area>\",\n        \"inset-block\": \"<'top'>{1,2}\",\n        \"inset-block-end\": \"<'top'>\",\n        \"inset-block-start\": \"<'top'>\",\n        \"inset-inline\": \"<'top'>{1,2}\",\n        \"inset-inline-end\": \"<'top'>\",\n        \"inset-inline-start\": \"<'top'>\",\n        \"isolation\": \"auto|isolate\",\n        \"justify-content\": \"normal|<content-distribution>|<overflow-position>? [<content-position>|left|right]\",\n        \"justify-items\": \"normal|stretch|<baseline-position>|<overflow-position>? [<self-position>|left|right]|legacy|legacy&&[left|right|center]\",\n        \"justify-self\": \"auto|normal|stretch|<baseline-position>|<overflow-position>? [<self-position>|left|right]\",\n        \"justify-tracks\": \"[normal|<content-distribution>|<overflow-position>? [<content-position>|left|right]]#\",\n        \"left\": \"<length>|<percentage>|auto\",\n        \"letter-spacing\": \"normal|<length-percentage>\",\n        \"line-break\": \"auto|loose|normal|strict|anywhere\",\n        \"line-clamp\": \"none|<integer>\",\n        \"line-height\": \"normal|<number>|<length>|<percentage>\",\n        \"line-height-step\": \"<length>\",\n        \"list-style\": \"<'list-style-type'>||<'list-style-position'>||<'list-style-image'>\",\n        \"list-style-image\": \"<image>|none\",\n        \"list-style-position\": \"inside|outside\",\n        \"list-style-type\": \"<counter-style>|<string>|none\",\n        \"margin\": \"[<length>|<percentage>|auto]{1,4}\",\n        \"margin-block\": \"<'margin-left'>{1,2}\",\n        \"margin-block-end\": \"<'margin-left'>\",\n        \"margin-block-start\": \"<'margin-left'>\",\n        \"margin-bottom\": \"<length>|<percentage>|auto\",\n        \"margin-inline\": \"<'margin-left'>{1,2}\",\n        \"margin-inline-end\": \"<'margin-left'>\",\n        \"margin-inline-start\": \"<'margin-left'>\",\n        \"margin-left\": \"<length>|<percentage>|auto\",\n        \"margin-right\": \"<length>|<percentage>|auto\",\n        \"margin-top\": \"<length>|<percentage>|auto\",\n        \"margin-trim\": \"none|in-flow|all\",\n        \"marker\": \"none|<url>\",\n        \"marker-end\": \"none|<url>\",\n        \"marker-mid\": \"none|<url>\",\n        \"marker-start\": \"none|<url>\",\n        \"mask\": \"<mask-layer>#\",\n        \"mask-border\": \"<'mask-border-source'>||<'mask-border-slice'> [/ <'mask-border-width'>? [/ <'mask-border-outset'>]?]?||<'mask-border-repeat'>||<'mask-border-mode'>\",\n        \"mask-border-mode\": \"luminance|alpha\",\n        \"mask-border-outset\": \"[<length>|<number>]{1,4}\",\n        \"mask-border-repeat\": \"[stretch|repeat|round|space]{1,2}\",\n        \"mask-border-slice\": \"<number-percentage>{1,4} fill?\",\n        \"mask-border-source\": \"none|<image>\",\n        \"mask-border-width\": \"[<length-percentage>|<number>|auto]{1,4}\",\n        \"mask-clip\": \"[<geometry-box>|no-clip]#\",\n        \"mask-composite\": \"<compositing-operator>#\",\n        \"mask-image\": \"<mask-reference>#\",\n        \"mask-mode\": \"<masking-mode>#\",\n        \"mask-origin\": \"<geometry-box>#\",\n        \"mask-position\": \"<position>#\",\n        \"mask-repeat\": \"<repeat-style>#\",\n        \"mask-size\": \"<bg-size>#\",\n        \"mask-type\": \"luminance|alpha\",\n        \"masonry-auto-flow\": \"[pack|next]||[definite-first|ordered]\",\n        \"math-depth\": \"auto-add|add( <integer> )|<integer>\",\n        \"math-shift\": \"normal|compact\",\n        \"math-style\": \"normal|compact\",\n        \"max-block-size\": \"<'max-width'>\",\n        \"max-height\": \"none|<length-percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>\",\n        \"max-inline-size\": \"<'max-width'>\",\n        \"max-lines\": \"none|<integer>\",\n        \"max-width\": \"none|<length-percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>\",\n        \"min-block-size\": \"<'min-width'>\",\n        \"min-height\": \"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>\",\n        \"min-inline-size\": \"<'min-width'>\",\n        \"min-width\": \"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>\",\n        \"mix-blend-mode\": \"<blend-mode>|plus-lighter\",\n        \"object-fit\": \"fill|contain|cover|none|scale-down\",\n        \"object-position\": \"<position>\",\n        \"offset\": \"[<'offset-position'>? [<'offset-path'> [<'offset-distance'>||<'offset-rotate'>]?]?]! [/ <'offset-anchor'>]?\",\n        \"offset-anchor\": \"auto|<position>\",\n        \"offset-distance\": \"<length-percentage>\",\n        \"offset-path\": \"none|<offset-path>||<coord-box>\",\n        \"offset-position\": \"normal|auto|<position>\",\n        \"offset-rotate\": \"[auto|reverse]||<angle>\",\n        \"opacity\": \"<alpha-value>\",\n        \"order\": \"<integer>\",\n        \"orphans\": \"<integer>\",\n        \"outline\": \"[<'outline-width'>||<'outline-style'>||<'outline-color'>]\",\n        \"outline-color\": \"auto|<color>\",\n        \"outline-offset\": \"<length>\",\n        \"outline-style\": \"auto|<'border-style'>\",\n        \"outline-width\": \"<line-width>\",\n        \"overflow\": \"[visible|hidden|clip|scroll|auto]{1,2}|<-non-standard-overflow>\",\n        \"overflow-anchor\": \"auto|none\",\n        \"overflow-block\": \"visible|hidden|clip|scroll|auto\",\n        \"overflow-clip-box\": \"padding-box|content-box\",\n        \"overflow-clip-margin\": \"<visual-box>||<length [0,∞]>\",\n        \"overflow-inline\": \"visible|hidden|clip|scroll|auto\",\n        \"overflow-wrap\": \"normal|break-word|anywhere\",\n        \"overflow-x\": \"visible|hidden|clip|scroll|auto\",\n        \"overflow-y\": \"visible|hidden|clip|scroll|auto\",\n        \"overlay\": \"none|auto\",\n        \"overscroll-behavior\": \"[contain|none|auto]{1,2}\",\n        \"overscroll-behavior-block\": \"contain|none|auto\",\n        \"overscroll-behavior-inline\": \"contain|none|auto\",\n        \"overscroll-behavior-x\": \"contain|none|auto\",\n        \"overscroll-behavior-y\": \"contain|none|auto\",\n        \"padding\": \"[<length>|<percentage>]{1,4}\",\n        \"padding-block\": \"<'padding-left'>{1,2}\",\n        \"padding-block-end\": \"<'padding-left'>\",\n        \"padding-block-start\": \"<'padding-left'>\",\n        \"padding-bottom\": \"<length>|<percentage>\",\n        \"padding-inline\": \"<'padding-left'>{1,2}\",\n        \"padding-inline-end\": \"<'padding-left'>\",\n        \"padding-inline-start\": \"<'padding-left'>\",\n        \"padding-left\": \"<length>|<percentage>\",\n        \"padding-right\": \"<length>|<percentage>\",\n        \"padding-top\": \"<length>|<percentage>\",\n        \"page\": \"auto|<custom-ident>\",\n        \"page-break-after\": \"auto|always|avoid|left|right|recto|verso\",\n        \"page-break-before\": \"auto|always|avoid|left|right|recto|verso\",\n        \"page-break-inside\": \"auto|avoid\",\n        \"paint-order\": \"normal|[fill||stroke||markers]\",\n        \"perspective\": \"none|<length>\",\n        \"perspective-origin\": \"<position>\",\n        \"place-content\": \"<'align-content'> <'justify-content'>?\",\n        \"place-items\": \"<'align-items'> <'justify-items'>?\",\n        \"place-self\": \"<'align-self'> <'justify-self'>?\",\n        \"pointer-events\": \"auto|none|visiblePainted|visibleFill|visibleStroke|visible|painted|fill|stroke|all|inherit\",\n        \"position\": \"static|relative|absolute|sticky|fixed|-webkit-sticky\",\n        \"position-anchor\": \"<anchor-element>\",\n        \"position-try\": \"<'position-try-order'>? <'position-try-fallbacks'>\",\n        \"position-try-fallbacks\": \"none|[[<dashed-ident>||<try-tactic>]|<'position-area'>]#\",\n        \"position-try-order\": \"normal|<try-size>\",\n        \"position-visibility\": \"always|[anchors-valid||anchors-visible||no-overflow]\",\n        \"print-color-adjust\": \"economy|exact\",\n        \"quotes\": \"none|auto|[<string> <string>]+\",\n        \"r\": \"<length>|<percentage>\",\n        \"resize\": \"none|both|horizontal|vertical|block|inline\",\n        \"right\": \"<length>|<percentage>|auto\",\n        \"rotate\": \"none|<angle>|[x|y|z|<number>{3}]&&<angle>\",\n        \"row-gap\": \"normal|<length-percentage>\",\n        \"ruby-align\": \"start|center|space-between|space-around\",\n        \"ruby-merge\": \"separate|collapse|auto\",\n        \"ruby-position\": \"[alternate||[over|under]]|inter-character\",\n        \"rx\": \"<length>|<percentage>\",\n        \"ry\": \"<length>|<percentage>\",\n        \"scale\": \"none|<number>{1,3}\",\n        \"scrollbar-color\": \"auto|<color>{2}\",\n        \"scrollbar-gutter\": \"auto|stable&&both-edges?\",\n        \"scrollbar-width\": \"auto|thin|none\",\n        \"scroll-behavior\": \"auto|smooth\",\n        \"scroll-margin\": \"<length>{1,4}\",\n        \"scroll-margin-block\": \"<length>{1,2}\",\n        \"scroll-margin-block-start\": \"<length>\",\n        \"scroll-margin-block-end\": \"<length>\",\n        \"scroll-margin-bottom\": \"<length>\",\n        \"scroll-margin-inline\": \"<length>{1,2}\",\n        \"scroll-margin-inline-start\": \"<length>\",\n        \"scroll-margin-inline-end\": \"<length>\",\n        \"scroll-margin-left\": \"<length>\",\n        \"scroll-margin-right\": \"<length>\",\n        \"scroll-margin-top\": \"<length>\",\n        \"scroll-padding\": \"[auto|<length-percentage>]{1,4}\",\n        \"scroll-padding-block\": \"[auto|<length-percentage>]{1,2}\",\n        \"scroll-padding-block-start\": \"auto|<length-percentage>\",\n        \"scroll-padding-block-end\": \"auto|<length-percentage>\",\n        \"scroll-padding-bottom\": \"auto|<length-percentage>\",\n        \"scroll-padding-inline\": \"[auto|<length-percentage>]{1,2}\",\n        \"scroll-padding-inline-start\": \"auto|<length-percentage>\",\n        \"scroll-padding-inline-end\": \"auto|<length-percentage>\",\n        \"scroll-padding-left\": \"auto|<length-percentage>\",\n        \"scroll-padding-right\": \"auto|<length-percentage>\",\n        \"scroll-padding-top\": \"auto|<length-percentage>\",\n        \"scroll-snap-align\": \"[none|start|end|center]{1,2}\",\n        \"scroll-snap-coordinate\": \"none|<position>#\",\n        \"scroll-snap-destination\": \"<position>\",\n        \"scroll-snap-points-x\": \"none|repeat( <length-percentage> )\",\n        \"scroll-snap-points-y\": \"none|repeat( <length-percentage> )\",\n        \"scroll-snap-stop\": \"normal|always\",\n        \"scroll-snap-type\": \"none|[x|y|block|inline|both] [mandatory|proximity]?\",\n        \"scroll-snap-type-x\": \"none|mandatory|proximity\",\n        \"scroll-snap-type-y\": \"none|mandatory|proximity\",\n        \"scroll-timeline\": \"[<'scroll-timeline-name'>||<'scroll-timeline-axis'>]#\",\n        \"scroll-timeline-axis\": \"[block|inline|x|y]#\",\n        \"scroll-timeline-name\": \"[none|<dashed-ident>]#\",\n        \"shape-image-threshold\": \"<alpha-value>\",\n        \"shape-margin\": \"<length-percentage>\",\n        \"shape-outside\": \"none|[<shape-box>||<basic-shape>]|<image>\",\n        \"shape-rendering\": \"auto|optimizeSpeed|crispEdges|geometricPrecision\",\n        \"tab-size\": \"<integer>|<length>\",\n        \"table-layout\": \"auto|fixed\",\n        \"text-align\": \"start|end|left|right|center|justify|match-parent\",\n        \"text-align-last\": \"auto|start|end|left|right|center|justify\",\n        \"text-anchor\": \"start|middle|end\",\n        \"text-combine-upright\": \"none|all|[digits <integer>?]\",\n        \"text-decoration\": \"<'text-decoration-line'>||<'text-decoration-style'>||<'text-decoration-color'>||<'text-decoration-thickness'>\",\n        \"text-decoration-color\": \"<color>\",\n        \"text-decoration-line\": \"none|[underline||overline||line-through||blink]|spelling-error|grammar-error\",\n        \"text-decoration-skip\": \"none|[objects||[spaces|[leading-spaces||trailing-spaces]]||edges||box-decoration]\",\n        \"text-decoration-skip-ink\": \"auto|all|none\",\n        \"text-decoration-style\": \"solid|double|dotted|dashed|wavy\",\n        \"text-decoration-thickness\": \"auto|from-font|<length>|<percentage>\",\n        \"text-emphasis\": \"<'text-emphasis-style'>||<'text-emphasis-color'>\",\n        \"text-emphasis-color\": \"<color>\",\n        \"text-emphasis-position\": \"[over|under]&&[right|left]\",\n        \"text-emphasis-style\": \"none|[[filled|open]||[dot|circle|double-circle|triangle|sesame]]|<string>\",\n        \"text-indent\": \"<length-percentage>&&hanging?&&each-line?\",\n        \"text-justify\": \"auto|inter-character|inter-word|none\",\n        \"text-orientation\": \"mixed|upright|sideways\",\n        \"text-overflow\": \"[clip|ellipsis|<string>]{1,2}\",\n        \"text-rendering\": \"auto|optimizeSpeed|optimizeLegibility|geometricPrecision\",\n        \"text-shadow\": \"none|<shadow-t>#\",\n        \"text-size-adjust\": \"none|auto|<percentage>\",\n        \"text-spacing-trim\": \"space-all|normal|space-first|trim-start|trim-both|trim-all|auto\",\n        \"text-transform\": \"none|capitalize|uppercase|lowercase|full-width|full-size-kana\",\n        \"text-underline-offset\": \"auto|<length>|<percentage>\",\n        \"text-underline-position\": \"auto|from-font|[under||[left|right]]\",\n        \"text-wrap\": \"wrap|nowrap|balance|stable|pretty\",\n        \"text-wrap-mode\": \"auto|wrap|nowrap\",\n        \"text-wrap-style\": \"auto|balance|stable|pretty\",\n        \"timeline-scope\": \"none|<dashed-ident>#\",\n        \"top\": \"<length>|<percentage>|auto\",\n        \"touch-action\": \"auto|none|[[pan-x|pan-left|pan-right]||[pan-y|pan-up|pan-down]||pinch-zoom]|manipulation\",\n        \"transform\": \"none|<transform-list>\",\n        \"transform-box\": \"content-box|border-box|fill-box|stroke-box|view-box\",\n        \"transform-origin\": \"[<length-percentage>|left|center|right|top|bottom]|[[<length-percentage>|left|center|right]&&[<length-percentage>|top|center|bottom]] <length>?\",\n        \"transform-style\": \"flat|preserve-3d\",\n        \"transition\": \"<single-transition>#\",\n        \"transition-behavior\": \"<transition-behavior-value>#\",\n        \"transition-delay\": \"<time>#\",\n        \"transition-duration\": \"<time>#\",\n        \"transition-property\": \"none|<single-transition-property>#\",\n        \"transition-timing-function\": \"<easing-function>#\",\n        \"translate\": \"none|<length-percentage> [<length-percentage> <length>?]?\",\n        \"unicode-bidi\": \"normal|embed|isolate|bidi-override|isolate-override|plaintext|-moz-isolate|-moz-isolate-override|-moz-plaintext|-webkit-isolate|-webkit-isolate-override|-webkit-plaintext\",\n        \"user-select\": \"auto|text|none|contain|all\",\n        \"vector-effect\": \"none|non-scaling-stroke|non-scaling-size|non-rotation|fixed-position\",\n        \"vertical-align\": \"baseline|sub|super|text-top|text-bottom|middle|top|bottom|<percentage>|<length>\",\n        \"view-timeline\": \"[<'view-timeline-name'> <'view-timeline-axis'>?]#\",\n        \"view-timeline-axis\": \"[block|inline|x|y]#\",\n        \"view-timeline-inset\": \"[[auto|<length-percentage>]{1,2}]#\",\n        \"view-timeline-name\": \"none|<dashed-ident>#\",\n        \"view-transition-name\": \"none|<custom-ident>\",\n        \"visibility\": \"visible|hidden|collapse\",\n        \"white-space\": \"normal|pre|nowrap|pre-wrap|pre-line|break-spaces|[<'white-space-collapse'>||<'text-wrap'>||<'white-space-trim'>]\",\n        \"white-space-collapse\": \"collapse|discard|preserve|preserve-breaks|preserve-spaces|break-spaces\",\n        \"widows\": \"<integer>\",\n        \"width\": \"auto|<length>|<percentage>|min-content|max-content|fit-content|fit-content( <length-percentage> )|stretch|<-non-standard-size>\",\n        \"will-change\": \"auto|<animateable-feature>#\",\n        \"word-break\": \"normal|break-all|keep-all|break-word|auto-phrase\",\n        \"word-spacing\": \"normal|<length>\",\n        \"word-wrap\": \"normal|break-word\",\n        \"writing-mode\": \"horizontal-tb|vertical-rl|vertical-lr|sideways-rl|sideways-lr|<svg-writing-mode>\",\n        \"x\": \"<length>|<percentage>\",\n        \"y\": \"<length>|<percentage>\",\n        \"z-index\": \"auto|<integer>\",\n        \"zoom\": \"normal|reset|<number>|<percentage>\",\n        \"-moz-background-clip\": \"padding|border\",\n        \"-moz-border-radius-bottomleft\": \"<'border-bottom-left-radius'>\",\n        \"-moz-border-radius-bottomright\": \"<'border-bottom-right-radius'>\",\n        \"-moz-border-radius-topleft\": \"<'border-top-left-radius'>\",\n        \"-moz-border-radius-topright\": \"<'border-bottom-right-radius'>\",\n        \"-moz-control-character-visibility\": \"visible|hidden\",\n        \"-moz-osx-font-smoothing\": \"auto|grayscale\",\n        \"-moz-user-select\": \"none|text|all|-moz-none\",\n        \"-ms-flex-align\": \"start|end|center|baseline|stretch\",\n        \"-ms-flex-item-align\": \"auto|start|end|center|baseline|stretch\",\n        \"-ms-flex-line-pack\": \"start|end|center|justify|distribute|stretch\",\n        \"-ms-flex-negative\": \"<'flex-shrink'>\",\n        \"-ms-flex-pack\": \"start|end|center|justify|distribute\",\n        \"-ms-flex-order\": \"<integer>\",\n        \"-ms-flex-positive\": \"<'flex-grow'>\",\n        \"-ms-flex-preferred-size\": \"<'flex-basis'>\",\n        \"-ms-interpolation-mode\": \"nearest-neighbor|bicubic\",\n        \"-ms-grid-column-align\": \"start|end|center|stretch\",\n        \"-ms-grid-row-align\": \"start|end|center|stretch\",\n        \"-ms-hyphenate-limit-last\": \"none|always|column|page|spread\",\n        \"-webkit-background-clip\": \"[<box>|border|padding|content|text]#\",\n        \"-webkit-column-break-after\": \"always|auto|avoid\",\n        \"-webkit-column-break-before\": \"always|auto|avoid\",\n        \"-webkit-column-break-inside\": \"always|auto|avoid\",\n        \"-webkit-font-smoothing\": \"auto|none|antialiased|subpixel-antialiased\",\n        \"-webkit-mask-box-image\": \"[<url>|<gradient>|none] [<length-percentage>{4} <-webkit-mask-box-repeat>{2}]?\",\n        \"-webkit-print-color-adjust\": \"economy|exact\",\n        \"-webkit-text-security\": \"none|circle|disc|square\",\n        \"-webkit-user-drag\": \"none|element|auto\",\n        \"-webkit-user-select\": \"auto|none|text|all\",\n        \"alignment-baseline\": \"auto|baseline|before-edge|text-before-edge|middle|central|after-edge|text-after-edge|ideographic|alphabetic|hanging|mathematical\",\n        \"baseline-shift\": \"baseline|sub|super|<svg-length>\",\n        \"behavior\": \"<url>+\",\n        \"cue\": \"<'cue-before'> <'cue-after'>?\",\n        \"cue-after\": \"<url> <decibel>?|none\",\n        \"cue-before\": \"<url> <decibel>?|none\",\n        \"glyph-orientation-horizontal\": \"<angle>\",\n        \"glyph-orientation-vertical\": \"<angle>\",\n        \"kerning\": \"auto|<svg-length>\",\n        \"pause\": \"<'pause-before'> <'pause-after'>?\",\n        \"pause-after\": \"<time>|none|x-weak|weak|medium|strong|x-strong\",\n        \"pause-before\": \"<time>|none|x-weak|weak|medium|strong|x-strong\",\n        \"rest\": \"<'rest-before'> <'rest-after'>?\",\n        \"rest-after\": \"<time>|none|x-weak|weak|medium|strong|x-strong\",\n        \"rest-before\": \"<time>|none|x-weak|weak|medium|strong|x-strong\",\n        \"src\": \"[<url> [format( <string># )]?|local( <family-name> )]#\",\n        \"speak\": \"auto|never|always\",\n        \"speak-as\": \"normal|spell-out||digits||[literal-punctuation|no-punctuation]\",\n        \"stroke\": \"<paint>\",\n        \"stroke-dasharray\": \"none|[<svg-length>+]#\",\n        \"stroke-dashoffset\": \"<svg-length>\",\n        \"stroke-linecap\": \"butt|round|square\",\n        \"stroke-linejoin\": \"miter|round|bevel\",\n        \"stroke-miterlimit\": \"<number-one-or-greater>\",\n        \"stroke-opacity\": \"<number-zero-one>\",\n        \"stroke-width\": \"<svg-length>\",\n        \"unicode-range\": \"<urange>#\",\n        \"voice-balance\": \"<number>|left|center|right|leftwards|rightwards\",\n        \"voice-duration\": \"auto|<time>\",\n        \"voice-family\": \"[[<family-name>|<generic-voice>] ,]* [<family-name>|<generic-voice>]|preserve\",\n        \"voice-pitch\": \"<frequency>&&absolute|[[x-low|low|medium|high|x-high]||[<frequency>|<semitones>|<percentage>]]\",\n        \"voice-range\": \"<frequency>&&absolute|[[x-low|low|medium|high|x-high]||[<frequency>|<semitones>|<percentage>]]\",\n        \"voice-rate\": \"[normal|x-slow|slow|medium|fast|x-fast]||<percentage>\",\n        \"voice-stress\": \"normal|strong|moderate|none|reduced\",\n        \"voice-volume\": \"silent|[[x-soft|soft|medium|loud|x-loud]||<decibel>]\",\n        \"white-space-trim\": \"none|discard-before||discard-after||discard-inner\",\n        \"position-area\": \"none|<position-area>\"\n    },\n    \"atrules\": {\n        \"charset\": {\n            \"prelude\": \"<string>\",\n            \"descriptors\": null\n        },\n        \"counter-style\": {\n            \"prelude\": \"<counter-style-name>\",\n            \"descriptors\": {\n                \"additive-symbols\": \"[<integer>&&<symbol>]#\",\n                \"fallback\": \"<counter-style-name>\",\n                \"negative\": \"<symbol> <symbol>?\",\n                \"pad\": \"<integer>&&<symbol>\",\n                \"prefix\": \"<symbol>\",\n                \"range\": \"[[<integer>|infinite]{2}]#|auto\",\n                \"speak-as\": \"auto|bullets|numbers|words|spell-out|<counter-style-name>\",\n                \"suffix\": \"<symbol>\",\n                \"symbols\": \"<symbol>+\",\n                \"system\": \"cyclic|numeric|alphabetic|symbolic|additive|[fixed <integer>?]|[extends <counter-style-name>]\"\n            }\n        },\n        \"document\": {\n            \"prelude\": \"[<url>|url-prefix( <string> )|domain( <string> )|media-document( <string> )|regexp( <string> )]#\",\n            \"descriptors\": null\n        },\n        \"font-palette-values\": {\n            \"prelude\": \"<dashed-ident>\",\n            \"descriptors\": {\n                \"base-palette\": \"light|dark|<integer [0,∞]>\",\n                \"font-family\": \"<family-name>#\",\n                \"override-colors\": \"[<integer [0,∞]> <absolute-color-base>]#\"\n            }\n        },\n        \"font-face\": {\n            \"prelude\": null,\n            \"descriptors\": {\n                \"ascent-override\": \"normal|<percentage>\",\n                \"descent-override\": \"normal|<percentage>\",\n                \"font-display\": \"[auto|block|swap|fallback|optional]\",\n                \"font-family\": \"<family-name>\",\n                \"font-feature-settings\": \"normal|<feature-tag-value>#\",\n                \"font-variation-settings\": \"normal|[<string> <number>]#\",\n                \"font-stretch\": \"<font-stretch-absolute>{1,2}\",\n                \"font-style\": \"normal|italic|oblique <angle>{0,2}\",\n                \"font-weight\": \"<font-weight-absolute>{1,2}\",\n                \"line-gap-override\": \"normal|<percentage>\",\n                \"size-adjust\": \"<percentage>\",\n                \"src\": \"[<url> [format( <string># )]?|local( <family-name> )]#\",\n                \"unicode-range\": \"<urange>#\"\n            }\n        },\n        \"font-feature-values\": {\n            \"prelude\": \"<family-name>#\",\n            \"descriptors\": null\n        },\n        \"import\": {\n            \"prelude\": \"[<string>|<url>] [layer|layer( <layer-name> )]? [supports( [<supports-condition>|<declaration>] )]? <media-query-list>?\",\n            \"descriptors\": null\n        },\n        \"keyframes\": {\n            \"prelude\": \"<keyframes-name>\",\n            \"descriptors\": null\n        },\n        \"layer\": {\n            \"prelude\": \"[<layer-name>#|<layer-name>?]\",\n            \"descriptors\": null\n        },\n        \"media\": {\n            \"prelude\": \"<media-query-list>\",\n            \"descriptors\": null\n        },\n        \"namespace\": {\n            \"prelude\": \"<namespace-prefix>? [<string>|<url>]\",\n            \"descriptors\": null\n        },\n        \"page\": {\n            \"prelude\": \"<page-selector-list>\",\n            \"descriptors\": {\n                \"bleed\": \"auto|<length>\",\n                \"marks\": \"none|[crop||cross]\",\n                \"page-orientation\": \"upright|rotate-left|rotate-right\",\n                \"size\": \"<length>{1,2}|auto|[<page-size>||[portrait|landscape]]\"\n            }\n        },\n        \"position-try\": {\n            \"prelude\": \"<dashed-ident>\",\n            \"descriptors\": {\n                \"top\": \"<'top'>\",\n                \"left\": \"<'left'>\",\n                \"bottom\": \"<'bottom'>\",\n                \"right\": \"<'right'>\",\n                \"inset-block-start\": \"<'inset-block-start'>\",\n                \"inset-block-end\": \"<'inset-block-end'>\",\n                \"inset-inline-start\": \"<'inset-inline-start'>\",\n                \"inset-inline-end\": \"<'inset-inline-end'>\",\n                \"inset-block\": \"<'inset-block'>\",\n                \"inset-inline\": \"<'inset-inline'>\",\n                \"inset\": \"<'inset'>\",\n                \"margin-top\": \"<'margin-top'>\",\n                \"margin-left\": \"<'margin-left'>\",\n                \"margin-bottom\": \"<'margin-bottom'>\",\n                \"margin-right\": \"<'margin-right'>\",\n                \"margin-block-start\": \"<'margin-block-start'>\",\n                \"margin-block-end\": \"<'margin-block-end'>\",\n                \"margin-inline-start\": \"<'margin-inline-start'>\",\n                \"margin-inline-end\": \"<'margin-inline-end'>\",\n                \"margin\": \"<'margin'>\",\n                \"margin-block\": \"<'margin-block'>\",\n                \"margin-inline\": \"<'margin-inline'>\",\n                \"width\": \"<'width'>\",\n                \"height\": \"<'height'>\",\n                \"min-width\": \"<'min-width'>\",\n                \"min-height\": \"<'min-height'>\",\n                \"max-width\": \"<'max-width'>\",\n                \"max-height\": \"<'max-height'>\",\n                \"block-size\": \"<'block-size'>\",\n                \"inline-size\": \"<'inline-size'>\",\n                \"min-block-size\": \"<'min-block-size'>\",\n                \"min-inline-size\": \"<'min-inline-size'>\",\n                \"max-block-size\": \"<'max-block-size'>\",\n                \"max-inline-size\": \"<'max-inline-size'>\",\n                \"align-self\": \"<'align-self'>|anchor-center\",\n                \"justify-self\": \"<'justify-self'>|anchor-center\"\n            }\n        },\n        \"property\": {\n            \"prelude\": \"<custom-property-name>\",\n            \"descriptors\": {\n                \"syntax\": \"<string>\",\n                \"inherits\": \"true|false\",\n                \"initial-value\": \"<declaration-value>?\"\n            }\n        },\n        \"scope\": {\n            \"prelude\": \"[( <scope-start> )]? [to ( <scope-end> )]?\",\n            \"descriptors\": null\n        },\n        \"starting-style\": {\n            \"prelude\": null,\n            \"descriptors\": null\n        },\n        \"supports\": {\n            \"prelude\": \"<supports-condition>\",\n            \"descriptors\": null\n        },\n        \"container\": {\n            \"prelude\": \"[<container-name>]? <container-condition>\",\n            \"descriptors\": null\n        },\n        \"nest\": {\n            \"prelude\": \"<complex-selector-list>\",\n            \"descriptors\": null\n        }\n    }\n};","import {\n    isDigit,\n    WhiteSpace,\n    Comment,\n    Ident,\n    Number,\n    Dimension\n} from '../../tokenizer/index.js';\n\nconst PLUSSIGN = 0x002B;    // U+002B PLUS SIGN (+)\nconst HYPHENMINUS = 0x002D; // U+002D HYPHEN-MINUS (-)\nconst N = 0x006E;           // U+006E LATIN SMALL LETTER N (n)\nconst DISALLOW_SIGN = true;\nconst ALLOW_SIGN = false;\n\nfunction checkInteger(offset, disallowSign) {\n    let pos = this.tokenStart + offset;\n    const code = this.charCodeAt(pos);\n\n    if (code === PLUSSIGN || code === HYPHENMINUS) {\n        if (disallowSign) {\n            this.error('Number sign is not allowed');\n        }\n        pos++;\n    }\n\n    for (; pos < this.tokenEnd; pos++) {\n        if (!isDigit(this.charCodeAt(pos))) {\n            this.error('Integer is expected', pos);\n        }\n    }\n}\n\nfunction checkTokenIsInteger(disallowSign) {\n    return checkInteger.call(this, 0, disallowSign);\n}\n\nfunction expectCharCode(offset, code) {\n    if (!this.cmpChar(this.tokenStart + offset, code)) {\n        let msg = '';\n\n        switch (code) {\n            case N:\n                msg = 'N is expected';\n                break;\n            case HYPHENMINUS:\n                msg = 'HyphenMinus is expected';\n                break;\n        }\n\n        this.error(msg, this.tokenStart + offset);\n    }\n}\n\n// ... <signed-integer>\n// ... ['+' | '-'] <signless-integer>\nfunction consumeB() {\n    let offset = 0;\n    let sign = 0;\n    let type = this.tokenType;\n\n    while (type === WhiteSpace || type === Comment) {\n        type = this.lookupType(++offset);\n    }\n\n    if (type !== Number) {\n        if (this.isDelim(PLUSSIGN, offset) ||\n            this.isDelim(HYPHENMINUS, offset)) {\n            sign = this.isDelim(PLUSSIGN, offset) ? PLUSSIGN : HYPHENMINUS;\n\n            do {\n                type = this.lookupType(++offset);\n            } while (type === WhiteSpace || type === Comment);\n\n            if (type !== Number) {\n                this.skip(offset);\n                checkTokenIsInteger.call(this, DISALLOW_SIGN);\n            }\n        } else {\n            return null;\n        }\n    }\n\n    if (offset > 0) {\n        this.skip(offset);\n    }\n\n    if (sign === 0) {\n        type = this.charCodeAt(this.tokenStart);\n        if (type !== PLUSSIGN && type !== HYPHENMINUS) {\n            this.error('Number sign is expected');\n        }\n    }\n\n    checkTokenIsInteger.call(this, sign !== 0);\n    return sign === HYPHENMINUS ? '-' + this.consume(Number) : this.consume(Number);\n}\n\n// An+B microsyntax https://www.w3.org/TR/css-syntax-3/#anb\nexport const name = 'AnPlusB';\nexport const structure = {\n    a: [String, null],\n    b: [String, null]\n};\n\nexport function parse() {\n    /* eslint-disable brace-style*/\n    const start = this.tokenStart;\n    let a = null;\n    let b = null;\n\n    // <integer>\n    if (this.tokenType === Number) {\n        checkTokenIsInteger.call(this, ALLOW_SIGN);\n        b = this.consume(Number);\n    }\n\n    // -n\n    // -n <signed-integer>\n    // -n ['+' | '-'] <signless-integer>\n    // -n- <signless-integer>\n    // <dashndashdigit-ident>\n    else if (this.tokenType === Ident && this.cmpChar(this.tokenStart, HYPHENMINUS)) {\n        a = '-1';\n\n        expectCharCode.call(this, 1, N);\n\n        switch (this.tokenEnd - this.tokenStart) {\n            // -n\n            // -n <signed-integer>\n            // -n ['+' | '-'] <signless-integer>\n            case 2:\n                this.next();\n                b = consumeB.call(this);\n                break;\n\n            // -n- <signless-integer>\n            case 3:\n                expectCharCode.call(this, 2, HYPHENMINUS);\n\n                this.next();\n                this.skipSC();\n\n                checkTokenIsInteger.call(this, DISALLOW_SIGN);\n\n                b = '-' + this.consume(Number);\n                break;\n\n            // <dashndashdigit-ident>\n            default:\n                expectCharCode.call(this, 2, HYPHENMINUS);\n                checkInteger.call(this, 3, DISALLOW_SIGN);\n                this.next();\n\n                b = this.substrToCursor(start + 2);\n        }\n    }\n\n    // '+'? n\n    // '+'? n <signed-integer>\n    // '+'? n ['+' | '-'] <signless-integer>\n    // '+'? n- <signless-integer>\n    // '+'? <ndashdigit-ident>\n    else if (this.tokenType === Ident || (this.isDelim(PLUSSIGN) && this.lookupType(1) === Ident)) {\n        let sign = 0;\n        a = '1';\n\n        // just ignore a plus\n        if (this.isDelim(PLUSSIGN)) {\n            sign = 1;\n            this.next();\n        }\n\n        expectCharCode.call(this, 0, N);\n\n        switch (this.tokenEnd - this.tokenStart) {\n            // '+'? n\n            // '+'? n <signed-integer>\n            // '+'? n ['+' | '-'] <signless-integer>\n            case 1:\n                this.next();\n                b = consumeB.call(this);\n                break;\n\n            // '+'? n- <signless-integer>\n            case 2:\n                expectCharCode.call(this, 1, HYPHENMINUS);\n\n                this.next();\n                this.skipSC();\n\n                checkTokenIsInteger.call(this, DISALLOW_SIGN);\n\n                b = '-' + this.consume(Number);\n                break;\n\n            // '+'? <ndashdigit-ident>\n            default:\n                expectCharCode.call(this, 1, HYPHENMINUS);\n                checkInteger.call(this, 2, DISALLOW_SIGN);\n                this.next();\n\n                b = this.substrToCursor(start + sign + 1);\n        }\n    }\n\n    // <ndashdigit-dimension>\n    // <ndash-dimension> <signless-integer>\n    // <n-dimension>\n    // <n-dimension> <signed-integer>\n    // <n-dimension> ['+' | '-'] <signless-integer>\n    else if (this.tokenType === Dimension) {\n        const code = this.charCodeAt(this.tokenStart);\n        const sign = code === PLUSSIGN || code === HYPHENMINUS;\n        let i = this.tokenStart + sign;\n\n        for (; i < this.tokenEnd; i++) {\n            if (!isDigit(this.charCodeAt(i))) {\n                break;\n            }\n        }\n\n        if (i === this.tokenStart + sign) {\n            this.error('Integer is expected', this.tokenStart + sign);\n        }\n\n        expectCharCode.call(this, i - this.tokenStart, N);\n        a = this.substring(start, i);\n\n        // <n-dimension>\n        // <n-dimension> <signed-integer>\n        // <n-dimension> ['+' | '-'] <signless-integer>\n        if (i + 1 === this.tokenEnd) {\n            this.next();\n            b = consumeB.call(this);\n        } else {\n            expectCharCode.call(this, i - this.tokenStart + 1, HYPHENMINUS);\n\n            // <ndash-dimension> <signless-integer>\n            if (i + 2 === this.tokenEnd) {\n                this.next();\n                this.skipSC();\n                checkTokenIsInteger.call(this, DISALLOW_SIGN);\n                b = '-' + this.consume(Number);\n            }\n            // <ndashdigit-dimension>\n            else {\n                checkInteger.call(this, i - this.tokenStart + 2, DISALLOW_SIGN);\n                this.next();\n                b = this.substrToCursor(i + 1);\n            }\n        }\n    } else {\n        this.error();\n    }\n\n    if (a !== null && a.charCodeAt(0) === PLUSSIGN) {\n        a = a.substr(1);\n    }\n\n    if (b !== null && b.charCodeAt(0) === PLUSSIGN) {\n        b = b.substr(1);\n    }\n\n    return {\n        type: 'AnPlusB',\n        loc: this.getLocation(start, this.tokenStart),\n        a,\n        b\n    };\n}\n\nexport function generate(node) {\n    if (node.a) {\n        const a =\n            node.a === '+1' && 'n' ||\n            node.a ===  '1' && 'n' ||\n            node.a === '-1' && '-n' ||\n            node.a + 'n';\n\n        if (node.b) {\n            const b = node.b[0] === '-' || node.b[0] === '+'\n                ? node.b\n                : '+' + node.b;\n            this.tokenize(a + b);\n        } else {\n            this.tokenize(a);\n        }\n    } else {\n        this.tokenize(node.b);\n    }\n}\n","import {\n    AtKeyword,\n    Semicolon,\n    LeftCurlyBracket,\n    RightCurlyBracket\n} from '../../tokenizer/index.js';\n\nfunction consumeRaw() {\n    return this.Raw(this.consumeUntilLeftCurlyBracketOrSemicolon, true);\n}\n\nfunction isDeclarationBlockAtrule() {\n    for (let offset = 1, type; type = this.lookupType(offset); offset++) {\n        if (type === RightCurlyBracket) {\n            return true;\n        }\n\n        if (type === LeftCurlyBracket ||\n            type === AtKeyword) {\n            return false;\n        }\n    }\n\n    return false;\n}\n\n\nexport const name = 'Atrule';\nexport const walkContext = 'atrule';\nexport const structure = {\n    name: String,\n    prelude: ['AtrulePrelude', 'Raw', null],\n    block: ['Block', null]\n};\n\nexport function parse(isDeclaration = false) {\n    const start = this.tokenStart;\n    let name;\n    let nameLowerCase;\n    let prelude = null;\n    let block = null;\n\n    this.eat(AtKeyword);\n\n    name = this.substrToCursor(start + 1);\n    nameLowerCase = name.toLowerCase();\n    this.skipSC();\n\n    // parse prelude\n    if (this.eof === false &&\n        this.tokenType !== LeftCurlyBracket &&\n        this.tokenType !== Semicolon) {\n        if (this.parseAtrulePrelude) {\n            prelude = this.parseWithFallback(this.AtrulePrelude.bind(this, name, isDeclaration), consumeRaw);\n        } else {\n            prelude = consumeRaw.call(this, this.tokenIndex);\n        }\n\n        this.skipSC();\n    }\n\n    switch (this.tokenType) {\n        case Semicolon:\n            this.next();\n            break;\n\n        case LeftCurlyBracket:\n            this.eat(LeftCurlyBracket);\n\n            if (hasOwnProperty.call(this.atrule, nameLowerCase) &&\n                typeof this.atrule[nameLowerCase].block === 'function') {\n                block = this.atrule[nameLowerCase].block.call(this, isDeclaration);\n            } else {\n                // TODO: should consume block content as Raw?\n                block = this.Block(isDeclarationBlockAtrule.call(this));\n            }\n\n            if (!this.eof) {\n                this.eat(RightCurlyBracket);\n            }\n\n            break;\n    }\n\n    return {\n        type: 'Atrule',\n        loc: this.getLocation(start, this.tokenStart),\n        name,\n        prelude,\n        block\n    };\n}\n\nexport function generate(node) {\n    this.token(AtKeyword, '@' + node.name);\n\n    if (node.prelude !== null) {\n        this.node(node.prelude);\n    }\n\n    if (node.block) {\n        this.token(LeftCurlyBracket, '{');\n        this.node(node.block);\n        this.token(RightCurlyBracket, '}');\n    } else {\n        this.token(Semicolon, ';');\n    }\n}\n","import {\n    Semicolon,\n    LeftCurlyBracket\n} from '../../tokenizer/index.js';\n\nexport const name = 'AtrulePrelude';\nexport const walkContext = 'atrulePrelude';\nexport const structure = {\n    children: [[]]\n};\n\nexport function parse(name) {\n    let children = null;\n\n    if (name !== null) {\n        name = name.toLowerCase();\n    }\n\n    this.skipSC();\n\n    if (hasOwnProperty.call(this.atrule, name) &&\n        typeof this.atrule[name].prelude === 'function') {\n        // custom consumer\n        children = this.atrule[name].prelude.call(this);\n    } else {\n        // default consumer\n        children = this.readSequence(this.scope.AtrulePrelude);\n    }\n\n    this.skipSC();\n\n    if (this.eof !== true &&\n        this.tokenType !== LeftCurlyBracket &&\n        this.tokenType !== Semicolon) {\n        this.error('Semicolon or block is expected');\n    }\n\n    return {\n        type: 'AtrulePrelude',\n        loc: this.getLocationFromList(children),\n        children\n    };\n}\n\nexport function generate(node) {\n    this.children(node);\n}\n","import {\n    Ident,\n    String as StringToken,\n    Delim,\n    LeftSquareBracket,\n    RightSquareBracket\n} from '../../tokenizer/index.js';\n\nconst DOLLARSIGN = 0x0024;       // U+0024 DOLLAR SIGN ($)\nconst ASTERISK = 0x002A;         // U+002A ASTERISK (*)\nconst EQUALSSIGN = 0x003D;       // U+003D EQUALS SIGN (=)\nconst CIRCUMFLEXACCENT = 0x005E; // U+005E (^)\nconst VERTICALLINE = 0x007C;     // U+007C VERTICAL LINE (|)\nconst TILDE = 0x007E;            // U+007E TILDE (~)\n\nfunction getAttributeName() {\n    if (this.eof) {\n        this.error('Unexpected end of input');\n    }\n\n    const start = this.tokenStart;\n    let expectIdent = false;\n\n    if (this.isDelim(ASTERISK)) {\n        expectIdent = true;\n        this.next();\n    } else if (!this.isDelim(VERTICALLINE)) {\n        this.eat(Ident);\n    }\n\n    if (this.isDelim(VERTICALLINE)) {\n        if (this.charCodeAt(this.tokenStart + 1) !== EQUALSSIGN) {\n            this.next();\n            this.eat(Ident);\n        } else if (expectIdent) {\n            this.error('Identifier is expected', this.tokenEnd);\n        }\n    } else if (expectIdent) {\n        this.error('Vertical line is expected');\n    }\n\n    return {\n        type: 'Identifier',\n        loc: this.getLocation(start, this.tokenStart),\n        name: this.substrToCursor(start)\n    };\n}\n\nfunction getOperator() {\n    const start = this.tokenStart;\n    const code = this.charCodeAt(start);\n\n    if (code !== EQUALSSIGN &&        // =\n        code !== TILDE &&             // ~=\n        code !== CIRCUMFLEXACCENT &&  // ^=\n        code !== DOLLARSIGN &&        // $=\n        code !== ASTERISK &&          // *=\n        code !== VERTICALLINE         // |=\n    ) {\n        this.error('Attribute selector (=, ~=, ^=, $=, *=, |=) is expected');\n    }\n\n    this.next();\n\n    if (code !== EQUALSSIGN) {\n        if (!this.isDelim(EQUALSSIGN)) {\n            this.error('Equal sign is expected');\n        }\n\n        this.next();\n    }\n\n    return this.substrToCursor(start);\n}\n\n// '[' <wq-name> ']'\n// '[' <wq-name> <attr-matcher> [ <string-token> | <ident-token> ] <attr-modifier>? ']'\nexport const name = 'AttributeSelector';\nexport const structure = {\n    name: 'Identifier',\n    matcher: [String, null],\n    value: ['String', 'Identifier', null],\n    flags: [String, null]\n};\n\nexport function parse() {\n    const start = this.tokenStart;\n    let name;\n    let matcher = null;\n    let value = null;\n    let flags = null;\n\n    this.eat(LeftSquareBracket);\n    this.skipSC();\n\n    name = getAttributeName.call(this);\n    this.skipSC();\n\n    if (this.tokenType !== RightSquareBracket) {\n        // avoid case `[name i]`\n        if (this.tokenType !== Ident) {\n            matcher = getOperator.call(this);\n\n            this.skipSC();\n\n            value = this.tokenType === StringToken\n                ? this.String()\n                : this.Identifier();\n\n            this.skipSC();\n        }\n\n        // attribute flags\n        if (this.tokenType === Ident) {\n            flags = this.consume(Ident);\n\n            this.skipSC();\n        }\n    }\n\n    this.eat(RightSquareBracket);\n\n    return {\n        type: 'AttributeSelector',\n        loc: this.getLocation(start, this.tokenStart),\n        name,\n        matcher,\n        value,\n        flags\n    };\n}\n\nexport function generate(node) {\n    this.token(Delim, '[');\n    this.node(node.name);\n\n    if (node.matcher !== null) {\n        this.tokenize(node.matcher);\n        this.node(node.value);\n    }\n\n    if (node.flags !== null) {\n        this.token(Ident, node.flags);\n    }\n\n    this.token(Delim, ']');\n}\n","import {\n    WhiteSpace,\n    Comment,\n    Semicolon,\n    AtKeyword,\n    RightCurlyBracket\n} from '../../tokenizer/index.js';\n\nconst AMPERSAND = 0x0026;       // U+0026 AMPERSAND (&)\n\nfunction consumeRaw() {\n    return this.Raw(null, true);\n}\nfunction consumeRule() {\n    return this.parseWithFallback(this.Rule, consumeRaw);\n}\nfunction consumeRawDeclaration() {\n    return this.Raw(this.consumeUntilSemicolonIncluded, true);\n}\nfunction consumeDeclaration() {\n    if (this.tokenType === Semicolon) {\n        return consumeRawDeclaration.call(this, this.tokenIndex);\n    }\n\n    const node = this.parseWithFallback(this.Declaration, consumeRawDeclaration);\n\n    if (this.tokenType === Semicolon) {\n        this.next();\n    }\n\n    return node;\n}\n\nexport const name = 'Block';\nexport const walkContext = 'block';\nexport const structure = {\n    children: [[\n        'Atrule',\n        'Rule',\n        'Declaration'\n    ]]\n};\n\nexport function parse(isStyleBlock) {\n    const consumer = isStyleBlock ? consumeDeclaration : consumeRule;\n    const start = this.tokenStart;\n    let children = this.createList();\n\n    scan:\n    while (!this.eof) {\n        switch (this.tokenType) {\n            case RightCurlyBracket:\n                break scan;\n\n            case WhiteSpace:\n            case Comment:\n                this.next();\n                break;\n\n            case AtKeyword:\n                children.push(this.parseWithFallback(this.Atrule.bind(this, isStyleBlock), consumeRaw));\n                break;\n\n            default:\n                if (isStyleBlock && this.isDelim(AMPERSAND))  {\n                    children.push(consumeRule.call(this));\n                } else {\n                    children.push(consumer.call(this));\n                }\n        }\n    }\n\n    return {\n        type: 'Block',\n        loc: this.getLocation(start, this.tokenStart),\n        children\n    };\n}\n\nexport function generate(node) {\n    this.children(node, prev => {\n        if (prev.type === 'Declaration') {\n            this.token(Semicolon, ';');\n        }\n    });\n}\n","import {\n    Delim,\n    LeftSquareBracket,\n    RightSquareBracket\n} from '../../tokenizer/index.js';\n\nexport const name = 'Brackets';\nexport const structure = {\n    children: [[]]\n};\n\nexport function parse(readSequence, recognizer) {\n    const start = this.tokenStart;\n    let children = null;\n\n    this.eat(LeftSquareBracket);\n\n    children = readSequence.call(this, recognizer);\n\n    if (!this.eof) {\n        this.eat(RightSquareBracket);\n    }\n\n    return {\n        type: 'Brackets',\n        loc: this.getLocation(start, this.tokenStart),\n        children\n    };\n}\n\nexport function generate(node) {\n    this.token(Delim, '[');\n    this.children(node);\n    this.token(Delim, ']');\n}\n","import { CDC } from '../../tokenizer/index.js';\n\nexport const name = 'CDC';\nexport const structure = [];\n\nexport function parse() {\n    const start = this.tokenStart;\n\n    this.eat(CDC); // -->\n\n    return {\n        type: 'CDC',\n        loc: this.getLocation(start, this.tokenStart)\n    };\n}\n\nexport function generate() {\n    this.token(CDC, '-->');\n}\n","import { CDO } from '../../tokenizer/index.js';\n\nexport const name = 'CDO';\nexport const structure = [];\n\nexport function parse() {\n    const start = this.tokenStart;\n\n    this.eat(CDO); // <!--\n\n    return {\n        type: 'CDO',\n        loc: this.getLocation(start, this.tokenStart)\n    };\n}\n\nexport function generate() {\n    this.token(CDO, '<!--');\n}\n","import { Delim, Ident } from '../../tokenizer/index.js';\n\nconst FULLSTOP = 0x002E; // U+002E FULL STOP (.)\n\n// '.' ident\nexport const name = 'ClassSelector';\nexport const structure = {\n    name: String\n};\n\nexport function parse() {\n    this.eatDelim(FULLSTOP);\n\n    return {\n        type: 'ClassSelector',\n        loc: this.getLocation(this.tokenStart - 1, this.tokenEnd),\n        name: this.consume(Ident)\n    };\n}\n\nexport function generate(node) {\n    this.token(Delim, '.');\n    this.token(Ident, node.name);\n}\n","import { WhiteSpace, Delim } from '../../tokenizer/index.js';\n\nconst PLUSSIGN = 0x002B;        // U+002B PLUS SIGN (+)\nconst SOLIDUS = 0x002F;         // U+002F SOLIDUS (/)\nconst GREATERTHANSIGN = 0x003E; // U+003E GREATER-THAN SIGN (>)\nconst TILDE = 0x007E;           // U+007E TILDE (~)\n\nexport const name = 'Combinator';\nexport const structure = {\n    name: String\n};\n\n// + | > | ~ | /deep/\nexport function parse() {\n    const start = this.tokenStart;\n    let name;\n\n    switch (this.tokenType) {\n        case WhiteSpace:\n            name = ' ';\n            break;\n\n        case Delim:\n            switch (this.charCodeAt(this.tokenStart)) {\n                case GREATERTHANSIGN:\n                case PLUSSIGN:\n                case TILDE:\n                    this.next();\n                    break;\n\n                case SOLIDUS:\n                    this.next();\n                    this.eatIdent('deep');\n                    this.eatDelim(SOLIDUS);\n                    break;\n\n                default:\n                    this.error('Combinator is expected');\n            }\n\n            name = this.substrToCursor(start);\n            break;\n    }\n\n    return {\n        type: 'Combinator',\n        loc: this.getLocation(start, this.tokenStart),\n        name\n    };\n}\n\nexport function generate(node) {\n    this.tokenize(node.name);\n}\n","import { Comment } from '../../tokenizer/index.js';\n\nconst ASTERISK = 0x002A;        // U+002A ASTERISK (*)\nconst SOLIDUS = 0x002F;         // U+002F SOLIDUS (/)\n\n\nexport const name = 'Comment';\nexport const structure = {\n    value: String\n};\n\nexport function parse() {\n    const start = this.tokenStart;\n    let end = this.tokenEnd;\n\n    this.eat(Comment);\n\n    if ((end - start + 2) >= 2 &&\n        this.charCodeAt(end - 2) === ASTERISK &&\n        this.charCodeAt(end - 1) === SOLIDUS) {\n        end -= 2;\n    }\n\n    return {\n        type: 'Comment',\n        loc: this.getLocation(start, this.tokenStart),\n        value: this.substring(start + 2, end)\n    };\n}\n\nexport function generate(node) {\n    this.token(Comment, '/*' + node.value + '*/');\n}\n","import {\n    WhiteSpace,\n    Comment,\n    Ident,\n    LeftParenthesis,\n    RightParenthesis,\n    Function as FunctionToken,\n    Colon,\n    EOF\n} from '../../tokenizer/index.js';\n\nconst likelyFeatureToken = new Set([Colon, RightParenthesis, EOF]);\n\nexport const name = 'Condition';\nexport const structure = {\n    kind: String,\n    children: [[\n        'Identifier',\n        'Feature',\n        'FeatureFunction',\n        'FeatureRange',\n        'SupportsDeclaration'\n    ]]\n};\n\nfunction featureOrRange(kind) {\n    if (this.lookupTypeNonSC(1) === Ident &&\n        likelyFeatureToken.has(this.lookupTypeNonSC(2))) {\n        return this.Feature(kind);\n    }\n\n    return this.FeatureRange(kind);\n}\n\nconst parentheses = {\n    media: featureOrRange,\n    container: featureOrRange,\n    supports() {\n        return this.SupportsDeclaration();\n    }\n};\n\nexport function parse(kind = 'media') {\n    const children = this.createList();\n\n    scan: while (!this.eof) {\n        switch (this.tokenType) {\n            case Comment:\n            case WhiteSpace:\n                this.next();\n                continue;\n\n            case Ident:\n                children.push(this.Identifier());\n                break;\n\n            case LeftParenthesis: {\n                let term = this.parseWithFallback(\n                    () => parentheses[kind].call(this, kind),\n                    () => null\n                );\n\n                if (!term) {\n                    term = this.parseWithFallback(\n                        () => {\n                            this.eat(LeftParenthesis);\n                            const res = this.Condition(kind);\n                            this.eat(RightParenthesis);\n                            return res;\n                        },\n                        () => {\n                            return this.GeneralEnclosed(kind);\n                        }\n                    );\n                }\n\n                children.push(term);\n                break;\n            }\n\n            case FunctionToken: {\n                let term = this.parseWithFallback(\n                    () => this.FeatureFunction(kind),\n                    () => null\n                );\n\n                if (!term) {\n                    term = this.GeneralEnclosed(kind);\n                }\n\n                children.push(term);\n                break;\n            }\n\n            default:\n                break scan;\n        }\n    }\n\n    if (children.isEmpty) {\n        this.error('Condition is expected');\n    }\n\n    return {\n        type: 'Condition',\n        loc: this.getLocationFromList(children),\n        kind,\n        children\n    };\n}\n\nexport function generate(node) {\n    node.children.forEach(child => {\n        if (child.type === 'Condition') {\n            this.token(LeftParenthesis, '(');\n            this.node(child);\n            this.token(RightParenthesis, ')');\n        } else {\n            this.node(child);\n        }\n    });\n}\n\n","import { isCustomProperty } from '../../utils/names.js';\nimport {\n    Ident,\n    Hash,\n    Colon,\n    Semicolon,\n    Delim,\n    WhiteSpace\n} from '../../tokenizer/index.js';\n\nconst EXCLAMATIONMARK = 0x0021; // U+0021 EXCLAMATION MARK (!)\nconst NUMBERSIGN = 0x0023;      // U+0023 NUMBER SIGN (#)\nconst DOLLARSIGN = 0x0024;      // U+0024 DOLLAR SIGN ($)\nconst AMPERSAND = 0x0026;       // U+0026 AMPERSAND (&)\nconst ASTERISK = 0x002A;        // U+002A ASTERISK (*)\nconst PLUSSIGN = 0x002B;        // U+002B PLUS SIGN (+)\nconst SOLIDUS = 0x002F;         // U+002F SOLIDUS (/)\n\nfunction consumeValueRaw() {\n    return this.Raw(this.consumeUntilExclamationMarkOrSemicolon, true);\n}\n\nfunction consumeCustomPropertyRaw() {\n    return this.Raw(this.consumeUntilExclamationMarkOrSemicolon, false);\n}\n\nfunction consumeValue() {\n    const startValueToken = this.tokenIndex;\n    const value = this.Value();\n\n    if (value.type !== 'Raw' &&\n        this.eof === false &&\n        this.tokenType !== Semicolon &&\n        this.isDelim(EXCLAMATIONMARK) === false &&\n        this.isBalanceEdge(startValueToken) === false) {\n        this.error();\n    }\n\n    return value;\n}\n\nexport const name = 'Declaration';\nexport const walkContext = 'declaration';\nexport const structure = {\n    important: [Boolean, String],\n    property: String,\n    value: ['Value', 'Raw']\n};\n\nexport function parse() {\n    const start = this.tokenStart;\n    const startToken = this.tokenIndex;\n    const property = readProperty.call(this);\n    const customProperty = isCustomProperty(property);\n    const parseValue = customProperty ? this.parseCustomProperty : this.parseValue;\n    const consumeRaw = customProperty ? consumeCustomPropertyRaw : consumeValueRaw;\n    let important = false;\n    let value;\n\n    this.skipSC();\n    this.eat(Colon);\n\n    const valueStart = this.tokenIndex;\n\n    if (!customProperty) {\n        this.skipSC();\n    }\n\n    if (parseValue) {\n        value = this.parseWithFallback(consumeValue, consumeRaw);\n    } else {\n        value = consumeRaw.call(this, this.tokenIndex);\n    }\n\n    if (customProperty && value.type === 'Value' && value.children.isEmpty) {\n        for (let offset = valueStart - this.tokenIndex; offset <= 0; offset++) {\n            if (this.lookupType(offset) === WhiteSpace) {\n                value.children.appendData({\n                    type: 'WhiteSpace',\n                    loc: null,\n                    value: ' '\n                });\n                break;\n            }\n        }\n    }\n\n    if (this.isDelim(EXCLAMATIONMARK)) {\n        important = getImportant.call(this);\n        this.skipSC();\n    }\n\n    // Do not include semicolon to range per spec\n    // https://drafts.csswg.org/css-syntax/#declaration-diagram\n\n    if (this.eof === false &&\n        this.tokenType !== Semicolon &&\n        this.isBalanceEdge(startToken) === false) {\n        this.error();\n    }\n\n    return {\n        type: 'Declaration',\n        loc: this.getLocation(start, this.tokenStart),\n        important,\n        property,\n        value\n    };\n}\n\nexport function generate(node) {\n    this.token(Ident, node.property);\n    this.token(Colon, ':');\n    this.node(node.value);\n\n    if (node.important) {\n        this.token(Delim, '!');\n        this.token(Ident, node.important === true ? 'important' : node.important);\n    }\n}\n\nfunction readProperty() {\n    const start = this.tokenStart;\n\n    // hacks\n    if (this.tokenType === Delim) {\n        switch (this.charCodeAt(this.tokenStart)) {\n            case ASTERISK:\n            case DOLLARSIGN:\n            case PLUSSIGN:\n            case NUMBERSIGN:\n            case AMPERSAND:\n                this.next();\n                break;\n\n            // TODO: not sure we should support this hack\n            case SOLIDUS:\n                this.next();\n                if (this.isDelim(SOLIDUS)) {\n                    this.next();\n                }\n                break;\n        }\n    }\n\n    if (this.tokenType === Hash) {\n        this.eat(Hash);\n    } else {\n        this.eat(Ident);\n    }\n\n    return this.substrToCursor(start);\n}\n\n// ! ws* important\nfunction getImportant() {\n    this.eat(Delim);\n    this.skipSC();\n\n    const important = this.consume(Ident);\n\n    // store original value in case it differ from `important`\n    // for better original source restoring and hacks like `!ie` support\n    return important === 'important' ? true : important;\n}\n","import {\n    WhiteSpace,\n    Comment,\n    Semicolon,\n    AtKeyword\n} from '../../tokenizer/index.js';\n\nconst AMPERSAND = 0x0026;       // U+0026 AMPERSAND (&)\n\nfunction consumeRaw() {\n    return this.Raw(this.consumeUntilSemicolonIncluded, true);\n}\n\nexport const name = 'DeclarationList';\nexport const structure = {\n    children: [[\n        'Declaration',\n        'Atrule',\n        'Rule'\n    ]]\n};\n\nexport function parse() {\n    const children = this.createList();\n\n    scan:\n    while (!this.eof) {\n        switch (this.tokenType) {\n            case WhiteSpace:\n            case Comment:\n            case Semicolon:\n                this.next();\n                break;\n\n            case AtKeyword:\n                children.push(this.parseWithFallback(this.Atrule.bind(this, true), consumeRaw));\n                break;\n\n            default:\n                if (this.isDelim(AMPERSAND))  {\n                    children.push(this.parseWithFallback(this.Rule, consumeRaw));\n                } else {\n                    children.push(this.parseWithFallback(this.Declaration, consumeRaw));\n                }\n        }\n    }\n\n    return {\n        type: 'DeclarationList',\n        loc: this.getLocationFromList(children),\n        children\n    };\n}\n\nexport function generate(node) {\n    this.children(node, prev => {\n        if (prev.type === 'Declaration') {\n            this.token(Semicolon, ';');\n        }\n    });\n}\n\n","import { Dimension } from '../../tokenizer/index.js';\n\nexport const name = 'Dimension';\nexport const structure = {\n    value: String,\n    unit: String\n};\n\nexport function parse() {\n    const start = this.tokenStart;\n    const value = this.consumeNumber(Dimension);\n\n    return {\n        type: 'Dimension',\n        loc: this.getLocation(start, this.tokenStart),\n        value,\n        unit: this.substring(start + value.length, this.tokenStart)\n    };\n}\n\nexport function generate(node) {\n    this.token(Dimension, node.value + node.unit);\n}\n","import {\n    Ident,\n    Number,\n    Dimension,\n    Function as FunctionToken,\n    LeftParenthesis,\n    RightParenthesis,\n    Colon,\n    Delim\n} from '../../tokenizer/index.js';\n\nconst SOLIDUS = 0x002F;  // U+002F SOLIDUS (/)\n\nexport const name = 'Feature';\nexport const structure = {\n    kind: String,\n    name: String,\n    value: ['Identifier', 'Number', 'Dimension', 'Ratio', 'Function', null]\n};\n\nexport function parse(kind) {\n    const start = this.tokenStart;\n    let name;\n    let value = null;\n\n    this.eat(LeftParenthesis);\n    this.skipSC();\n\n    name = this.consume(Ident);\n    this.skipSC();\n\n    if (this.tokenType !== RightParenthesis) {\n        this.eat(Colon);\n        this.skipSC();\n\n        switch (this.tokenType) {\n            case Number:\n                if (this.lookupNonWSType(1) === Delim) {\n                    value = this.Ratio();\n                } else {\n                    value = this.Number();\n                }\n\n                break;\n\n            case Dimension:\n                value = this.Dimension();\n                break;\n\n            case Ident:\n                value = this.Identifier();\n                break;\n\n            case FunctionToken:\n                value = this.parseWithFallback(\n                    () => {\n                        const res = this.Function(this.readSequence, this.scope.Value);\n\n                        this.skipSC();\n\n                        if (this.isDelim(SOLIDUS)) {\n                            this.error();\n                        }\n\n                        return res;\n                    },\n                    () => {\n                        return this.Ratio();\n                    }\n                );\n                break;\n\n            default:\n                this.error('Number, dimension, ratio or identifier is expected');\n        }\n\n        this.skipSC();\n    }\n\n    if (!this.eof) {\n        this.eat(RightParenthesis);\n    }\n\n    return {\n        type: 'Feature',\n        loc: this.getLocation(start, this.tokenStart),\n        kind,\n        name,\n        value\n    };\n}\n\nexport function generate(node) {\n    this.token(LeftParenthesis, '(');\n    this.token(Ident, node.name);\n\n    if (node.value !== null) {\n        this.token(Colon, ':');\n        this.node(node.value);\n    }\n\n    this.token(RightParenthesis, ')');\n}\n","import {\n    Function as FunctionToken,\n    RightParenthesis\n} from '../../tokenizer/index.js';\n\nexport const name = 'FeatureFunction';\nexport const structure = {\n    kind: String,\n    feature: String,\n    value: ['Declaration', 'Selector']\n};\n\nfunction getFeatureParser(kind, name) {\n    const featuresOfKind = this.features[kind] || {};\n    const parser = featuresOfKind[name];\n\n    if (typeof parser !== 'function') {\n        this.error(`Unknown feature ${name}()`);\n    }\n\n    return parser;\n}\n\nexport function parse(kind = 'unknown') {\n    const start = this.tokenStart;\n    const functionName = this.consumeFunctionName();\n    const valueParser = getFeatureParser.call(this, kind, functionName.toLowerCase());\n\n    this.skipSC();\n\n    const value = this.parseWithFallback(\n        () => {\n            const startValueToken = this.tokenIndex;\n            const value = valueParser.call(this);\n\n            if (this.eof === false &&\n                this.isBalanceEdge(startValueToken) === false) {\n                this.error();\n            }\n\n            return value;\n        },\n        () => this.Raw(null, false)\n    );\n\n    if (!this.eof) {\n        this.eat(RightParenthesis);\n    }\n\n    return {\n        type: 'FeatureFunction',\n        loc: this.getLocation(start, this.tokenStart),\n        kind,\n        feature: functionName,\n        value\n    };\n}\n\nexport function generate(node) {\n    this.token(FunctionToken, node.feature + '(');\n    this.node(node.value);\n    this.token(RightParenthesis, ')');\n}\n","import {\n    Ident,\n    Number,\n    Dimension,\n    Function as FunctionToken,\n    LeftParenthesis,\n    RightParenthesis\n} from '../../tokenizer/index.js';\n\nconst SOLIDUS = 0x002F;         // U+002F SOLIDUS (/)\nconst LESSTHANSIGN = 0x003C;    // U+003C LESS-THAN SIGN (<)\nconst EQUALSSIGN = 0x003D;      // U+003D EQUALS SIGN (=)\nconst GREATERTHANSIGN = 0x003E; // U+003E GREATER-THAN SIGN (>)\n\nexport const name = 'FeatureRange';\nexport const structure = {\n    kind: String,\n    left: ['Identifier', 'Number', 'Dimension', 'Ratio', 'Function'],\n    leftComparison: String,\n    middle: ['Identifier', 'Number', 'Dimension', 'Ratio', 'Function'],\n    rightComparison: [String, null],\n    right: ['Identifier', 'Number', 'Dimension', 'Ratio', 'Function', null]\n};\n\nfunction readTerm() {\n    this.skipSC();\n\n    switch (this.tokenType) {\n        case Number:\n            if (this.isDelim(SOLIDUS, this.lookupOffsetNonSC(1))) {\n                return this.Ratio();\n            } else {\n                return this.Number();\n            }\n\n        case Dimension:\n            return this.Dimension();\n\n        case Ident:\n            return this.Identifier();\n\n        case FunctionToken:\n            return this.parseWithFallback(\n                () => {\n                    const res = this.Function(this.readSequence, this.scope.Value);\n\n                    this.skipSC();\n\n                    if (this.isDelim(SOLIDUS)) {\n                        this.error();\n                    }\n\n                    return res;\n                },\n                () => {\n                    return this.Ratio();\n                }\n            );\n\n        default:\n            this.error('Number, dimension, ratio or identifier is expected');\n    }\n}\n\nfunction readComparison(expectColon) {\n    this.skipSC();\n\n    if (this.isDelim(LESSTHANSIGN) ||\n        this.isDelim(GREATERTHANSIGN)) {\n        const value = this.source[this.tokenStart];\n\n        this.next();\n\n        if (this.isDelim(EQUALSSIGN)) {\n            this.next();\n            return value + '=';\n        }\n\n        return value;\n    }\n\n    if (this.isDelim(EQUALSSIGN)) {\n        return '=';\n    }\n\n    this.error(`Expected ${expectColon ? '\":\", ' : ''}\"<\", \">\", \"=\" or \")\"`);\n}\n\nexport function parse(kind = 'unknown') {\n    const start = this.tokenStart;\n\n    this.skipSC();\n    this.eat(LeftParenthesis);\n\n    const left = readTerm.call(this);\n    const leftComparison = readComparison.call(this, left.type === 'Identifier');\n    const middle = readTerm.call(this);\n    let rightComparison = null;\n    let right = null;\n\n    if (this.lookupNonWSType(0) !== RightParenthesis) {\n        rightComparison = readComparison.call(this);\n        right = readTerm.call(this);\n    }\n\n    this.skipSC();\n    this.eat(RightParenthesis);\n\n    return {\n        type: 'FeatureRange',\n        loc: this.getLocation(start, this.tokenStart),\n        kind,\n        left,\n        leftComparison,\n        middle,\n        rightComparison,\n        right\n    };\n}\n\nexport function generate(node) {\n    this.token(LeftParenthesis, '(');\n    this.node(node.left);\n    this.tokenize(node.leftComparison);\n    this.node(node.middle);\n\n    if (node.right) {\n        this.tokenize(node.rightComparison);\n        this.node(node.right);\n    }\n\n    this.token(RightParenthesis, ')');\n}\n","import {\n    Function as FunctionToken,\n    RightParenthesis\n} from '../../tokenizer/index.js';\n\n\nexport const name = 'Function';\nexport const walkContext = 'function';\nexport const structure = {\n    name: String,\n    children: [[]]\n};\n\n// <function-token> <sequence> )\nexport function parse(readSequence, recognizer) {\n    const start = this.tokenStart;\n    const name = this.consumeFunctionName();\n    const nameLowerCase = name.toLowerCase();\n    let children;\n\n    children = recognizer.hasOwnProperty(nameLowerCase)\n        ? recognizer[nameLowerCase].call(this, recognizer)\n        : readSequence.call(this, recognizer);\n\n    if (!this.eof) {\n        this.eat(RightParenthesis);\n    }\n\n    return {\n        type: 'Function',\n        loc: this.getLocation(start, this.tokenStart),\n        name,\n        children\n    };\n}\n\nexport function generate(node) {\n    this.token(FunctionToken, node.name + '(');\n    this.children(node);\n    this.token(RightParenthesis, ')');\n}\n","import {\n    Function as FunctionToken,\n    LeftParenthesis,\n    RightParenthesis\n} from '../../tokenizer/index.js';\n\n\nexport const name = 'GeneralEnclosed';\nexport const structure = {\n    kind: String,\n    function: [String, null],\n    children: [[]]\n};\n\n// <function-token> <any-value> )\n// ( <any-value> )\nexport function parse(kind) {\n    const start = this.tokenStart;\n    let functionName = null;\n\n    if (this.tokenType === FunctionToken) {\n        functionName = this.consumeFunctionName();\n    } else {\n        this.eat(LeftParenthesis);\n    }\n\n    const children = this.parseWithFallback(\n        () => {\n            const startValueToken = this.tokenIndex;\n            const children = this.readSequence(this.scope.Value);\n\n            if (this.eof === false &&\n                this.isBalanceEdge(startValueToken) === false) {\n                this.error();\n            }\n\n            return children;\n        },\n        () => this.createSingleNodeList(\n            this.Raw(null, false)\n        )\n    );\n\n    if (!this.eof) {\n        this.eat(RightParenthesis);\n    }\n\n    return {\n        type: 'GeneralEnclosed',\n        loc: this.getLocation(start, this.tokenStart),\n        kind,\n        function: functionName,\n        children\n    };\n}\n\nexport function generate(node) {\n    if (node.function) {\n        this.token(FunctionToken, node.function + '(');\n    } else {\n        this.token(LeftParenthesis, '(');\n    }\n\n    this.children(node);\n    this.token(RightParenthesis, ')');\n}\n","import { Hash } from '../../tokenizer/index.js';\n\n// '#' ident\nexport const xxx = 'XXX';\nexport const name = 'Hash';\nexport const structure = {\n    value: String\n};\nexport function parse() {\n    const start = this.tokenStart;\n\n    this.eat(Hash);\n\n    return {\n        type: 'Hash',\n        loc: this.getLocation(start, this.tokenStart),\n        value: this.substrToCursor(start + 1)\n    };\n}\nexport function generate(node) {\n    this.token(Hash, '#' + node.value);\n}\n\n","import { Ident } from '../../tokenizer/index.js';\n\nexport const name = 'Identifier';\nexport const structure = {\n    name: String\n};\n\nexport function parse() {\n    return {\n        type: 'Identifier',\n        loc: this.getLocation(this.tokenStart, this.tokenEnd),\n        name: this.consume(Ident)\n    };\n}\n\nexport function generate(node) {\n    this.token(Ident, node.name);\n}\n","import { Hash, Delim } from '../../tokenizer/index.js';\n\nexport const name = 'IdSelector';\nexport const structure = {\n    name: String\n};\n\nexport function parse() {\n    const start = this.tokenStart;\n\n    // TODO: check value is an ident\n    this.eat(Hash);\n\n    return {\n        type: 'IdSelector',\n        loc: this.getLocation(start, this.tokenStart),\n        name: this.substrToCursor(start + 1)\n    };\n}\n\nexport function generate(node) {\n    // Using Delim instead of Hash is a hack to avoid for a whitespace between ident and id-selector\n    // in safe mode (e.g. \"a#id\"), because IE11 doesn't allow a sequence <ident-token> <hash-token>\n    // without a whitespace in values (e.g. \"1px solid#000\")\n    this.token(Delim, '#' + node.name);\n}\n","import { Ident, Delim } from '../../tokenizer/index.js';\n\nconst FULLSTOP = 0x002E; // U+002E FULL STOP (.)\n\nexport const name = 'Layer';\nexport const structure = {\n    name: String\n};\n\nexport function parse() {\n    let name = this.consume(Ident);\n\n    while (this.isDelim(FULLSTOP)) {\n        this.eat(Delim);\n        name += '.' + this.consume(Ident);\n    }\n\n    return {\n        type: 'Layer',\n        loc: this.getLocation(this.tokenStart, this.tokenEnd),\n        name\n    };\n}\n\nexport function generate(node) {\n    this.tokenize(node.name);\n}\n","import { Comma } from '../../tokenizer/index.js';\n\nexport const name = 'LayerList';\nexport const structure = {\n    children: [[\n        'Layer'\n    ]]\n};\n\nexport function parse() {\n    const children = this.createList();\n\n    this.skipSC();\n\n    while (!this.eof) {\n        children.push(this.Layer());\n\n        if (this.lookupTypeNonSC(0) !== Comma) {\n            break;\n        }\n\n        this.skipSC();\n        this.next();\n        this.skipSC();\n    }\n\n    return {\n        type: 'LayerList',\n        loc: this.getLocationFromList(children),\n        children\n    };\n}\n\nexport function generate(node) {\n    this.children(node, () => this.token(Comma, ','));\n}\n","import {\n    Comma,\n    EOF,\n    Ident,\n    LeftCurlyBracket,\n    LeftParenthesis,\n    Function as FunctionToken,\n    Semicolon\n} from '../../tokenizer/index.js';\n\nexport const name = 'MediaQuery';\nexport const structure = {\n    modifier: [String, null],\n    mediaType: [String, null],\n    condition: ['Condition', null]\n};\n\nexport function parse() {\n    const start = this.tokenStart;\n    let modifier = null;\n    let mediaType = null;\n    let condition = null;\n\n    this.skipSC();\n\n    if (this.tokenType === Ident && this.lookupTypeNonSC(1) !== LeftParenthesis) {\n        // [ not | only ]? <media-type>\n        const ident = this.consume(Ident);\n        const identLowerCase = ident.toLowerCase();\n\n        if (identLowerCase === 'not' || identLowerCase === 'only') {\n            this.skipSC();\n            modifier = identLowerCase;\n            mediaType = this.consume(Ident);\n        } else {\n            mediaType = ident;\n        }\n\n        switch (this.lookupTypeNonSC(0)) {\n            case Ident: {\n                // and <media-condition-without-or>\n                this.skipSC();\n                this.eatIdent('and');\n                condition = this.Condition('media');\n                break;\n            }\n\n            case LeftCurlyBracket:\n            case Semicolon:\n            case Comma:\n            case EOF:\n                break;\n\n            default:\n                this.error('Identifier or parenthesis is expected');\n        }\n    } else {\n        switch (this.tokenType) {\n            case Ident:\n            case LeftParenthesis:\n            case FunctionToken: {\n                // <media-condition>\n                condition = this.Condition('media');\n                break;\n            }\n\n            case LeftCurlyBracket:\n            case Semicolon:\n            case EOF:\n                break;\n\n            default:\n                this.error('Identifier or parenthesis is expected');\n        }\n    }\n\n    return {\n        type: 'MediaQuery',\n        loc: this.getLocation(start, this.tokenStart),\n        modifier,\n        mediaType,\n        condition\n    };\n}\n\nexport function generate(node) {\n    if (node.mediaType) {\n        if (node.modifier) {\n            this.token(Ident, node.modifier);\n        }\n\n        this.token(Ident, node.mediaType);\n\n        if (node.condition) {\n            this.token(Ident, 'and');\n            this.node(node.condition);\n        }\n    } else if (node.condition) {\n        this.node(node.condition);\n    }\n}\n\n","import { Comma } from '../../tokenizer/index.js';\n\nexport const name = 'MediaQueryList';\nexport const structure = {\n    children: [[\n        'MediaQuery'\n    ]]\n};\n\nexport function parse() {\n    const children = this.createList();\n\n    this.skipSC();\n\n    while (!this.eof) {\n        children.push(this.MediaQuery());\n\n        if (this.tokenType !== Comma) {\n            break;\n        }\n\n        this.next();\n    }\n\n    return {\n        type: 'MediaQueryList',\n        loc: this.getLocationFromList(children),\n        children\n    };\n}\n\nexport function generate(node) {\n    this.children(node, () => this.token(Comma, ','));\n}\n","import { Delim } from '../../tokenizer/index.js';\n\nconst AMPERSAND = 0x0026;       // U+0026 AMPERSAND (&)\n\nexport const name = 'NestingSelector';\nexport const structure = {\n};\n\nexport function parse() {\n    const start = this.tokenStart;\n\n    this.eatDelim(AMPERSAND);\n\n    return {\n        type: 'NestingSelector',\n        loc: this.getLocation(start, this.tokenStart)\n    };\n}\n\nexport function generate() {\n    this.token(Delim, '&');\n}\n","import { Ident } from '../../tokenizer/index.js';\n\nexport const name = 'Nth';\nexport const structure = {\n    nth: ['AnPlusB', 'Identifier'],\n    selector: ['SelectorList', null]\n};\n\nexport function parse() {\n    this.skipSC();\n\n    const start = this.tokenStart;\n    let end = start;\n    let selector = null;\n    let nth;\n\n    if (this.lookupValue(0, 'odd') || this.lookupValue(0, 'even')) {\n        nth = this.Identifier();\n    } else {\n        nth = this.AnPlusB();\n    }\n\n    end = this.tokenStart;\n    this.skipSC();\n\n    if (this.lookupValue(0, 'of')) {\n        this.next();\n\n        selector = this.SelectorList();\n        end = this.tokenStart;\n    }\n\n    return {\n        type: 'Nth',\n        loc: this.getLocation(start, end),\n        nth,\n        selector\n    };\n}\n\nexport function generate(node) {\n    this.node(node.nth);\n    if (node.selector !== null) {\n        this.token(Ident, 'of');\n        this.node(node.selector);\n    }\n}\n","import { Number as NumberToken } from '../../tokenizer/index.js';\n\nexport const name = 'Number';\nexport const structure = {\n    value: String\n};\n\nexport function parse() {\n    return {\n        type: 'Number',\n        loc: this.getLocation(this.tokenStart, this.tokenEnd),\n        value: this.consume(NumberToken)\n    };\n}\n\nexport function generate(node) {\n    this.token(NumberToken, node.value);\n}\n","// '/' | '*' | ',' | ':' | '+' | '-'\nexport const name = 'Operator';\nexport const structure = {\n    value: String\n};\n\nexport function parse() {\n    const start = this.tokenStart;\n\n    this.next();\n\n    return {\n        type: 'Operator',\n        loc: this.getLocation(start, this.tokenStart),\n        value: this.substrToCursor(start)\n    };\n}\n\nexport function generate(node) {\n    this.tokenize(node.value);\n}\n","import {\n    LeftParenthesis,\n    RightParenthesis\n} from '../../tokenizer/index.js';\n\nexport const name = 'Parentheses';\nexport const structure = {\n    children: [[]]\n};\n\nexport function parse(readSequence, recognizer) {\n    const start = this.tokenStart;\n    let children = null;\n\n    this.eat(LeftParenthesis);\n\n    children = readSequence.call(this, recognizer);\n\n    if (!this.eof) {\n        this.eat(RightParenthesis);\n    }\n\n    return {\n        type: 'Parentheses',\n        loc: this.getLocation(start, this.tokenStart),\n        children\n    };\n}\n\nexport function generate(node) {\n    this.token(LeftParenthesis, '(');\n    this.children(node);\n    this.token(RightParenthesis, ')');\n}\n","import { Percentage } from '../../tokenizer/index.js';\n\nexport const name = 'Percentage';\nexport const structure = {\n    value: String\n};\n\nexport function parse() {\n    return {\n        type: 'Percentage',\n        loc: this.getLocation(this.tokenStart, this.tokenEnd),\n        value: this.consumeNumber(Percentage)\n    };\n}\n\nexport function generate(node) {\n    this.token(Percentage, node.value + '%');\n}\n","import {\n    Ident,\n    Function as FunctionToken,\n    Colon,\n    RightParenthesis\n} from '../../tokenizer/index.js';\n\n\nexport const name = 'PseudoClassSelector';\nexport const walkContext = 'function';\nexport const structure = {\n    name: String,\n    children: [['Raw'], null]\n};\n\n// : [ <ident> | <function-token> <any-value>? ) ]\nexport function parse() {\n    const start = this.tokenStart;\n    let children = null;\n    let name;\n    let nameLowerCase;\n\n    this.eat(Colon);\n\n    if (this.tokenType === FunctionToken) {\n        name = this.consumeFunctionName();\n        nameLowerCase = name.toLowerCase();\n\n        if (this.lookupNonWSType(0) == RightParenthesis) {\n            children = this.createList();\n        } else if (hasOwnProperty.call(this.pseudo, nameLowerCase)) {\n            this.skipSC();\n            children = this.pseudo[nameLowerCase].call(this);\n            this.skipSC();\n        } else {\n            children = this.createList();\n            children.push(\n                this.Raw(null, false)\n            );\n        }\n\n        this.eat(RightParenthesis);\n    } else {\n        name = this.consume(Ident);\n    }\n\n    return {\n        type: 'PseudoClassSelector',\n        loc: this.getLocation(start, this.tokenStart),\n        name,\n        children\n    };\n}\n\nexport function generate(node) {\n    this.token(Colon, ':');\n\n    if (node.children === null) {\n        this.token(Ident, node.name);\n    } else {\n        this.token(FunctionToken, node.name + '(');\n        this.children(node);\n        this.token(RightParenthesis, ')');\n    }\n}\n","import {\n    Ident,\n    Function as FunctionToken,\n    Colon,\n    RightParenthesis\n} from '../../tokenizer/index.js';\n\nexport const name = 'PseudoElementSelector';\nexport const walkContext = 'function';\nexport const structure = {\n    name: String,\n    children: [['Raw'], null]\n};\n\n// :: [ <ident> | <function-token> <any-value>? ) ]\nexport function parse() {\n    const start = this.tokenStart;\n    let children = null;\n    let name;\n    let nameLowerCase;\n\n    this.eat(Colon);\n    this.eat(Colon);\n\n    if (this.tokenType === FunctionToken) {\n        name = this.consumeFunctionName();\n        nameLowerCase = name.toLowerCase();\n\n        if (this.lookupNonWSType(0) == RightParenthesis) {\n            children = this.createList();\n        } else if (hasOwnProperty.call(this.pseudo, nameLowerCase)) {\n            this.skipSC();\n            children = this.pseudo[nameLowerCase].call(this);\n            this.skipSC();\n        } else {\n            children = this.createList();\n            children.push(\n                this.Raw(null, false)\n            );\n        }\n\n        this.eat(RightParenthesis);\n    } else {\n        name = this.consume(Ident);\n    }\n\n    return {\n        type: 'PseudoElementSelector',\n        loc: this.getLocation(start, this.tokenStart),\n        name,\n        children\n    };\n}\n\nexport function generate(node) {\n    this.token(Colon, ':');\n    this.token(Colon, ':');\n\n    if (node.children === null) {\n        this.token(Ident, node.name);\n    } else {\n        this.token(FunctionToken, node.name + '(');\n        this.children(node);\n        this.token(RightParenthesis, ')');\n    }\n}\n","import {\n    Delim,\n    Number as NumberToken,\n    Function as FunctionToken\n} from '../../tokenizer/index.js';\n\nconst SOLIDUS = 0x002F;  // U+002F SOLIDUS (/)\n\n// Media Queries Level 3 defines terms of <ratio> as a positive (not zero or negative)\n// integers (see https://drafts.csswg.org/mediaqueries-3/#values)\n// However, Media Queries Level 4 removes any definition of values\n// (see https://drafts.csswg.org/mediaqueries-4/#values) and refers to\n// CSS Values and Units for detail. In CSS Values and Units Level 4 a <ratio>\n// definition was added (see https://drafts.csswg.org/css-values-4/#ratios) which\n// defines ratio as \"<number [0,∞]> [ / <number [0,∞]> ]?\" and based on it\n// any constrains on terms were removed. Parser also doesn't test numbers\n// in any way to make possible for linting and fixing them by the tools using CSSTree.\n// An additional syntax examination may be applied by a lexer.\nfunction consumeTerm() {\n    this.skipSC();\n\n    switch (this.tokenType) {\n        case NumberToken:\n            return this.Number();\n\n        case FunctionToken:\n            return this.Function(this.readSequence, this.scope.Value);\n\n        default:\n            this.error('Number of function is expected');\n    }\n}\n\nexport const name = 'Ratio';\nexport const structure = {\n    left: ['Number', 'Function'],\n    right: ['Number', 'Function', null]\n};\n\n// <number [0,∞]> [ / <number [0,∞]> ]?\nexport function parse() {\n    const start = this.tokenStart;\n    const left = consumeTerm.call(this);\n    let right = null;\n\n    this.skipSC();\n    if (this.isDelim(SOLIDUS)) {\n        this.eatDelim(SOLIDUS);\n        right = consumeTerm.call(this);\n    }\n\n    return {\n        type: 'Ratio',\n        loc: this.getLocation(start, this.tokenStart),\n        left,\n        right\n    };\n}\n\nexport function generate(node) {\n    this.node(node.left);\n    this.token(Delim, '/');\n    if (node.right) {\n        this.node(node.right);\n    } else {\n        this.node(NumberToken, 1);\n    }\n}\n","import { WhiteSpace } from '../../tokenizer/index.js';\n\nfunction getOffsetExcludeWS() {\n    if (this.tokenIndex > 0) {\n        if (this.lookupType(-1) === WhiteSpace) {\n            return this.tokenIndex > 1\n                ? this.getTokenStart(this.tokenIndex - 1)\n                : this.firstCharOffset;\n        }\n    }\n\n    return this.tokenStart;\n}\n\nexport const name = 'Raw';\nexport const structure = {\n    value: String\n};\n\nexport function parse(consumeUntil, excludeWhiteSpace) {\n    const startOffset = this.getTokenStart(this.tokenIndex);\n    let endOffset;\n\n    this.skipUntilBalanced(this.tokenIndex, consumeUntil || this.consumeUntilBalanceEnd);\n\n    if (excludeWhiteSpace && this.tokenStart > startOffset) {\n        endOffset = getOffsetExcludeWS.call(this);\n    } else {\n        endOffset = this.tokenStart;\n    }\n\n    return {\n        type: 'Raw',\n        loc: this.getLocation(startOffset, endOffset),\n        value: this.substring(startOffset, endOffset)\n    };\n}\n\nexport function generate(node) {\n    this.tokenize(node.value);\n}\n","import { LeftCurlyBracket, RightCurlyBracket } from '../../tokenizer/index.js';\n\nfunction consumeRaw() {\n    return this.Raw(this.consumeUntilLeftCurlyBracket, true);\n}\n\nfunction consumePrelude() {\n    const prelude = this.SelectorList();\n\n    if (prelude.type !== 'Raw' &&\n        this.eof === false &&\n        this.tokenType !== LeftCurlyBracket) {\n        this.error();\n    }\n\n    return prelude;\n}\n\nexport const name = 'Rule';\nexport const walkContext = 'rule';\nexport const structure = {\n    prelude: ['SelectorList', 'Raw'],\n    block: ['Block']\n};\n\nexport function parse() {\n    const startToken = this.tokenIndex;\n    const startOffset = this.tokenStart;\n    let prelude;\n    let block;\n\n    if (this.parseRulePrelude) {\n        prelude = this.parseWithFallback(consumePrelude, consumeRaw);\n    } else {\n        prelude = consumeRaw.call(this, startToken);\n    }\n\n    this.skipSC();\n    this.eat(LeftCurlyBracket);\n\n    block = this.Block(true);\n\n    if (!this.eof) {\n        this.eat(RightCurlyBracket);\n    }\n\n    return {\n        type: 'Rule',\n        loc: this.getLocation(startOffset, this.tokenStart),\n        prelude,\n        block\n    };\n}\nexport function generate(node) {\n    this.node(node.prelude);\n    this.token(LeftCurlyBracket, '{');\n    this.node(node.block);\n    this.token(RightCurlyBracket, '}');\n}\n\n","import {\n    Ident,\n    LeftParenthesis,\n    RightParenthesis\n} from '../../tokenizer/index.js';\n\nexport const name = 'Scope';\nexport const structure = {\n    root: ['SelectorList', 'Raw', null],\n    limit: ['SelectorList', 'Raw', null]\n};\n\nexport function parse() {\n    let root = null;\n    let limit = null;\n\n    this.skipSC();\n\n    const startOffset = this.tokenStart;\n    if (this.tokenType === LeftParenthesis) {\n        this.next();\n        this.skipSC();\n        root = this.parseWithFallback(\n            this.SelectorList,\n            () => this.Raw(false, true)\n        );\n        this.skipSC();\n        this.eat(RightParenthesis);\n    }\n\n    if (this.lookupNonWSType(0) === Ident) {\n        this.skipSC();\n        this.eatIdent('to');\n        this.skipSC();\n        this.eat(LeftParenthesis);\n        this.skipSC();\n        limit = this.parseWithFallback(\n            this.SelectorList,\n            () => this.Raw(false, true)\n        );\n        this.skipSC();\n        this.eat(RightParenthesis);\n    }\n\n    return {\n        type: 'Scope',\n        loc: this.getLocation(startOffset, this.tokenStart),\n        root,\n        limit\n    };\n}\n\nexport function generate(node) {\n    if (node.root) {\n        this.token(LeftParenthesis, '(');\n        this.node(node.root);\n        this.token(RightParenthesis, ')');\n    }\n\n    if (node.limit) {\n        this.token(Ident, 'to');\n        this.token(LeftParenthesis, '(');\n        this.node(node.limit);\n        this.token(RightParenthesis, ')');\n    }\n}\n","export const name = 'Selector';\nexport const structure = {\n    children: [[\n        'TypeSelector',\n        'IdSelector',\n        'ClassSelector',\n        'AttributeSelector',\n        'PseudoClassSelector',\n        'PseudoElementSelector',\n        'Combinator'\n    ]]\n};\n\nexport function parse() {\n    const children = this.readSequence(this.scope.Selector);\n\n    // nothing were consumed\n    if (this.getFirstListNode(children) === null) {\n        this.error('Selector is expected');\n    }\n\n    return {\n        type: 'Selector',\n        loc: this.getLocationFromList(children),\n        children\n    };\n}\n\nexport function generate(node) {\n    this.children(node);\n}\n","import { Comma } from '../../tokenizer/index.js';\n\nexport const name = 'SelectorList';\nexport const walkContext = 'selector';\nexport const structure = {\n    children: [[\n        'Selector',\n        'Raw'\n    ]]\n};\n\nexport function parse() {\n    const children = this.createList();\n\n    while (!this.eof) {\n        children.push(this.Selector());\n\n        if (this.tokenType === Comma) {\n            this.next();\n            continue;\n        }\n\n        break;\n    }\n\n    return {\n        type: 'SelectorList',\n        loc: this.getLocationFromList(children),\n        children\n    };\n}\n\nexport function generate(node) {\n    this.children(node, () => this.token(Comma, ','));\n}\n","import {\n    isHexDigit,\n    isWhiteSpace,\n    isValidEscape,\n    consumeEscaped,\n    decodeEscaped\n} from '../tokenizer/index.js';\n\nconst REVERSE_SOLIDUS = 0x005c; // U+005C REVERSE SOLIDUS (\\)\nconst QUOTATION_MARK = 0x0022;  // \"\nconst APOSTROPHE = 0x0027;      // '\n\nexport function decode(str) {\n    const len = str.length;\n    const firstChar = str.charCodeAt(0);\n    const start = firstChar === QUOTATION_MARK || firstChar === APOSTROPHE ? 1 : 0;\n    const end = start === 1 && len > 1 && str.charCodeAt(len - 1) === firstChar ? len - 2 : len - 1;\n    let decoded = '';\n\n    for (let i = start; i <= end; i++) {\n        let code = str.charCodeAt(i);\n\n        if (code === REVERSE_SOLIDUS) {\n            // special case at the ending\n            if (i === end) {\n                // if the next input code point is EOF, do nothing\n                // otherwise include last quote as escaped\n                if (i !== len - 1) {\n                    decoded = str.substr(i + 1);\n                }\n                break;\n            }\n\n            code = str.charCodeAt(++i);\n\n            // consume escaped\n            if (isValidEscape(REVERSE_SOLIDUS, code)) {\n                const escapeStart = i - 1;\n                const escapeEnd = consumeEscaped(str, escapeStart);\n\n                i = escapeEnd - 1;\n                decoded += decodeEscaped(str.substring(escapeStart + 1, escapeEnd));\n            } else {\n                // \\r\\n\n                if (code === 0x000d && str.charCodeAt(i + 1) === 0x000a) {\n                    i++;\n                }\n            }\n        } else {\n            decoded += str[i];\n        }\n    }\n\n    return decoded;\n}\n\n// https://drafts.csswg.org/cssom/#serialize-a-string\n// § 2.1. Common Serializing Idioms\nexport function encode(str, apostrophe) {\n    const quote = apostrophe ? '\\'' : '\"';\n    const quoteCode = apostrophe ? APOSTROPHE : QUOTATION_MARK;\n    let encoded = '';\n    let wsBeforeHexIsNeeded = false;\n\n    for (let i = 0; i < str.length; i++) {\n        const code = str.charCodeAt(i);\n\n        // If the character is NULL (U+0000), then the REPLACEMENT CHARACTER (U+FFFD).\n        if (code === 0x0000) {\n            encoded += '\\uFFFD';\n            continue;\n        }\n\n        // If the character is in the range [\\1-\\1f] (U+0001 to U+001F) or is U+007F,\n        // the character escaped as code point.\n        // Note: Do not compare with 0x0001 since 0x0000 is precessed before\n        if (code <= 0x001f || code === 0x007F) {\n            encoded += '\\\\' + code.toString(16);\n            wsBeforeHexIsNeeded = true;\n            continue;\n        }\n\n        // If the character is '\"' (U+0022) or \"\\\" (U+005C), the escaped character.\n        if (code === quoteCode || code === REVERSE_SOLIDUS) {\n            encoded += '\\\\' + str.charAt(i);\n            wsBeforeHexIsNeeded = false;\n        } else {\n            if (wsBeforeHexIsNeeded && (isHexDigit(code) || isWhiteSpace(code))) {\n                encoded += ' ';\n            }\n\n            // Otherwise, the character itself.\n            encoded += str.charAt(i);\n            wsBeforeHexIsNeeded = false;\n        }\n    }\n\n    return quote + encoded + quote;\n}\n","import { String as StringToken } from '../../tokenizer/index.js';\nimport { decode, encode } from '../../utils/string.js';\n\nexport const name = 'String';\nexport const structure = {\n    value: String\n};\n\nexport function parse() {\n    return {\n        type: 'String',\n        loc: this.getLocation(this.tokenStart, this.tokenEnd),\n        value: decode(this.consume(StringToken))\n    };\n}\n\nexport function generate(node) {\n    this.token(StringToken, encode(node.value));\n}\n","import {\n    WhiteSpace,\n    Comment,\n    AtKeyword,\n    CDO,\n    CDC\n} from '../../tokenizer/index.js';\n\nconst EXCLAMATIONMARK = 0x0021; // U+0021 EXCLAMATION MARK (!)\n\nfunction consumeRaw() {\n    return this.Raw(null, false);\n}\n\nexport const name = 'StyleSheet';\nexport const walkContext = 'stylesheet';\nexport const structure = {\n    children: [[\n        'Comment',\n        'CDO',\n        'CDC',\n        'Atrule',\n        'Rule',\n        'Raw'\n    ]]\n};\n\nexport function parse() {\n    const start = this.tokenStart;\n    const children = this.createList();\n    let child;\n\n    scan:\n    while (!this.eof) {\n        switch (this.tokenType) {\n            case WhiteSpace:\n                this.next();\n                continue;\n\n            case Comment:\n                // ignore comments except exclamation comments (i.e. /*! .. */) on top level\n                if (this.charCodeAt(this.tokenStart + 2) !== EXCLAMATIONMARK) {\n                    this.next();\n                    continue;\n                }\n\n                child = this.Comment();\n                break;\n\n            case CDO: // <!--\n                child = this.CDO();\n                break;\n\n            case CDC: // -->\n                child = this.CDC();\n                break;\n\n            // CSS Syntax Module Level 3\n            // §2.2 Error handling\n            // At the \"top level\" of a stylesheet, an <at-keyword-token> starts an at-rule.\n            case AtKeyword:\n                child = this.parseWithFallback(this.Atrule, consumeRaw);\n                break;\n\n            // Anything else starts a qualified rule ...\n            default:\n                child = this.parseWithFallback(this.Rule, consumeRaw);\n        }\n\n        children.push(child);\n    }\n\n    return {\n        type: 'StyleSheet',\n        loc: this.getLocation(start, this.tokenStart),\n        children\n    };\n}\n\nexport function generate(node) {\n    this.children(node);\n}\n","import {\n    LeftParenthesis,\n    RightParenthesis\n} from '../../tokenizer/index.js';\n\nexport const name = 'SupportsDeclaration';\nexport const structure = {\n    declaration: 'Declaration'\n};\n\nexport function parse() {\n    const start = this.tokenStart;\n\n    this.eat(LeftParenthesis);\n    this.skipSC();\n\n    const declaration = this.Declaration();\n\n    if (!this.eof) {\n        this.eat(RightParenthesis);\n    }\n\n    return {\n        type: 'SupportsDeclaration',\n        loc: this.getLocation(start, this.tokenStart),\n        declaration\n    };\n}\n\nexport function generate(node) {\n    this.token(LeftParenthesis, '(');\n    this.node(node.declaration);\n    this.token(RightParenthesis, ')');\n}\n","import { Ident } from '../../tokenizer/index.js';\n\nconst ASTERISK = 0x002A;     // U+002A ASTERISK (*)\nconst VERTICALLINE = 0x007C; // U+007C VERTICAL LINE (|)\n\nfunction eatIdentifierOrAsterisk() {\n    if (this.tokenType !== Ident &&\n        this.isDelim(ASTERISK) === false) {\n        this.error('Identifier or asterisk is expected');\n    }\n\n    this.next();\n}\n\nexport const name = 'TypeSelector';\nexport const structure = {\n    name: String\n};\n\n// ident\n// ident|ident\n// ident|*\n// *\n// *|ident\n// *|*\n// |ident\n// |*\nexport function parse() {\n    const start = this.tokenStart;\n\n    if (this.isDelim(VERTICALLINE)) {\n        this.next();\n        eatIdentifierOrAsterisk.call(this);\n    } else {\n        eatIdentifierOrAsterisk.call(this);\n\n        if (this.isDelim(VERTICALLINE)) {\n            this.next();\n            eatIdentifierOrAsterisk.call(this);\n        }\n    }\n\n    return {\n        type: 'TypeSelector',\n        loc: this.getLocation(start, this.tokenStart),\n        name: this.substrToCursor(start)\n    };\n}\n\nexport function generate(node) {\n    this.tokenize(node.name);\n}\n","import {\n    isHexDigit,\n    Ident,\n    Number,\n    Dimension\n} from '../../tokenizer/index.js';\n\nconst PLUSSIGN = 0x002B;     // U+002B PLUS SIGN (+)\nconst HYPHENMINUS = 0x002D;  // U+002D HYPHEN-MINUS (-)\nconst QUESTIONMARK = 0x003F; // U+003F QUESTION MARK (?)\n\nfunction eatHexSequence(offset, allowDash) {\n    let len = 0;\n\n    for (let pos = this.tokenStart + offset; pos < this.tokenEnd; pos++) {\n        const code = this.charCodeAt(pos);\n\n        if (code === HYPHENMINUS && allowDash && len !== 0) {\n            eatHexSequence.call(this, offset + len + 1, false);\n            return -1;\n        }\n\n        if (!isHexDigit(code)) {\n            this.error(\n                allowDash && len !== 0\n                    ? 'Hyphen minus' + (len < 6 ? ' or hex digit' : '') + ' is expected'\n                    : (len < 6 ? 'Hex digit is expected' : 'Unexpected input'),\n                pos\n            );\n        }\n\n        if (++len > 6) {\n            this.error('Too many hex digits', pos);\n        };\n    }\n\n    this.next();\n    return len;\n}\n\nfunction eatQuestionMarkSequence(max) {\n    let count = 0;\n\n    while (this.isDelim(QUESTIONMARK)) {\n        if (++count > max) {\n            this.error('Too many question marks');\n        }\n\n        this.next();\n    }\n}\n\nfunction startsWith(code) {\n    if (this.charCodeAt(this.tokenStart) !== code) {\n        this.error((code === PLUSSIGN ? 'Plus sign' : 'Hyphen minus') + ' is expected');\n    }\n}\n\n// https://drafts.csswg.org/css-syntax/#urange\n// Informally, the <urange> production has three forms:\n// U+0001\n//      Defines a range consisting of a single code point, in this case the code point \"1\".\n// U+0001-00ff\n//      Defines a range of codepoints between the first and the second value, in this case\n//      the range between \"1\" and \"ff\" (255 in decimal) inclusive.\n// U+00??\n//      Defines a range of codepoints where the \"?\" characters range over all hex digits,\n//      in this case defining the same as the value U+0000-00ff.\n// In each form, a maximum of 6 digits is allowed for each hexadecimal number (if you treat \"?\" as a hexadecimal digit).\n//\n// <urange> =\n//   u '+' <ident-token> '?'* |\n//   u <dimension-token> '?'* |\n//   u <number-token> '?'* |\n//   u <number-token> <dimension-token> |\n//   u <number-token> <number-token> |\n//   u '+' '?'+\nfunction scanUnicodeRange() {\n    let hexLength = 0;\n\n    switch (this.tokenType) {\n        case Number:\n            // u <number-token> '?'*\n            // u <number-token> <dimension-token>\n            // u <number-token> <number-token>\n            hexLength = eatHexSequence.call(this, 1, true);\n\n            if (this.isDelim(QUESTIONMARK)) {\n                eatQuestionMarkSequence.call(this, 6 - hexLength);\n                break;\n            }\n\n            if (this.tokenType === Dimension ||\n                this.tokenType === Number) {\n                startsWith.call(this, HYPHENMINUS);\n                eatHexSequence.call(this, 1, false);\n                break;\n            }\n\n            break;\n\n        case Dimension:\n            // u <dimension-token> '?'*\n            hexLength = eatHexSequence.call(this, 1, true);\n\n            if (hexLength > 0) {\n                eatQuestionMarkSequence.call(this, 6 - hexLength);\n            }\n\n            break;\n\n        default:\n            // u '+' <ident-token> '?'*\n            // u '+' '?'+\n            this.eatDelim(PLUSSIGN);\n\n            if (this.tokenType === Ident) {\n                hexLength = eatHexSequence.call(this, 0, true);\n                if (hexLength > 0) {\n                    eatQuestionMarkSequence.call(this, 6 - hexLength);\n                }\n                break;\n            }\n\n            if (this.isDelim(QUESTIONMARK)) {\n                this.next();\n                eatQuestionMarkSequence.call(this, 5);\n                break;\n            }\n\n            this.error('Hex digit or question mark is expected');\n    }\n}\n\nexport const name = 'UnicodeRange';\nexport const structure = {\n    value: String\n};\n\nexport function parse() {\n    const start = this.tokenStart;\n\n    // U or u\n    this.eatIdent('u');\n    scanUnicodeRange.call(this);\n\n    return {\n        type: 'UnicodeRange',\n        loc: this.getLocation(start, this.tokenStart),\n        value: this.substrToCursor(start)\n    };\n}\n\nexport function generate(node) {\n    this.tokenize(node.value);\n}\n","import {\n    isHexDigit,\n    isWhiteSpace,\n    isValidEscape,\n    consumeEscaped,\n    decodeEscaped\n} from '../tokenizer/index.js';\n\nconst SPACE = 0x0020;            // U+0020 SPACE\nconst REVERSE_SOLIDUS = 0x005c;  // U+005C REVERSE SOLIDUS (\\)\nconst QUOTATION_MARK = 0x0022;   // \"\nconst APOSTROPHE = 0x0027;       // '\nconst LEFTPARENTHESIS = 0x0028;  // U+0028 LEFT PARENTHESIS (()\nconst RIGHTPARENTHESIS = 0x0029; // U+0029 RIGHT PARENTHESIS ())\n\nexport function decode(str) {\n    const len = str.length;\n    let start = 4; // length of \"url(\"\n    let end = str.charCodeAt(len - 1) === RIGHTPARENTHESIS ? len - 2 : len - 1;\n    let decoded = '';\n\n    while (start < end && isWhiteSpace(str.charCodeAt(start))) {\n        start++;\n    }\n\n    while (start < end && isWhiteSpace(str.charCodeAt(end))) {\n        end--;\n    }\n\n    for (let i = start; i <= end; i++) {\n        let code = str.charCodeAt(i);\n\n        if (code === REVERSE_SOLIDUS) {\n            // special case at the ending\n            if (i === end) {\n                // if the next input code point is EOF, do nothing\n                // otherwise include last left parenthesis as escaped\n                if (i !== len - 1) {\n                    decoded = str.substr(i + 1);\n                }\n                break;\n            }\n\n            code = str.charCodeAt(++i);\n\n            // consume escaped\n            if (isValidEscape(REVERSE_SOLIDUS, code)) {\n                const escapeStart = i - 1;\n                const escapeEnd = consumeEscaped(str, escapeStart);\n\n                i = escapeEnd - 1;\n                decoded += decodeEscaped(str.substring(escapeStart + 1, escapeEnd));\n            } else {\n                // \\r\\n\n                if (code === 0x000d && str.charCodeAt(i + 1) === 0x000a) {\n                    i++;\n                }\n            }\n        } else {\n            decoded += str[i];\n        }\n    }\n\n    return decoded;\n}\n\nexport function encode(str) {\n    let encoded = '';\n    let wsBeforeHexIsNeeded = false;\n\n    for (let i = 0; i < str.length; i++) {\n        const code = str.charCodeAt(i);\n\n        // If the character is NULL (U+0000), then the REPLACEMENT CHARACTER (U+FFFD).\n        if (code === 0x0000) {\n            encoded += '\\uFFFD';\n            continue;\n        }\n\n        // If the character is in the range [\\1-\\1f] (U+0001 to U+001F) or is U+007F,\n        // the character escaped as code point.\n        // Note: Do not compare with 0x0001 since 0x0000 is precessed before\n        if (code <= 0x001f || code === 0x007F) {\n            encoded += '\\\\' + code.toString(16);\n            wsBeforeHexIsNeeded = true;\n            continue;\n        }\n\n        if (code === SPACE ||\n            code === REVERSE_SOLIDUS ||\n            code === QUOTATION_MARK ||\n            code === APOSTROPHE ||\n            code === LEFTPARENTHESIS ||\n            code === RIGHTPARENTHESIS) {\n            encoded += '\\\\' + str.charAt(i);\n            wsBeforeHexIsNeeded = false;\n        } else {\n            if (wsBeforeHexIsNeeded && isHexDigit(code)) {\n                encoded += ' ';\n            }\n\n            encoded += str.charAt(i);\n            wsBeforeHexIsNeeded = false;\n        }\n    }\n\n    return 'url(' + encoded + ')';\n}\n","import * as url from '../../utils/url.js';\nimport * as string from '../../utils/string.js';\nimport {\n    Function as FunctionToken,\n    String as StringToken,\n    Url,\n    RightParenthesis\n} from '../../tokenizer/index.js';\n\nexport const name = 'Url';\nexport const structure = {\n    value: String\n};\n\n// <url-token> | <function-token> <string> )\nexport function parse() {\n    const start = this.tokenStart;\n    let value;\n\n    switch (this.tokenType) {\n        case Url:\n            value = url.decode(this.consume(Url));\n            break;\n\n        case FunctionToken:\n            if (!this.cmpStr(this.tokenStart, this.tokenEnd, 'url(')) {\n                this.error('Function name must be `url`');\n            }\n\n            this.eat(FunctionToken);\n            this.skipSC();\n            value = string.decode(this.consume(StringToken));\n            this.skipSC();\n            if (!this.eof) {\n                this.eat(RightParenthesis);\n            }\n            break;\n\n        default:\n            this.error('Url or Function is expected');\n    }\n\n    return {\n        type: 'Url',\n        loc: this.getLocation(start, this.tokenStart),\n        value\n    };\n}\n\nexport function generate(node) {\n    this.token(Url, url.encode(node.value));\n}\n","export const name = 'Value';\nexport const structure = {\n    children: [[]]\n};\n\nexport function parse() {\n    const start = this.tokenStart;\n    const children = this.readSequence(this.scope.Value);\n\n    return {\n        type: 'Value',\n        loc: this.getLocation(start, this.tokenStart),\n        children\n    };\n}\n\nexport function generate(node) {\n    this.children(node);\n}\n","import { WhiteSpace } from '../../tokenizer/index.js';\n\nconst SPACE = Object.freeze({\n    type: 'WhiteSpace',\n    loc: null,\n    value: ' '\n});\n\nexport const name = 'WhiteSpace';\nexport const structure = {\n    value: String\n};\n\nexport function parse() {\n    this.eat(WhiteSpace);\n    return SPACE;\n\n    // return {\n    //     type: 'WhiteSpace',\n    //     loc: this.getLocation(this.tokenStart, this.tokenEnd),\n    //     value: this.consume(WHITESPACE)\n    // };\n}\n\nexport function generate(node) {\n    this.token(WhiteSpace, node.value);\n}\n","import definitions from '../../data.js';\nimport * as node from '../node/index.js';\n\nexport default {\n    generic: true,\n    ...definitions,\n    node\n};\n","import {\n    Ident,\n    String as StringToken,\n    Number as NumberToken,\n    Function as FunctionToken,\n    Url,\n    Hash,\n    Dimension,\n    Percentage,\n    LeftParenthesis,\n    LeftSquareBracket,\n    Comma,\n    Delim\n} from '../../tokenizer/index.js';\n\nconst NUMBERSIGN = 0x0023;  // U+0023 NUMBER SIGN (#)\nconst ASTERISK = 0x002A;    // U+002A ASTERISK (*)\nconst PLUSSIGN = 0x002B;    // U+002B PLUS SIGN (+)\nconst HYPHENMINUS = 0x002D; // U+002D HYPHEN-MINUS (-)\nconst SOLIDUS = 0x002F;     // U+002F SOLIDUS (/)\nconst U = 0x0075;           // U+0075 LATIN SMALL LETTER U (u)\n\nexport default function defaultRecognizer(context) {\n    switch (this.tokenType) {\n        case Hash:\n            return this.Hash();\n\n        case Comma:\n            return this.Operator();\n\n        case LeftParenthesis:\n            return this.Parentheses(this.readSequence, context.recognizer);\n\n        case LeftSquareBracket:\n            return this.Brackets(this.readSequence, context.recognizer);\n\n        case StringToken:\n            return this.String();\n\n        case Dimension:\n            return this.Dimension();\n\n        case Percentage:\n            return this.Percentage();\n\n        case NumberToken:\n            return this.Number();\n\n        case FunctionToken:\n            return this.cmpStr(this.tokenStart, this.tokenEnd, 'url(')\n                ? this.Url()\n                : this.Function(this.readSequence, context.recognizer);\n\n        case Url:\n            return this.Url();\n\n        case Ident:\n            // check for unicode range, it should start with u+ or U+\n            if (this.cmpChar(this.tokenStart, U) &&\n                this.cmpChar(this.tokenStart + 1, PLUSSIGN)) {\n                return this.UnicodeRange();\n            } else {\n                return this.Identifier();\n            }\n\n        case Delim: {\n            const code = this.charCodeAt(this.tokenStart);\n\n            if (code === SOLIDUS ||\n                code === ASTERISK ||\n                code === PLUSSIGN ||\n                code === HYPHENMINUS) {\n                return this.Operator(); // TODO: replace with Delim\n            }\n\n            // TODO: produce a node with Delim node type\n\n            if (code === NUMBERSIGN) {\n                this.error('Hex or identifier is expected', this.tokenStart + 1);\n            }\n\n            break;\n        }\n    }\n};\n","import getNode from './default.js';\n\nexport default {\n    getNode\n};\n","import {\n    Delim,\n    Ident,\n    Dimension,\n    Percentage,\n    Number as NumberToken,\n    Hash,\n    Colon,\n    LeftSquareBracket\n} from '../../tokenizer/index.js';\n\nconst NUMBERSIGN = 0x0023;      // U+0023 NUMBER SIGN (#)\nconst AMPERSAND = 0x0026;       // U+0026 AMPERSAND (&)\nconst ASTERISK = 0x002A;        // U+002A ASTERISK (*)\nconst PLUSSIGN = 0x002B;        // U+002B PLUS SIGN (+)\nconst SOLIDUS = 0x002F;         // U+002F SOLIDUS (/)\nconst FULLSTOP = 0x002E;        // U+002E FULL STOP (.)\nconst GREATERTHANSIGN = 0x003E; // U+003E GREATER-THAN SIGN (>)\nconst VERTICALLINE = 0x007C;    // U+007C VERTICAL LINE (|)\nconst TILDE = 0x007E;           // U+007E TILDE (~)\n\nfunction onWhiteSpace(next, children) {\n    if (children.last !== null && children.last.type !== 'Combinator' &&\n        next !== null && next.type !== 'Combinator') {\n        children.push({  // FIXME: this.Combinator() should be used instead\n            type: 'Combinator',\n            loc: null,\n            name: ' '\n        });\n    }\n}\n\nfunction getNode() {\n    switch (this.tokenType) {\n        case LeftSquareBracket:\n            return this.AttributeSelector();\n\n        case Hash:\n            return this.IdSelector();\n\n        case Colon:\n            if (this.lookupType(1) === Colon) {\n                return this.PseudoElementSelector();\n            } else {\n                return this.PseudoClassSelector();\n            }\n\n        case Ident:\n            return this.TypeSelector();\n\n        case NumberToken:\n        case Percentage:\n            return this.Percentage();\n\n        case Dimension:\n            // throws when .123ident\n            if (this.charCodeAt(this.tokenStart) === FULLSTOP) {\n                this.error('Identifier is expected', this.tokenStart + 1);\n            }\n            break;\n\n        case Delim: {\n            const code = this.charCodeAt(this.tokenStart);\n\n            switch (code) {\n                case PLUSSIGN:\n                case GREATERTHANSIGN:\n                case TILDE:\n                case SOLIDUS:  // /deep/\n                    return this.Combinator();\n\n                case FULLSTOP:\n                    return this.ClassSelector();\n\n                case ASTERISK:\n                case VERTICALLINE:\n                    return this.TypeSelector();\n\n                case NUMBERSIGN:\n                    return this.IdSelector();\n\n                case AMPERSAND:\n                    return this.NestingSelector();\n            }\n\n            break;\n        }\n    }\n};\n\nexport default {\n    onWhiteSpace,\n    getNode\n};\n","// legacy IE function\n// expression( <any-value> )\nexport default function() {\n    return this.createSingleNodeList(\n        this.Raw(null, false)\n    );\n}\n","import { Comma, WhiteSpace } from '../../tokenizer/index.js';\n\n// var( <ident> , <value>? )\nexport default function() {\n    const children = this.createList();\n\n    this.skipSC();\n\n    // NOTE: Don't check more than a first argument is an ident, rest checks are for lexer\n    children.push(this.Identifier());\n\n    this.skipSC();\n\n    if (this.tokenType === Comma) {\n        children.push(this.Operator());\n\n        const startIndex = this.tokenIndex;\n        const value = this.parseCustomProperty\n            ? this.Value(null)\n            : this.Raw(this.consumeUntilExclamationMarkOrSemicolon, false);\n\n        if (value.type === 'Value' && value.children.isEmpty) {\n            for (let offset = startIndex - this.tokenIndex; offset <= 0; offset++) {\n                if (this.lookupType(offset) === WhiteSpace) {\n                    value.children.appendData({\n                        type: 'WhiteSpace',\n                        loc: null,\n                        value: ' '\n                    });\n                    break;\n                }\n            }\n        }\n\n        children.push(value);\n    }\n\n    return children;\n};\n","import getNode from './default.js';\nimport expressionFn from '../function/expression.js';\nimport varFn from '../function/var.js';\n\nfunction isPlusMinusOperator(node) {\n    return (\n        node !== null &&\n        node.type === 'Operator' &&\n        (node.value[node.value.length - 1] === '-' || node.value[node.value.length - 1] === '+')\n    );\n}\n\nexport default {\n    getNode,\n    onWhiteSpace(next, children) {\n        if (isPlusMinusOperator(next)) {\n            next.value = ' ' + next.value;\n        }\n        if (isPlusMinusOperator(children.last)) {\n            children.last.value += ' ';\n        }\n    },\n    'expression': expressionFn,\n    'var': varFn\n};\n","import { Ident } from '../../tokenizer/index.js';\n\n// https://drafts.csswg.org/css-contain-3/#container-rule\n// The keywords `none`, `and`, `not`, and `or` are excluded from the <custom-ident> above.\nconst nonContainerNameKeywords = new Set(['none', 'and', 'not', 'or']);\n\nexport default {\n    parse: {\n        prelude() {\n            const children = this.createList();\n\n            if (this.tokenType === Ident) {\n                const name = this.substring(this.tokenStart, this.tokenEnd);\n\n                if (!nonContainerNameKeywords.has(name.toLowerCase())) {\n                    children.push(this.Identifier());\n                }\n            }\n\n            children.push(this.Condition('container'));\n\n            return children;\n        },\n        block(nested = false) {\n            return this.Block(nested);\n        }\n    }\n};\n","export default {\n    parse: {\n        prelude: null,\n        block() {\n            return this.Block(true);\n        }\n    }\n};\n","import {\n    String as StringToken,\n    Ident,\n    Url,\n    Function as FunctionToken,\n    LeftParenthesis,\n    RightParenthesis\n} from '../../tokenizer/index.js';\n\nfunction parseWithFallback(parse, fallback) {\n    return this.parseWithFallback(\n        () => {\n            try {\n                return parse.call(this);\n            } finally {\n                this.skipSC();\n                if (this.lookupNonWSType(0) !== RightParenthesis) {\n                    this.error();\n                }\n            }\n        },\n        fallback || (() => this.Raw(null, true))\n    );\n}\n\nconst parseFunctions = {\n    layer() {\n        this.skipSC();\n\n        const children = this.createList();\n        const node = parseWithFallback.call(this, this.Layer);\n\n        if (node.type !== 'Raw' || node.value !== '') {\n            children.push(node);\n        }\n\n        return children;\n    },\n    supports() {\n        this.skipSC();\n\n        const children = this.createList();\n        const node = parseWithFallback.call(\n            this,\n            this.Declaration,\n            () => parseWithFallback.call(this, () => this.Condition('supports'))\n        );\n\n        if (node.type !== 'Raw' || node.value !== '') {\n            children.push(node);\n        }\n\n        return children;\n    }\n};\n\nexport default {\n    parse: {\n        prelude() {\n            const children = this.createList();\n\n            switch (this.tokenType) {\n                case StringToken:\n                    children.push(this.String());\n                    break;\n\n                case Url:\n                case FunctionToken:\n                    children.push(this.Url());\n                    break;\n\n                default:\n                    this.error('String or url() is expected');\n            }\n\n            this.skipSC();\n\n            if (this.tokenType === Ident &&\n                this.cmpStr(this.tokenStart, this.tokenEnd, 'layer')) {\n                children.push(this.Identifier());\n            } else if (\n                this.tokenType === FunctionToken &&\n                this.cmpStr(this.tokenStart, this.tokenEnd, 'layer(')\n            ) {\n                children.push(this.Function(null, parseFunctions));\n            }\n\n            this.skipSC();\n\n            if (this.tokenType === FunctionToken &&\n                this.cmpStr(this.tokenStart, this.tokenEnd, 'supports(')) {\n                children.push(this.Function(null, parseFunctions));\n            }\n\n            if (this.lookupNonWSType(0) === Ident ||\n                this.lookupNonWSType(0) === LeftParenthesis) {\n                children.push(this.MediaQueryList());\n            }\n\n            return children;\n        },\n        block: null\n    }\n};\n","import container from './container.js';\nimport fontFace from './font-face.js';\nimport importAtrule from './import.js';\nimport layer from './layer.js';\nimport media from './media.js';\nimport nest from './nest.js';\nimport page from './page.js';\nimport scope from './scope.js';\nimport startingStyle from './starting-style.js';\nimport supports from './supports.js';\n\nexport default {\n    container,\n    'font-face': fontFace,\n    import: importAtrule,\n    layer,\n    media,\n    nest,\n    page,\n    scope,\n    'starting-style': startingStyle,\n    supports\n};\n","export default {\n    parse: {\n        prelude() {\n            return this.createSingleNodeList(\n                this.LayerList()\n            );\n        },\n        block() {\n            return this.Block(false);\n        }\n    }\n};\n","export default {\n    parse: {\n        prelude() {\n            return this.createSingleNodeList(\n                this.MediaQueryList()\n            );\n        },\n        block(nested = false) {\n            return this.Block(nested);\n        }\n    }\n};\n","export default {\n    parse: {\n        prelude() {\n            return this.createSingleNodeList(\n                this.SelectorList()\n            );\n        },\n        block() {\n            return this.Block(true);\n        }\n    }\n};\n","export default {\n    parse: {\n        prelude() {\n            return this.createSingleNodeList(\n                this.SelectorList()\n            );\n        },\n        block() {\n            return this.Block(true);\n        }\n    }\n};\n","export default {\n    parse: {\n        prelude() {\n            return this.createSingleNodeList(\n                this.Scope()\n            );\n        },\n        block(nested = false) {\n            return this.Block(nested);\n        }\n    }\n};\n","export default {\n    parse: {\n        prelude: null,\n        block(nested = false) {\n            return this.Block(nested);\n        }\n    }\n};\n","export default {\n    parse: {\n        prelude() {\n            return this.createSingleNodeList(\n                this.Condition('supports')\n            );\n        },\n        block(nested = false) {\n            return this.Block(nested);\n        }\n    }\n};\n","import { Comma, String as StringToken, Ident, RightParenthesis } from '../../tokenizer/index.js';\n\nexport function parseLanguageRangeList() {\n    const children = this.createList();\n\n    this.skipSC();\n\n    loop: while (!this.eof) {\n        switch (this.tokenType) {\n            case Ident:\n                children.push(this.Identifier());\n                break;\n\n            case StringToken:\n                children.push(this.String());\n                break;\n\n            case Comma:\n                children.push(this.Operator());\n                break;\n\n            case RightParenthesis:\n                break loop;\n\n            default:\n                this.error('Identifier, string or comma is expected');\n        }\n\n        this.skipSC();\n    }\n\n    return children;\n}\n","import { parseLanguageRangeList } from './lang.js';\n\nconst selectorList = {\n    parse() {\n        return this.createSingleNodeList(\n            this.SelectorList()\n        );\n    }\n};\n\nconst selector = {\n    parse() {\n        return this.createSingleNodeList(\n            this.Selector()\n        );\n    }\n};\n\nconst identList = {\n    parse() {\n        return this.createSingleNodeList(\n            this.Identifier()\n        );\n    }\n};\n\nconst langList = {\n    parse: parseLanguageRangeList\n};\n\nconst nth = {\n    parse() {\n        return this.createSingleNodeList(\n            this.Nth()\n        );\n    }\n};\n\nexport default {\n    'dir': identList,\n    'has': selectorList,\n    'lang': langList,\n    'matches': selectorList,\n    'is': selectorList,\n    '-moz-any': selectorList,\n    '-webkit-any': selectorList,\n    'where': selectorList,\n    'not': selectorList,\n    'nth-child': nth,\n    'nth-last-child': nth,\n    'nth-last-of-type': nth,\n    'nth-of-type': nth,\n    'slotted': selector,\n    'host': selector,\n    'host-context': selector\n};\n","import * as scope from '../scope/index.js';\nimport atrule from '../atrule/index.js';\nimport pseudo from '../pseudo/index.js';\nimport * as node from '../node/index-parse.js';\n\nexport default {\n    parseContext: {\n        default: 'StyleSheet',\n        stylesheet: 'StyleSheet',\n        atrule: 'Atrule',\n        atrulePrelude(options) {\n            return this.AtrulePrelude(options.atrule ? String(options.atrule) : null);\n        },\n        mediaQueryList: 'MediaQueryList',\n        mediaQuery: 'MediaQuery',\n        condition(options) {\n            return this.Condition(options.kind);\n        },\n        rule: 'Rule',\n        selectorList: 'SelectorList',\n        selector: 'Selector',\n        block() {\n            return this.Block(true);\n        },\n        declarationList: 'DeclarationList',\n        declaration: 'Declaration',\n        value: 'Value'\n    },\n    features: {\n        supports: {\n            selector() {\n                return this.Selector();\n            }\n        },\n        container: {\n            style() {\n                return this.Declaration();\n            }\n        }\n    },\n    scope,\n    atrule,\n    pseudo,\n    node\n};\n","import * as node from '../node/index.js';\n\nexport default {\n    node\n};\n","import createSyntax from './create.js';\nimport lexerConfig from './config/lexer.js';\nimport parserConfig from './config/parser.js';\nimport walkerConfig from './config/walker.js';\n\nexport default createSyntax({\n    ...lexerConfig,\n    ...parserConfig,\n    ...walkerConfig\n});\n","import { List } from './List.js';\n\nexport function clone(node) {\n    const result = {};\n\n    for (const key of Object.keys(node)) {\n        let value = node[key];\n\n        if (value) {\n            if (Array.isArray(value) || value instanceof List) {\n                value = value.map(clone);\n            } else if (value.constructor === Object) {\n                value = clone(value);\n            }\n        }\n\n        result[key] = value;\n    }\n\n    return result;\n}\n","import syntax from './syntax/index.js';\n\nexport * from './version.js';\nexport { default as createSyntax } from './syntax/create.js';\nexport { List } from './utils/List.js';\nexport { Lexer } from './lexer/Lexer.js';\nexport { tokenTypes, tokenNames, TokenStream } from './tokenizer/index.js';\nexport * as definitionSyntax from './definition-syntax/index.js';\nexport { clone } from './utils/clone.js';\nexport * from './utils/names.js';\nexport * as ident from './utils/ident.js';\nexport * as string from './utils/string.js';\nexport * as url from './utils/url.js';\nexport const {\n    tokenize,\n    parse,\n    generate,\n    lexer,\n    createLexer,\n\n    walk,\n    find,\n    findLast,\n    findAll,\n\n    toPlainObject,\n    fromPlainObject,\n\n    fork\n} = syntax;\n","let urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\nexport let customAlphabet = (alphabet, defaultSize = 21) => {\n  return (size = defaultSize) => {\n    let id = ''\n    let i = size\n    while (i--) {\n      id += alphabet[(Math.random() * alphabet.length) | 0]\n    }\n    return id\n  }\n}\nexport let nanoid = (size = 21) => {\n  let id = ''\n  let i = size\n  while (i--) {\n    id += urlAlphabet[(Math.random() * 64) | 0]\n  }\n  return id\n}\n","import * as csstree from 'css-tree';\nimport { nanoid } from 'nanoid/non-secure';\n\nimport type { Selector } from './dom.js';\n\nexport const INSTANCE_UUID = nanoid();\n\n// https://github.com/import-js/eslint-plugin-import/issues/3019\n// eslint-disable-next-line import/namespace\nexport interface DeclarationWithValue extends csstree.Declaration {\n  value: csstree.Value;\n}\n\nexport function isAnchorFunction(\n  node: csstree.CssNode | null,\n): node is csstree.FunctionNode {\n  return Boolean(node && node.type === 'Function' && node.name === 'anchor');\n}\n\nexport function getAST(cssText: string) {\n  return csstree.parse(cssText, {\n    parseAtrulePrelude: false,\n    parseCustomProperty: true,\n  });\n}\n\nexport function generateCSS(ast: csstree.CssNode) {\n  return csstree.generate(ast, {\n    // Default `safe` adds extra (potentially breaking) spaces for compatibility\n    // with old browsers.\n    mode: 'spec',\n  });\n}\n\nexport function isDeclaration(\n  node: csstree.CssNode,\n): node is DeclarationWithValue {\n  return node.type === 'Declaration';\n}\n\nexport function getDeclarationValue(node: DeclarationWithValue) {\n  return (node.value.children.first as csstree.Identifier).name;\n}\n\nexport interface StyleData {\n  el: HTMLElement;\n  css: string;\n  url?: URL;\n  changed?: boolean;\n}\n\nexport const POSITION_ANCHOR_PROPERTY = `--position-anchor-${INSTANCE_UUID}`;\n\nexport function splitCommaList(list: csstree.List<csstree.CssNode>) {\n  return list.toArray().reduce(\n    (acc: csstree.Identifier[][], child) => {\n      if (child.type === 'Operator' && child.value === ',') {\n        acc.push([]);\n        return acc;\n      }\n      if (child.type === 'Identifier') {\n        acc[acc.length - 1].push(child);\n      }\n\n      return acc;\n    },\n    [[]],\n  );\n}\n\nexport function getSelectors(rule: csstree.SelectorList | undefined) {\n  if (!rule) return [];\n\n  return (rule.children as csstree.List<csstree.Selector>)\n    .map((selector) => {\n      let pseudoElementPart: string | undefined;\n\n      if (selector.children.last?.type === 'PseudoElementSelector') {\n        selector = csstree.clone(selector) as csstree.Selector;\n        pseudoElementPart = generateCSS(selector.children.last!);\n        selector.children.pop();\n      }\n\n      const elementPart = generateCSS(selector);\n\n      return {\n        selector: elementPart + (pseudoElementPart ?? ''),\n        elementPart,\n        pseudoElementPart,\n      } satisfies Selector;\n    })\n    .toArray();\n}\n","import * as csstree from 'css-tree';\n\nimport {\n  generateCSS,\n  getAST,\n  INSTANCE_UUID,\n  isDeclaration,\n  type StyleData,\n} from './utils.js';\n\n/**\n * Map of CSS property to CSS custom property that the property's value is\n * shifted into. This is used to subject properties that are not yet natively\n * supported to the CSS cascade and inheritance rules.\n */\nexport const SHIFTED_PROPERTIES: Record<string, string> = {\n  'position-anchor': `--position-anchor-${INSTANCE_UUID}`,\n  'anchor-scope': `--anchor-scope-${INSTANCE_UUID}`,\n  'anchor-name': `--anchor-name-${INSTANCE_UUID}`,\n  left: `--left-${INSTANCE_UUID}`,\n  right: `--right-${INSTANCE_UUID}`,\n  top: `--top-${INSTANCE_UUID}`,\n  bottom: `--bottom-${INSTANCE_UUID}`,\n  'inset-block-start': `--inset-block-start-${INSTANCE_UUID}`,\n  'inset-block-end': `--inset-block-end-${INSTANCE_UUID}`,\n  'inset-inline-start': `--inset-inline-start-${INSTANCE_UUID}`,\n  'inset-inline-end': `--inset-inline-end-${INSTANCE_UUID}`,\n  'inset-block': `--inset-block-${INSTANCE_UUID}`,\n  'inset-inline': `--inset-inline-${INSTANCE_UUID}`,\n  inset: `--inset-${INSTANCE_UUID}`,\n};\n\n/**\n * Shift property declarations for properties that are not yet natively\n * supported into custom properties.\n */\nfunction shiftUnsupportedProperties(\n  node: csstree.CssNode,\n  block?: csstree.Block,\n) {\n  if (isDeclaration(node) && SHIFTED_PROPERTIES[node.property] && block) {\n    block.children.appendData({\n      ...node,\n      property: SHIFTED_PROPERTIES[node.property],\n    });\n    return { updated: true };\n  }\n  return {};\n}\n\n/**\n * Update the given style data to enable cascading and inheritance of properties\n * that are not yet natively supported.\n */\nexport function cascadeCSS(styleData: StyleData[]) {\n  for (const styleObj of styleData) {\n    let changed = false;\n    const ast = getAST(styleObj.css);\n    csstree.walk(ast, {\n      visit: 'Declaration',\n      enter(node) {\n        const block = this.rule?.block;\n        const { updated } = shiftUnsupportedProperties(node, block);\n        if (updated) {\n          changed = true;\n        }\n      },\n    });\n\n    if (changed) {\n      // Update CSS\n      styleObj.css = generateCSS(ast);\n      styleObj.changed = true;\n    }\n  }\n  return styleData.some((styleObj) => styleObj.changed === true);\n}\n","import { type VirtualElement } from '@floating-ui/dom';\nimport { nanoid } from 'nanoid/non-secure';\n\nimport { SHIFTED_PROPERTIES } from './cascade.js';\n\n/**\n * Representation of a CSS selector that allows getting the element part and\n * pseudo-element part.\n */\nexport interface Selector {\n  selector: string;\n  elementPart: string;\n  pseudoElementPart?: string;\n}\n\n/**\n * Used instead of an HTMLElement as a handle for pseudo-elements.\n */\nexport interface PseudoElement extends VirtualElement {\n  fakePseudoElement: HTMLElement;\n  computedStyle: CSSStyleDeclaration;\n  removeFakePseudoElement(): void;\n}\n\n/**\n * Possible values for `anchor-scope`\n * (in addition to any valid dashed identifier)\n */\nexport const enum AnchorScopeValue {\n  All = 'all',\n  None = 'none',\n}\n\n/**\n * Gets the computed value of a CSS property for an element or pseudo-element.\n *\n * Note: values for properties that are not natively supported are *always*\n * subject to CSS inheritance.\n */\nexport function getCSSPropertyValue(\n  el: HTMLElement | PseudoElement,\n  prop: string,\n) {\n  prop = SHIFTED_PROPERTIES[prop] ?? prop;\n  const computedStyle =\n    el instanceof HTMLElement ? getComputedStyle(el) : el.computedStyle;\n  return computedStyle.getPropertyValue(prop).trim();\n}\n\n/**\n * Checks whether a given element or pseudo-element has the given property\n * value.\n *\n * Note: values for properties that are not natively supported are *always*\n * subject to CSS inheritance.\n */\nexport function hasStyle(\n  element: HTMLElement | PseudoElement,\n  cssProperty: string,\n  value: string,\n) {\n  return getCSSPropertyValue(element, cssProperty) === value;\n}\n\n/**\n * Creates a DOM element to use in place of a pseudo-element.\n */\nfunction createFakePseudoElement(\n  element: HTMLElement,\n  { selector, pseudoElementPart }: Selector,\n) {\n  // Floating UI needs `Element.getBoundingClientRect` to calculate the position\n  // for the anchored element, since there isn't a way to get it for\n  // pseudo-elements; we create a temporary \"fake pseudo-element\" that we use as\n  // reference.\n  const computedStyle = getComputedStyle(element, pseudoElementPart);\n  const fakePseudoElement = document.createElement('div');\n  const sheet = document.createElement('style');\n\n  fakePseudoElement.id = `fake-pseudo-element-${nanoid()}`;\n\n  // Copy styles from pseudo-element to the \"fake pseudo-element\", `.cssText`\n  // does not work on Firefox.\n  for (const property of Array.from(computedStyle)) {\n    const value = computedStyle.getPropertyValue(property);\n    fakePseudoElement.style.setProperty(property, value);\n  }\n\n  // For the `content` property, since normal elements don't have it,\n  // we add the content to a pseudo-element of the \"fake pseudo-element\".\n  sheet.textContent += `#${fakePseudoElement.id}${pseudoElementPart} { content: ${computedStyle.content}; }`;\n  // Hide the pseudo-element while the \"fake pseudo-element\" is visible.\n  sheet.textContent += `${selector} { display: none !important; }`;\n\n  document.head.append(sheet);\n\n  const insertionPoint =\n    pseudoElementPart === '::before' ? 'afterbegin' : 'beforeend';\n  element.insertAdjacentElement(insertionPoint, fakePseudoElement);\n  return { fakePseudoElement, sheet, computedStyle };\n}\n\n/**\n * Finds the first scrollable parent of the given element\n * (or the element itself if the element is scrollable).\n */\nfunction findFirstScrollingElement(element: HTMLElement) {\n  let currentElement: HTMLElement | null = element;\n\n  while (currentElement) {\n    if (hasStyle(currentElement, 'overflow', 'scroll')) {\n      return currentElement;\n    }\n\n    currentElement = currentElement.parentElement;\n  }\n\n  return currentElement;\n}\n\n/**\n * Gets the scroll position of the first scrollable parent\n * (or the scroll position of the element itself, if it is scrollable).\n */\nfunction getContainerScrollPosition(element: HTMLElement) {\n  let containerScrollPosition: {\n    scrollTop: number;\n    scrollLeft: number;\n  } | null = findFirstScrollingElement(element);\n\n  // Avoid doubled scroll\n  if (containerScrollPosition === document.documentElement) {\n    containerScrollPosition = null;\n  }\n\n  return containerScrollPosition ?? { scrollTop: 0, scrollLeft: 0 };\n}\n\n/**\n * Like `document.querySelectorAll`, but if the selector has a pseudo-element it\n * will return a wrapper for the rest of the polyfill to use.\n */\nexport function getElementsBySelector(selector: Selector) {\n  const { elementPart, pseudoElementPart } = selector;\n  const result: (HTMLElement | PseudoElement)[] = [];\n  const isBefore = pseudoElementPart === '::before';\n  const isAfter = pseudoElementPart === '::after';\n\n  // Current we only support `::before` and `::after` pseudo-elements.\n  if (pseudoElementPart && !(isBefore || isAfter)) return result;\n\n  const elements = Array.from(\n    document.querySelectorAll<HTMLElement>(elementPart),\n  );\n\n  if (!pseudoElementPart) {\n    result.push(...elements);\n    return result;\n  }\n\n  for (const element of elements) {\n    const { fakePseudoElement, sheet, computedStyle } = createFakePseudoElement(\n      element,\n      selector,\n    );\n\n    const boundingClientRect = fakePseudoElement.getBoundingClientRect();\n    const { scrollY: startingScrollY, scrollX: startingScrollX } = globalThis;\n    const containerScrollPosition = getContainerScrollPosition(element);\n\n    result.push({\n      fakePseudoElement,\n      computedStyle,\n\n      removeFakePseudoElement() {\n        fakePseudoElement.remove();\n        sheet.remove();\n      },\n\n      // For https://floating-ui.com/docs/autoupdate#ancestorscroll to work on\n      // `VirtualElement`s.\n      contextElement: element,\n\n      // https://floating-ui.com/docs/virtual-elements\n      getBoundingClientRect() {\n        const { scrollY, scrollX } = globalThis;\n        const { scrollTop, scrollLeft } = containerScrollPosition;\n\n        return DOMRect.fromRect({\n          y:\n            boundingClientRect.y +\n            (startingScrollY - scrollY) +\n            (containerScrollPosition.scrollTop - scrollTop),\n          x:\n            boundingClientRect.x +\n            (startingScrollX - scrollX) +\n            (containerScrollPosition.scrollLeft - scrollLeft),\n\n          width: boundingClientRect.width,\n          height: boundingClientRect.height,\n        });\n      },\n    });\n  }\n\n  return result;\n}\n\n/**\n * Checks whether the given element has the given anchor name, based on the\n * element's computed style.\n *\n * Note: because our `--anchor-name` custom property inherits, this function\n * should only be called for elements which are known to have an explicitly set\n * value for `anchor-name`.\n */\nexport function hasAnchorName(\n  el: PseudoElement | HTMLElement,\n  anchorName: string | null,\n) {\n  const computedAnchorName = getCSSPropertyValue(el, 'anchor-name');\n  if (!anchorName) {\n    return !computedAnchorName;\n  }\n  return computedAnchorName\n    .split(',')\n    .map((name) => name.trim())\n    .includes(anchorName);\n}\n\n/**\n * Checks whether the given element serves as a scope for the given anchor.\n *\n * Note: because our `--anchor-scope` custom property inherits, this function\n * should only be called for elements which are known to have an explicitly set\n * value for `anchor-scope`.\n */\nexport function hasAnchorScope(\n  el: PseudoElement | HTMLElement,\n  anchorName: string,\n) {\n  const computedAnchorScope = getCSSPropertyValue(el, 'anchor-scope');\n  return (\n    computedAnchorScope === anchorName ||\n    computedAnchorScope === AnchorScopeValue.All\n  );\n}\n","import { nanoid } from 'nanoid/non-secure';\n\nimport { type StyleData } from './utils.js';\n\nconst INVALID_MIME_TYPE_ERROR = 'InvalidMimeType';\n\nexport function isStyleLink(link: HTMLLinkElement): link is HTMLLinkElement {\n  return Boolean(\n    (link.type === 'text/css' || link.rel === 'stylesheet') && link.href,\n  );\n}\n\nfunction getStylesheetUrl(link: HTMLLinkElement): URL | undefined {\n  const srcUrl = new URL(link.href, document.baseURI);\n  if (isStyleLink(link) && srcUrl.origin === location.origin) {\n    return srcUrl;\n  }\n}\n\nasync function fetchLinkedStylesheets(\n  sources: Partial<StyleData>[],\n): Promise<StyleData[]> {\n  const results = await Promise.all(\n    sources.map(async (data) => {\n      if (!data.url) {\n        return data as StyleData;\n      }\n      // TODO: Add MutationObserver to watch for disabled links being enabled\n      // https://github.com/oddbird/css-anchor-positioning/issues/246\n      if ((data.el as HTMLLinkElement | undefined)?.disabled) {\n        // Do not fetch or parse disabled stylesheets\n        return null;\n      }\n      // fetch css and add to array\n      try {\n        const response = await fetch(data.url.toString());\n        const type = response.headers.get('content-type');\n        if (!type?.startsWith('text/css')) {\n          const error = new Error(\n            `Error loading ${data.url}: expected content-type \"text/css\", got \"${type}\".`,\n          );\n          error.name = INVALID_MIME_TYPE_ERROR;\n          throw error;\n        }\n        const css = await response.text();\n        return { ...data, css } as StyleData;\n      } catch (error) {\n        if (error instanceof Error && error.name === INVALID_MIME_TYPE_ERROR) {\n          // eslint-disable-next-line no-console\n          console.warn(error);\n          return null;\n        }\n        throw error;\n      }\n    }),\n  );\n  return results.filter((loaded) => loaded !== null);\n}\n\nconst ELEMENTS_WITH_INLINE_ANCHOR_STYLES_QUERY = '[style*=\"anchor\"]';\n// Searches for all elements with inline style attributes that include `anchor`.\n// For each element found, adds a new 'data-has-inline-styles' attribute with a\n// random UUID value, and then formats the styles in the same manner as CSS from\n// style tags.\nfunction fetchInlineStyles(elements?: HTMLElement[]) {\n  const elementsWithInlineAnchorStyles: HTMLElement[] = elements\n    ? elements.filter(\n        (el) =>\n          el instanceof HTMLElement &&\n          el.matches(ELEMENTS_WITH_INLINE_ANCHOR_STYLES_QUERY),\n      )\n    : Array.from(\n        document.querySelectorAll(ELEMENTS_WITH_INLINE_ANCHOR_STYLES_QUERY),\n      );\n  const inlineStyles: Partial<StyleData>[] = [];\n\n  elementsWithInlineAnchorStyles\n    .filter((el) => el instanceof HTMLElement)\n    .forEach((el) => {\n      const selector = nanoid(12);\n      const dataAttribute = 'data-has-inline-styles';\n      el.setAttribute(dataAttribute, selector);\n      const styles = el.getAttribute('style');\n      const css = `[${dataAttribute}=\"${selector}\"] { ${styles} }`;\n      inlineStyles.push({ el, css });\n    });\n\n  return inlineStyles;\n}\n\nexport async function fetchCSS(\n  elements?: HTMLElement[],\n  excludeInlineStyles?: boolean,\n): Promise<StyleData[]> {\n  const targetElements: HTMLElement[] =\n    elements ?? Array.from(document.querySelectorAll('link, style'));\n  const sources: Partial<StyleData>[] = [];\n\n  targetElements\n    .filter((el) => el instanceof HTMLElement)\n    .forEach((el) => {\n      if (el.tagName.toLowerCase() === 'link') {\n        const url = getStylesheetUrl(el as HTMLLinkElement);\n        if (url) {\n          sources.push({ el, url });\n        }\n      }\n      if (el.tagName.toLowerCase() === 'style') {\n        sources.push({ el, css: el.innerHTML });\n      }\n    });\n\n  const elementsForInlines = excludeInlineStyles ? (elements ?? []) : undefined;\n\n  const inlines = fetchInlineStyles(elementsForInlines);\n\n  return await fetchLinkedStylesheets([...sources, ...inlines]);\n}\n","// Inset properties\nexport const INSET_PROPS = [\n  'left',\n  'right',\n  'top',\n  'bottom',\n  'inset-block-start',\n  'inset-block-end',\n  'inset-inline-start',\n  'inset-inline-end',\n  'inset-block',\n  'inset-inline',\n  'inset',\n] as const;\n\nexport type InsetProperty = (typeof INSET_PROPS)[number];\n\nexport function isInsetProp(\n  property: string | AnchorSide,\n): property is InsetProperty {\n  return INSET_PROPS.includes(property as InsetProperty);\n}\n\n// Margin properties\nexport const MARGIN_PROPERTIES = [\n  'margin-block-start',\n  'margin-block-end',\n  'margin-block',\n  'margin-inline-start',\n  'margin-inline-end',\n  'margin-inline',\n  'margin-bottom',\n  'margin-left',\n  'margin-right',\n  'margin-top',\n  'margin',\n] as const;\n\nexport type MarginProperty = (typeof MARGIN_PROPERTIES)[number];\n\nexport function isMarginProp(property: string): property is MarginProperty {\n  return MARGIN_PROPERTIES.includes(property as MarginProperty);\n}\n\n// Sizing properties\nexport const SIZING_PROPS = [\n  'width',\n  'height',\n  'min-width',\n  'min-height',\n  'max-width',\n  'max-height',\n  'block-size',\n  'inline-size',\n  'min-block-size',\n  'min-inline-size',\n  'max-block-size',\n  'max-inline-size',\n] as const;\n\nexport type SizingProperty = (typeof SIZING_PROPS)[number];\n\nexport function isSizingProp(property: string): property is SizingProperty {\n  return SIZING_PROPS.includes(property as SizingProperty);\n}\n\n// Self Alignment Properties\nexport const SELF_ALIGNMENT_PROPS = [\n  'justify-self',\n  'align-self',\n  'place-self',\n] as const;\n\nexport type SelfAlignmentProperty = (typeof SELF_ALIGNMENT_PROPS)[number];\n\nexport function isSelfAlignmentProp(\n  property: string,\n): property is SelfAlignmentProperty {\n  return SELF_ALIGNMENT_PROPS.includes(property as SelfAlignmentProperty);\n}\n\n// Accepted position try properties\nexport const ACCEPTED_POSITION_TRY_PROPERTIES = [\n  ...INSET_PROPS,\n  ...MARGIN_PROPERTIES,\n  ...SIZING_PROPS,\n  ...SELF_ALIGNMENT_PROPS,\n  'position-anchor',\n  'position-area',\n] as const;\n\nexport type AcceptedPositionTryProperty =\n  (typeof ACCEPTED_POSITION_TRY_PROPERTIES)[number];\n\n// Anchor Side properties\nexport const ANCHOR_SIDES = [\n  'top',\n  'left',\n  'right',\n  'bottom',\n  'start',\n  'end',\n  'self-start',\n  'self-end',\n  'center',\n];\nexport type AnchorSideKeyword = (typeof ANCHOR_SIDES)[number];\n\nexport type AnchorSide = AnchorSideKeyword | number;\n\nexport function isAnchorSide(property: string): property is AnchorSideKeyword {\n  return ANCHOR_SIDES.includes(property as AnchorSideKeyword);\n}\n\n// Anchor Size\nexport const ANCHOR_SIZES = [\n  'width',\n  'height',\n  'block',\n  'inline',\n  'self-block',\n  'self-inline',\n] as const;\n\nexport type AnchorSize = (typeof ANCHOR_SIZES)[number];\n\nexport function isAnchorSize(property: string): property is AnchorSize {\n  return ANCHOR_SIZES.includes(property as AnchorSize);\n}\n","import * as csstree from 'css-tree';\nimport { nanoid } from 'nanoid/non-secure';\n\nimport { getCSSPropertyValue } from './dom.js';\nimport {\n  type AnchorPosition,\n  type AnchorPositions,\n  isIdentifier,\n  type TryBlock,\n} from './parse.js';\nimport {\n  ACCEPTED_POSITION_TRY_PROPERTIES,\n  type AcceptedPositionTryProperty,\n  type AnchorSideKeyword,\n  isAnchorSide,\n  isInsetProp,\n  isMarginProp,\n  isSelfAlignmentProp,\n  isSizingProp,\n} from './syntax.js';\nimport {\n  type DeclarationWithValue,\n  generateCSS,\n  getAST,\n  getSelectors,\n  INSTANCE_UUID,\n  isAnchorFunction,\n  splitCommaList,\n  type StyleData,\n} from './utils.js';\n\n// https://github.com/import-js/eslint-plugin-import/issues/3019\n// eslint-disable-next-line import/namespace\ninterface AtRuleRaw extends csstree.Atrule {\n  prelude: csstree.Raw | null;\n}\n\n// `key` is the `@position-try` block uuid\n// `value` is the target element selector\ntype FallbackTargets = Record<string, string[]>;\n\ntype Fallbacks = Record<\n  // `key` is a reference to a specific `position-try-fallbacks` value, which\n  // may be a dashed ident name of a `@position-try` rule, or the selector\n  // combined with `try-tactics` and `@position-try` rules.\n  string,\n  // `value` is a block of `@position-try` declarations\n  TryBlock\n>;\n\nconst POSITION_AREA_PROPS = [\n  'left',\n  'center',\n  'right',\n  'span-left',\n  'span-right',\n  'x-start',\n  'x-end',\n  'span-x-start',\n  'span-x-end',\n  'x-self-start',\n  'x-self-end',\n  'span-x-self-start',\n  'span-x-self-end',\n  'span-all',\n  'top',\n  'bottom',\n  'span-top',\n  'span-bottom',\n  'y-start',\n  'y-end',\n  'span-y-start',\n  'span-y-end',\n  'y-self-start',\n  'y-self-end',\n  'span-y-self-start',\n  'span-y-self-end',\n  'block-start',\n  'block-end',\n  'span-block-start',\n  'span-block-end',\n  'inline-start',\n  'inline-end',\n  'span-inline-start',\n  'span-inline-end',\n  'self-block-start',\n  'self-block-end',\n  'span-self-block-start',\n  'span-self-block-end',\n  'self-inline-start',\n  'self-inline-end',\n  'span-self-inline-start',\n  'span-self-inline-end',\n  'start',\n  'end',\n  'span-start',\n  'span-end',\n  'self-start',\n  'self-end',\n  'span-self-start',\n  'span-self-end',\n] as const;\n\ntype PositionAreaProperty = (typeof POSITION_AREA_PROPS)[number];\n\ntype PositionAreaPropertyChunks =\n  | 'left'\n  | 'center'\n  | 'right'\n  | 'span'\n  | 'x'\n  | 'start'\n  | 'end'\n  | 'self'\n  | 'all'\n  | 'top'\n  | 'bottom'\n  | 'y'\n  | 'block'\n  | 'inline';\n\nconst POSITION_TRY_ORDERS = [\n  'normal',\n  'most-width',\n  'most-height',\n  'most-block-size',\n  'most-inline-size',\n] as const;\n\nexport type PositionTryOrder = (typeof POSITION_TRY_ORDERS)[number];\n\nconst POSITION_TRY_TACTICS = [\n  'flip-block',\n  'flip-inline',\n  'flip-start',\n] as const;\n\nexport type PositionTryOptionsTryTactics =\n  (typeof POSITION_TRY_TACTICS)[number];\n\ninterface PositionTryDefTactic {\n  type: 'try-tactic';\n  tactics: PositionTryOptionsTryTactics[];\n}\ninterface PositionTryDefPositionArea {\n  type: 'position-area';\n  positionArea: PositionAreaProperty;\n}\ninterface PositionTryDefAtRule {\n  type: 'at-rule';\n  atRule: csstree.Identifier['name'];\n}\ninterface PositionTryDefAtRuleWithTactic {\n  type: 'at-rule-with-try-tactic';\n  tactics: PositionTryOptionsTryTactics[];\n  atRule: csstree.Identifier['name'];\n}\n\ntype PositionTryObject =\n  | PositionTryDefTactic\n  | PositionTryDefPositionArea\n  | PositionTryDefAtRule\n  | PositionTryDefAtRuleWithTactic;\n\nexport function isPositionAreaProp(\n  property: string | PositionAreaProperty,\n): property is PositionAreaProperty {\n  return POSITION_AREA_PROPS.includes(property as PositionAreaProperty);\n}\n\nfunction isDeclaration(node: csstree.CssNode): node is DeclarationWithValue {\n  return node.type === 'Declaration';\n}\n\nfunction isPositionTryFallbacksDeclaration(\n  node: csstree.CssNode,\n): node is DeclarationWithValue {\n  return (\n    node.type === 'Declaration' && node.property === 'position-try-fallbacks'\n  );\n}\n\nfunction isPositionTryOrderDeclaration(\n  node: csstree.CssNode,\n): node is DeclarationWithValue {\n  return node.type === 'Declaration' && node.property === 'position-try-order';\n}\n\nfunction isPositionTryDeclaration(\n  node: csstree.CssNode,\n): node is DeclarationWithValue {\n  return node.type === 'Declaration' && node.property === 'position-try';\n}\n\nfunction isPositionTryAtRule(node: csstree.CssNode): node is AtRuleRaw {\n  return node.type === 'Atrule' && node.name === 'position-try';\n}\n\nfunction isPositionTryTactic(\n  name: string,\n): name is PositionTryOptionsTryTactics {\n  return POSITION_TRY_TACTICS.includes(name as PositionTryOptionsTryTactics);\n}\n\nfunction isPositionTryOrder(name: string): name is PositionTryOrder {\n  return POSITION_TRY_ORDERS.includes(name as PositionTryOrder);\n}\n\nexport function applyTryTacticsToSelector(\n  selector: string,\n  tactics: PositionTryOptionsTryTactics[],\n) {\n  // todo: This currently only uses the styles from the first match. Each\n  // element may have different styles and need a separate fallback definition.\n  const el: HTMLElement | null = document.querySelector(selector);\n  if (el) {\n    let rules = getExistingInsetRules(el);\n    tactics.forEach((tactic) => {\n      rules = applyTryTacticToBlock(rules, tactic);\n    });\n    return rules;\n  }\n}\nexport function applyTryTacticsToAtRule(\n  block: TryBlock,\n  tactics: PositionTryOptionsTryTactics[],\n) {\n  let rules = block.declarations;\n  tactics.forEach((tactic) => {\n    rules = applyTryTacticToBlock(rules, tactic);\n  });\n  return rules;\n}\n\ntype InsetRules = Partial<Record<AcceptedPositionTryProperty, string>>;\n\nexport function getExistingInsetRules(el: HTMLElement) {\n  const rules: InsetRules = {};\n  ACCEPTED_POSITION_TRY_PROPERTIES.forEach((prop) => {\n    const propVal = getCSSPropertyValue(\n      el as HTMLElement,\n      `--${prop}-${INSTANCE_UUID}`,\n    );\n    if (propVal) {\n      rules[prop] = propVal;\n    }\n  });\n  return rules;\n}\n\nconst tryTacticsPropertyMapping: Record<\n  PositionTryOptionsTryTactics,\n  Partial<Record<AcceptedPositionTryProperty, AcceptedPositionTryProperty>>\n> = {\n  'flip-block': {\n    top: 'bottom',\n    bottom: 'top',\n    'inset-block-start': 'inset-block-end',\n    'inset-block-end': 'inset-block-start',\n    'margin-top': 'margin-bottom',\n    'margin-bottom': 'margin-top',\n  },\n  'flip-inline': {\n    left: 'right',\n    right: 'left',\n    'inset-inline-start': 'inset-inline-end',\n    'inset-inline-end': 'inset-inline-start',\n    'margin-left': 'margin-right',\n    'margin-right': 'margin-left',\n  },\n  'flip-start': {\n    left: 'top',\n    right: 'bottom',\n    top: 'left',\n    bottom: 'right',\n    'inset-block-start': 'inset-block-end',\n    'inset-block-end': 'inset-block-start',\n    'inset-inline-start': 'inset-inline-end',\n    'inset-inline-end': 'inset-inline-start',\n    'inset-block': 'inset-inline',\n    'inset-inline': 'inset-block',\n  },\n};\n\nconst anchorSideMapping: Record<\n  PositionTryOptionsTryTactics,\n  Partial<Record<AnchorSideKeyword, AnchorSideKeyword>>\n> = {\n  'flip-block': {\n    top: 'bottom',\n    bottom: 'top',\n    start: 'end',\n    end: 'start',\n    'self-end': 'self-start',\n    'self-start': 'self-end',\n  },\n  'flip-inline': {\n    left: 'right',\n    right: 'left',\n    start: 'end',\n    end: 'start',\n    'self-end': 'self-start',\n    'self-start': 'self-end',\n  },\n  'flip-start': {\n    top: 'left',\n    left: 'top',\n    right: 'bottom',\n    bottom: 'right',\n  },\n};\n\nconst PositionAreaPropertyMapping: Record<\n  PositionTryOptionsTryTactics,\n  Partial<Record<PositionAreaPropertyChunks, PositionAreaPropertyChunks>>\n> = {\n  'flip-block': {\n    top: 'bottom',\n    bottom: 'top',\n    start: 'end',\n    end: 'start',\n  },\n  'flip-inline': {\n    left: 'right',\n    right: 'left',\n    start: 'end',\n    end: 'start',\n  },\n  'flip-start': {\n    // TODO: Requires fuller logic\n  },\n};\n\nfunction mapProperty(\n  property: AcceptedPositionTryProperty,\n  tactic: PositionTryOptionsTryTactics,\n) {\n  const mapping = tryTacticsPropertyMapping[tactic];\n  return mapping[property] || property;\n}\n\nfunction mapAnchorSide(\n  side: AnchorSideKeyword,\n  tactic: PositionTryOptionsTryTactics,\n) {\n  const mapping = anchorSideMapping[tactic];\n  return mapping[side] || side;\n}\n\nfunction mapPositionArea(\n  prop: PositionAreaProperty,\n  tactic: PositionTryOptionsTryTactics,\n) {\n  if (tactic === 'flip-start') {\n    // TODO: Handle flip-start\n    return prop;\n  } else {\n    const mapping = PositionAreaPropertyMapping[tactic];\n    return prop\n      .split('-')\n      .map((value) => mapping[value as PositionAreaPropertyChunks] || value)\n      .join('-');\n  }\n}\n\nfunction mapMargin(\n  key: string,\n  valueAst: csstree.Value,\n  tactic: PositionTryOptionsTryTactics,\n) {\n  // TODO: Handle flip-start\n  if (key === 'margin') {\n    const [first, second, third, fourth] = valueAst.children.toArray();\n    if (tactic === 'flip-block') {\n      if (fourth) {\n        valueAst.children.fromArray([third, second, first, fourth]);\n      } else if (third) {\n        valueAst.children.fromArray([third, second, first]);\n      } // No change needed for 1 or 2 values\n    } else if (tactic === 'flip-inline') {\n      if (fourth) {\n        valueAst.children.fromArray([first, fourth, third, second]);\n      } // No change needed for 1, 2 or 3 values\n    }\n  } else if (key === 'margin-block') {\n    const [first, second] = valueAst.children.toArray();\n    if (tactic === 'flip-block') {\n      if (second) {\n        valueAst.children.fromArray([second, first]);\n      }\n    }\n  } else if (key === 'margin-inline') {\n    const [first, second] = valueAst.children.toArray();\n    if (tactic === 'flip-inline') {\n      if (second) {\n        valueAst.children.fromArray([second, first]);\n      }\n    }\n  }\n}\n\n// Parses a value into an AST.\nconst getValueAST = (property: string, val: string) => {\n  const ast = getAST(`#id{${property}: ${val};}`) as csstree.Block;\n  const astDeclaration = (ast.children.first as csstree.Rule)?.block.children\n    .first as csstree.Declaration;\n  return astDeclaration.value as csstree.Value;\n};\n\nexport function applyTryTacticToBlock(\n  rules: InsetRules,\n  tactic: PositionTryOptionsTryTactics,\n) {\n  const declarations: TryBlock['declarations'] = {};\n  Object.entries(rules).forEach(([_key, value]) => {\n    const key = _key as AcceptedPositionTryProperty;\n    const valueAst = getValueAST(key, value);\n\n    const newKey = mapProperty(key, tactic);\n\n    // If we're changing the property, revert the original if it hasn't been set.\n    if (newKey !== key) {\n      declarations[key] ??= 'revert';\n    }\n\n    // todo: This does not support percentage anchor-side values, nor anchor\n    // functions that are passed through custom properties.\n    csstree.walk(valueAst, {\n      visit: 'Function',\n      enter(node) {\n        if (isAnchorFunction(node)) {\n          node.children.forEach((item) => {\n            if (isIdentifier(item) && isAnchorSide(item.name)) {\n              item.name = mapAnchorSide(item.name, tactic);\n            }\n          });\n        }\n      },\n    });\n\n    if (key === 'position-area') {\n      valueAst.children.forEach((id) => {\n        if (isIdentifier(id) && isPositionAreaProp(id.name)) {\n          id.name = mapPositionArea(id.name, tactic);\n        }\n      });\n    }\n    if (key.startsWith('margin')) {\n      mapMargin(key, valueAst, tactic);\n    }\n\n    declarations[newKey] = generateCSS(valueAst);\n  });\n  return declarations;\n}\n\nfunction parsePositionTryFallbacks(list: csstree.List<csstree.CssNode>) {\n  const positionOptions = splitCommaList(list);\n  const tryObjects: PositionTryObject[] = [];\n  positionOptions.forEach((option) => {\n    const identifiers: {\n      atRules: PositionTryDefAtRuleWithTactic['atRule'][];\n      tactics: PositionTryOptionsTryTactics[];\n      positionAreas: PositionAreaProperty[];\n    } = {\n      atRules: [],\n      tactics: [],\n      positionAreas: [],\n    };\n    option.forEach((opt) => {\n      if (isPositionTryTactic(opt.name)) identifiers.tactics.push(opt.name);\n      else if (opt.name.startsWith('--')) identifiers.atRules.push(opt.name);\n      else if (isPositionAreaProp(opt.name))\n        identifiers.positionAreas.push(opt.name);\n    });\n    // Position area can not be combined or have multiple\n    if (identifiers.positionAreas.length) {\n      tryObjects.push({\n        positionArea: identifiers.positionAreas[0],\n        type: 'position-area',\n      });\n      // multiple tactics can modify a single at rule\n    } else if (identifiers.atRules.length && identifiers.tactics.length) {\n      tryObjects.push({\n        tactics: identifiers.tactics,\n        atRule: identifiers.atRules[0],\n        type: 'at-rule-with-try-tactic',\n      });\n      // A single at rule\n    } else if (identifiers.atRules.length) {\n      tryObjects.push({\n        atRule: identifiers.atRules[0],\n        type: 'at-rule',\n      });\n      // One or multiple combined try tactics\n    } else if (identifiers.tactics.length) {\n      tryObjects.push({\n        tactics: identifiers.tactics,\n        type: 'try-tactic',\n      });\n    }\n  });\n  return tryObjects;\n}\n\nfunction getPositionTryFallbacksDeclaration(node: csstree.Declaration) {\n  if (isPositionTryFallbacksDeclaration(node) && node.value.children.first) {\n    return parsePositionTryFallbacks(node.value.children);\n  }\n  return [];\n}\n\nexport function getPositionTryDeclaration(node: csstree.Declaration): {\n  order?: PositionTryOrder;\n  options?: PositionTryObject[];\n} {\n  if (isPositionTryDeclaration(node) && node.value.children.first) {\n    const declarationNode = csstree.clone(node) as DeclarationWithValue;\n    let order: PositionTryOrder | undefined;\n    // get potential order\n    const firstName = (\n      declarationNode.value.children.first as csstree.Identifier\n    ).name;\n    if (firstName && isPositionTryOrder(firstName)) {\n      order = firstName;\n      declarationNode.value.children.shift();\n    }\n    const options = parsePositionTryFallbacks(declarationNode.value.children);\n\n    return { order, options };\n  }\n  return {};\n}\n\nfunction getPositionTryOrderDeclaration(node: csstree.Declaration) {\n  if (isPositionTryOrderDeclaration(node) && node.value.children.first) {\n    return {\n      order: (node.value.children.first as csstree.Identifier)\n        .name as PositionTryOrder,\n    };\n  }\n  return {};\n}\n\nexport function getPositionFallbackValues(node: csstree.Declaration): {\n  order?: PositionTryOrder;\n  options?: PositionTryObject[];\n} {\n  const { order, options } = getPositionTryDeclaration(node);\n  if (order || options) {\n    return { order, options };\n  }\n  const { order: orderDeclaration } = getPositionTryOrderDeclaration(node);\n  const optionsNames = getPositionTryFallbacksDeclaration(node);\n  if (orderDeclaration || optionsNames) {\n    return { order: orderDeclaration, options: optionsNames };\n  }\n  return {};\n}\n\n// https://drafts.csswg.org/css-anchor-position-1/#accepted-position-try-properties\nexport function isAcceptedPositionTryProperty(\n  declaration: csstree.Declaration,\n) {\n  return (\n    isInsetProp(declaration.property) ||\n    isMarginProp(declaration.property) ||\n    isSizingProp(declaration.property) ||\n    isSelfAlignmentProp(declaration.property) ||\n    ['position-anchor', 'position-area'].includes(declaration.property)\n  );\n}\n\nexport function getPositionTryRules(node: csstree.Atrule) {\n  if (\n    isPositionTryAtRule(node) &&\n    node.prelude?.value &&\n    node.block?.children\n  ) {\n    const name = node.prelude.value;\n    const declarations = node.block.children.filter(\n      (d): d is DeclarationWithValue =>\n        isDeclaration(d) && isAcceptedPositionTryProperty(d),\n    );\n    const tryBlock: TryBlock = {\n      uuid: `${name}-try-${nanoid(12)}`,\n      declarations: Object.fromEntries(\n        declarations.map((d) => [d.property, generateCSS(d.value)]),\n      ),\n    };\n\n    return { name, tryBlock };\n  }\n  return {};\n}\n\nexport function parsePositionFallbacks(styleData: StyleData[]) {\n  const fallbacks: Fallbacks = {};\n  const fallbackTargets: FallbackTargets = {};\n  const validPositions: AnchorPositions = {};\n\n  // First, find all uses of `@position-try`\n  for (const styleObj of styleData) {\n    const ast = getAST(styleObj.css);\n    csstree.walk(ast, {\n      visit: 'Atrule',\n      enter(node) {\n        // Parse `@position-try` rules\n        const { name, tryBlock } = getPositionTryRules(node);\n        if (name && tryBlock) {\n          // This will override earlier `@position-try` lists with the same\n          // name: (e.g. multiple `@position-try --my-fallback {...}` uses with\n          // the same `--my-fallback` name)\n          fallbacks[name] = tryBlock;\n        }\n      },\n    });\n  }\n\n  // Then, find all `position-try` and related declarations,\n  // and add in block contents (scoped to unique data-attrs)\n  for (const styleObj of styleData) {\n    let changed = false;\n    const fallbacksAdded = new Set();\n    const ast = getAST(styleObj.css);\n    csstree.walk(ast, {\n      visit: 'Declaration',\n      enter(node) {\n        const rule = this.rule?.prelude as csstree.SelectorList | undefined;\n        const selectors = getSelectors(rule);\n        if (!selectors.length) return;\n\n        // Parse `position-try`, `position-try-order`, and\n        // `position-try-fallbacks` declarations\n        const { order, options } = getPositionFallbackValues(node);\n        const anchorPosition: AnchorPosition = {};\n        if (order) {\n          anchorPosition.order = order;\n        }\n        selectors.forEach(({ selector }) => {\n          options?.forEach((tryObject) => {\n            let name;\n            // Apply try fallback\n            if (tryObject.type === 'at-rule') {\n              name = tryObject.atRule;\n            } else if (tryObject.type === 'try-tactic') {\n              // get existing styles and adjust based on the specified tactic\n              name = `${selector}-${tryObject.tactics.join('-')}`;\n              const tacticAppliedRules = applyTryTacticsToSelector(\n                selector,\n                tryObject.tactics,\n              );\n              if (tacticAppliedRules) {\n                // add new item to fallbacks store\n                fallbacks[name] = {\n                  uuid: `${selector}-${tryObject.tactics.join('-')}-try-${nanoid(12)}`,\n                  declarations: tacticAppliedRules,\n                };\n              }\n            } else if (tryObject.type === 'at-rule-with-try-tactic') {\n              // get `@position-try` block styles and adjust based on the tactic\n              name = `${selector}-${tryObject.atRule}-${tryObject.tactics.join('-')}`;\n              const declarations = fallbacks[tryObject.atRule];\n              const tacticAppliedRules = applyTryTacticsToAtRule(\n                declarations,\n                tryObject.tactics,\n              );\n              if (tacticAppliedRules) {\n                // add new item to fallbacks store\n                fallbacks[name] = {\n                  uuid: `${selector}-${tryObject.atRule}-${tryObject.tactics.join('-')}-try-${nanoid(12)}`,\n                  declarations: tacticAppliedRules,\n                };\n              }\n            }\n\n            if (name && fallbacks[name]) {\n              const dataAttr = `[data-anchor-polyfill=\"${fallbacks[name].uuid}\"]`;\n              // Store mapping of data-attr to target selectors\n              fallbackTargets[dataAttr] ??= [];\n              fallbackTargets[dataAttr].push(selector);\n\n              if (!fallbacksAdded.has(name)) {\n                anchorPosition.fallbacks ??= [];\n                anchorPosition.fallbacks.push(fallbacks[name]);\n                fallbacksAdded.add(name);\n\n                // Add `@position-try` block, scoped to a unique data-attr\n                this.stylesheet?.children.prependData({\n                  type: 'Rule',\n                  prelude: {\n                    type: 'Raw',\n                    value: dataAttr,\n                  },\n                  block: {\n                    type: 'Block',\n                    children: new csstree.List<csstree.CssNode>().fromArray(\n                      Object.entries(fallbacks[name].declarations).map(\n                        ([prop, val]) => ({\n                          type: 'Declaration',\n                          important: true,\n                          property: prop,\n                          value: {\n                            type: 'Raw',\n                            value: val,\n                          },\n                        }),\n                      ),\n                    ),\n                  },\n                });\n                changed = true;\n              }\n            }\n          });\n          if (Object.keys(anchorPosition).length > 0) {\n            if (validPositions[selector]) {\n              if (anchorPosition.order) {\n                validPositions[selector].order = anchorPosition.order;\n              }\n              if (anchorPosition.fallbacks) {\n                validPositions[selector].fallbacks ??= [];\n                validPositions[selector].fallbacks.push(\n                  ...anchorPosition.fallbacks,\n                );\n              }\n              //  = {order: anchorPosition.order, fallbacks: [...[validPositions[selector].fallbacks], ...[anchorPosition.fallbacks]]};\n            } else {\n              validPositions[selector] = anchorPosition;\n            }\n          }\n        });\n      },\n    });\n    if (changed) {\n      // Update CSS\n      styleObj.css = generateCSS(ast);\n      styleObj.changed = true;\n    }\n  }\n  return { fallbackTargets, validPositions };\n}\n","import { platform } from '@floating-ui/dom';\n\nimport {\n  getCSSPropertyValue,\n  getElementsBySelector,\n  hasAnchorName,\n  hasAnchorScope,\n  hasStyle,\n  type Selector,\n} from './dom.js';\n\n// Given a target element's containing block (CB) and an anchor element,\n// determines if the anchor element is a descendant of the target CB.\n// An additional check is added to see if the target CB is the anchor,\n// because `.contains()` will return true: \"a node is contained inside itself.\"\n// https://developer.mozilla.org/en-US/docs/Web/API/Node/contains\nfunction isContainingBlockDescendant(\n  containingBlock: Element | Window,\n  anchor: Element,\n): boolean {\n  if (!containingBlock || containingBlock === anchor) {\n    return false;\n  }\n\n  if (isWindow(containingBlock)) {\n    return containingBlock.document.contains(anchor);\n  } else {\n    return containingBlock.contains(anchor);\n  }\n}\n\nfunction isWindow(el: Element | Window | undefined): el is Window {\n  return Boolean(el && el === (el as Window).window);\n}\n\nfunction isFixedPositioned(el: HTMLElement) {\n  return hasStyle(el, 'position', 'fixed');\n}\n\nfunction isAbsolutelyPositioned(el?: HTMLElement | null) {\n  return Boolean(\n    el && (isFixedPositioned(el) || hasStyle(el, 'position', 'absolute')),\n  );\n}\n\nfunction precedes(self: HTMLElement, other: HTMLElement) {\n  return self.compareDocumentPosition(other) & Node.DOCUMENT_POSITION_FOLLOWING;\n}\n\n/** https://drafts.csswg.org/css-display-4/#formatting-context */\nasync function getFormattingContext(element: HTMLElement) {\n  return await platform.getOffsetParent(element);\n}\n\n/** https://drafts.csswg.org/css-display-4/#containing-block */\nasync function getContainingBlock(element: HTMLElement) {\n  if (\n    !['absolute', 'fixed'].includes(getCSSPropertyValue(element, 'position'))\n  ) {\n    return await getFormattingContext(element);\n  }\n\n  let currentParent = element.parentElement;\n\n  while (currentParent) {\n    if (\n      !hasStyle(currentParent, 'position', 'static') &&\n      hasStyle(currentParent, 'display', 'block')\n    ) {\n      return currentParent;\n    }\n\n    currentParent = currentParent.parentElement;\n  }\n\n  return window;\n}\n\n/**\n * Validates that el is a acceptable anchor element for an absolutely positioned\n * element query el\n * https://drafts.csswg.org/css-anchor-position-1/#acceptable-anchor-element\n */\nexport async function isAcceptableAnchorElement(\n  el: HTMLElement,\n  anchorName: string | null,\n  queryEl: HTMLElement,\n  scopeSelector: string | null,\n) {\n  const elContainingBlock = await getContainingBlock(el);\n  const queryElContainingBlock = await getContainingBlock(queryEl);\n\n  // Either el is a descendant of query el’s containing block\n  // or query el’s containing block is the initial containing block.\n  if (\n    !(\n      isContainingBlockDescendant(queryElContainingBlock, el) ||\n      isWindow(queryElContainingBlock)\n    )\n  ) {\n    return false;\n  }\n\n  // If el has the same containing block as query el,\n  // then either el is not absolutely positioned,\n  // or el precedes query el in the tree order.\n  if (\n    elContainingBlock === queryElContainingBlock &&\n    !(!isAbsolutelyPositioned(el) || precedes(el, queryEl))\n  ) {\n    return false;\n  }\n\n  // If el has a different containing block from query el,\n  // then the last containing block in el’s containing block chain\n  // before reaching query el’s containing block\n  // is either not absolutely positioned or precedes query el in the tree order.\n  if (elContainingBlock !== queryElContainingBlock) {\n    let currentCB: Element | Window;\n    const anchorCBchain: (typeof currentCB)[] = [];\n\n    currentCB = elContainingBlock;\n    while (\n      currentCB &&\n      currentCB !== queryElContainingBlock &&\n      currentCB !== window\n    ) {\n      anchorCBchain.push(currentCB);\n      currentCB = await getContainingBlock(currentCB as HTMLElement);\n    }\n    const lastInChain = anchorCBchain[anchorCBchain.length - 1];\n\n    if (\n      lastInChain instanceof HTMLElement &&\n      !(!isAbsolutelyPositioned(lastInChain) || precedes(lastInChain, queryEl))\n    ) {\n      return false;\n    }\n  }\n\n  // el is not in the skipped contents of another element.\n  {\n    let currentParent = el.parentElement;\n\n    while (currentParent) {\n      if (hasStyle(currentParent, 'content-visibility', 'hidden')) {\n        return false;\n      }\n\n      currentParent = currentParent.parentElement;\n    }\n  }\n\n  // el is in scope for query el, per the effects of anchor-scope on query el or\n  // its ancestors.\n  if (\n    anchorName &&\n    scopeSelector &&\n    getScope(el, anchorName, scopeSelector) !==\n      getScope(queryEl, anchorName, scopeSelector)\n  ) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction getScope(\n  element: HTMLElement,\n  anchorName: string,\n  scopeSelector: string,\n) {\n  // Unlike the real `anchor-scope`, our `--anchor-scope` custom property\n  // inherits. We first check that the element matches the scope selector, so we\n  // can be guaranteed that the computed value we read was set explicitly, not\n  // inherited. Then we verify that the specified anchor scope is actually the\n  // one applied by the CSS cascade.\n  while (\n    !(element.matches(scopeSelector) && hasAnchorScope(element, anchorName))\n  ) {\n    if (!element.parentElement) {\n      return null;\n    }\n    element = element.parentElement;\n  }\n  return element;\n}\n\n/**\n * Given a target element and CSS selector(s) for potential anchor element(s),\n * returns the first element that passes validation,\n * or `null` if no valid anchor element is found\n * https://drafts.csswg.org/css-anchor-position-1/#target\n */\nexport async function validatedForPositioning(\n  targetEl: HTMLElement | null,\n  anchorName: string | null,\n  anchorSelectors: Selector[],\n  scopeSelectors: Selector[],\n) {\n  if (\n    !(\n      targetEl instanceof HTMLElement &&\n      anchorSelectors.length &&\n      isAbsolutelyPositioned(targetEl)\n    )\n  ) {\n    return null;\n  }\n\n  const anchorElements = anchorSelectors\n    // Any element that matches a selector that sets the specified `anchor-name`\n    // could be a potential match.\n    .flatMap(getElementsBySelector)\n    // Narrow down the potential match elements to just the ones whose computed\n    // `anchor-name` matches the specified one. This accounts for the\n    // `anchor-name` value that was actually applied by the CSS cascade.\n    .filter((el) => hasAnchorName(el, anchorName));\n\n  // TODO: handle anchor-scope for pseudo-elements.\n  const scopeSelector = scopeSelectors.map((s) => s.selector).join(',') || null;\n\n  for (let index = anchorElements.length - 1; index >= 0; index--) {\n    const anchor = anchorElements[index];\n    const isPseudoElement = 'fakePseudoElement' in anchor;\n\n    if (\n      await isAcceptableAnchorElement(\n        isPseudoElement ? anchor.fakePseudoElement : anchor,\n        anchorName,\n        targetEl,\n        scopeSelector,\n      )\n    ) {\n      if (isPseudoElement) anchor.removeFakePseudoElement();\n\n      return anchor;\n    }\n  }\n\n  return null;\n}\n","import * as csstree from 'css-tree';\nimport { nanoid } from 'nanoid/non-secure';\n\nimport {\n  AnchorScopeValue,\n  getCSSPropertyValue,\n  type PseudoElement,\n  type Selector,\n} from './dom.js';\nimport { parsePositionFallbacks, type PositionTryOrder } from './fallback.js';\nimport {\n  type AcceptedPositionTryProperty,\n  type AnchorSide,\n  type AnchorSize,\n  type InsetProperty,\n  isAnchorSide,\n  isAnchorSize,\n  isInsetProp,\n  isSizingProp,\n  type SizingProperty,\n} from './syntax.js';\nimport {\n  type DeclarationWithValue,\n  generateCSS,\n  getAST,\n  getSelectors,\n  isAnchorFunction,\n  type StyleData,\n} from './utils.js';\nimport { validatedForPositioning } from './validate.js';\n\n// `key` is the `anchor-name` value\n// `value` is an array of all selectors associated with that `anchor-name`\ntype AnchorSelectors = Record<string, Selector[]>;\n\nexport interface AnchorFunction {\n  targetEl?: HTMLElement | null;\n  anchorEl?: HTMLElement | PseudoElement | null;\n  anchorName?: string;\n  anchorSide?: AnchorSide;\n  anchorSize?: AnchorSize;\n  fallbackValue: string;\n  customPropName?: string;\n  uuid: string;\n}\n\n// `key` is the property being declared\n// `value` is the anchor-positioning data for that property\nexport type AnchorFunctionDeclaration = Partial<\n  Record<InsetProperty | SizingProperty, AnchorFunction[]>\n>;\n\n// `key` is the target element selector\n// `value` is an object with all anchor-function declarations on that element\ntype AnchorFunctionDeclarations = Record<string, AnchorFunctionDeclaration>;\n\nexport interface AnchorPosition {\n  declarations?: AnchorFunctionDeclaration;\n  fallbacks?: TryBlock[];\n  order?: PositionTryOrder;\n}\n\n// `key` is the target element selector\n// `value` is an object with all anchor-positioning data for that element\nexport type AnchorPositions = Record<string, AnchorPosition>;\n\nexport interface TryBlock {\n  uuid: string;\n  // `key` is the property being declared\n  // `value` is the property value\n  declarations: Partial<Record<AcceptedPositionTryProperty, string>>;\n}\n\nfunction isAnchorNameDeclaration(\n  node: csstree.CssNode,\n): node is DeclarationWithValue {\n  return node.type === 'Declaration' && node.property === 'anchor-name';\n}\n\nfunction isAnchorScopeDeclaration(\n  node: csstree.CssNode,\n): node is DeclarationWithValue {\n  return node.type === 'Declaration' && node.property === 'anchor-scope';\n}\n\nfunction isAnchorSizeFunction(\n  node: csstree.CssNode | null,\n): node is csstree.FunctionNode {\n  return Boolean(\n    node && node.type === 'Function' && node.name === 'anchor-size',\n  );\n}\n\nfunction isVarFunction(\n  node: csstree.CssNode | null,\n): node is csstree.FunctionNode {\n  return Boolean(node && node.type === 'Function' && node.name === 'var');\n}\n\nexport function isIdentifier(\n  node: csstree.CssNode,\n): node is csstree.Identifier {\n  return Boolean(node.type === 'Identifier' && node.name);\n}\n\nfunction isPercentage(node: csstree.CssNode): node is csstree.Percentage {\n  return Boolean(node.type === 'Percentage' && node.value);\n}\n\nfunction parseAnchorFn(\n  node: csstree.FunctionNode,\n  replaceCss?: boolean,\n): AnchorFunction {\n  let anchorName: string | undefined,\n    anchorSide: AnchorSide | undefined,\n    anchorSize: AnchorSize | undefined,\n    fallbackValue = '',\n    foundComma = false,\n    customPropName: string | undefined;\n\n  const args: csstree.CssNode[] = [];\n  node.children.toArray().forEach((child) => {\n    if (foundComma) {\n      fallbackValue = `${fallbackValue}${generateCSS(child)}`;\n      return;\n    }\n    if (child.type === 'Operator' && child.value === ',') {\n      foundComma = true;\n      return;\n    }\n    args.push(child);\n  });\n\n  let [name, sideOrSize]: (csstree.CssNode | undefined)[] = args;\n  if (!sideOrSize) {\n    // If we only have one argument assume it is the (required) anchor-side/size\n    sideOrSize = name;\n    name = undefined;\n  }\n  if (name) {\n    if (isIdentifier(name) && name.name.startsWith('--')) {\n      // Store anchor name\n      anchorName = name.name;\n    } else if (isVarFunction(name) && name.children.first) {\n      // Store CSS custom prop for anchor name\n      customPropName = (name.children.first as csstree.Identifier).name;\n    }\n  }\n  if (sideOrSize) {\n    if (isAnchorFunction(node)) {\n      if (isIdentifier(sideOrSize) && isAnchorSide(sideOrSize.name)) {\n        anchorSide = sideOrSize.name;\n      } else if (isPercentage(sideOrSize)) {\n        const number = Number(sideOrSize.value);\n        anchorSide = Number.isNaN(number) ? undefined : number;\n      }\n    } else if (\n      isAnchorSizeFunction(node) &&\n      isIdentifier(sideOrSize) &&\n      isAnchorSize(sideOrSize.name)\n    ) {\n      anchorSize = sideOrSize.name;\n    }\n  }\n\n  const uuid = `--anchor-${nanoid(12)}`;\n  if (replaceCss) {\n    // Replace anchor function with unique CSS custom property.\n    // This allows us to update the value of the new custom property\n    // every time the position changes.\n    Object.assign(node, {\n      type: 'Raw',\n      value: `var(${uuid})`,\n      children: null,\n    });\n    Reflect.deleteProperty(node, 'name');\n  }\n\n  return {\n    anchorName,\n    anchorSide,\n    anchorSize,\n    fallbackValue: fallbackValue || '0px',\n    customPropName,\n    uuid,\n  };\n}\n\nfunction getAnchorNames(node: DeclarationWithValue) {\n  return (node.value.children as csstree.List<csstree.Identifier>).map(\n    ({ name }) => name,\n  );\n}\n\nlet anchorNames: AnchorSelectors = {};\nlet anchorScopes: AnchorSelectors = {};\n// Mapping of custom property names, to anchor function data objects referenced\n// in their values\nlet customPropAssignments: Record<string, AnchorFunction[]> = {};\n// Mapping of custom property names, to the original values that have been\n// replaced in the CSS\nlet customPropOriginals: Record<string, string> = {};\n// Top-level key (`uuid`) is the original uuid to find in the updated CSS\n// - `key` (`propUuid`) is the new property-specific uuid to append to the\n//   original custom property name\n// - `value` is the new property-specific custom property value to use\nlet customPropReplacements: Record<string, Record<string, string>> = {};\n\n// Objects are declared at top-level to keep code cleaner,\n// but we reset them on every `parseCSS()` call\n// to prevent data leaking from one call to another.\nfunction resetStores() {\n  anchorNames = {};\n  anchorScopes = {};\n  customPropAssignments = {};\n  customPropOriginals = {};\n  customPropReplacements = {};\n}\n\nfunction getAnchorFunctionData(\n  node: csstree.CssNode,\n  declaration: csstree.Declaration | null,\n) {\n  if ((isAnchorFunction(node) || isAnchorSizeFunction(node)) && declaration) {\n    if (declaration.property.startsWith('--')) {\n      const original = generateCSS(declaration.value);\n      const data = parseAnchorFn(node, true);\n      // Store the original anchor function so that we can restore it later\n      customPropOriginals[data.uuid] = original;\n      customPropAssignments[declaration.property] = [\n        ...(customPropAssignments[declaration.property] ?? []),\n        data,\n      ];\n      return { changed: true };\n    }\n    if (\n      isInsetProp(declaration.property) ||\n      isSizingProp(declaration.property)\n    ) {\n      const data = parseAnchorFn(node, true);\n      return { prop: declaration.property, data, changed: true };\n    }\n  }\n  return {};\n}\n\nasync function getAnchorEl(\n  targetEl: HTMLElement | null,\n  anchorObj: AnchorFunction,\n) {\n  let anchorName = anchorObj.anchorName;\n  const customPropName = anchorObj.customPropName;\n  if (targetEl && !anchorName) {\n    const positionAnchorProperty = getCSSPropertyValue(\n      targetEl,\n      'position-anchor',\n    );\n\n    if (positionAnchorProperty) {\n      anchorName = positionAnchorProperty;\n    } else if (customPropName) {\n      anchorName = getCSSPropertyValue(targetEl, customPropName);\n    }\n  }\n  const anchorSelectors = anchorName ? anchorNames[anchorName] || [] : [];\n  const allScopeSelectors = anchorName\n    ? anchorScopes[AnchorScopeValue.All] || []\n    : [];\n  const anchorNameScopeSelectors = anchorName\n    ? anchorScopes[anchorName] || []\n    : [];\n  return await validatedForPositioning(\n    targetEl,\n    anchorName || null,\n    anchorSelectors,\n    [...allScopeSelectors, ...anchorNameScopeSelectors],\n  );\n}\n\nexport async function parseCSS(styleData: StyleData[]) {\n  const anchorFunctions: AnchorFunctionDeclarations = {};\n  resetStores();\n\n  // Parse `position-try` and related declarations/rules\n  const { fallbackTargets, validPositions } = parsePositionFallbacks(styleData);\n\n  for (const styleObj of styleData) {\n    let changed = false;\n    const ast = getAST(styleObj.css);\n    csstree.walk(ast, function (node) {\n      const rule = this.rule?.prelude as csstree.SelectorList | undefined;\n      const selectors = getSelectors(rule);\n\n      // Parse `anchor-name` declaration\n      if (isAnchorNameDeclaration(node) && selectors.length) {\n        for (const name of getAnchorNames(node)) {\n          anchorNames[name] ??= [];\n          anchorNames[name].push(...selectors);\n        }\n      }\n\n      // Parse `anchor-scope` declarations\n      if (isAnchorScopeDeclaration(node) && selectors.length) {\n        for (const name of getAnchorNames(node)) {\n          anchorScopes[name] ??= [];\n          anchorScopes[name].push(...selectors);\n        }\n      }\n\n      // Parse `anchor()` function\n      const {\n        prop,\n        data,\n        changed: updated,\n      } = getAnchorFunctionData(node, this.declaration);\n      if (prop && data && selectors.length) {\n        // This will override earlier declarations\n        // with the same exact rule selector\n        // *and* the same exact declaration property:\n        // (e.g. multiple `top: anchor(...)` declarations\n        // for the same `.foo {...}` selector)\n        for (const { selector } of selectors) {\n          anchorFunctions[selector] = {\n            ...anchorFunctions[selector],\n            [prop]: [...(anchorFunctions[selector]?.[prop] ?? []), data],\n          };\n        }\n      }\n      if (updated) {\n        changed = true;\n      }\n    });\n    if (changed) {\n      // Update CSS\n      styleObj.css = generateCSS(ast);\n      styleObj.changed = true;\n    }\n  }\n\n  // List of CSS custom properties that include anchor fns\n  const customPropsToCheck = new Set(Object.keys(customPropAssignments));\n  // Mapping of a custom property name, to the name(s) and uuid(s) of other\n  // custom properties \"up\" the chain that contain (eventually) a reference to\n  // an anchor function\n  const customPropsMapping: Record<\n    // custom property name\n    string,\n    // other custom property name(s) and uuid(s) referenced by this custom prop\n    { names: string[]; uuids: string[] }\n  > = {};\n\n  // Find (recursively) anchor data assigned to another custom property, and\n  // that custom property is referenced by (i.e. passed through) the given\n  // custom property\n  const getReferencedFns = (prop: string) => {\n    const referencedFns: AnchorFunction[] = [];\n    const ancestorProps = new Set(customPropsMapping[prop]?.names ?? []);\n    while (ancestorProps.size > 0) {\n      for (const prop of ancestorProps) {\n        referencedFns.push(...(customPropAssignments[prop] ?? []));\n        ancestorProps.delete(prop);\n        if (customPropsMapping[prop]?.names?.length) {\n          // Continue checking recursively \"up\" the chain of custom properties\n          customPropsMapping[prop].names.forEach((n) => ancestorProps.add(n));\n        }\n      }\n    }\n    return referencedFns;\n  };\n\n  // First find where CSS custom properties are used in other custom properties\n  while (customPropsToCheck.size > 0) {\n    const toCheckAgain: string[] = [];\n    for (const styleObj of styleData) {\n      let changed = false;\n      const ast = getAST(styleObj.css);\n      csstree.walk(ast, {\n        visit: 'Function',\n        enter(node) {\n          const rule = this.rule?.prelude as csstree.SelectorList | undefined;\n          const declaration = this.declaration;\n          const prop = declaration?.property;\n          if (\n            rule?.children.isEmpty === false &&\n            isVarFunction(node) &&\n            declaration &&\n            prop &&\n            node.children.first &&\n            customPropsToCheck.has(\n              (node.children.first as csstree.Identifier).name,\n            ) &&\n            // For now, we only want assignments to other CSS custom properties\n            prop.startsWith('--')\n          ) {\n            const child = node.children.first as csstree.Identifier;\n            // Find anchor data assigned to this custom property\n            const anchorFns = customPropAssignments[child.name] ?? [];\n            // Find anchor data assigned to another custom property referenced\n            // by this custom property (recursively)\n            const referencedFns = getReferencedFns(child.name);\n\n            // Return if there are no anchor fns related to this custom property\n            if (!(anchorFns.length || referencedFns.length)) {\n              return;\n            }\n\n            // An anchor fn was assigned to a custom property, which is\n            // now being re-assigned to another custom property...\n            const uuid = `${child.name}-anchor-${nanoid(12)}`;\n            // Store the original declaration so that we can restore it later\n            const original = generateCSS(declaration.value);\n            customPropOriginals[uuid] = original;\n            // Store a mapping of the new property to the original property\n            // name, as well as the unique uuid(s) temporarily used to replace\n            // the original property value.\n            if (!customPropsMapping[prop]) {\n              customPropsMapping[prop] = { names: [], uuids: [] };\n            }\n            const mapping = customPropsMapping[prop];\n            if (!mapping.names.includes(child.name)) {\n              mapping.names.push(child.name);\n            }\n            mapping.uuids.push(uuid);\n            // Note that we need to do another pass of the CSS looking for\n            // usage of the new property name:\n            toCheckAgain.push(prop);\n            // Temporarily replace the original property with a new unique key\n            child.name = uuid;\n            changed = true;\n          }\n        },\n      });\n      if (changed) {\n        // Update CSS\n        styleObj.css = generateCSS(ast);\n        styleObj.changed = true;\n      }\n    }\n    customPropsToCheck.clear();\n    toCheckAgain.forEach((s) => customPropsToCheck.add(s));\n  }\n\n  // Then find where CSS custom properties are used in inset/sizing properties:\n  for (const styleObj of styleData) {\n    let changed = false;\n    const ast = getAST(styleObj.css);\n    csstree.walk(ast, {\n      visit: 'Function',\n      enter(node) {\n        const rule = this.rule?.prelude as csstree.SelectorList | undefined;\n        const declaration = this.declaration;\n        const prop = declaration?.property;\n\n        if (\n          rule?.children.isEmpty === false &&\n          isVarFunction(node) &&\n          declaration &&\n          prop &&\n          node.children.first &&\n          // Now we only want assignments to inset/sizing properties\n          (isInsetProp(prop) || isSizingProp(prop))\n        ) {\n          const child = node.children.first as csstree.Identifier;\n          // Find anchor data assigned to this custom property\n          const anchorFns = customPropAssignments[child.name] ?? [];\n          // Find anchor data assigned to another custom property referenced\n          // by this custom property (recursively)\n          const referencedFns = getReferencedFns(child.name);\n\n          // Return if there are no anchor fns related to this custom property\n          if (!(anchorFns.length || referencedFns.length)) {\n            return;\n          }\n\n          /*\n            An anchor (or anchor-size) fn was assigned to an inset (or sizing)\n            property.\n\n            It's possible that there are multiple uses of the same CSS\n            custom property name, with different anchor function calls\n            assigned to them. Instead of trying to figure out which one has\n            cascaded to the given location, we iterate over all anchor\n            functions that were assigned to the given CSS custom property\n            name. For each one, we add a new custom prop with the value\n            for that target and inset/sizing property, and let CSS determine\n            which one cascades down to where it's used.\n\n            For example, this:\n\n              .one {\n                --center: anchor(--anchor-name 50%);\n              }\n\n              .two {\n                --center: anchor(--anchor-name 100%);\n              }\n\n              #target {\n                top: var(--center);\n              }\n\n            Becomes this:\n\n              .one {\n                --center-top-EnmDEkZ5mBLp: var(--anchor-aPyy7qLK9f38-top);\n                --center: anchor(--anchor-name 50%);\n              }\n\n              .two {\n                --center-top-EnmDEkZ5mBLp: var(--anchor-SgrF5vARDf6H-top);\n                --center: anchor(--anchor-name 100%);\n              }\n\n              #target {\n                top: var(--center-top-EnmDEkZ5mBLp);\n              }\n          */\n          const propUuid = `${prop}-${nanoid(12)}`;\n\n          // If this is a custom property which was assigned a value from\n          // another custom property (and not a direct reference to an anchor\n          // fn), we want to replace the reference to its \"parent\" property with\n          // a direct reference to the resolved value of the parent property for\n          // this given inset/sizing property (e.g. top or width). We do this\n          // recursively back up the chain of references...\n          if (referencedFns.length) {\n            const ancestorProps = new Set([child.name]);\n            while (ancestorProps.size > 0) {\n              for (const propToCheck of ancestorProps) {\n                const mapping = customPropsMapping[propToCheck];\n                if (mapping?.names?.length && mapping?.uuids?.length) {\n                  for (const name of mapping.names) {\n                    for (const uuid of mapping.uuids) {\n                      // Top-level key (`uuid`) is the original uuid to find in\n                      // the updated CSS\n                      customPropReplacements[uuid] = {\n                        ...customPropReplacements[uuid],\n                        // - `key` (`propUuid`) is the property-specific\n                        //   uuid to append to the new custom property name\n                        // - `value` is the new property-specific custom\n                        //   property value to use\n                        [propUuid]: `${name}-${propUuid}`,\n                      };\n                    }\n                  }\n                }\n                ancestorProps.delete(propToCheck);\n                // Check (recursively) for custom properties up the chain...\n                if (mapping?.names?.length) {\n                  mapping.names.forEach((n) => ancestorProps.add(n));\n                }\n              }\n            }\n          }\n\n          // When `anchor()` is used multiple times in different inset/sizing\n          // properties, the value will be different each time. So we append\n          // the property to the uuid, and update the CSS property to point\n          // to the new uuid...\n          const selectors = getSelectors(rule);\n\n          for (const anchorFnData of [...anchorFns, ...referencedFns]) {\n            const data = { ...anchorFnData };\n            const uuidWithProp = `--anchor-${nanoid(12)}-${prop}`;\n            const uuid = data.uuid;\n            data.uuid = uuidWithProp;\n\n            for (const { selector } of selectors) {\n              anchorFunctions[selector] = {\n                ...anchorFunctions[selector],\n                [prop]: [...(anchorFunctions[selector]?.[prop] ?? []), data],\n              };\n            }\n            // Store new name with declaration prop appended,\n            // so that we can go back and update the original custom\n            // property value...\n            // Top-level key (`uuid`) is the original uuid to find in\n            // the updated CSS:\n            customPropReplacements[uuid] = {\n              ...customPropReplacements[uuid],\n              // - `key` (`propUuid`) is the property-specific\n              //   uuid to append to the new custom property name\n              // - `value` is the new property-specific custom\n              //   property value to use\n              [propUuid]: uuidWithProp,\n            };\n          }\n          // Update CSS property to new name with declaration prop added\n          child.name = `${child.name}-${propUuid}`;\n          changed = true;\n        }\n      },\n    });\n    if (changed) {\n      // Update CSS\n      styleObj.css = generateCSS(ast);\n      styleObj.changed = true;\n    }\n  }\n\n  // Add new CSS custom properties, and restore original values of\n  // previously-replaced custom properties\n  if (Object.keys(customPropReplacements).length > 0) {\n    for (const styleObj of styleData) {\n      let changed = false;\n      const ast = getAST(styleObj.css);\n      csstree.walk(ast, {\n        visit: 'Function',\n        enter(node) {\n          if (\n            isVarFunction(node) &&\n            (node.children.first as csstree.Identifier)?.name?.startsWith(\n              '--',\n            ) &&\n            this.declaration?.property?.startsWith('--') &&\n            this.block\n          ) {\n            const child = node.children.first as csstree.Identifier;\n            const positions = customPropReplacements[child.name];\n            if (positions) {\n              for (const [propUuid, value] of Object.entries(positions)) {\n                // Add new property-specific declarations\n                this.block.children.appendData({\n                  type: 'Declaration',\n                  important: false,\n                  property: `${this.declaration.property}-${propUuid}`,\n                  value: {\n                    type: 'Raw',\n                    value: generateCSS(this.declaration.value).replace(\n                      `var(${child.name})`,\n                      `var(${value})`,\n                    ),\n                  },\n                });\n                changed = true;\n              }\n            }\n            if (customPropOriginals[child.name]) {\n              // Restore original (now unused) CSS custom property value\n              this.declaration.value = {\n                type: 'Raw',\n                value: customPropOriginals[child.name],\n              };\n              changed = true;\n            }\n          }\n        },\n      });\n      if (changed) {\n        // Update CSS\n        styleObj.css = generateCSS(ast);\n        styleObj.changed = true;\n      }\n    }\n  }\n\n  // Store inline style custom property mappings for each target element\n  const inlineStyles = new Map<HTMLElement, Record<string, string>>();\n  // Store any `anchor()` fns\n  for (const [targetSel, anchorFns] of Object.entries(anchorFunctions)) {\n    let targets: NodeListOf<HTMLElement>;\n    if (\n      targetSel.startsWith('[data-anchor-polyfill=') &&\n      fallbackTargets[targetSel]?.length\n    ) {\n      // If we're dealing with a `@position-try` block,\n      // then the targets are places where that `position-fallback` is used.\n      targets = document.querySelectorAll(fallbackTargets[targetSel].join(','));\n    } else {\n      targets = document.querySelectorAll(targetSel);\n    }\n    for (const [targetProperty, anchorObjects] of Object.entries(anchorFns) as [\n      InsetProperty | SizingProperty,\n      AnchorFunction[],\n    ][]) {\n      for (const anchorObj of anchorObjects) {\n        for (const targetEl of targets) {\n          // For every target element, find a valid anchor element\n          const anchorEl = await getAnchorEl(targetEl, anchorObj);\n          const uuid = `--anchor-${nanoid(12)}`;\n          // Store new mapping, in case inline styles have changed and will\n          // be overwritten -- in which case new mappings will be re-added\n          inlineStyles.set(targetEl, {\n            ...(inlineStyles.get(targetEl) ?? {}),\n            [anchorObj.uuid]: uuid,\n          });\n          // Point original uuid to new uuid\n          targetEl.setAttribute(\n            'style',\n            `${anchorObj.uuid}: var(${uuid}); ${\n              targetEl.getAttribute('style') ?? ''\n            }`,\n          );\n          // Populate new data for each anchor/target combo\n          validPositions[targetSel] = {\n            ...validPositions[targetSel],\n            declarations: {\n              ...validPositions[targetSel]?.declarations,\n              [targetProperty]: [\n                ...(validPositions[targetSel]?.declarations?.[\n                  targetProperty as InsetProperty\n                ] ?? []),\n                { ...anchorObj, anchorEl, targetEl, uuid },\n              ],\n            },\n          };\n        }\n      }\n    }\n  }\n\n  return { rules: validPositions, inlineStyles, anchorScopes };\n}\n","import { type StyleData } from './utils.js';\n\nconst excludeAttributes = [\n  'crossorigin',\n  'href',\n  'integrity',\n  'referrerpolicy',\n];\n\nexport async function transformCSS(\n  styleData: StyleData[],\n  inlineStyles?: Map<HTMLElement, Record<string, string>>,\n  cleanup = false,\n) {\n  const updatedStyleData: StyleData[] = [];\n  for (const { el, css, changed } of styleData) {\n    const updatedObject: StyleData = { el, css, changed: false };\n    if (changed) {\n      if (el.tagName.toLowerCase() === 'style') {\n        // Handle inline stylesheets\n        el.innerHTML = css;\n      } else if (el instanceof HTMLLinkElement) {\n        // Create new link\n        const blob = new Blob([css], { type: 'text/css' });\n        const url = URL.createObjectURL(blob);\n        const link = document.createElement('link');\n        for (const name of el.getAttributeNames()) {\n          if (!name.startsWith('on') && !excludeAttributes.includes(name)) {\n            const attr = el.getAttribute(name);\n            if (attr !== null) {\n              link.setAttribute(name, attr);\n            }\n          }\n        }\n        link.setAttribute('href', url);\n        const promise = new Promise((res) => {\n          link.onload = res;\n        });\n        el.insertAdjacentElement('beforebegin', link);\n        // Wait for new stylesheet to be loaded\n        await promise;\n        el.remove();\n        updatedObject.el = link;\n      } else if (el.hasAttribute('data-has-inline-styles')) {\n        // Handle inline styles\n        const attr = el.getAttribute('data-has-inline-styles');\n        if (attr) {\n          const pre = `[data-has-inline-styles=\"${attr}\"]{`;\n          const post = `}`;\n          let styles = css.slice(pre.length, 0 - post.length);\n          // Check for custom anchor-element mapping, so it is not overwritten\n          // when inline styles are updated\n          const mappings = inlineStyles?.get(el);\n          if (mappings) {\n            for (const [key, val] of Object.entries(mappings)) {\n              styles = `${key}: var(${val}); ${styles}`;\n            }\n          }\n          el.setAttribute('style', styles);\n        }\n      }\n    }\n    // Remove no-longer-needed data-attribute\n    if (cleanup && el.hasAttribute('data-has-inline-styles')) {\n      el.removeAttribute('data-has-inline-styles');\n    }\n    updatedStyleData.push(updatedObject);\n  }\n  return updatedStyleData;\n}\n","import {\n  autoUpdate,\n  detectOverflow,\n  type MiddlewareState,\n  platform,\n  type Rect,\n  type VirtualElement,\n} from '@floating-ui/dom';\n\nimport { cascadeCSS } from './cascade.js';\nimport { getCSSPropertyValue } from './dom.js';\nimport { fetchCSS } from './fetch.js';\nimport {\n  type AnchorFunction,\n  type AnchorFunctionDeclaration,\n  type AnchorPositions,\n  parseCSS,\n  type TryBlock,\n} from './parse.js';\nimport {\n  type AnchorSide,\n  type AnchorSize,\n  type InsetProperty,\n  isInsetProp,\n  isSizingProp,\n  type SizingProperty,\n} from './syntax.js';\nimport { transformCSS } from './transform.js';\n\nconst platformWithCache = { ...platform, _c: new Map() };\n\nconst getOffsetParent = async (el: HTMLElement) => {\n  let offsetParent = await platform.getOffsetParent?.(el);\n  if (!(await platform.isElement?.(offsetParent))) {\n    offsetParent =\n      (await platform.getDocumentElement?.(el)) ||\n      window.document.documentElement;\n  }\n  return offsetParent as HTMLElement;\n};\n\nexport const resolveLogicalSideKeyword = (side: AnchorSide, rtl: boolean) => {\n  let percentage: number | undefined;\n  switch (side) {\n    case 'start':\n    case 'self-start':\n      percentage = 0;\n      break;\n    case 'end':\n    case 'self-end':\n      percentage = 100;\n      break;\n    default:\n      if (typeof side === 'number' && !Number.isNaN(side)) {\n        percentage = side;\n      }\n  }\n  if (percentage !== undefined) {\n    return rtl ? 100 - percentage : percentage;\n  }\n  return undefined;\n};\n\nexport const resolveLogicalSizeKeyword = (\n  size: AnchorSize,\n  vertical: boolean,\n) => {\n  let resolved: 'width' | 'height' | undefined;\n  switch (size) {\n    case 'block':\n    case 'self-block':\n      resolved = vertical ? 'width' : 'height';\n      break;\n    case 'inline':\n    case 'self-inline':\n      resolved = vertical ? 'height' : 'width';\n      break;\n  }\n  return resolved;\n};\n\n// This should also check the writing-mode\n// See:\n// https://github.com/oddbird/css-anchor-positioning/pull/22#discussion_r966348526\n// https://trello.com/c/KnqCnHx3\nexport const getAxis = (position?: string) => {\n  switch (position) {\n    case 'top':\n    case 'bottom':\n      return 'y';\n    case 'left':\n    case 'right':\n      return 'x';\n  }\n  return null;\n};\n\nexport const getAxisProperty = (axis: 'x' | 'y' | null) => {\n  switch (axis) {\n    case 'x':\n      return 'width';\n    case 'y':\n      return 'height';\n  }\n  return null;\n};\n\nconst isInline = (el: HTMLElement) =>\n  getCSSPropertyValue(el, 'display') === 'inline';\n\nconst getBorders = (el: HTMLElement, axis: 'x' | 'y') => {\n  const props =\n    axis === 'x'\n      ? ['border-left-width', 'border-right-width']\n      : ['border-top-width', 'border-bottom-width'];\n  return (\n    props.reduce(\n      (total, prop) => total + parseInt(getCSSPropertyValue(el, prop), 10),\n      0,\n    ) || 0\n  );\n};\n\nconst getMargin = (el: HTMLElement, dir: 'top' | 'right' | 'bottom' | 'left') =>\n  parseInt(getCSSPropertyValue(el, `margin-${dir}`), 10) || 0;\n\nconst getMargins = (el: HTMLElement) => {\n  return {\n    top: getMargin(el, 'top'),\n    right: getMargin(el, 'right'),\n    bottom: getMargin(el, 'bottom'),\n    left: getMargin(el, 'left'),\n  };\n};\n\nexport interface GetPixelValueOpts {\n  targetEl?: HTMLElement;\n  targetProperty: InsetProperty | SizingProperty;\n  anchorRect?: Rect;\n  anchorSide?: AnchorSide;\n  anchorSize?: AnchorSize;\n  fallback: string;\n}\n\nexport const getPixelValue = async ({\n  targetEl,\n  targetProperty,\n  anchorRect,\n  anchorSide,\n  anchorSize,\n  fallback,\n}: GetPixelValueOpts) => {\n  if (!((anchorSize || anchorSide !== undefined) && targetEl && anchorRect)) {\n    return fallback;\n  }\n  if (anchorSize) {\n    // anchor-size() can only be assigned to sizing properties:\n    // https://drafts.csswg.org/css-anchor-1/#queries\n    if (!isSizingProp(targetProperty)) {\n      return fallback;\n    }\n    // Calculate value for `anchor-size()` fn...\n    let size: AnchorSize | undefined;\n    switch (anchorSize) {\n      case 'width':\n      case 'height':\n        size = anchorSize;\n        break;\n      default: {\n        let vertical = false;\n        // Logical keywords require checking the writing-mode\n        // of the target element (or its containing block):\n        // `block` and `inline` should use the writing-mode of the element's\n        // containing block, not the element itself:\n        // https://trello.com/c/KnqCnHx3\n        const writingMode = getCSSPropertyValue(targetEl, 'writing-mode');\n        vertical =\n          writingMode.startsWith('vertical-') ||\n          writingMode.startsWith('sideways-');\n        size = resolveLogicalSizeKeyword(anchorSize, vertical);\n      }\n    }\n    if (size) {\n      return `${anchorRect[size]}px`;\n    }\n    return fallback;\n  }\n\n  if (anchorSide !== undefined) {\n    // Calculate value for `anchor()` fn...\n    let percentage: number | undefined;\n    let offsetParent;\n    const axis = getAxis(targetProperty);\n\n    // anchor() can only be assigned to inset properties,\n    // and if a physical keyword ('left', 'right', 'top', 'bottom') is used,\n    // the axis of the keyword must match the axis of the inset property:\n    // https://drafts.csswg.org/css-anchor-1/#queries\n    if (\n      !(\n        isInsetProp(targetProperty) &&\n        axis &&\n        (!isInsetProp(anchorSide) || axis === getAxis(anchorSide))\n      )\n    ) {\n      return fallback;\n    }\n\n    switch (anchorSide) {\n      case 'left':\n        percentage = 0;\n        break;\n      case 'right':\n        percentage = 100;\n        break;\n      case 'top':\n        percentage = 0;\n        break;\n      case 'bottom':\n        percentage = 100;\n        break;\n      case 'center':\n        percentage = 50;\n        break;\n      default:\n        // Logical keywords require checking the writing direction\n        // of the target element (or its containing block)\n        if (targetEl) {\n          // `start` and `end` should use the writing-mode of the element's\n          // containing block, not the element itself:\n          // https://trello.com/c/KnqCnHx3\n          const rtl = (await platform.isRTL?.(targetEl)) || false;\n          percentage = resolveLogicalSideKeyword(anchorSide, rtl);\n        }\n    }\n\n    const hasPercentage =\n      typeof percentage === 'number' && !Number.isNaN(percentage);\n\n    const dir = getAxisProperty(axis);\n    if (hasPercentage && dir) {\n      if (targetProperty === 'bottom' || targetProperty === 'right') {\n        offsetParent = await getOffsetParent(targetEl);\n      }\n      let value =\n        anchorRect[axis] + anchorRect[dir] * ((percentage as number) / 100);\n      switch (targetProperty) {\n        case 'bottom': {\n          if (!offsetParent) {\n            break;\n          }\n          let offsetHeight = offsetParent.clientHeight;\n          // This is a hack for inline elements with `clientHeight: 0`,\n          // but it doesn't take scrollbar size into account\n          if (offsetHeight === 0 && isInline(offsetParent)) {\n            const border = getBorders(offsetParent, axis);\n            offsetHeight = offsetParent.offsetHeight - border;\n          }\n          value = offsetHeight - value;\n          break;\n        }\n        case 'right': {\n          if (!offsetParent) {\n            break;\n          }\n          let offsetWidth = offsetParent.clientWidth;\n          // This is a hack for inline elements with `clientWidth: 0`,\n          // but it doesn't take scrollbar size into account\n          if (offsetWidth === 0 && isInline(offsetParent)) {\n            const border = getBorders(offsetParent, axis);\n            offsetWidth = offsetParent.offsetWidth - border;\n          }\n          value = offsetWidth - value;\n          break;\n        }\n      }\n      return `${value}px`;\n    }\n  }\n\n  return fallback;\n};\n\nasync function applyAnchorPositions(\n  declarations: AnchorFunctionDeclaration,\n  useAnimationFrame = false,\n) {\n  const root = document.documentElement;\n\n  for (const [property, anchorValues] of Object.entries(declarations) as [\n    InsetProperty | SizingProperty,\n    AnchorFunction[],\n  ][]) {\n    for (const anchorValue of anchorValues) {\n      const anchor = anchorValue.anchorEl;\n      const target = anchorValue.targetEl;\n      if (anchor && target) {\n        autoUpdate(\n          anchor,\n          target,\n          async () => {\n            const rects = await platform.getElementRects({\n              reference: anchor,\n              floating: target,\n              strategy: 'absolute',\n            });\n            const resolved = await getPixelValue({\n              targetEl: target,\n              targetProperty: property,\n              anchorRect: rects.reference,\n              anchorSide: anchorValue.anchorSide,\n              anchorSize: anchorValue.anchorSize,\n              fallback: anchorValue.fallbackValue,\n            });\n            root.style.setProperty(anchorValue.uuid, resolved);\n          },\n          { animationFrame: useAnimationFrame },\n        );\n      } else {\n        // Use fallback value\n        const resolved = await getPixelValue({\n          targetProperty: property,\n          anchorSide: anchorValue.anchorSide,\n          anchorSize: anchorValue.anchorSize,\n          fallback: anchorValue.fallbackValue,\n        });\n        root.style.setProperty(anchorValue.uuid, resolved);\n      }\n    }\n  }\n}\n\nasync function checkOverflow(target: HTMLElement, offsetParent: HTMLElement) {\n  const rects = await platform.getElementRects({\n    reference: target,\n    floating: target,\n    strategy: 'absolute',\n  });\n  const overflow = await detectOverflow(\n    {\n      x: target.offsetLeft,\n      y: target.offsetTop,\n      platform: platformWithCache,\n      rects,\n      elements: { floating: target },\n      strategy: 'absolute',\n    } as unknown as MiddlewareState,\n    {\n      boundary: offsetParent,\n      rootBoundary: 'document',\n      padding: getMargins(target),\n    },\n  );\n  return overflow;\n}\n\nasync function applyPositionFallbacks(\n  targetSel: string,\n  fallbacks: TryBlock[],\n  useAnimationFrame = false,\n) {\n  if (!fallbacks.length) {\n    return;\n  }\n\n  const targets: NodeListOf<HTMLElement> = document.querySelectorAll(targetSel);\n\n  for (const target of targets) {\n    let checking = false;\n    const offsetParent = await getOffsetParent(target);\n\n    autoUpdate(\n      // We're just checking whether the target element overflows, so we don't\n      // care about the position of the anchor element in this case. Passing in\n      // an empty object instead of a reference element avoids unnecessarily\n      // watching for irrelevant changes.\n      {} as VirtualElement,\n      target,\n      async () => {\n        // If this auto-update was triggered while the polyfill is already\n        // looping through the possible `position-try-fallbacks` blocks, do not\n        // check again.\n        if (checking) {\n          return;\n        }\n        checking = true;\n        target.removeAttribute('data-anchor-polyfill');\n        const defaultOverflow = await checkOverflow(target, offsetParent);\n        // If none of the sides overflow, don't try fallbacks\n        if (Object.values(defaultOverflow).every((side) => side <= 0)) {\n          target.removeAttribute('data-anchor-polyfill-last-successful');\n          checking = false;\n          return;\n        }\n        // Apply the styles from each fallback block (in order), stopping when\n        // we reach one that does not cause the target's margin-box to overflow\n        // its offsetParent (containing block).\n        for (const [index, { uuid }] of fallbacks.entries()) {\n          target.setAttribute('data-anchor-polyfill', uuid);\n\n          const overflow = await checkOverflow(target, offsetParent);\n\n          // If none of the sides overflow, use this fallback and stop loop.\n          if (Object.values(overflow).every((side) => side <= 0)) {\n            target.setAttribute('data-anchor-polyfill-last-successful', uuid);\n            checking = false;\n            break;\n          }\n          // If it's the last fallback, and none have matched, revert to the\n          // last successful fallback.\n          if (index === fallbacks.length - 1) {\n            const lastSuccessful = target.getAttribute(\n              'data-anchor-polyfill-last-successful',\n            );\n            if (lastSuccessful) {\n              target.setAttribute('data-anchor-polyfill', lastSuccessful);\n            } else {\n              target.removeAttribute('data-anchor-polyfill');\n            }\n            checking = false;\n            break;\n          }\n        }\n      },\n      { animationFrame: useAnimationFrame, layoutShift: false },\n    );\n  }\n}\n\nasync function position(rules: AnchorPositions, useAnimationFrame = false) {\n  for (const pos of Object.values(rules)) {\n    // Handle `anchor()` and `anchor-size()` functions...\n    await applyAnchorPositions(pos.declarations ?? {}, useAnimationFrame);\n  }\n\n  for (const [targetSel, position] of Object.entries(rules)) {\n    // Handle `@position-try` blocks...\n    await applyPositionFallbacks(\n      targetSel,\n      position.fallbacks ?? [],\n      useAnimationFrame,\n    );\n  }\n}\n\nexport interface AnchorPositioningPolyfillOptions {\n  // Whether to use `requestAnimationFrame()` when updating target elements’\n  // positions\n  useAnimationFrame?: boolean;\n\n  // An array of explicitly targeted elements to polyfill\n  elements?: HTMLElement[];\n\n  // Whether to exclude elements with eligible inline styles. When not defined\n  // or set to `false`, the polyfill will be applied to all elements that have\n  // eligible inline styles, regardless of whether the `elements` option is\n  // defined. When set to `true`, elements with eligible inline styles listed\n  // in the `elements` option will still be polyfilled, but no other elements\n  // in the document will be implicitly polyfilled.\n  excludeInlineStyles?: boolean;\n}\n\nfunction normalizePolyfillOptions(\n  useAnimationFrameOrOption: boolean | AnchorPositioningPolyfillOptions = {},\n) {\n  const options =\n    typeof useAnimationFrameOrOption === 'boolean'\n      ? { useAnimationFrame: useAnimationFrameOrOption }\n      : useAnimationFrameOrOption;\n  const useAnimationFrame =\n    options.useAnimationFrame === undefined\n      ? Boolean(window.UPDATE_ANCHOR_ON_ANIMATION_FRAME)\n      : options.useAnimationFrame;\n\n  if (!Array.isArray(options.elements)) {\n    options.elements = undefined;\n  }\n\n  return Object.assign(options, { useAnimationFrame });\n}\n\n// Support a boolean option for backwards compatibility.\nexport async function polyfill(\n  useAnimationFrameOrOption?: boolean | AnchorPositioningPolyfillOptions,\n) {\n  const options = normalizePolyfillOptions(\n    useAnimationFrameOrOption ?? window.ANCHOR_POSITIONING_POLYFILL_OPTIONS,\n  );\n\n  // fetch CSS from stylesheet and inline style\n  let styleData = await fetchCSS(options.elements, options.excludeInlineStyles);\n\n  // pre parse CSS styles that we need to cascade\n  const cascadeCausedChanges = await cascadeCSS(styleData);\n  if (cascadeCausedChanges) {\n    styleData = await transformCSS(styleData);\n  }\n  // parse CSS\n  const { rules, inlineStyles } = await parseCSS(styleData);\n\n  if (Object.values(rules).length) {\n    // update source code\n    await transformCSS(styleData, inlineStyles, true);\n\n    // calculate position values\n    await position(rules, options.useAnimationFrame);\n  }\n\n  return rules;\n}\n"],"names":["min","max","round","floor","createCoords","v","evaluate","value","param","expandPaddingObject","padding","__spreadValues","getPaddingObject","rectToClientRect","rect","x","y","width","height","detectOverflow","state","options","__async","_await$platform$isEle","platform","rects","elements","strategy","boundary","rootBoundary","elementContext","altBoundary","paddingObject","element","clippingClientRect","offsetParent","offsetScale","elementClientRect","hasWindow","getNodeName","node","isNode","getWindow","_node$ownerDocument","getDocumentElement","_ref","isElement","isHTMLElement","isShadowRoot","isOverflowElement","overflow","overflowX","overflowY","display","getComputedStyle","isTableElement","isTopLayer","selector","e","isContainingBlock","elementOrCss","webkit","isWebKit","css","getContainingBlock","currentNode","getParentNode","isLastTraversableNode","getNodeScroll","result","getNearestOverflowAncestor","parentNode","getOverflowAncestors","list","traverseIframes","_node$ownerDocument2","scrollableAncestor","isBody","win","frameElement","getFrameElement","getCssDimensions","hasOffset","offsetWidth","offsetHeight","shouldFallback","unwrapElement","getScale","domElement","$","noOffsets","getVisualOffsets","shouldAddVisualOffsets","isFixed","floatingOffsetParent","getBoundingClientRect","includeScale","isFixedStrategy","clientRect","scale","visualOffsets","offsetWin","currentWin","currentIFrame","iframeScale","iframeRect","left","top","getWindowScrollBarX","leftScroll","getHTMLOffset","documentElement","scroll","ignoreScrollbarX","htmlRect","convertOffsetParentRelativeRectToViewportRelativeRect","topLayer","offsets","isOffsetParentAnElement","offsetRect","htmlOffset","getClientRects","getDocumentRect","html","body","getViewportRect","visualViewport","visualViewportBased","getInnerBoundingClientRect","getClientRectFromClippingAncestor","clippingAncestor","hasFixedPositionAncestor","stopNode","getClippingElementAncestors","cache","cachedResult","el","currentContainingBlockComputedStyle","elementIsFixed","computedStyle","currentNodeIsContaining","ancestor","getClippingRect","clippingAncestors","firstClippingAncestor","clippingRect","accRect","getDimensions","getRectRelativeToOffsetParent","isStaticPositioned","getTrueOffsetParent","polyfill","rawOffsetParent","getOffsetParent","svgOffsetParent","getElementRects","data","getOffsetParentFn","getDimensionsFn","floatingDimensions","isRTL","observeMove","onMove","io","timeoutId","root","cleanup","_io","refresh","skip","threshold","insetTop","insetRight","insetBottom","insetLeft","isFirstUpdate","handleObserve","entries","ratio","__spreadProps","autoUpdate","reference","floating","update","ancestorScroll","ancestorResize","elementResize","layoutShift","animationFrame","referenceEl","ancestors","cleanupIo","reobserveFrame","resizeObserver","firstEntry","_resizeObserver","frameId","prevRefRect","frameLoop","nextRefRect","_resizeObserver2","detectOverflow$1","EOF","Ident","Function","AtKeyword","Hash","String","BadString","Url","BadUrl","Delim","Number","Percentage","Dimension","WhiteSpace","CDO","CDC","Colon","Semicolon","Comma","LeftSquareBracket","RightSquareBracket","LeftParenthesis","RightParenthesis","LeftCurlyBracket","RightCurlyBracket","Comment","isDigit","code","isHexDigit","isUppercaseLetter","isLowercaseLetter","isLetter","isNonAscii","isNameStart","isName","isNonPrintable","isNewline","isWhiteSpace","isValidEscape","first","second","isIdentifierStart","third","isNumberStart","isBOM","CATEGORY","EofCategory","WhiteSpaceCategory","DigitCategory","NameStartCategory","NonPrintableCategory","i","charCodeCategory","getCharCode","source","offset","getNewlineLength","cmpChar","testStr","referenceCode","cmpStr","start","end","referenceStr","testCode","findWhiteSpaceStart","findWhiteSpaceEnd","findDecimalNumberEnd","consumeEscaped","maxOffset","consumeName","consumeNumber","sign","consumeBadUrlRemnants","decodeEscaped","escaped","tokenNames","MIN_SIZE","adoptBuffer","buffer","size","N","F","R","computeLinesAndColumns","host","sourceLength","startOffset","lines","columns","line","column","OffsetToLocation","startLine","startColumn","filename","OFFSET_MASK","TYPE_SHIFT","balancePair","FunctionToken","TokenStream","tokenize","offsetAndType","balance","tokenCount","balanceCloseType","balanceStart","firstCharOffset","type","balancePrev","idx","tokenType","tokenIndex","pos","next","startToken","stopConsume","cursor","balanceEnd","loop","fn","item","tokens","index","onToken","consumeNumericToken","TYPE.Dimension","TYPE.Percentage","TYPE.Number","consumeIdentLikeToken","nameStartOffset","TYPE.Function","consumeUrlToken","TYPE.Ident","consumeStringToken","endingCodePoint","TYPE.String","TYPE.BadString","nextCode","TYPE.Url","TYPE.BadUrl","TYPE.WhiteSpace","TYPE.Hash","TYPE.Delim","TYPE.LeftParenthesis","TYPE.RightParenthesis","TYPE.Comma","TYPE.CDC","TYPE.Comment","TYPE.Colon","TYPE.Semicolon","TYPE.CDO","TYPE.AtKeyword","TYPE.LeftSquareBracket","TYPE.RightSquareBracket","TYPE.LeftCurlyBracket","TYPE.RightCurlyBracket","releasedCursors","List","prev","prevOld","prevNew","nextOld","nextNew","array","thisArg","initialValue","acc","before","oldItem","newItemOrList","createCustomError","name","message","error","errorStack","MAX_LINE_LENGTH","OFFSET_CORRECTION","TAB_REPLACEMENT","sourceFragment","baseLine","baseColumn","extraLines","processLines","maxNumLength","prelines","precolumns","endLine","cutLeft","SyntaxError","readSequence","recognizer","children","space","context","child","NOOP","EXCLAMATIONMARK","NUMBERSIGN","SEMICOLON","LEFTCURLYBRACKET","NULL","createParseContext","fetchParseValues","dict","processConfig","config","parseConfig","createParser","needPositions","onParseError","onParseErrorThrow","locationMap","parser","consumer","fallback","startIndex","fallbackNode","offsetStart","offsetEnd","charCode","str","number","tokenName","NumberToken","head","tail","location","source_","onComment","loc","ast","intToCharMap","base64","bigA","bigZ","littleA","littleZ","zero","nine","plus","slash","littleOffset","numberOffset","require$$0","VLQ_BASE_SHIFT","VLQ_BASE","VLQ_BASE_MASK","VLQ_CONTINUATION_BIT","toVLQSigned","aValue","fromVLQSigned","isNegative","shifted","base64Vlq","encoded","digit","vlq","aStr","aIndex","aOutParam","strLen","shift","continuation","getArg","aArgs","aName","aDefaultValue","exports","urlRegexp","dataUrlRegexp","urlParse","aUrl","match","urlGenerate","aParsedUrl","url","MAX_CACHED_INPUTS","lruMemoize","input","temp","normalize","aPath","path","isAbsolute","parts","part","up","join","aRoot","aPathUrl","aRootUrl","joined","relative","level","supportsNullProto","obj","identity","s","toSetString","isProtoString","fromSetString","length","compareByOriginalPositions","mappingA","mappingB","onlyCompareOriginal","cmp","strcmp","compareByOriginalPositionsNoSource","compareByGeneratedPositionsDeflated","onlyCompareGenerated","compareByGeneratedPositionsDeflatedNoLine","aStr1","aStr2","compareByGeneratedPositionsInflated","parseSourceMapInput","computeSourceURL","sourceRoot","sourceURL","sourceMapURL","parsed","util","has","hasNativeMap","ArraySet","ArraySet$1","aArray","aAllowDuplicates","set","len","sStr","isDuplicate","aIdx","arraySet","generatedPositionAfter","lineA","lineB","columnA","columnB","MappingList","MappingList$1","aCallback","aThisArg","aMapping","mappingList","base64VLQ","require$$1","require$$2","require$$3","SourceMapGenerator","aSourceMapConsumer","generatorOps","generator","mapping","newMapping","sourceFile","sourceRelative","content","generated","original","aSourceFile","aSourceContent","aSourceMapPath","newSources","newNames","aGenerated","aOriginal","aSource","previousGeneratedColumn","previousGeneratedLine","previousOriginalColumn","previousOriginalLine","previousName","previousSource","nameIdx","sourceIdx","mappings","aSources","aSourceRoot","key","map","SourceMapGenerator_1","trackNodes","generateSourceMap","handlers","activatedGenerated","activatedMapping","sourceMappingActive","origHandlersNode","nodeLine","nodeColumn","origHandlersEmit","auto","origHandlersResult","PLUSSIGN","HYPHENMINUS","specPairs","safePairs","StringToken","createMap","pairs","isWhiteSpaceRequired","prevCode","nextCharCode","spec","safe","REVERSESOLIDUS","processChildren","delimeter","processChunk","chunk","createGenerator","types","publicApi","tokenBefore.safe","tokenBefore","createConvertor","walk","hasOwnProperty","noop","ensureFunction","invokeForType","getWalkersFromStructure","nodeType","structure","walkers","fieldTypes","walker","fieldType","getTypesFromConfig","createTypeIterator","reverse","fields","contextName","useContext","walkReducer","prevContextValue","field","ref","createFastTraveralMap","StyleSheet","Atrule","Rule","Block","DeclarationList","createWalker","iteratorsNatural","iteratorsReverse","breakWalk","skipNode","fastTraversalIteratorsNatural","fastTraversalIteratorsReverse","walkNode","enterRet","enter","iterators","leave","ret","found","generateMultiplier","multiplier","comma","generateTypeOpts","generateSequence","decorate","forceBraces","compact","combinator","term","internalGenerate","generate","defaultLoc","locateMismatch","matchResult","longestMatch","mismatchNode","badNode","mismatchOffset","mismatchLength","token","fromLoc","buildLoc","point","extra","SyntaxReferenceError","referenceName","SyntaxMatchError","syntax","keywords","properties","keyword","getKeywordDescriptor","property","getPropertyDescriptor","isCustomProperty","getVendorPrefix","secondDashIndex","descriptor","custom","vendor","hack","prefix","cssWideKeywords","DISALLOW_SIGN","ALLOW_SIGN","isDelim","skipSC","getNextToken","checkInteger","valueOffset","disallowSign","consumeB","offset_","anPlusB","QUESTIONMARK","U","startsWith","hexSequence","allowDash","hexlen","withQuestionMarkSequence","consumed","urange","consumedHexLength","calcFunctionNames","charCodeAt","eqStr","actual","expected","eqStrAny","isPostfixIeHack","outOfRange","opts","numEnd","num","consumeFunction","balanceStash","scan","calc","expectedTokenType","customIdent","dashedIdent","customPropertyName","hexColor","idSelector","declarationValue","anyValue","dimension","numberEnd","reverseSolidusOffset","unit","percentage","integer","tokenTypes","productionTypes","createDemensionTypes","units","angle","decibel","frequency","flex","resolution","semitones","time","createGenericTypes","TAB","SPACE","Tokenizer","AMPERSAND","APOSTROPHE","LEFTPARENTHESIS","RIGHTPARENTHESIS","ASTERISK","COMMA","HYPERMINUS","LESSTHANSIGN","GREATERTHANSIGN","COMMERCIALAT","LEFTSQUAREBRACKET","RIGHTSQUAREBRACKET","VERTICALLINE","RIGHTCURLYBRACKET","INFINITY","NAME_CHAR","_","COMBINATOR_PRECEDENCE","scanSpaces","tokenizer","scanWord","scanNumber","scanString","readMultiplierRange","readMultiplier","range","maybeMultiplied","maybeToken","ch","readProperty","readTypeRange","readType","readKeywordOrFunction","regroupTerms","terms","combinators","createGroup","a","b","subgroupStart","readImplicitGroup","prevToken","prevTokenPos","peek","readGroup","parse","astToTokens","curNode","tmp","stringToTokens","prepareTokens","MATCH","MISMATCH","DISALLOW_EMPTY","createCondition","thenBranch","elseBranch","isFunctionType","isEnumCapatible","buildGroupMatchGraph","atLeastOneTermMatched","thenClause","newGroupTerm","buildMultiplierMatchGraph","matchTerm","buildMatchGraphInternal","buildMatchGraph","syntaxTree","STUB","TOKEN","OPEN_SYNTAX","CLOSE_SYNTAX","EXIT_REASON_MATCH","EXIT_REASON_MISMATCH","EXIT_REASON_ITERATION_LIMIT","ITERATION_LIMIT","reverseList","areStringsEqualCaseInsensitive","isContextEdgeDelim","isCommaContextStart","isCommaContextEnd","internalMatch","syntaxes","moveToNextToken","nextIndex","stateSnapshotFromSyntax","nextState","matchStack","syntaxStack","thenStack","pushThenStack","pushElseStack","elseStack","addTokenToMatch","syntaxStash","openSyntax","closeSyntax","iterationCount","exitReason","matchFlag","lastTokenIndex","syntaxDict","dictSyntax","keywordName","string","matchAsTree","matchGraph","hostStack","getTrace","shouldPutToTrace","hasMatch","matchNode","isType","testNode","isProperty","isKeyword","trace","getFirstMatchNode","getLastMatchNode","matchFragments","lexer","findFragments","nodes","fragments","isValidNumber","isValidLocation","createNodeStructureChecker","warn","valid","genTypesList","docsTypes","processStructure","docs","getStructureFromConfig","cssWideKeywordsSyntax","dumpMapSyntax","syntaxAsAst","dumpAtruleMapSyntax","atrule","valueHasVar","syntaxHasTopLevelCommaMultiplier","singleTerm","buildMatchResult","matched","iterations","matchSyntax","useCssWideKeywords","Lexer","group","collectWarning","warns","parent","descName","atruleName","prelude","descriptorName","names.keyword","propertyName","names.property","typeName","typeSyntax","declaration","fallbackBasename","validate","broken","brokenMap","brokenTypes","brokenProperties","pretty","appendOrSet","sliceProps","props","prop","mix","dest","src","patch","exists","current","descriptorValue","createSyntax","fromPlainObject","toPlainObject","extension","base","createSyntax$1","definitions","checkTokenIsInteger","expectCharCode","msg","consumeRaw","isDeclarationBlockAtrule","walkContext","isDeclaration","nameLowerCase","block","DOLLARSIGN","EQUALSSIGN","CIRCUMFLEXACCENT","TILDE","getAttributeName","expectIdent","getOperator","matcher","flags","consumeRule","consumeRawDeclaration","consumeDeclaration","isStyleBlock","FULLSTOP","SOLIDUS","likelyFeatureToken","featureOrRange","kind","parentheses","res","consumeValueRaw","consumeCustomPropertyRaw","consumeValue","startValueToken","customProperty","parseValue","important","valueStart","getImportant","getFeatureParser","functionName","valueParser","readTerm","readComparison","expectColon","leftComparison","middle","rightComparison","right","xxx","modifier","mediaType","condition","ident","identLowerCase","nth","consumeTerm","getOffsetExcludeWS","consumeUntil","excludeWhiteSpace","endOffset","consumePrelude","limit","REVERSE_SOLIDUS","QUOTATION_MARK","decode","firstChar","decoded","escapeStart","escapeEnd","encode","apostrophe","quote","quoteCode","wsBeforeHexIsNeeded","eatIdentifierOrAsterisk","eatHexSequence","eatQuestionMarkSequence","count","scanUnicodeRange","hexLength","url.decode","string.decode","url.encode","lexerConfig","defaultRecognizer","atrulePrelude","getNode","onWhiteSpace","selector$1","expressionFn","varFn","isPlusMinusOperator","nonContainerNameKeywords","container","nested","fontFace","parseWithFallback","parseFunctions","parseLanguageRangeList","selectorList","identList","langList","parserConfig","scope","walkerConfig","clone","createLexer","find","findLast","findAll","fork","urlAlphabet","nanoid","id","INSTANCE_UUID","isAnchorFunction","getAST","cssText","csstree.parse","generateCSS","csstree.generate","splitCommaList","getSelectors","rule","pseudoElementPart","_a","csstree.clone","elementPart","SHIFTED_PROPERTIES","shiftUnsupportedProperties","cascadeCSS","styleData","styleObj","changed","csstree.walk","updated","AnchorScopeValue","getCSSPropertyValue","hasStyle","cssProperty","createFakePseudoElement","fakePseudoElement","sheet","insertionPoint","findFirstScrollingElement","currentElement","getContainerScrollPosition","containerScrollPosition","getElementsBySelector","boundingClientRect","startingScrollY","startingScrollX","scrollY","scrollX","scrollTop","scrollLeft","hasAnchorName","anchorName","computedAnchorName","hasAnchorScope","computedAnchorScope","INVALID_MIME_TYPE_ERROR","isStyleLink","link","getStylesheetUrl","srcUrl","fetchLinkedStylesheets","sources","response","loaded","ELEMENTS_WITH_INLINE_ANCHOR_STYLES_QUERY","fetchInlineStyles","elementsWithInlineAnchorStyles","inlineStyles","dataAttribute","styles","fetchCSS","excludeInlineStyles","targetElements","elementsForInlines","inlines","INSET_PROPS","isInsetProp","MARGIN_PROPERTIES","isMarginProp","SIZING_PROPS","isSizingProp","SELF_ALIGNMENT_PROPS","isSelfAlignmentProp","ACCEPTED_POSITION_TRY_PROPERTIES","ANCHOR_SIDES","isAnchorSide","ANCHOR_SIZES","isAnchorSize","POSITION_AREA_PROPS","POSITION_TRY_ORDERS","POSITION_TRY_TACTICS","isPositionAreaProp","isPositionTryFallbacksDeclaration","isPositionTryOrderDeclaration","isPositionTryDeclaration","isPositionTryAtRule","isPositionTryTactic","isPositionTryOrder","applyTryTacticsToSelector","tactics","rules","getExistingInsetRules","tactic","applyTryTacticToBlock","applyTryTacticsToAtRule","propVal","tryTacticsPropertyMapping","anchorSideMapping","PositionAreaPropertyMapping","mapProperty","mapAnchorSide","side","mapPositionArea","mapMargin","valueAst","fourth","getValueAST","val","declarations","_key","newKey","isIdentifier","parsePositionTryFallbacks","positionOptions","tryObjects","option","identifiers","opt","getPositionTryFallbacksDeclaration","getPositionTryDeclaration","declarationNode","order","firstName","getPositionTryOrderDeclaration","getPositionFallbackValues","orderDeclaration","optionsNames","isAcceptedPositionTryProperty","getPositionTryRules","_b","d","tryBlock","parsePositionFallbacks","fallbacks","fallbackTargets","validPositions","fallbacksAdded","selectors","anchorPosition","tryObject","tacticAppliedRules","dataAttr","_c","csstree.List","isContainingBlockDescendant","containingBlock","anchor","isWindow","isFixedPositioned","isAbsolutelyPositioned","precedes","self","other","getFormattingContext","currentParent","isAcceptableAnchorElement","queryEl","scopeSelector","elContainingBlock","queryElContainingBlock","currentCB","anchorCBchain","lastInChain","getScope","validatedForPositioning","targetEl","anchorSelectors","scopeSelectors","anchorElements","isPseudoElement","isAnchorNameDeclaration","isAnchorScopeDeclaration","isAnchorSizeFunction","isVarFunction","isPercentage","parseAnchorFn","replaceCss","anchorSide","anchorSize","fallbackValue","foundComma","customPropName","args","sideOrSize","uuid","getAnchorNames","anchorNames","anchorScopes","customPropAssignments","customPropOriginals","customPropReplacements","resetStores","getAnchorFunctionData","getAnchorEl","anchorObj","positionAnchorProperty","allScopeSelectors","anchorNameScopeSelectors","parseCSS","anchorFunctions","_e","_d","customPropsToCheck","customPropsMapping","getReferencedFns","referencedFns","ancestorProps","n","toCheckAgain","anchorFns","propUuid","propToCheck","anchorFnData","uuidWithProp","_g","_f","positions","targetSel","targets","targetProperty","anchorObjects","anchorEl","excludeAttributes","transformCSS","updatedStyleData","updatedObject","blob","attr","promise","pre","platformWithCache","resolveLogicalSideKeyword","rtl","resolveLogicalSizeKeyword","vertical","resolved","getAxis","position","getAxisProperty","axis","isInline","getBorders","total","getMargin","dir","getMargins","getPixelValue","_0","anchorRect","writingMode","hasPercentage","border","applyAnchorPositions","useAnimationFrame","anchorValues","anchorValue","target","checkOverflow","applyPositionFallbacks","checking","defaultOverflow","lastSuccessful","normalizePolyfillOptions","useAnimationFrameOrOption"],"mappings":"25BAQA,MAAMA,EAAM,KAAK,IACXC,EAAM,KAAK,IACXC,EAAQ,KAAK,MACbC,GAAQ,KAAK,MACbC,GAAeC,IAAM,CACzB,EAAGA,EACH,EAAGA,CACL,GAcA,SAASC,GAASC,EAAOC,EAAO,CAC9B,OAAO,OAAOD,GAAU,WAAaA,EAAMC,CAAK,EAAID,CACtD,CAsEA,SAASE,GAAoBC,EAAS,CACpC,OAAOC,EAAA,CACL,IAAK,EACL,MAAO,EACP,OAAQ,EACR,KAAM,GACHD,EAEP,CACA,SAASE,GAAiBF,EAAS,CACjC,OAAO,OAAOA,GAAY,SAAWD,GAAoBC,CAAO,EAAI,CAClE,IAAKA,EACL,MAAOA,EACP,OAAQA,EACR,KAAMA,CACV,CACA,CACA,SAASG,GAAiBC,EAAM,CAC9B,KAAM,CACJ,EAAAC,EACA,EAAAC,EACA,MAAAC,EACA,OAAAC,CACD,EAAGJ,EACJ,MAAO,CACL,MAAAG,EACA,OAAAC,EACA,IAAKF,EACL,KAAMD,EACN,MAAOA,EAAIE,EACX,OAAQD,EAAIE,EACZ,EAAAH,EACA,EAAAC,CACJ,CACA,CCuBA,SAAeG,GAAeC,EAAOC,EAAS,QAAAC,EAAA,sBAC5C,IAAIC,EACAF,IAAY,SACdA,EAAU,CAAA,GAEZ,KAAM,CACJ,EAAAN,EACA,EAAAC,EACA,SAAAQ,EACA,MAAAC,EACA,SAAAC,EACA,SAAAC,CACD,EAAGP,EACE,CACJ,SAAAQ,EAAW,oBACX,aAAAC,EAAe,WACf,eAAAC,EAAiB,WACjB,YAAAC,EAAc,GACd,QAAArB,EAAU,CACd,EAAMJ,GAASe,EAASD,CAAK,EACrBY,EAAgBpB,GAAiBF,CAAO,EAExCuB,EAAUP,EAASK,EADND,IAAmB,WAAa,YAAc,WACbA,CAAc,EAC5DI,EAAqBrB,GAAiB,MAAMW,EAAS,gBAAgB,CACzE,SAAWD,EAAwB,MAAOC,EAAS,WAAa,KAAO,OAASA,EAAS,UAAUS,CAAO,IAAO,MAAOV,EAAgCU,EAAUA,EAAQ,iBAAmB,MAAOT,EAAS,oBAAsB,KAAO,OAASA,EAAS,mBAAmBE,EAAS,QAAQ,GAChS,SAAAE,EACA,aAAAC,EACA,SAAAF,CACD,CAAA,CAAC,EACIb,EAAOgB,IAAmB,WAAa,CAC3C,EAAAf,EACA,EAAAC,EACA,MAAOS,EAAM,SAAS,MACtB,OAAQA,EAAM,SAAS,MAC3B,EAAMA,EAAM,UACJU,EAAe,MAAOX,EAAS,iBAAmB,KAAO,OAASA,EAAS,gBAAgBE,EAAS,QAAQ,EAC5GU,GAAe,MAAOZ,EAAS,WAAa,KAAO,OAASA,EAAS,UAAUW,CAAY,IAAO,MAAOX,EAAS,UAAY,KAAO,OAASA,EAAS,SAASW,CAAY,IAAO,CACvL,EAAG,EACH,EAAG,CACP,EAAM,CACF,EAAG,EACH,EAAG,CACP,EACQE,EAAoBxB,GAAiBW,EAAS,sDAAwD,MAAMA,EAAS,sDAAsD,CAC/K,SAAAE,EACA,KAAAZ,EACA,aAAAqB,EACA,SAAAR,CACJ,CAAG,EAAIb,CAAI,EACT,MAAO,CACL,KAAMoB,EAAmB,IAAMG,EAAkB,IAAML,EAAc,KAAOI,EAAY,EACxF,QAASC,EAAkB,OAASH,EAAmB,OAASF,EAAc,QAAUI,EAAY,EACpG,MAAOF,EAAmB,KAAOG,EAAkB,KAAOL,EAAc,MAAQI,EAAY,EAC5F,OAAQC,EAAkB,MAAQH,EAAmB,MAAQF,EAAc,OAASI,EAAY,CACpG,CACA,GCrNA,SAASE,IAAY,CACnB,OAAO,OAAO,QAAW,WAC3B,CACA,SAASC,GAAYC,EAAM,CACzB,OAAIC,GAAOD,CAAI,GACLA,EAAK,UAAY,IAAI,YAAW,EAKnC,WACT,CACA,SAASE,GAAUF,EAAM,CACvB,IAAIG,EACJ,OAAQH,GAAQ,OAASG,EAAsBH,EAAK,gBAAkB,KAAO,OAASG,EAAoB,cAAgB,MAC5H,CACA,SAASC,GAAmBJ,EAAM,CAChC,IAAIK,EACJ,OAAQA,GAAQJ,GAAOD,CAAI,EAAIA,EAAK,cAAgBA,EAAK,WAAa,OAAO,WAAa,KAAO,OAASK,EAAK,eACjH,CACA,SAASJ,GAAOlC,EAAO,CACrB,OAAK+B,GAAS,EAGP/B,aAAiB,MAAQA,aAAiBmC,GAAUnC,CAAK,EAAE,KAFzD,EAGX,CACA,SAASuC,GAAUvC,EAAO,CACxB,OAAK+B,GAAS,EAGP/B,aAAiB,SAAWA,aAAiBmC,GAAUnC,CAAK,EAAE,QAF5D,EAGX,CACA,SAASwC,GAAcxC,EAAO,CAC5B,OAAK+B,GAAS,EAGP/B,aAAiB,aAAeA,aAAiBmC,GAAUnC,CAAK,EAAE,YAFhE,EAGX,CACA,SAASyC,GAAazC,EAAO,CAC3B,MAAI,CAAC+B,GAAS,GAAM,OAAO,YAAe,YACjC,GAEF/B,aAAiB,YAAcA,aAAiBmC,GAAUnC,CAAK,EAAE,UAC1E,CACA,SAAS0C,GAAkBhB,EAAS,CAClC,KAAM,CACJ,SAAAiB,EACA,UAAAC,EACA,UAAAC,EACA,QAAAC,CACJ,EAAMC,GAAiBrB,CAAO,EAC5B,MAAO,kCAAkC,KAAKiB,EAAWE,EAAYD,CAAS,GAAK,CAAC,CAAC,SAAU,UAAU,EAAE,SAASE,CAAO,CAC7H,CACA,SAASE,GAAetB,EAAS,CAC/B,MAAO,CAAC,QAAS,KAAM,IAAI,EAAE,SAASM,GAAYN,CAAO,CAAC,CAC5D,CACA,SAASuB,GAAWvB,EAAS,CAC3B,MAAO,CAAC,gBAAiB,QAAQ,EAAE,KAAKwB,GAAY,CAClD,GAAI,CACF,OAAOxB,EAAQ,QAAQwB,CAAQ,CAChC,OAAQC,EAAG,CACV,MAAO,EACR,CACL,CAAG,CACH,CACA,SAASC,GAAkBC,EAAc,CACvC,MAAMC,EAASC,KACTC,EAAMjB,GAAUc,CAAY,EAAIN,GAAiBM,CAAY,EAAIA,EAGvE,OAAOG,EAAI,YAAc,QAAUA,EAAI,cAAgB,SAAWA,EAAI,cAAgBA,EAAI,gBAAkB,SAAW,KAAU,CAACF,IAAWE,EAAI,eAAiBA,EAAI,iBAAmB,OAAS,KAAU,CAACF,IAAWE,EAAI,OAASA,EAAI,SAAW,OAAS,KAAU,CAAC,YAAa,cAAe,QAAQ,EAAE,KAAKxD,IAAUwD,EAAI,YAAc,IAAI,SAASxD,CAAK,CAAC,GAAK,CAAC,QAAS,SAAU,SAAU,SAAS,EAAE,KAAKA,IAAUwD,EAAI,SAAW,IAAI,SAASxD,CAAK,CAAC,CACnc,CACA,SAASyD,GAAmB/B,EAAS,CACnC,IAAIgC,EAAcC,GAAcjC,CAAO,EACvC,KAAOc,GAAckB,CAAW,GAAK,CAACE,GAAsBF,CAAW,GAAG,CACxE,GAAIN,GAAkBM,CAAW,EAC/B,OAAOA,EACF,GAAIT,GAAWS,CAAW,EAC/B,OAAO,KAETA,EAAcC,GAAcD,CAAW,CACxC,CACD,OAAO,IACT,CACA,SAASH,IAAW,CAClB,OAAI,OAAO,KAAQ,aAAe,CAAC,IAAI,SAAiB,GACjD,IAAI,SAAS,0BAA2B,MAAM,CACvD,CACA,SAASK,GAAsB3B,EAAM,CACnC,MAAO,CAAC,OAAQ,OAAQ,WAAW,EAAE,SAASD,GAAYC,CAAI,CAAC,CACjE,CACA,SAASc,GAAiBrB,EAAS,CACjC,OAAOS,GAAUT,CAAO,EAAE,iBAAiBA,CAAO,CACpD,CACA,SAASmC,GAAcnC,EAAS,CAC9B,OAAIa,GAAUb,CAAO,EACZ,CACL,WAAYA,EAAQ,WACpB,UAAWA,EAAQ,SACzB,EAES,CACL,WAAYA,EAAQ,QACpB,UAAWA,EAAQ,OACvB,CACA,CACA,SAASiC,GAAc1B,EAAM,CAC3B,GAAID,GAAYC,CAAI,IAAM,OACxB,OAAOA,EAET,MAAM6B,EAEN7B,EAAK,cAELA,EAAK,YAELQ,GAAaR,CAAI,GAAKA,EAAK,MAE3BI,GAAmBJ,CAAI,EACvB,OAAOQ,GAAaqB,CAAM,EAAIA,EAAO,KAAOA,CAC9C,CACA,SAASC,GAA2B9B,EAAM,CACxC,MAAM+B,EAAaL,GAAc1B,CAAI,EACrC,OAAI2B,GAAsBI,CAAU,EAC3B/B,EAAK,cAAgBA,EAAK,cAAc,KAAOA,EAAK,KAEzDO,GAAcwB,CAAU,GAAKtB,GAAkBsB,CAAU,EACpDA,EAEFD,GAA2BC,CAAU,CAC9C,CACA,SAASC,GAAqBhC,EAAMiC,EAAMC,EAAiB,CACzD,IAAIC,EACAF,IAAS,SACXA,EAAO,CAAA,GAELC,IAAoB,SACtBA,EAAkB,IAEpB,MAAME,EAAqBN,GAA2B9B,CAAI,EACpDqC,EAASD,MAAyBD,EAAuBnC,EAAK,gBAAkB,KAAO,OAASmC,EAAqB,MACrHG,EAAMpC,GAAUkC,CAAkB,EACxC,GAAIC,EAAQ,CACV,MAAME,EAAeC,GAAgBF,CAAG,EACxC,OAAOL,EAAK,OAAOK,EAAKA,EAAI,gBAAkB,CAAE,EAAE7B,GAAkB2B,CAAkB,EAAIA,EAAqB,CAAE,EAAEG,GAAgBL,EAAkBF,GAAqBO,CAAY,EAAI,CAAA,CAAE,CAC7L,CACD,OAAON,EAAK,OAAOG,EAAoBJ,GAAqBI,EAAoB,CAAE,EAAEF,CAAe,CAAC,CACtG,CACA,SAASM,GAAgBF,EAAK,CAC5B,OAAOA,EAAI,QAAU,OAAO,eAAeA,EAAI,MAAM,EAAIA,EAAI,aAAe,IAC9E,CCjJA,SAASG,GAAiBhD,EAAS,CACjC,MAAM8B,EAAMT,GAAiBrB,CAAO,EAGpC,IAAIhB,EAAQ,WAAW8C,EAAI,KAAK,GAAK,EACjC7C,EAAS,WAAW6C,EAAI,MAAM,GAAK,EACvC,MAAMmB,EAAYnC,GAAcd,CAAO,EACjCkD,EAAcD,EAAYjD,EAAQ,YAAchB,EAChDmE,EAAeF,EAAYjD,EAAQ,aAAef,EAClDmE,EAAiBnF,EAAMe,CAAK,IAAMkE,GAAejF,EAAMgB,CAAM,IAAMkE,EACzE,OAAIC,IACFpE,EAAQkE,EACRjE,EAASkE,GAEJ,CACL,MAAAnE,EACA,OAAAC,EACA,EAAGmE,CACP,CACA,CAEA,SAASC,GAAcrD,EAAS,CAC9B,OAAQa,GAAUb,CAAO,EAA6BA,EAAzBA,EAAQ,cACvC,CAEA,SAASsD,GAAStD,EAAS,CACzB,MAAMuD,EAAaF,GAAcrD,CAAO,EACxC,GAAI,CAACc,GAAcyC,CAAU,EAC3B,OAAOpF,GAAa,CAAC,EAEvB,MAAMU,EAAO0E,EAAW,wBAClB,CACJ,MAAAvE,EACA,OAAAC,EACA,EAAAuE,CACJ,EAAMR,GAAiBO,CAAU,EAC/B,IAAIzE,GAAK0E,EAAIvF,EAAMY,EAAK,KAAK,EAAIA,EAAK,OAASG,EAC3CD,GAAKyE,EAAIvF,EAAMY,EAAK,MAAM,EAAIA,EAAK,QAAUI,EAIjD,OAAI,CAACH,GAAK,CAAC,OAAO,SAASA,CAAC,KAC1BA,EAAI,IAEF,CAACC,GAAK,CAAC,OAAO,SAASA,CAAC,KAC1BA,EAAI,GAEC,CACL,EAAAD,EACA,EAAAC,CACJ,CACA,CAEA,MAAM0E,GAAyBtF,GAAa,CAAC,EAC7C,SAASuF,GAAiB1D,EAAS,CACjC,MAAM6C,EAAMpC,GAAUT,CAAO,EAC7B,MAAI,CAAC6B,GAAQ,GAAM,CAACgB,EAAI,eACfY,GAEF,CACL,EAAGZ,EAAI,eAAe,WACtB,EAAGA,EAAI,eAAe,SAC1B,CACA,CACA,SAASc,GAAuB3D,EAAS4D,EAASC,EAAsB,CAItE,OAHID,IAAY,SACdA,EAAU,IAER,CAACC,GAAwBD,GAAWC,IAAyBpD,GAAUT,CAAO,EACzE,GAEF4D,CACT,CAEA,SAASE,GAAsB9D,EAAS+D,EAAcC,EAAiB9D,EAAc,CAC/E6D,IAAiB,SACnBA,EAAe,IAEbC,IAAoB,SACtBA,EAAkB,IAEpB,MAAMC,EAAajE,EAAQ,wBACrBuD,EAAaF,GAAcrD,CAAO,EACxC,IAAIkE,EAAQ/F,GAAa,CAAC,EACtB4F,IACE7D,EACEW,GAAUX,CAAY,IACxBgE,EAAQZ,GAASpD,CAAY,GAG/BgE,EAAQZ,GAAStD,CAAO,GAG5B,MAAMmE,EAAgBR,GAAuBJ,EAAYS,EAAiB9D,CAAY,EAAIwD,GAAiBH,CAAU,EAAIpF,GAAa,CAAC,EACvI,IAAIW,GAAKmF,EAAW,KAAOE,EAAc,GAAKD,EAAM,EAChDnF,GAAKkF,EAAW,IAAME,EAAc,GAAKD,EAAM,EAC/ClF,EAAQiF,EAAW,MAAQC,EAAM,EACjCjF,EAASgF,EAAW,OAASC,EAAM,EACvC,GAAIX,EAAY,CACd,MAAMV,EAAMpC,GAAU8C,CAAU,EAC1Ba,EAAYlE,GAAgBW,GAAUX,CAAY,EAAIO,GAAUP,CAAY,EAAIA,EACtF,IAAImE,EAAaxB,EACbyB,EAAgBvB,GAAgBsB,CAAU,EAC9C,KAAOC,GAAiBpE,GAAgBkE,IAAcC,GAAY,CAChE,MAAME,EAAcjB,GAASgB,CAAa,EACpCE,EAAaF,EAAc,wBAC3BxC,EAAMT,GAAiBiD,CAAa,EACpCG,EAAOD,EAAW,MAAQF,EAAc,WAAa,WAAWxC,EAAI,WAAW,GAAKyC,EAAY,EAChGG,EAAMF,EAAW,KAAOF,EAAc,UAAY,WAAWxC,EAAI,UAAU,GAAKyC,EAAY,EAClGzF,GAAKyF,EAAY,EACjBxF,GAAKwF,EAAY,EACjBvF,GAASuF,EAAY,EACrBtF,GAAUsF,EAAY,EACtBzF,GAAK2F,EACL1F,GAAK2F,EACLL,EAAa5D,GAAU6D,CAAa,EACpCA,EAAgBvB,GAAgBsB,CAAU,CAC3C,CACF,CACD,OAAOzF,GAAiB,CACtB,MAAAI,EACA,OAAAC,EACA,EAAAH,EACA,EAAAC,CACJ,CAAG,CACH,CAIA,SAAS4F,GAAoB3E,EAASnB,EAAM,CAC1C,MAAM+F,EAAazC,GAAcnC,CAAO,EAAE,WAC1C,OAAKnB,EAGEA,EAAK,KAAO+F,EAFVd,GAAsBnD,GAAmBX,CAAO,CAAC,EAAE,KAAO4E,CAGrE,CAEA,SAASC,GAAcC,EAAiBC,EAAQC,EAAkB,CAC5DA,IAAqB,SACvBA,EAAmB,IAErB,MAAMC,EAAWH,EAAgB,wBAC3BhG,EAAImG,EAAS,KAAOF,EAAO,YAAcC,EAAmB,EAElEL,GAAoBG,EAAiBG,CAAQ,GACvClG,EAAIkG,EAAS,IAAMF,EAAO,UAChC,MAAO,CACL,EAAAjG,EACA,EAAAC,CACJ,CACA,CAEA,SAASmG,GAAsDtE,EAAM,CACnE,GAAI,CACF,SAAAnB,EACA,KAAAZ,EACA,aAAAqB,EACA,SAAAR,CACD,EAAGkB,EACJ,MAAMgD,EAAUlE,IAAa,QACvBoF,EAAkBnE,GAAmBT,CAAY,EACjDiF,EAAW1F,EAAW8B,GAAW9B,EAAS,QAAQ,EAAI,GAC5D,GAAIS,IAAiB4E,GAAmBK,GAAYvB,EAClD,OAAO/E,EAET,IAAIkG,EAAS,CACX,WAAY,EACZ,UAAW,CACf,EACMb,EAAQ/F,GAAa,CAAC,EAC1B,MAAMiH,EAAUjH,GAAa,CAAC,EACxBkH,EAA0BvE,GAAcZ,CAAY,EAC1D,IAAImF,GAA2B,CAACA,GAA2B,CAACzB,MACtDtD,GAAYJ,CAAY,IAAM,QAAUc,GAAkB8D,CAAe,KAC3EC,EAAS5C,GAAcjC,CAAY,GAEjCY,GAAcZ,CAAY,GAAG,CAC/B,MAAMoF,EAAaxB,GAAsB5D,CAAY,EACrDgE,EAAQZ,GAASpD,CAAY,EAC7BkF,EAAQ,EAAIE,EAAW,EAAIpF,EAAa,WACxCkF,EAAQ,EAAIE,EAAW,EAAIpF,EAAa,SACzC,CAEH,MAAMqF,EAAaT,GAAmB,CAACO,GAA2B,CAACzB,EAAUiB,GAAcC,EAAiBC,EAAQ,EAAI,EAAI5G,GAAa,CAAC,EAC1I,MAAO,CACL,MAAOU,EAAK,MAAQqF,EAAM,EAC1B,OAAQrF,EAAK,OAASqF,EAAM,EAC5B,EAAGrF,EAAK,EAAIqF,EAAM,EAAIa,EAAO,WAAab,EAAM,EAAIkB,EAAQ,EAAIG,EAAW,EAC3E,EAAG1G,EAAK,EAAIqF,EAAM,EAAIa,EAAO,UAAYb,EAAM,EAAIkB,EAAQ,EAAIG,EAAW,CAC9E,CACA,CAEA,SAASC,GAAexF,EAAS,CAC/B,OAAO,MAAM,KAAKA,EAAQ,eAAgB,CAAA,CAC5C,CAIA,SAASyF,GAAgBzF,EAAS,CAChC,MAAM0F,EAAO/E,GAAmBX,CAAO,EACjC+E,EAAS5C,GAAcnC,CAAO,EAC9B2F,EAAO3F,EAAQ,cAAc,KAC7BhB,EAAQhB,EAAI0H,EAAK,YAAaA,EAAK,YAAaC,EAAK,YAAaA,EAAK,WAAW,EAClF1G,EAASjB,EAAI0H,EAAK,aAAcA,EAAK,aAAcC,EAAK,aAAcA,EAAK,YAAY,EAC7F,IAAI7G,EAAI,CAACiG,EAAO,WAAaJ,GAAoB3E,CAAO,EACxD,MAAMjB,EAAI,CAACgG,EAAO,UAClB,OAAI1D,GAAiBsE,CAAI,EAAE,YAAc,QACvC7G,GAAKd,EAAI0H,EAAK,YAAaC,EAAK,WAAW,EAAI3G,GAE1C,CACL,MAAAA,EACA,OAAAC,EACA,EAAAH,EACA,EAAAC,CACJ,CACA,CAEA,SAAS6G,GAAgB5F,EAASN,EAAU,CAC1C,MAAMmD,EAAMpC,GAAUT,CAAO,EACvB0F,EAAO/E,GAAmBX,CAAO,EACjC6F,EAAiBhD,EAAI,eAC3B,IAAI7D,EAAQ0G,EAAK,YACbzG,EAASyG,EAAK,aACd5G,EAAI,EACJC,EAAI,EACR,GAAI8G,EAAgB,CAClB7G,EAAQ6G,EAAe,MACvB5G,EAAS4G,EAAe,OACxB,MAAMC,EAAsBjE,MACxB,CAACiE,GAAuBA,GAAuBpG,IAAa,WAC9DZ,EAAI+G,EAAe,WACnB9G,EAAI8G,EAAe,UAEtB,CACD,MAAO,CACL,MAAA7G,EACA,OAAAC,EACA,EAAAH,EACA,EAAAC,CACJ,CACA,CAGA,SAASgH,GAA2B/F,EAASN,EAAU,CACrD,MAAMuE,EAAaH,GAAsB9D,EAAS,GAAMN,IAAa,OAAO,EACtEgF,EAAMT,EAAW,IAAMjE,EAAQ,UAC/ByE,EAAOR,EAAW,KAAOjE,EAAQ,WACjCkE,EAAQpD,GAAcd,CAAO,EAAIsD,GAAStD,CAAO,EAAI7B,GAAa,CAAC,EACnEa,EAAQgB,EAAQ,YAAckE,EAAM,EACpCjF,EAASe,EAAQ,aAAekE,EAAM,EACtCpF,EAAI2F,EAAOP,EAAM,EACjBnF,EAAI2F,EAAMR,EAAM,EACtB,MAAO,CACL,MAAAlF,EACA,OAAAC,EACA,EAAAH,EACA,EAAAC,CACJ,CACA,CACA,SAASiH,GAAkChG,EAASiG,EAAkBvG,EAAU,CAC9E,IAAIb,EACJ,GAAIoH,IAAqB,WACvBpH,EAAO+G,GAAgB5F,EAASN,CAAQ,UAC/BuG,IAAqB,WAC9BpH,EAAO4G,GAAgB9E,GAAmBX,CAAO,CAAC,UACzCa,GAAUoF,CAAgB,EACnCpH,EAAOkH,GAA2BE,EAAkBvG,CAAQ,MACvD,CACL,MAAMyE,EAAgBT,GAAiB1D,CAAO,EAC9CnB,EAAO,CACL,EAAGoH,EAAiB,EAAI9B,EAAc,EACtC,EAAG8B,EAAiB,EAAI9B,EAAc,EACtC,MAAO8B,EAAiB,MACxB,OAAQA,EAAiB,MAC/B,CACG,CACD,OAAOrH,GAAiBC,CAAI,CAC9B,CACA,SAASqH,GAAyBlG,EAASmG,EAAU,CACnD,MAAM7D,EAAaL,GAAcjC,CAAO,EACxC,OAAIsC,IAAe6D,GAAY,CAACtF,GAAUyB,CAAU,GAAKJ,GAAsBI,CAAU,EAChF,GAEFjB,GAAiBiB,CAAU,EAAE,WAAa,SAAW4D,GAAyB5D,EAAY6D,CAAQ,CAC3G,CAKA,SAASC,GAA4BpG,EAASqG,EAAO,CACnD,MAAMC,EAAeD,EAAM,IAAIrG,CAAO,EACtC,GAAIsG,EACF,OAAOA,EAET,IAAIlE,EAASG,GAAqBvC,EAAS,CAAA,EAAI,EAAK,EAAE,OAAOuG,GAAM1F,GAAU0F,CAAE,GAAKjG,GAAYiG,CAAE,IAAM,MAAM,EAC1GC,EAAsC,KAC1C,MAAMC,EAAiBpF,GAAiBrB,CAAO,EAAE,WAAa,QAC9D,IAAIgC,EAAcyE,EAAiBxE,GAAcjC,CAAO,EAAIA,EAG5D,KAAOa,GAAUmB,CAAW,GAAK,CAACE,GAAsBF,CAAW,GAAG,CACpE,MAAM0E,EAAgBrF,GAAiBW,CAAW,EAC5C2E,EAA0BjF,GAAkBM,CAAW,EACzD,CAAC2E,GAA2BD,EAAc,WAAa,UACzDF,EAAsC,OAEVC,EAAiB,CAACE,GAA2B,CAACH,EAAsC,CAACG,GAA2BD,EAAc,WAAa,UAAY,CAAC,CAACF,GAAuC,CAAC,WAAY,OAAO,EAAE,SAASA,EAAoC,QAAQ,GAAKxF,GAAkBgB,CAAW,GAAK,CAAC2E,GAA2BT,GAAyBlG,EAASgC,CAAW,GAGvZI,EAASA,EAAO,OAAOwE,GAAYA,IAAa5E,CAAW,EAG3DwE,EAAsCE,EAExC1E,EAAcC,GAAcD,CAAW,CACxC,CACD,OAAAqE,EAAM,IAAIrG,EAASoC,CAAM,EAClBA,CACT,CAIA,SAASyE,GAAgBjG,EAAM,CAC7B,GAAI,CACF,QAAAZ,EACA,SAAAL,EACA,aAAAC,EACA,SAAAF,CACD,EAAGkB,EAEJ,MAAMkG,EAAoB,CAAC,GADMnH,IAAa,oBAAsB4B,GAAWvB,CAAO,EAAI,CAAE,EAAGoG,GAA4BpG,EAAS,KAAK,EAAE,EAAI,CAAA,EAAG,OAAOL,CAAQ,EACzGC,CAAY,EAC9DmH,EAAwBD,EAAkB,CAAC,EAC3CE,EAAeF,EAAkB,OAAO,CAACG,EAAShB,IAAqB,CAC3E,MAAMpH,EAAOmH,GAAkChG,EAASiG,EAAkBvG,CAAQ,EAClF,OAAAuH,EAAQ,IAAMjJ,EAAIa,EAAK,IAAKoI,EAAQ,GAAG,EACvCA,EAAQ,MAAQlJ,EAAIc,EAAK,MAAOoI,EAAQ,KAAK,EAC7CA,EAAQ,OAASlJ,EAAIc,EAAK,OAAQoI,EAAQ,MAAM,EAChDA,EAAQ,KAAOjJ,EAAIa,EAAK,KAAMoI,EAAQ,IAAI,EACnCA,CACR,EAAEjB,GAAkChG,EAAS+G,EAAuBrH,CAAQ,CAAC,EAC9E,MAAO,CACL,MAAOsH,EAAa,MAAQA,EAAa,KACzC,OAAQA,EAAa,OAASA,EAAa,IAC3C,EAAGA,EAAa,KAChB,EAAGA,EAAa,GACpB,CACA,CAEA,SAASE,GAAclH,EAAS,CAC9B,KAAM,CACJ,MAAAhB,EACA,OAAAC,CACJ,EAAM+D,GAAiBhD,CAAO,EAC5B,MAAO,CACL,MAAAhB,EACA,OAAAC,CACJ,CACA,CAEA,SAASkI,GAA8BnH,EAASE,EAAcR,EAAU,CACtE,MAAM2F,EAA0BvE,GAAcZ,CAAY,EACpD4E,EAAkBnE,GAAmBT,CAAY,EACjD0D,EAAUlE,IAAa,QACvBb,EAAOiF,GAAsB9D,EAAS,GAAM4D,EAAS1D,CAAY,EACvE,IAAI6E,EAAS,CACX,WAAY,EACZ,UAAW,CACf,EACE,MAAMK,EAAUjH,GAAa,CAAC,EAC9B,GAAIkH,GAA2B,CAACA,GAA2B,CAACzB,EAI1D,IAHItD,GAAYJ,CAAY,IAAM,QAAUc,GAAkB8D,CAAe,KAC3EC,EAAS5C,GAAcjC,CAAY,GAEjCmF,EAAyB,CAC3B,MAAMC,EAAaxB,GAAsB5D,EAAc,GAAM0D,EAAS1D,CAAY,EAClFkF,EAAQ,EAAIE,EAAW,EAAIpF,EAAa,WACxCkF,EAAQ,EAAIE,EAAW,EAAIpF,EAAa,SACzC,MAAU4E,IAGTM,EAAQ,EAAIT,GAAoBG,CAAe,GAGnD,MAAMS,EAAaT,GAAmB,CAACO,GAA2B,CAACzB,EAAUiB,GAAcC,EAAiBC,CAAM,EAAI5G,GAAa,CAAC,EAC9HW,EAAID,EAAK,KAAOkG,EAAO,WAAaK,EAAQ,EAAIG,EAAW,EAC3DxG,EAAIF,EAAK,IAAMkG,EAAO,UAAYK,EAAQ,EAAIG,EAAW,EAC/D,MAAO,CACL,EAAAzG,EACA,EAAAC,EACA,MAAOF,EAAK,MACZ,OAAQA,EAAK,MACjB,CACA,CAEA,SAASuI,GAAmBpH,EAAS,CACnC,OAAOqB,GAAiBrB,CAAO,EAAE,WAAa,QAChD,CAEA,SAASqH,GAAoBrH,EAASsH,EAAU,CAC9C,GAAI,CAACxG,GAAcd,CAAO,GAAKqB,GAAiBrB,CAAO,EAAE,WAAa,QACpE,OAAO,KAET,GAAIsH,EACF,OAAOA,EAAStH,CAAO,EAEzB,IAAIuH,EAAkBvH,EAAQ,aAM9B,OAAIW,GAAmBX,CAAO,IAAMuH,IAClCA,EAAkBA,EAAgB,cAAc,MAE3CA,CACT,CAIA,SAASC,GAAgBxH,EAASsH,EAAU,CAC1C,MAAMzE,EAAMpC,GAAUT,CAAO,EAC7B,GAAIuB,GAAWvB,CAAO,EACpB,OAAO6C,EAET,GAAI,CAAC/B,GAAcd,CAAO,EAAG,CAC3B,IAAIyH,EAAkBxF,GAAcjC,CAAO,EAC3C,KAAOyH,GAAmB,CAACvF,GAAsBuF,CAAe,GAAG,CACjE,GAAI5G,GAAU4G,CAAe,GAAK,CAACL,GAAmBK,CAAe,EACnE,OAAOA,EAETA,EAAkBxF,GAAcwF,CAAe,CAChD,CACD,OAAO5E,CACR,CACD,IAAI3C,EAAemH,GAAoBrH,EAASsH,CAAQ,EACxD,KAAOpH,GAAgBoB,GAAepB,CAAY,GAAKkH,GAAmBlH,CAAY,GACpFA,EAAemH,GAAoBnH,EAAcoH,CAAQ,EAE3D,OAAIpH,GAAgBgC,GAAsBhC,CAAY,GAAKkH,GAAmBlH,CAAY,GAAK,CAACwB,GAAkBxB,CAAY,EACrH2C,EAEF3C,GAAgB6B,GAAmB/B,CAAO,GAAK6C,CACxD,CAEA,MAAM6E,GAAkB,SAAgBC,EAAM,QAAAtI,EAAA,sBAC5C,MAAMuI,EAAoB,KAAK,iBAAmBJ,GAC5CK,EAAkB,KAAK,cACvBC,EAAqB,MAAMD,EAAgBF,EAAK,QAAQ,EAC9D,MAAO,CACL,UAAWR,GAA8BQ,EAAK,UAAW,MAAMC,EAAkBD,EAAK,QAAQ,EAAGA,EAAK,QAAQ,EAC9G,SAAU,CACR,EAAG,EACH,EAAG,EACH,MAAOG,EAAmB,MAC1B,OAAQA,EAAmB,MAC5B,CACL,CACA,IAEA,SAASC,GAAM/H,EAAS,CACtB,OAAOqB,GAAiBrB,CAAO,EAAE,YAAc,KACjD,CAEA,MAAMT,GAAW,CACf,sDAAA2F,GACA,mBAAAvE,GACA,gBAAAkG,GACF,gBAAEW,GACA,gBAAAE,GACA,eAAAlC,GACA,cAAA0B,GACA,SAAA5D,GACA,UAAAzC,GACA,MAAAkH,EACF,EAGA,SAASC,GAAYhI,EAASiI,EAAQ,CACpC,IAAIC,EAAK,KACLC,EACJ,MAAMC,EAAOzH,GAAmBX,CAAO,EACvC,SAASqI,GAAU,CACjB,IAAIC,EACJ,aAAaH,CAAS,GACrBG,EAAMJ,IAAO,MAAQI,EAAI,WAAU,EACpCJ,EAAK,IACN,CACD,SAASK,EAAQC,EAAMC,EAAW,CAC5BD,IAAS,SACXA,EAAO,IAELC,IAAc,SAChBA,EAAY,GAEdJ,IACA,KAAM,CACJ,KAAA5D,EACA,IAAAC,EACA,MAAA1F,EACA,OAAAC,CACN,EAAQe,EAAQ,wBAIZ,GAHKwI,GACHP,IAEE,CAACjJ,GAAS,CAACC,EACb,OAEF,MAAMyJ,EAAWxK,GAAMwG,CAAG,EACpBiE,EAAazK,GAAMkK,EAAK,aAAe3D,EAAOzF,EAAM,EACpD4J,EAAc1K,GAAMkK,EAAK,cAAgB1D,EAAMzF,EAAO,EACtD4J,EAAY3K,GAAMuG,CAAI,EAEtBrF,EAAU,CACd,WAFiB,CAACsJ,EAAW,MAAQ,CAACC,EAAa,MAAQ,CAACC,EAAc,MAAQ,CAACC,EAAY,KAG/F,UAAW7K,EAAI,EAAGD,EAAI,EAAG0K,CAAS,CAAC,GAAK,CAC9C,EACI,IAAIK,EAAgB,GACpB,SAASC,EAAcC,EAAS,CAC9B,MAAMC,EAAQD,EAAQ,CAAC,EAAE,kBACzB,GAAIC,IAAUR,EAAW,CACvB,GAAI,CAACK,EACH,OAAOP,EAAO,EAEXU,EAOHV,EAAQ,GAAOU,CAAK,EAJpBd,EAAY,WAAW,IAAM,CAC3BI,EAAQ,GAAO,IAAI,CACpB,EAAE,GAAI,CAIV,CACDO,EAAgB,EACjB,CAID,GAAI,CACFZ,EAAK,IAAI,qBAAqBa,EAAeG,GAAAxK,EAAA,GACxCU,GADwC,CAG3C,KAAMgJ,EAAK,aACnB,EAAO,CACF,OAAQ3G,EAAG,CACVyG,EAAK,IAAI,qBAAqBa,EAAe3J,CAAO,CACrD,CACD8I,EAAG,QAAQlI,CAAO,CACnB,CACD,OAAAuI,EAAQ,EAAI,EACLF,CACT,CAUA,SAASc,GAAWC,EAAWC,EAAUC,EAAQlK,EAAS,CACpDA,IAAY,SACdA,EAAU,CAAA,GAEZ,KAAM,CACJ,eAAAmK,EAAiB,GACjB,eAAAC,EAAiB,GACjB,cAAAC,EAAgB,OAAO,gBAAmB,WAC1C,YAAAC,EAAc,OAAO,sBAAyB,WAC9C,eAAAC,EAAiB,EAClB,EAAGvK,EACEwK,EAAcvG,GAAc+F,CAAS,EACrCS,EAAYN,GAAkBC,EAAiB,CAAC,GAAII,EAAcrH,GAAqBqH,CAAW,EAAI,CAAA,EAAK,GAAGrH,GAAqB8G,CAAQ,CAAC,EAAI,CAAA,EACtJQ,EAAU,QAAQjD,GAAY,CAC5B2C,GAAkB3C,EAAS,iBAAiB,SAAU0C,EAAQ,CAC5D,QAAS,EACf,CAAK,EACDE,GAAkB5C,EAAS,iBAAiB,SAAU0C,CAAM,CAChE,CAAG,EACD,MAAMQ,EAAYF,GAAeF,EAAc1B,GAAY4B,EAAaN,CAAM,EAAI,KAClF,IAAIS,EAAiB,GACjBC,EAAiB,KACjBP,IACFO,EAAiB,IAAI,eAAepJ,GAAQ,CAC1C,GAAI,CAACqJ,CAAU,EAAIrJ,EACfqJ,GAAcA,EAAW,SAAWL,GAAeI,IAGrDA,EAAe,UAAUX,CAAQ,EACjC,qBAAqBU,CAAc,EACnCA,EAAiB,sBAAsB,IAAM,CAC3C,IAAIG,GACHA,EAAkBF,IAAmB,MAAQE,EAAgB,QAAQb,CAAQ,CACxF,CAAS,GAEHC,GACN,CAAK,EACGM,GAAe,CAACD,GAClBK,EAAe,QAAQJ,CAAW,EAEpCI,EAAe,QAAQX,CAAQ,GAEjC,IAAIc,EACAC,EAAcT,EAAiB7F,GAAsBsF,CAAS,EAAI,KAClEO,GACFU,IAEF,SAASA,GAAY,CACnB,MAAMC,EAAcxG,GAAsBsF,CAAS,EAC/CgB,IAAgBE,EAAY,IAAMF,EAAY,GAAKE,EAAY,IAAMF,EAAY,GAAKE,EAAY,QAAUF,EAAY,OAASE,EAAY,SAAWF,EAAY,SACtKd,IAEFc,EAAcE,EACdH,EAAU,sBAAsBE,CAAS,CAC1C,CACD,OAAAf,IACO,IAAM,CACX,IAAIiB,EACJV,EAAU,QAAQjD,GAAY,CAC5B2C,GAAkB3C,EAAS,oBAAoB,SAAU0C,CAAM,EAC/DE,GAAkB5C,EAAS,oBAAoB,SAAU0C,CAAM,CACrE,CAAK,EACDQ,GAAa,MAAQA,KACpBS,EAAmBP,IAAmB,MAAQO,EAAiB,WAAU,EAC1EP,EAAiB,KACbL,GACF,qBAAqBQ,CAAO,CAElC,CACA,CAUA,MAAMjL,GAAiBsL,GCnoBVC,GAAM,EACNC,EAAQ,EACRC,EAAW,EACXC,EAAY,EACZC,EAAO,EACPC,GAAS,EACTC,GAAY,EACZC,GAAM,EACNC,GAAS,EACTC,EAAQ,EACRC,EAAS,GACTC,EAAa,GACbC,EAAY,GACZC,EAAa,GACbC,GAAM,GACNC,GAAM,GACNC,GAAQ,GACRC,GAAY,GACZC,GAAQ,GACRC,GAAoB,GACpBC,GAAqB,GACrBC,EAAkB,GAClBC,EAAmB,GACnBC,EAAmB,GACnBC,GAAoB,GACpBC,EAAU,GC3BjBzB,GAAM,EAOL,SAAS0B,GAAQC,EAAM,CAC1B,OAAOA,GAAQ,IAAUA,GAAQ,EACrC,CAKO,SAASC,GAAWD,EAAM,CAC7B,OACID,GAAQC,CAAI,GACXA,GAAQ,IAAUA,GAAQ,IAC1BA,GAAQ,IAAUA,GAAQ,GAEnC,CAIO,SAASE,GAAkBF,EAAM,CACpC,OAAOA,GAAQ,IAAUA,GAAQ,EACrC,CAIO,SAASG,GAAkBH,EAAM,CACpC,OAAOA,GAAQ,IAAUA,GAAQ,GACrC,CAIO,SAASI,GAASJ,EAAM,CAC3B,OAAOE,GAAkBF,CAAI,GAAKG,GAAkBH,CAAI,CAC5D,CASO,SAASK,GAAWL,EAAM,CAC7B,OAAOA,GAAQ,GACnB,CAIO,SAASM,GAAYN,EAAM,CAC9B,OAAOI,GAASJ,CAAI,GAAKK,GAAWL,CAAI,GAAKA,IAAS,EAC1D,CAIO,SAASO,GAAOP,EAAM,CACzB,OAAOM,GAAYN,CAAI,GAAKD,GAAQC,CAAI,GAAKA,IAAS,EAC1D,CAKO,SAASQ,GAAeR,EAAM,CACjC,OACKA,GAAQ,GAAUA,GAAQ,GAC1BA,IAAS,IACTA,GAAQ,IAAUA,GAAQ,IAC1BA,IAAS,GAElB,CAMO,SAASS,GAAUT,EAAM,CAC5B,OAAOA,IAAS,IAAUA,IAAS,IAAUA,IAAS,EAC1D,CAIO,SAASU,GAAaV,EAAM,CAC/B,OAAOS,GAAUT,CAAI,GAAKA,IAAS,IAAUA,IAAS,CAC1D,CAGO,SAASW,GAAcC,EAAOC,EAAQ,CAOzC,MALI,EAAAD,IAAU,IAKVH,GAAUI,CAAM,GAAKA,IAAWxC,GAMxC,CAGO,SAASyC,GAAkBF,EAAOC,EAAQE,EAAO,CAIpD,OAAIH,IAAU,GAINN,GAAYO,CAAM,GAClBA,IAAW,IACXF,GAAcE,EAAQE,CAAK,EAK/BT,GAAYM,CAAK,EAEV,GAIPA,IAAU,GAEHD,GAAcC,EAAOC,CAAM,EAK/B,EACX,CAGO,SAASG,GAAcJ,EAAOC,EAAQE,EAAO,CAKhD,OAAIH,IAAU,IAAUA,IAAU,GAE1Bb,GAAQc,CAAM,EACP,EAMJA,IAAW,IAAUd,GAAQgB,CAAK,EAAI,EAAI,EAIjDH,IAAU,GAEHb,GAAQc,CAAM,EAAI,EAAI,EAI7Bd,GAAQa,CAAK,EAEN,EAKJ,CACX,CAOO,SAASK,GAAMjB,EAAM,CAOxB,OALIA,IAAS,OAKTA,IAAS,MACF,EAGJ,CACX,CAIA,MAAMkB,GAAW,IAAI,MAAM,GAAI,EAClBC,GAAc,IACdC,GAAqB,IACrBC,GAAgB,IAChBC,GAAoB,IACpBC,GAAuB,IAEpC,QAASC,EAAI,EAAGA,EAAIN,GAAS,OAAQM,IACjCN,GAASM,CAAC,EACNd,GAAac,CAAC,GAAKJ,IACnBrB,GAAQyB,CAAC,GAAKH,IACdf,GAAYkB,CAAC,GAAKF,IAClBd,GAAegB,CAAC,GAAKD,IACrBC,GAAKL,GAGN,SAASM,GAAiBzB,EAAM,CACnC,OAAOA,EAAO,IAAOkB,GAASlB,CAAI,EAAIsB,EAC1C,CC1MA,SAASI,GAAYC,EAAQC,EAAQ,CACjC,OAAOA,EAASD,EAAO,OAASA,EAAO,WAAWC,CAAM,EAAI,CAChE,CAEO,SAASC,GAAiBF,EAAQC,EAAQ5B,EAAM,CACnD,OAAIA,IAAS,IAAe0B,GAAYC,EAAQC,EAAS,CAAC,IAAM,GACrD,EAGJ,CACX,CAEO,SAASE,GAAQC,EAASH,EAAQI,EAAe,CACpD,IAAIhC,EAAO+B,EAAQ,WAAWH,CAAM,EAGpC,OAAI1B,GAAkBF,CAAI,IACtBA,EAAOA,EAAO,IAGXA,IAASgC,CACpB,CAEO,SAASC,GAAOF,EAASG,EAAOC,EAAKC,EAAc,CAKtD,GAJID,EAAMD,IAAUE,EAAa,QAI7BF,EAAQ,GAAKC,EAAMJ,EAAQ,OAC3B,MAAO,GAGX,QAAS,EAAIG,EAAO,EAAIC,EAAK,IAAK,CAC9B,MAAMH,EAAgBI,EAAa,WAAW,EAAIF,CAAK,EACvD,IAAIG,EAAWN,EAAQ,WAAW,CAAC,EAOnC,GAJI7B,GAAkBmC,CAAQ,IAC1BA,EAAWA,EAAW,IAGtBA,IAAaL,EACb,MAAO,EAEd,CAED,MAAO,EACX,CAEO,SAASM,GAAoBX,EAAQC,EAAQ,CAChD,KAAOA,GAAU,GACRlB,GAAaiB,EAAO,WAAWC,CAAM,CAAC,EAD3BA,IAChB,CAKJ,OAAOA,EAAS,CACpB,CAEO,SAASW,GAAkBZ,EAAQC,EAAQ,CAC9C,KAAOA,EAASD,EAAO,QACdjB,GAAaiB,EAAO,WAAWC,CAAM,CAAC,EADhBA,IAC3B,CAKJ,OAAOA,CACX,CAEO,SAASY,GAAqBb,EAAQC,EAAQ,CACjD,KAAOA,EAASD,EAAO,QACd5B,GAAQ4B,EAAO,WAAWC,CAAM,CAAC,EADXA,IAC3B,CAKJ,OAAOA,CACX,CAGO,SAASa,GAAed,EAAQC,EAAQ,CAM3C,GAHAA,GAAU,EAGN3B,GAAWyB,GAAYC,EAAQC,EAAS,CAAC,CAAC,EAAG,CAG7C,UAAWc,EAAY,KAAK,IAAIf,EAAO,OAAQC,EAAS,CAAC,EAAGA,EAASc,GAC5DzC,GAAWyB,GAAYC,EAAQC,CAAM,CAAC,EADiCA,IAC5E,CAMJ,MAAM5B,EAAO0B,GAAYC,EAAQC,CAAM,EACnClB,GAAaV,CAAI,IACjB4B,GAAUC,GAAiBF,EAAQC,EAAQ5B,CAAI,EAEtD,CAED,OAAO4B,CACX,CAMO,SAASe,GAAYhB,EAAQC,EAAQ,CAGxC,KAAOA,EAASD,EAAO,OAAQC,IAAU,CACrC,MAAM5B,EAAO2B,EAAO,WAAWC,CAAM,EAGrC,GAAI,CAAArB,GAAOP,CAAI,EAMf,IAAIW,GAAcX,EAAM0B,GAAYC,EAAQC,EAAS,CAAC,CAAC,EAAG,CAEtDA,EAASa,GAAed,EAAQC,CAAM,EAAI,EAC1C,QACH,CAID,MACH,CAED,OAAOA,CACX,CAGO,SAASgB,GAAcjB,EAAQC,EAAQ,CAC1C,IAAI5B,EAAO2B,EAAO,WAAWC,CAAM,EA8BnC,IA1BI5B,IAAS,IAAUA,IAAS,MAC5BA,EAAO2B,EAAO,WAAWC,GAAU,CAAC,GAIpC7B,GAAQC,CAAI,IACZ4B,EAASY,GAAqBb,EAAQC,EAAS,CAAC,EAChD5B,EAAO2B,EAAO,WAAWC,CAAM,GAI/B5B,IAAS,IAAUD,GAAQ4B,EAAO,WAAWC,EAAS,CAAC,CAAC,IAGxDA,GAAU,EAOVA,EAASY,GAAqBb,EAAQC,CAAM,GAK5CE,GAAQH,EAAQC,EAAQ,GAAG,EAAW,CACtC,IAAIiB,EAAO,EACX7C,EAAO2B,EAAO,WAAWC,EAAS,CAAC,GAG/B5B,IAAS,IAAUA,IAAS,MAC5B6C,EAAO,EACP7C,EAAO2B,EAAO,WAAWC,EAAS,CAAC,GAInC7B,GAAQC,CAAI,IAQZ4B,EAASY,GAAqBb,EAAQC,EAAS,EAAIiB,EAAO,CAAC,EAElE,CAED,OAAOjB,CACX,CAKO,SAASkB,GAAsBnB,EAAQC,EAAQ,CAElD,KAAOA,EAASD,EAAO,OAAQC,IAAU,CACrC,MAAM5B,EAAO2B,EAAO,WAAWC,CAAM,EAIrC,GAAI5B,IAAS,GAAQ,CAEjB4B,IACA,KACH,CAEGjB,GAAcX,EAAM0B,GAAYC,EAAQC,EAAS,CAAC,CAAC,IAKnDA,EAASa,GAAed,EAAQC,CAAM,EAE7C,CAED,OAAOA,CACX,CAIO,SAASmB,GAAcC,EAAS,CAEnC,GAAIA,EAAQ,SAAW,GAAK,CAAC/C,GAAW+C,EAAQ,WAAW,CAAC,CAAC,EACzD,OAAOA,EAAQ,CAAC,EAIpB,IAAIhD,EAAO,SAASgD,EAAS,EAAE,EAE/B,OACKhD,IAAS,GACTA,GAAQ,OAAUA,GAAQ,OAC1BA,EAAO,WAGRA,EAAO,OAIJ,OAAO,cAAcA,CAAI,CACpC,CC7Pe,MAAAiD,GAAA,CACX,YACA,cACA,iBACA,mBACA,aACA,eACA,mBACA,YACA,gBACA,cACA,eACA,mBACA,kBACA,mBACA,YACA,YACA,cACA,kBACA,cACA,UACA,UACA,UACA,UACA,UACA,UACA,eACJ,EC3BMC,GAAW,GAAK,KAEf,SAASC,GAAYC,EAAS,KAAMC,EAAM,CAC7C,OAAID,IAAW,MAAQA,EAAO,OAASC,EAC5B,IAAI,YAAY,KAAK,IAAIA,EAAO,KAAMH,EAAQ,CAAC,EAGnDE,CACX,CCLA,MAAME,GAAI,GACJC,GAAI,GACJC,GAAI,GAEV,SAASC,GAAuBC,EAAM,CAClC,MAAM/B,EAAS+B,EAAK,OACdC,EAAehC,EAAO,OACtBiC,EAAcjC,EAAO,OAAS,EAAIV,GAAMU,EAAO,WAAW,CAAC,CAAC,EAAI,EAChEkC,EAAQV,GAAYO,EAAK,MAAOC,CAAY,EAC5CG,EAAUX,GAAYO,EAAK,QAASC,CAAY,EACtD,IAAII,EAAOL,EAAK,UACZM,EAASN,EAAK,YAElB,QAASlC,EAAIoC,EAAapC,EAAImC,EAAcnC,IAAK,CAC7C,MAAMxB,EAAO2B,EAAO,WAAWH,CAAC,EAEhCqC,EAAMrC,CAAC,EAAIuC,EACXD,EAAQtC,CAAC,EAAIwC,KAEThE,IAASsD,IAAKtD,IAASwD,IAAKxD,IAASuD,MACjCvD,IAASwD,IAAKhC,EAAI,EAAImC,GAAgBhC,EAAO,WAAWH,EAAI,CAAC,IAAM8B,KACnE9B,IACAqC,EAAMrC,CAAC,EAAIuC,EACXD,EAAQtC,CAAC,EAAIwC,GAGjBD,IACAC,EAAS,EAEhB,CAEDH,EAAMF,CAAY,EAAII,EACtBD,EAAQH,CAAY,EAAIK,EAExBN,EAAK,MAAQG,EACbH,EAAK,QAAUI,EACfJ,EAAK,SAAW,EACpB,CAEO,MAAMO,EAAiB,CAC1B,aAAc,CACV,KAAK,MAAQ,KACb,KAAK,QAAU,KACf,KAAK,SAAW,EACnB,CACD,UAAUtC,EAAQiC,EAAc,EAAGM,EAAY,EAAGC,EAAc,EAAG,CAC/D,KAAK,OAASxC,EACd,KAAK,YAAciC,EACnB,KAAK,UAAYM,EACjB,KAAK,YAAcC,EACnB,KAAK,SAAW,EACnB,CACD,YAAYvC,EAAQwC,EAAU,CAC1B,OAAK,KAAK,UACNX,GAAuB,IAAI,EAGxB,CACH,OAAQW,EACR,OAAQ,KAAK,YAAcxC,EAC3B,KAAM,KAAK,MAAMA,CAAM,EACvB,OAAQ,KAAK,QAAQA,CAAM,CACvC,CACK,CACD,iBAAiBM,EAAOC,EAAKiC,EAAU,CACnC,OAAK,KAAK,UACNX,GAAuB,IAAI,EAGxB,CACH,OAAQW,EACR,MAAO,CACH,OAAQ,KAAK,YAAclC,EAC3B,KAAM,KAAK,MAAMA,CAAK,EACtB,OAAQ,KAAK,QAAQA,CAAK,CAC7B,EACD,IAAK,CACD,OAAQ,KAAK,YAAcC,EAC3B,KAAM,KAAK,MAAMA,CAAG,EACpB,OAAQ,KAAK,QAAQA,CAAG,CAC3B,CACb,CACK,CACL,CCrEA,MAAMkC,GAAc,SACdC,GAAa,GACbC,GAAc,IAAI,IAAI,CACxB,CAACC,EAAe7E,CAAgB,EAChC,CAACD,EAAiBC,CAAgB,EAClC,CAACH,GAAmBC,EAAkB,EACtC,CAACG,EAAkBC,EAAiB,CACxC,CAAC,EAEM,MAAM4E,EAAY,CACrB,YAAY9C,EAAQ+C,EAAU,CAC1B,KAAK,UAAU/C,EAAQ+C,CAAQ,CAClC,CACD,OAAQ,CACJ,KAAK,IAAM,GACX,KAAK,WAAa,GAClB,KAAK,UAAY,EACjB,KAAK,WAAa,KAAK,gBACvB,KAAK,SAAW,KAAK,eACxB,CACD,UAAU/C,EAAS,GAAI+C,EAAW,IAAM,CAAA,EAAI,CACxC/C,EAAS,OAAOA,GAAU,EAAE,EAE5B,MAAMgC,EAAehC,EAAO,OACtBgD,EAAgBxB,GAAY,KAAK,cAAexB,EAAO,OAAS,CAAC,EACjEiD,EAAUzB,GAAY,KAAK,QAASxB,EAAO,OAAS,CAAC,EAC3D,IAAIkD,EAAa,EACbC,EAAmB,EACnBC,EAAe,EACfC,EAAkB,GA8CtB,IA3CA,KAAK,cAAgB,KACrB,KAAK,QAAU,KAEfN,EAAS/C,EAAQ,CAACsD,EAAM/C,EAAOC,IAAQ,CACnC,OAAQ8C,EAAI,CACR,QACIL,EAAQC,CAAU,EAAIlB,EACtB,MAEJ,KAAKmB,EAAkB,CACnB,IAAII,EAAcH,EAAeV,GAKjC,IAJAU,EAAeH,EAAQM,CAAW,EAClCJ,EAAmBC,GAAgBT,GACnCM,EAAQC,CAAU,EAAIK,EACtBN,EAAQM,GAAa,EAAIL,EAClBK,EAAcL,EAAYK,IACzBN,EAAQM,CAAW,IAAMvB,IACzBiB,EAAQM,CAAW,EAAIL,GAG/B,KACH,CAED,KAAKnF,EACL,KAAK8E,EACL,KAAKhF,GACL,KAAKI,EACDgF,EAAQC,CAAU,EAAIE,EACtBD,EAAmBP,GAAY,IAAIU,CAAI,EACvCF,EAAgBD,GAAoBR,GAAcO,EAClD,KACP,CAEDF,EAAcE,GAAY,EAAKI,GAAQX,GAAcnC,EACjD6C,IAAoB,KACpBA,EAAkB9C,EAElC,CAAS,EAGDyC,EAAcE,CAAU,EAAKxG,IAAOiG,GAAcX,EAClDiB,EAAQC,CAAU,EAAIlB,EACtBiB,EAAQjB,CAAY,EAAIA,EACjBoB,IAAiB,GAAG,CACvB,MAAMG,EAAcH,EAAeV,GACnCU,EAAeH,EAAQM,CAAW,EAClCN,EAAQM,CAAW,EAAIvB,CAC1B,CAED,KAAK,OAAShC,EACd,KAAK,gBAAkBqD,IAAoB,GAAK,EAAIA,EACpD,KAAK,WAAaH,EAClB,KAAK,cAAgBF,EACrB,KAAK,QAAUC,EAEf,KAAK,MAAK,EACV,KAAK,KAAI,CACZ,CAED,WAAWhD,EAAQ,CAGf,OAFAA,GAAU,KAAK,WAEXA,EAAS,KAAK,WACP,KAAK,cAAcA,CAAM,GAAK0C,GAGlCjG,EACV,CACD,gBAAgB8G,EAAK,CACjB,QAASvD,EAAS,KAAK,WAAYA,EAAS,KAAK,WAAYA,IAAU,CACnE,MAAMwD,EAAY,KAAK,cAAcxD,CAAM,GAAK0C,GAEhD,GAAIc,IAAclG,GAAckG,IAActF,GACtCqF,MAAU,EACV,OAAOC,CAGlB,CAED,OAAO/G,EACV,CACD,aAAauD,EAAQ,CAGjB,OAFAA,GAAU,KAAK,WAEXA,EAAS,KAAK,WACP,KAAK,cAAcA,EAAS,CAAC,EAAIyC,GAGrC,KAAK,OAAO,MACtB,CACD,kBAAkBc,EAAK,CACnB,QAASvD,EAAS,KAAK,WAAYA,EAAS,KAAK,WAAYA,IAAU,CACnE,MAAMwD,EAAY,KAAK,cAAcxD,CAAM,GAAK0C,GAEhD,GAAIc,IAAclG,GAAckG,IAActF,GACtCqF,MAAU,EACV,OAAOvD,EAAS,KAAK,UAGhC,CAED,OAAOvD,EACV,CACD,YAAYuD,EAAQQ,EAAc,CAG9B,OAFAR,GAAU,KAAK,WAEXA,EAAS,KAAK,WACPK,GACH,KAAK,OACL,KAAK,cAAcL,EAAS,CAAC,EAAIyC,GACjC,KAAK,cAAczC,CAAM,EAAIyC,GAC7BjC,CAChB,EAGe,EACV,CACD,cAAciD,EAAY,CACtB,OAAIA,IAAe,KAAK,WACb,KAAK,WAGZA,EAAa,EACNA,EAAa,KAAK,WACnB,KAAK,cAAcA,EAAa,CAAC,EAAIhB,GACrC,KAAK,cAAc,KAAK,UAAU,EAAIA,GAGzC,KAAK,eACf,CACD,eAAenC,EAAO,CAClB,OAAO,KAAK,OAAO,UAAUA,EAAO,KAAK,UAAU,CACtD,CAED,cAAcoD,EAAK,CACf,OAAO,KAAK,QAAQ,KAAK,UAAU,EAAIA,CAC1C,CACD,QAAQtF,EAAM4B,EAAQ,CAClB,OAAIA,EAEI,KAAK,WAAWA,CAAM,IAAM9C,GAC5B,KAAK,OAAO,WAAW,KAAK,aAAa8C,CAAM,CAAC,IAAM5B,EAK1D,KAAK,YAAclB,GACnB,KAAK,OAAO,WAAW,KAAK,UAAU,IAAMkB,CAEnD,CAED,KAAK6E,EAAY,CACb,IAAIU,EAAO,KAAK,WAAaV,EAEzBU,EAAO,KAAK,YACZ,KAAK,WAAaA,EAClB,KAAK,WAAa,KAAK,cAAcA,EAAO,CAAC,EAAIlB,GACjDkB,EAAO,KAAK,cAAcA,CAAI,EAC9B,KAAK,UAAYA,GAAQjB,GACzB,KAAK,SAAWiB,EAAOlB,KAEvB,KAAK,WAAa,KAAK,WACvB,KAAK,KAAI,EAEhB,CACD,MAAO,CACH,IAAIkB,EAAO,KAAK,WAAa,EAEzBA,EAAO,KAAK,YACZ,KAAK,WAAaA,EAClB,KAAK,WAAa,KAAK,SACvBA,EAAO,KAAK,cAAcA,CAAI,EAC9B,KAAK,UAAYA,GAAQjB,GACzB,KAAK,SAAWiB,EAAOlB,KAEvB,KAAK,IAAM,GACX,KAAK,WAAa,KAAK,WACvB,KAAK,UAAYhG,GACjB,KAAK,WAAa,KAAK,SAAW,KAAK,OAAO,OAErD,CACD,QAAS,CACL,KAAO,KAAK,YAAca,GAAc,KAAK,YAAcY,GACvD,KAAK,KAAI,CAEhB,CACD,kBAAkB0F,EAAYC,EAAa,CACvC,IAAIC,EAASF,EACTG,EACA/D,EAEJgE,EACA,KAAOF,EAAS,KAAK,WAAYA,IAAU,CAIvC,GAHAC,EAAa,KAAK,QAAQD,CAAM,EAG5BC,EAAaH,EACb,MAAMI,EAMV,OAHAhE,EAAS8D,EAAS,EAAI,KAAK,cAAcA,EAAS,CAAC,EAAIrB,GAAc,KAAK,gBAGlEoB,EAAY,KAAK,OAAO,WAAW7D,CAAM,CAAC,EAAC,CAC/C,IAAK,GACD,MAAMgE,EAEV,IAAK,GACDF,IACA,MAAME,EAEV,QAEQ,KAAK,QAAQD,CAAU,IAAMD,IAC7BA,EAASC,EAEpB,CACJ,CAED,KAAK,KAAKD,EAAS,KAAK,UAAU,CACrC,CAED,aAAaG,EAAI,CACb,QAASrE,EAAI,EAAGI,EAAS,KAAK,gBAAiBJ,EAAI,KAAK,WAAYA,IAAK,CACrE,MAAMU,EAAQN,EACRkE,EAAO,KAAK,cAActE,CAAC,EAC3BW,EAAM2D,EAAOzB,GACbY,EAAOa,GAAQxB,GAErB1C,EAASO,EAET0D,EAAGZ,EAAM/C,EAAOC,EAAKX,CAAC,CACzB,CACJ,CACD,MAAO,CACH,MAAMuE,EAAS,IAAI,MAAM,KAAK,UAAU,EAExC,YAAK,aAAa,CAACd,EAAM/C,EAAOC,EAAK6D,IAAU,CAC3CD,EAAOC,CAAK,EAAI,CACZ,IAAKA,EACL,KAAM/C,GAAWgC,CAAI,EACrB,MAAO,KAAK,OAAO,UAAU/C,EAAOC,CAAG,EACvC,QAAS,KAAK,QAAQ6D,CAAK,CAC3C,CACA,CAAS,EAEMD,CACV,CACL,CCjRO,SAASrB,GAAS/C,EAAQsE,EAAS,CACtC,SAASvE,EAAYE,EAAQ,CACzB,OAAOA,EAAS+B,EAAehC,EAAO,WAAWC,CAAM,EAAI,CAC9D,CAGD,SAASsE,GAAsB,CAK3B,GAHAtE,EAASgB,GAAcjB,EAAQC,CAAM,EAGjCd,GAAkBY,EAAYE,CAAM,EAAGF,EAAYE,EAAS,CAAC,EAAGF,EAAYE,EAAS,CAAC,CAAC,EAAG,CAI1FqD,EAAOkB,EACPvE,EAASe,GAAYhB,EAAQC,CAAM,EACnC,MACH,CAGD,GAAIF,EAAYE,CAAM,IAAM,GAAQ,CAEhCqD,EAAOmB,EACPxE,IACA,MACH,CAGDqD,EAAOoB,CACV,CAGD,SAASC,GAAwB,CAC7B,MAAMC,EAAkB3E,EAOxB,GAJAA,EAASe,GAAYhB,EAAQC,CAAM,EAI/BK,GAAON,EAAQ4E,EAAiB3E,EAAQ,KAAK,GAAKF,EAAYE,CAAM,IAAM,GAAQ,CAOlF,GALAA,EAASW,GAAkBZ,EAAQC,EAAS,CAAC,EAKzCF,EAAYE,CAAM,IAAM,IACxBF,EAAYE,CAAM,IAAM,GAAQ,CAChCqD,EAAOuB,EACP5E,EAAS2E,EAAkB,EAC3B,MACH,CAGDE,IACA,MACH,CAID,GAAI/E,EAAYE,CAAM,IAAM,GAAQ,CAChCqD,EAAOuB,EACP5E,IACA,MACH,CAGDqD,EAAOyB,CACV,CAGD,SAASC,EAAmBC,EAAiB,CAYzC,IARKA,IACDA,EAAkBlF,EAAYE,GAAQ,GAI1CqD,EAAO4B,GAGAjF,EAASD,EAAO,OAAQC,IAAU,CACrC,MAAM5B,EAAO2B,EAAO,WAAWC,CAAM,EAErC,OAAQH,GAAiBzB,CAAI,EAAC,CAE1B,KAAK4G,EAEDhF,IACA,OAQJ,KAAKR,GACD,GAAIX,GAAUT,CAAI,EAAG,CAGjB4B,GAAUC,GAAiBF,EAAQC,EAAQ5B,CAAI,EAC/CiF,EAAO6B,GACP,MACH,CACD,MAGJ,IAAK,IAED,GAAIlF,IAAWD,EAAO,OAAS,EAC3B,MAGJ,MAAMoF,EAAWrF,EAAYE,EAAS,CAAC,EAGnCnB,GAAUsG,CAAQ,EAClBnF,GAAUC,GAAiBF,EAAQC,EAAS,EAAGmF,CAAQ,EAChDpG,GAAcX,EAAM+G,CAAQ,IAInCnF,EAASa,GAAed,EAAQC,CAAM,EAAI,GAE9C,KAIP,CACJ,CACJ,CAOD,SAAS6E,GAAkB,CAQvB,IANAxB,EAAO+B,GAGPpF,EAASW,GAAkBZ,EAAQC,CAAM,EAGlCA,EAASD,EAAO,OAAQC,IAAU,CACrC,MAAM5B,EAAO2B,EAAO,WAAWC,CAAM,EAErC,OAAQH,GAAiBzB,CAAI,EAAC,CAE1B,IAAK,IAED4B,IACA,OAQJ,KAAKR,GAOD,GALAQ,EAASW,GAAkBZ,EAAQC,CAAM,EAKrCF,EAAYE,CAAM,IAAM,IAAUA,GAAUD,EAAO,OAAQ,CACvDC,EAASD,EAAO,QAChBC,IAEJ,MACH,CAIDA,EAASkB,GAAsBnB,EAAQC,CAAM,EAC7CqD,EAAOgC,GACP,OAMJ,IAAK,IACL,IAAK,IACL,IAAK,IACL,KAAK1F,GAGDK,EAASkB,GAAsBnB,EAAQC,CAAM,EAC7CqD,EAAOgC,GACP,OAGJ,IAAK,IAGD,GAAItG,GAAcX,EAAM0B,EAAYE,EAAS,CAAC,CAAC,EAAG,CAC9CA,EAASa,GAAed,EAAQC,CAAM,EAAI,EAC1C,KACH,CAIDA,EAASkB,GAAsBnB,EAAQC,CAAM,EAC7CqD,EAAOgC,GACP,MAIP,CACJ,CACJ,CAGDtF,EAAS,OAAOA,GAAU,EAAE,EAE5B,MAAMgC,EAAehC,EAAO,OAC5B,IAAIO,EAAQjB,GAAMS,EAAY,CAAC,CAAC,EAC5BE,EAASM,EACT+C,EAIJ,KAAOrD,EAAS+B,GAAc,CAC1B,MAAM3D,EAAO2B,EAAO,WAAWC,CAAM,EAErC,OAAQH,GAAiBzB,CAAI,EAAC,CAE1B,KAAKoB,GAED6D,EAAOiC,EACPtF,EAASW,GAAkBZ,EAAQC,EAAS,CAAC,EAC7C,MAGJ,IAAK,IAED+E,IACA,MAGJ,IAAK,IAEGpG,GAAOmB,EAAYE,EAAS,CAAC,CAAC,GAAKjB,GAAce,EAAYE,EAAS,CAAC,EAAGF,EAAYE,EAAS,CAAC,CAAC,GAEjGqD,EAAOkC,EAQPvF,EAASe,GAAYhB,EAAQC,EAAS,CAAC,IAKvCqD,EAAOmC,EACPxF,KAGJ,MAGJ,IAAK,IAED+E,IACA,MAGJ,IAAK,IAED1B,EAAOoC,EACPzF,IACA,MAGJ,IAAK,IAEDqD,EAAOqC,EACP1F,IACA,MAGJ,IAAK,IAEGZ,GAAchB,EAAM0B,EAAYE,EAAS,CAAC,EAAGF,EAAYE,EAAS,CAAC,CAAC,EAEpEsE,KAGAjB,EAAOmC,EACPxF,KAEJ,MAGJ,IAAK,IAEDqD,EAAOsC,GACP3F,IACA,MAGJ,IAAK,IAEGZ,GAAchB,EAAM0B,EAAYE,EAAS,CAAC,EAAGF,EAAYE,EAAS,CAAC,CAAC,EACpEsE,IAGIxE,EAAYE,EAAS,CAAC,IAAM,IAC5BF,EAAYE,EAAS,CAAC,IAAM,IAC5BqD,EAAOuC,GACP5F,EAASA,EAAS,GAGdd,GAAkBd,EAAM0B,EAAYE,EAAS,CAAC,EAAGF,EAAYE,EAAS,CAAC,CAAC,EAExE0E,KAGArB,EAAOmC,EACPxF,KAIZ,MAGJ,IAAK,IAEGZ,GAAchB,EAAM0B,EAAYE,EAAS,CAAC,EAAGF,EAAYE,EAAS,CAAC,CAAC,EAEpEsE,KAGAjB,EAAOmC,EACPxF,KAGJ,MAGJ,IAAK,IAEGF,EAAYE,EAAS,CAAC,IAAM,IAG5BqD,EAAOwC,EACP7F,EAASD,EAAO,QAAQ,KAAMC,EAAS,CAAC,EACxCA,EAASA,IAAW,GAAKD,EAAO,OAASC,EAAS,IAElDqD,EAAOmC,EACPxF,KAEJ,MAGJ,IAAK,IAEDqD,EAAOyC,GACP9F,IACA,MAGJ,IAAK,IAEDqD,EAAO0C,GACP/F,IACA,MAGJ,IAAK,IAEGF,EAAYE,EAAS,CAAC,IAAM,IAC5BF,EAAYE,EAAS,CAAC,IAAM,IAC5BF,EAAYE,EAAS,CAAC,IAAM,IAE5BqD,EAAO2C,GACPhG,EAASA,EAAS,IAGlBqD,EAAOmC,EACPxF,KAGJ,MAGJ,IAAK,IAEGd,GAAkBY,EAAYE,EAAS,CAAC,EAAGF,EAAYE,EAAS,CAAC,EAAGF,EAAYE,EAAS,CAAC,CAAC,GAE3FqD,EAAO4C,EACPjG,EAASe,GAAYhB,EAAQC,EAAS,CAAC,IAGvCqD,EAAOmC,EACPxF,KAGJ,MAGJ,IAAK,IAEDqD,EAAO6C,GACPlG,IACA,MAGJ,IAAK,IAEGjB,GAAcX,EAAM0B,EAAYE,EAAS,CAAC,CAAC,EAE3C0E,KAGArB,EAAOmC,EACPxF,KAEJ,MAGJ,IAAK,IAEDqD,EAAO8C,GACPnG,IACA,MAGJ,IAAK,KAEDqD,EAAO+C,EACPpG,IACA,MAGJ,IAAK,KAEDqD,EAAOgD,GACPrG,IACA,MAGJ,KAAKP,GAED6E,IACA,MAGJ,KAAK5E,GAEDgF,IACA,MAQJ,QAEIrB,EAAOmC,EACPxF,GACP,CAGDqE,EAAQhB,EAAM/C,EAAOA,EAAQN,CAAM,CACtC,CACL,CCxeA,IAAIsG,GAAkB,KAEf,MAAMC,CAAK,CACd,OAAO,WAAW5M,EAAM,CACpB,MAAO,CACH,KAAM,KACN,KAAM,KACN,KAAAA,CACZ,CACK,CAED,aAAc,CACV,KAAK,KAAO,KACZ,KAAK,KAAO,KACZ,KAAK,OAAS,IACjB,CACD,WAAWA,EAAM,CACb,OAAO4M,EAAK,WAAW5M,CAAI,CAC9B,CAGD,eAAe6M,EAAM7C,EAAM,CACvB,IAAIG,EAEJ,OAAIwC,KAAoB,MACpBxC,EAASwC,GACTA,GAAkBA,GAAgB,OAClCxC,EAAO,KAAO0C,EACd1C,EAAO,KAAOH,EACdG,EAAO,OAAS,KAAK,QAErBA,EAAS,CACL,KAAA0C,EACA,KAAA7C,EACA,OAAQ,KAAK,MAC7B,EAGQ,KAAK,OAASG,EAEPA,CACV,CACD,eAAgB,CACZ,KAAM,CAAE,OAAAA,CAAQ,EAAG,KAEnB,KAAK,OAASA,EAAO,OACrBA,EAAO,KAAO,KACdA,EAAO,KAAO,KACdA,EAAO,OAASwC,GAChBA,GAAkBxC,CACrB,CACD,cAAc2C,EAASC,EAASC,EAASC,EAAS,CAC9C,GAAI,CAAE,OAAA9C,CAAQ,EAAG,KAEjB,KAAOA,IAAW,MACVA,EAAO,OAAS2C,IAChB3C,EAAO,KAAO4C,GAGd5C,EAAO,OAAS6C,IAChB7C,EAAO,KAAO8C,GAGlB9C,EAASA,EAAO,MAEvB,CACD,EAAE,OAAO,QAAQ,GAAI,CACjB,QAASA,EAAS,KAAK,KAAMA,IAAW,KAAMA,EAASA,EAAO,KAC1D,MAAMA,EAAO,IAEpB,CAGD,IAAI,MAAO,CACP,IAAIrC,EAAO,EAEX,QAASqC,EAAS,KAAK,KAAMA,IAAW,KAAMA,EAASA,EAAO,KAC1DrC,IAGJ,OAAOA,CACV,CACD,IAAI,SAAU,CACV,OAAO,KAAK,OAAS,IACxB,CACD,IAAI,OAAQ,CACR,OAAO,KAAK,MAAQ,KAAK,KAAK,IACjC,CACD,IAAI,MAAO,CACP,OAAO,KAAK,MAAQ,KAAK,KAAK,IACjC,CAGD,UAAUoF,EAAO,CACb,IAAI/C,EAAS,KACb,KAAK,KAAO,KAEZ,QAASnK,KAAQkN,EAAO,CACpB,MAAM3C,EAAOqC,EAAK,WAAW5M,CAAI,EAE7BmK,IAAW,KACXA,EAAO,KAAOI,EAEd,KAAK,KAAOA,EAGhBA,EAAK,KAAOJ,EACZA,EAASI,CACZ,CAED,YAAK,KAAOJ,EACL,IACV,CACD,SAAU,CACN,MAAO,CAAC,GAAG,IAAI,CAClB,CACD,QAAS,CACL,MAAO,CAAC,GAAG,IAAI,CAClB,CAGD,QAAQG,EAAI6C,EAAU,KAAM,CAExB,MAAMhD,EAAS,KAAK,eAAe,KAAM,KAAK,IAAI,EAElD,KAAOA,EAAO,OAAS,MAAM,CACzB,MAAMI,EAAOJ,EAAO,KACpBA,EAAO,KAAOI,EAAK,KACnBD,EAAG,KAAK6C,EAAS5C,EAAK,KAAMA,EAAM,IAAI,CACzC,CAGD,KAAK,cAAa,CACrB,CACD,aAAaD,EAAI6C,EAAU,KAAM,CAE7B,MAAMhD,EAAS,KAAK,eAAe,KAAK,KAAM,IAAI,EAElD,KAAOA,EAAO,OAAS,MAAM,CACzB,MAAMI,EAAOJ,EAAO,KACpBA,EAAO,KAAOI,EAAK,KACnBD,EAAG,KAAK6C,EAAS5C,EAAK,KAAMA,EAAM,IAAI,CACzC,CAGD,KAAK,cAAa,CACrB,CACD,OAAOD,EAAI8C,EAAcD,EAAU,KAAM,CAErC,IAAIhD,EAAS,KAAK,eAAe,KAAM,KAAK,IAAI,EAC5CkD,EAAMD,EACN7C,EAEJ,KAAOJ,EAAO,OAAS,MACnBI,EAAOJ,EAAO,KACdA,EAAO,KAAOI,EAAK,KAEnB8C,EAAM/C,EAAG,KAAK6C,EAASE,EAAK9C,EAAK,KAAMA,EAAM,IAAI,EAIrD,YAAK,cAAa,EAEX8C,CACV,CACD,YAAY/C,EAAI8C,EAAcD,EAAU,KAAM,CAE1C,IAAIhD,EAAS,KAAK,eAAe,KAAK,KAAM,IAAI,EAC5CkD,EAAMD,EACN7C,EAEJ,KAAOJ,EAAO,OAAS,MACnBI,EAAOJ,EAAO,KACdA,EAAO,KAAOI,EAAK,KAEnB8C,EAAM/C,EAAG,KAAK6C,EAASE,EAAK9C,EAAK,KAAMA,EAAM,IAAI,EAIrD,YAAK,cAAa,EAEX8C,CACV,CACD,KAAK/C,EAAI6C,EAAU,KAAM,CACrB,QAAShD,EAAS,KAAK,KAAMA,IAAW,KAAMA,EAASA,EAAO,KAC1D,GAAIG,EAAG,KAAK6C,EAAShD,EAAO,KAAMA,EAAQ,IAAI,EAC1C,MAAO,GAIf,MAAO,EACV,CACD,IAAIG,EAAI6C,EAAU,KAAM,CACpB,MAAM1S,EAAS,IAAImS,EAEnB,QAASzC,EAAS,KAAK,KAAMA,IAAW,KAAMA,EAASA,EAAO,KAC1D1P,EAAO,WAAW6P,EAAG,KAAK6C,EAAShD,EAAO,KAAMA,EAAQ,IAAI,CAAC,EAGjE,OAAO1P,CACV,CACD,OAAO6P,EAAI6C,EAAU,KAAM,CACvB,MAAM1S,EAAS,IAAImS,EAEnB,QAASzC,EAAS,KAAK,KAAMA,IAAW,KAAMA,EAASA,EAAO,KACtDG,EAAG,KAAK6C,EAAShD,EAAO,KAAMA,EAAQ,IAAI,GAC1C1P,EAAO,WAAW0P,EAAO,IAAI,EAIrC,OAAO1P,CACV,CAED,UAAUkM,EAAO2D,EAAI6C,EAAU,KAAM,CACjC,GAAIxG,IAAU,KACV,OAIJ,MAAMwD,EAAS,KAAK,eAAe,KAAMxD,CAAK,EAE9C,KAAOwD,EAAO,OAAS,MAAM,CACzB,MAAMI,EAAOJ,EAAO,KAEpB,GADAA,EAAO,KAAOI,EAAK,KACfD,EAAG,KAAK6C,EAAS5C,EAAK,KAAMA,EAAM,IAAI,EACtC,KAEP,CAGD,KAAK,cAAa,CACrB,CACD,UAAU5D,EAAO2D,EAAI6C,EAAU,KAAM,CACjC,GAAIxG,IAAU,KACV,OAIJ,MAAMwD,EAAS,KAAK,eAAexD,EAAO,IAAI,EAE9C,KAAOwD,EAAO,OAAS,MAAM,CACzB,MAAMI,EAAOJ,EAAO,KAEpB,GADAA,EAAO,KAAOI,EAAK,KACfD,EAAG,KAAK6C,EAAS5C,EAAK,KAAMA,EAAM,IAAI,EACtC,KAEP,CAGD,KAAK,cAAa,CACrB,CAGD,OAAQ,CACJ,KAAK,KAAO,KACZ,KAAK,KAAO,IACf,CACD,MAAO,CACH,MAAM9P,EAAS,IAAImS,EAEnB,QAAS5M,KAAQ,KACbvF,EAAO,WAAWuF,CAAI,EAG1B,OAAOvF,CACV,CACD,QAAQ8P,EAAM,CAIV,YAAK,cAAc,KAAMA,EAAM,KAAK,KAAMA,CAAI,EAG1C,KAAK,OAAS,MAEd,KAAK,KAAK,KAAOA,EAEjBA,EAAK,KAAO,KAAK,MAIjB,KAAK,KAAOA,EAIhB,KAAK,KAAOA,EACL,IACV,CACD,YAAYvK,EAAM,CACd,OAAO,KAAK,QAAQ4M,EAAK,WAAW5M,CAAI,CAAC,CAC5C,CACD,OAAOuK,EAAM,CACT,OAAO,KAAK,OAAOA,CAAI,CAC1B,CACD,WAAWvK,EAAM,CACb,OAAO,KAAK,OAAO4M,EAAK,WAAW5M,CAAI,CAAC,CAC3C,CACD,OAAOuK,EAAM+C,EAAS,KAAM,CACxB,GAAIA,IAAW,KAMX,GAFA,KAAK,cAAcA,EAAO,KAAM/C,EAAM+C,EAAQ/C,CAAI,EAE9C+C,EAAO,OAAS,KAAM,CAEtB,GAAI,KAAK,OAASA,EACd,MAAM,IAAI,MAAM,+BAAgC,EAIpD,KAAK,KAAO/C,EACZ+C,EAAO,KAAO/C,EACdA,EAAK,KAAO+C,EACZ,KAAK,cAAc,KAAM/C,CAAI,CAC7C,MAEgB+C,EAAO,KAAK,KAAO/C,EACnBA,EAAK,KAAO+C,EAAO,KACnBA,EAAO,KAAO/C,EACdA,EAAK,KAAO+C,OAMhB,KAAK,cAAc,KAAK,KAAM/C,EAAM,KAAMA,CAAI,EAG1C,KAAK,OAAS,MAEd,KAAK,KAAK,KAAOA,EAEjBA,EAAK,KAAO,KAAK,MAIjB,KAAK,KAAOA,EAIhB,KAAK,KAAOA,EAGhB,OAAO,IACV,CACD,WAAWvK,EAAMsN,EAAQ,CACrB,OAAO,KAAK,OAAOV,EAAK,WAAW5M,CAAI,EAAGsN,CAAM,CACnD,CACD,OAAO/C,EAAM,CAMT,GAFA,KAAK,cAAcA,EAAMA,EAAK,KAAMA,EAAMA,EAAK,IAAI,EAE/CA,EAAK,OAAS,KACdA,EAAK,KAAK,KAAOA,EAAK,SACnB,CACH,GAAI,KAAK,OAASA,EACd,MAAM,IAAI,MAAM,6BAA8B,EAGlD,KAAK,KAAOA,EAAK,IACpB,CAED,GAAIA,EAAK,OAAS,KACdA,EAAK,KAAK,KAAOA,EAAK,SACnB,CACH,GAAI,KAAK,OAASA,EACd,MAAM,IAAI,MAAM,6BAA8B,EAGlD,KAAK,KAAOA,EAAK,IACpB,CAED,OAAAA,EAAK,KAAO,KACZA,EAAK,KAAO,KAELA,CACV,CACD,KAAKvK,EAAM,CACP,KAAK,OAAO4M,EAAK,WAAW5M,CAAI,CAAC,CACpC,CACD,KAAM,CACF,OAAO,KAAK,OAAS,KAAO,KAAK,OAAO,KAAK,IAAI,EAAI,IACxD,CACD,QAAQA,EAAM,CACV,KAAK,QAAQ4M,EAAK,WAAW5M,CAAI,CAAC,CACrC,CACD,OAAQ,CACJ,OAAO,KAAK,OAAS,KAAO,KAAK,OAAO,KAAK,IAAI,EAAI,IACxD,CACD,YAAYnF,EAAM,CACd,OAAO,KAAK,WAAWA,EAAM,KAAK,IAAI,CACzC,CACD,WAAWA,EAAM,CACb,OAAO,KAAK,WAAWA,CAAI,CAC9B,CACD,WAAWA,EAAMyS,EAAQ,CAErB,OAAIzS,EAAK,OAAS,KACP,MAGiByS,GAAW,MACnC,KAAK,cAAcA,EAAO,KAAMzS,EAAK,KAAMyS,EAAQzS,EAAK,IAAI,EAGxDyS,EAAO,OAAS,MAEhBA,EAAO,KAAK,KAAOzS,EAAK,KACxBA,EAAK,KAAK,KAAOyS,EAAO,MAExB,KAAK,KAAOzS,EAAK,KAGrByS,EAAO,KAAOzS,EAAK,KACnBA,EAAK,KAAK,KAAOyS,IAEjB,KAAK,cAAc,KAAK,KAAMzS,EAAK,KAAM,KAAMA,EAAK,IAAI,EAGpD,KAAK,OAAS,MAId,KAAK,KAAK,KAAOA,EAAK,KAEtBA,EAAK,KAAK,KAAO,KAAK,MAItB,KAAK,KAAOA,EAAK,KAIrB,KAAK,KAAOA,EAAK,MAGrBA,EAAK,KAAO,KACZA,EAAK,KAAO,KACL,KACV,CACD,QAAQ0S,EAASC,EAAe,CACxB,SAAUA,EACV,KAAK,WAAWA,EAAeD,CAAO,EAEtC,KAAK,OAAOC,EAAeD,CAAO,EAGtC,KAAK,OAAOA,CAAO,CACtB,CACL,CCpdO,SAASE,GAAkBC,EAAMC,EAAS,CAG7C,MAAMC,EAAQ,OAAO,OAAO,YAAY,SAAS,EAC3CC,EAAa,IAAI,MAEvB,OAAO,OAAO,OAAOD,EAAO,CACxB,KAAAF,EACA,QAAAC,EACA,IAAI,OAAQ,CACR,OAAQE,EAAW,OAAS,IAAI,QAAQ,eAAgB,GAAGH,CAAI,KAAKC,CAAO;AAAA,CAAI,CAClF,CACT,CAAK,CACL,CCXA,MAAMG,GAAkB,IAClBC,GAAoB,GACpBC,GAAkB,OAExB,SAASC,GAAe,CAAE,OAAA7H,EAAQ,KAAAoC,EAAM,OAAAC,EAAQ,SAAAyF,EAAU,WAAAC,CAAY,EAAEC,EAAY,CAChF,SAASC,EAAa1H,EAAOC,EAAK,CAC9B,OAAO0B,EACF,MAAM3B,EAAOC,CAAG,EAChB,IAAI,CAAC4B,EAAMoB,IACR,OAAOjD,EAAQiD,EAAM,CAAC,EAAE,SAAS0E,CAAY,EAAI,KAAO9F,CACxE,EAAc,KAAK;AAAA,CAAI,CAClB,CAED,MAAM+F,EAAW;AAAA,EAAK,OAAO,KAAK,IAAIL,EAAW,EAAG,CAAC,CAAC,EAChDM,EAAa,IAAI,OAAO,KAAK,IAAIL,EAAa,EAAG,CAAC,CAAC,EACnD7F,GAASiG,EAAWC,EAAapI,GAAQ,MAAM,aAAa,EAC5DuC,EAAY,KAAK,IAAI,EAAGH,EAAO4F,CAAU,EAAI,EAC7CK,EAAU,KAAK,IAAIjG,EAAO4F,EAAY9F,EAAM,OAAS,CAAC,EACtDgG,EAAe,KAAK,IAAI,EAAG,OAAOG,CAAO,EAAE,MAAM,EAAI,EAC3D,IAAIC,EAAU,EAGdjG,IAAWuF,GAAgB,OAAS,IAAM1F,EAAME,EAAO,CAAC,EAAE,OAAO,EAAGC,EAAS,CAAC,EAAE,MAAM,KAAK,GAAK,CAAE,GAAE,OAEhGA,EAASqF,KACTY,EAAUjG,EAASsF,GAAoB,EACvCtF,EAASsF,GAAoB,GAGjC,QAAS9H,EAAI0C,EAAW1C,GAAKwI,EAASxI,IAC9BA,GAAK,GAAKA,EAAIqC,EAAM,SACpBA,EAAMrC,CAAC,EAAIqC,EAAMrC,CAAC,EAAE,QAAQ,MAAO+H,EAAe,EAClD1F,EAAMrC,CAAC,GACFyI,EAAU,GAAKpG,EAAMrC,CAAC,EAAE,OAASyI,EAAU,IAAW,IACvDpG,EAAMrC,CAAC,EAAE,OAAOyI,EAASZ,GAAkB,CAAC,GAC3CxF,EAAMrC,CAAC,EAAE,OAASyI,EAAUZ,GAAkB,EAAI,IAAW,KAI1E,MAAO,CACHO,EAAa1F,EAAWH,CAAI,EAC5B,IAAI,MAAMC,EAAS6F,EAAe,CAAC,EAAE,KAAK,GAAG,EAAI,IACjDD,EAAa7F,EAAMiG,CAAO,CAClC,EAAM,OAAO,OAAO,EACX,KAAK;AAAA,CAAI,EACT,QAAQ,oBAAqB,EAAE,EAC/B,QAAQ,oBAAqB,EAAE,CACxC,CAEO,SAASE,GAAYhB,EAASvH,EAAQC,EAAQmC,EAAMC,EAAQyF,EAAW,EAAGC,EAAa,EAAG,CAiB7F,OAhBc,OAAO,OAAOV,GAAkB,cAAeE,CAAO,EAAG,CACnE,OAAAvH,EACA,OAAAC,EACA,KAAAmC,EACA,OAAAC,EACA,eAAe2F,EAAY,CACvB,OAAOH,GAAe,CAAE,OAAA7H,EAAQ,KAAAoC,EAAM,OAAAC,EAAQ,SAAAyF,EAAU,WAAAC,CAAY,EAAE,MAAMC,CAAU,EAAI,EAAIA,CAAU,CAC3G,EACD,IAAI,kBAAmB,CACnB,MACI,gBAAgBT,CAAO;AAAA,EACvBM,GAAe,CAAE,OAAA7H,EAAQ,KAAAoC,EAAM,OAAAC,EAAQ,SAAAyF,EAAU,WAAAC,CAAY,EAAE,CAAC,CAEvE,CACT,CAAK,CAGL,CCnEO,SAASS,GAAaC,EAAY,CACrC,MAAMC,EAAW,KAAK,aACtB,IAAIC,EAAQ,GACZ,MAAMC,EAAU,CACZ,WAAAH,CACR,EAEI,KAAO,CAAC,KAAK,KAAK,CACd,OAAQ,KAAK,UAAS,CAClB,KAAKtK,EACD,KAAK,KAAI,EACT,SAEJ,KAAKZ,EACDoL,EAAQ,GACR,KAAK,KAAI,EACT,QACP,CAED,IAAIE,EAAQJ,EAAW,QAAQ,KAAK,KAAMG,CAAO,EAEjD,GAAIC,IAAU,OACV,MAGAF,IACIF,EAAW,cACXA,EAAW,aAAa,KAAK,KAAMI,EAAOH,EAAUE,CAAO,EAE/DD,EAAQ,IAGZD,EAAS,KAAKG,CAAK,CACtB,CAED,OAAIF,GAASF,EAAW,cACpBA,EAAW,aAAa,KAAK,KAAM,KAAMC,EAAUE,CAAO,EAGvDF,CACX,CClBA,MAAMI,GAAO,IAAM,CAAA,EACbC,GAAkB,GAClBC,GAAa,GACbC,GAAY,GACZC,GAAmB,IACnBC,GAAO,EAEb,SAASC,GAAmB9B,EAAM,CAC9B,OAAO,UAAW,CACd,OAAO,KAAKA,CAAI,GACxB,CACA,CAEA,SAAS+B,GAAiBC,EAAM,CAC5B,MAAMjV,EAAS,OAAO,OAAO,IAAI,EAEjC,UAAWiT,KAAQ,OAAO,KAAKgC,CAAI,EAAG,CAClC,MAAMnF,EAAOmF,EAAKhC,CAAI,EAChBpD,EAAKC,EAAK,OAASA,EAErBD,IACA7P,EAAOiT,CAAI,EAAIpD,EAEtB,CAED,OAAO7P,CACX,CAEA,SAASkV,GAAcC,EAAQ,CAC3B,MAAMC,EAAc,CAChB,QAAS,OAAO,OAAO,IAAI,EAC3B,SAAU,OAAO,OAAO,OAAO,OAAO,IAAI,EAAGD,EAAO,QAAQ,EAC5D,MAAO,OAAO,OAAO,OAAO,OAAO,IAAI,EAAGA,EAAO,KAAK,EACtD,OAAQH,GAAiBG,EAAO,MAAM,EACtC,OAAQH,GAAiBG,EAAO,MAAM,EACtC,KAAMH,GAAiBG,EAAO,IAAI,CAC1C,EAEI,SAAW,CAAClC,EAAMsB,CAAO,IAAK,OAAO,QAAQY,EAAO,YAAY,EAC5D,OAAQ,OAAOZ,EAAO,CAClB,IAAK,WACDa,EAAY,QAAQnC,CAAI,EAAIsB,EAC5B,MAEJ,IAAK,SACDa,EAAY,QAAQnC,CAAI,EAAI8B,GAAmBR,CAAO,EACtD,KACP,CAGL,OAAOjY,IAAA,CACH,OAAQ8Y,GACLA,GACAA,EAAY,KAEvB,CAEO,SAASC,GAAaF,EAAQ,CACjC,IAAIxJ,EAAS,GACTyC,EAAW,YACXkH,EAAgB,GAChBC,EAAed,GACfe,EAAoB,GAExB,MAAMC,EAAc,IAAIxH,GAClByH,EAAS,OAAO,OAAO,IAAIjH,GAAeyG,GAAcC,GAAU,CAAA,CAAE,EAAG,CACzE,mBAAoB,GACpB,iBAAkB,GAClB,WAAY,GACZ,oBAAqB,GAErB,aAAAhB,GAEA,uBAAwB,IAAM,EAC9B,6BAA6BnK,EAAM,CAC/B,OAAOA,IAAS6K,GAAmB,EAAI,CAC1C,EACD,wCAAwC7K,EAAM,CAC1C,OAAOA,IAAS6K,IAAoB7K,IAAS4K,GAAY,EAAI,CAChE,EACD,uCAAuC5K,EAAM,CACzC,OAAOA,IAAS0K,IAAmB1K,IAAS4K,GAAY,EAAI,CAC/D,EACD,8BAA8B5K,EAAM,CAChC,OAAOA,IAAS4K,GAAY,EAAI,CACnC,EAED,YAAa,CACT,OAAO,IAAIzC,CACd,EACD,qBAAqBhU,EAAM,CACvB,OAAO,IAAIgU,EAAI,EAAG,WAAWhU,CAAI,CACpC,EACD,iBAAiBiC,EAAM,CACnB,OAAOA,GAAQA,EAAK,KACvB,EACD,gBAAgBA,EAAM,CAClB,OAAOA,GAAQA,EAAK,IACvB,EAED,kBAAkBuV,EAAUC,EAAU,CAClC,MAAMC,EAAa,KAAK,WAExB,GAAI,CACA,OAAOF,EAAS,KAAK,IAAI,CAC5B,OAAQtW,EAAG,CACR,GAAImW,EACA,MAAMnW,EAGV,KAAK,KAAKwW,EAAa,KAAK,UAAU,EACtC,MAAMC,EAAeF,EAAS,KAAK,IAAI,EAEvC,OAAAJ,EAAoB,GACpBD,EAAalW,EAAGyW,CAAY,EAC5BN,EAAoB,GAEbM,CACV,CACJ,EAED,gBAAgBlK,EAAQ,CACpB,IAAIqD,EAEJ,EAEI,IADAA,EAAO,KAAK,WAAWrD,GAAQ,EAC3BqD,IAAS/F,GAAc+F,IAASnF,EAChC,OAAOmF,QAENA,IAAS6F,IAElB,OAAOA,EACV,EAED,WAAWlJ,EAAQ,CACf,OAAOA,GAAU,GAAKA,EAASD,EAAO,OAASA,EAAO,WAAWC,CAAM,EAAI,CAC9E,EACD,UAAUmK,EAAaC,EAAW,CAC9B,OAAOrK,EAAO,UAAUoK,EAAaC,CAAS,CACjD,EACD,eAAe9J,EAAO,CAClB,OAAO,KAAK,OAAO,UAAUA,EAAO,KAAK,UAAU,CACtD,EAED,QAAQN,EAAQqK,EAAU,CACtB,OAAOnK,GAAQH,EAAQC,EAAQqK,CAAQ,CAC1C,EACD,OAAOF,EAAaC,EAAWE,EAAK,CAChC,OAAOjK,GAAON,EAAQoK,EAAaC,EAAWE,CAAG,CACpD,EAED,QAAQ9G,EAAW,CACf,MAAMlD,EAAQ,KAAK,WAEnB,YAAK,IAAIkD,CAAS,EAEX,KAAK,eAAelD,CAAK,CACnC,EACD,qBAAsB,CAClB,MAAM+G,EAAOtH,EAAO,UAAU,KAAK,WAAY,KAAK,SAAW,CAAC,EAEhE,YAAK,IAAI6C,CAAa,EAEfyE,CACV,EACD,cAAchE,EAAM,CAChB,MAAMkH,EAASxK,EAAO,UAAU,KAAK,WAAYiB,GAAcjB,EAAQ,KAAK,UAAU,CAAC,EAEvF,YAAK,IAAIsD,CAAI,EAENkH,CACV,EAED,IAAI/G,EAAW,CACX,GAAI,KAAK,YAAcA,EAAW,CAC9B,MAAMgH,EAAYnJ,GAAWmC,CAAS,EAAE,MAAM,EAAG,EAAE,EAAE,QAAQ,KAAM,GAAG,EAAE,QAAQ,KAAM,GAAK,EAAE,YAAW,CAAE,EAC1G,IAAI8D,EAAU,GAAG,YAAY,KAAKkD,CAAS,EAAI,IAAIA,CAAS,IAAMA,CAAS,eACvExK,EAAS,KAAK,WAGlB,OAAQwD,EAAS,CACb,KAAK9G,EAEG,KAAK,YAAckG,GAAiB,KAAK,YAAc5F,IACvDgD,EAAS,KAAK,SAAW,EACzBsH,EAAU,6CAEVA,EAAU,yBAEd,MAEJ,KAAKzK,EACG,KAAK,QAAQkM,EAAU,IACvB,KAAK,KAAI,EACT/I,IACAsH,EAAU,oBAEd,MAEJ,KAAKlK,EACG,KAAK,YAAcqN,IACnBzK,EAAS,KAAK,SACdsH,EAAU,4BAEd,KACP,CAED,KAAK,MAAMA,EAAStH,CAAM,CAC7B,CAED,KAAK,KAAI,CACZ,EACD,SAASqH,EAAM,EACP,KAAK,YAAc3K,GAAS,KAAK,YAAY,EAAG2K,CAAI,IAAM,KAC1D,KAAK,MAAM,eAAeA,CAAI,eAAe,EAGjD,KAAK,KAAI,CACZ,EACD,SAASjJ,EAAM,CACN,KAAK,QAAQA,CAAI,GAClB,KAAK,MAAM,UAAU,OAAO,aAAaA,CAAI,CAAC,eAAe,EAGjE,KAAK,KAAI,CACZ,EAED,YAAYkC,EAAOC,EAAK,CACpB,OAAImJ,EACOG,EAAY,iBACfvJ,EACAC,EACAiC,CACpB,EAGmB,IACV,EACD,oBAAoBhO,EAAM,CACtB,GAAIkV,EAAe,CACf,MAAMgB,EAAO,KAAK,iBAAiBlW,CAAI,EACjCmW,EAAO,KAAK,gBAAgBnW,CAAI,EACtC,OAAOqV,EAAY,iBACfa,IAAS,KAAOA,EAAK,IAAI,MAAM,OAASb,EAAY,YAAc,KAAK,WACvEc,IAAS,KAAOA,EAAK,IAAI,IAAI,OAASd,EAAY,YAAc,KAAK,WACrErH,CACpB,CACa,CAED,OAAO,IACV,EAED,MAAM8E,EAAStH,EAAQ,CACnB,MAAM4K,EAAW,OAAO5K,GAAW,aAAeA,EAASD,EAAO,OAC5D8J,EAAY,YAAY7J,CAAM,EAC9B,KAAK,IACD6J,EAAY,YAAYnJ,GAAoBX,EAAQA,EAAO,OAAS,CAAC,CAAC,EACtE8J,EAAY,YAAY,KAAK,UAAU,EAEjD,MAAM,IAAIvB,GACNhB,GAAW,mBACXvH,EACA6K,EAAS,OACTA,EAAS,KACTA,EAAS,OACTf,EAAY,UACZA,EAAY,WAC5B,CACS,CACT,CAAK,EAoDD,OAAO,OAAO,OAlDA,SAASgB,EAASzZ,EAAS,CACrC2O,EAAS8K,EACTzZ,EAAUA,GAAW,GAErB0Y,EAAO,UAAU/J,EAAQ+C,EAAQ,EACjC+G,EAAY,UACR9J,EACA3O,EAAQ,OACRA,EAAQ,KACRA,EAAQ,MACpB,EAEQoR,EAAWpR,EAAQ,UAAY,YAC/BsY,EAAgB,EAAQtY,EAAQ,UAChCuY,EAAe,OAAOvY,EAAQ,cAAiB,WAAaA,EAAQ,aAAeyX,GACnFe,EAAoB,GAEpBE,EAAO,mBAAqB,uBAAwB1Y,EAAU,EAAQA,EAAQ,mBAAsB,GACpG0Y,EAAO,iBAAmB,qBAAsB1Y,EAAU,EAAQA,EAAQ,iBAAoB,GAC9F0Y,EAAO,WAAa,eAAgB1Y,EAAU,EAAQA,EAAQ,WAAc,GAC5E0Y,EAAO,oBAAsB,wBAAyB1Y,EAAU,EAAQA,EAAQ,oBAAuB,GAEvG,KAAM,CAAE,QAAAuX,EAAU,UAAW,UAAAmC,CAAS,EAAK1Z,EAE3C,GAAI,EAAAuX,KAAWmB,EAAO,SAClB,MAAM,IAAI,MAAM,oBAAsBnB,EAAU,GAAG,EAGnD,OAAOmC,GAAc,YACrBhB,EAAO,aAAa,CAACzG,EAAM/C,EAAOC,IAAQ,CACtC,GAAI8C,IAASnF,EAAS,CAClB,MAAM6M,EAAMjB,EAAO,YAAYxJ,EAAOC,CAAG,EACnCjQ,EAAQ+P,GAAON,EAAQQ,EAAM,EAAGA,EAAK,IAAI,EACzCR,EAAO,MAAMO,EAAQ,EAAGC,EAAM,CAAC,EAC/BR,EAAO,MAAMO,EAAQ,EAAGC,CAAG,EAEjCuK,EAAUxa,EAAOya,CAAG,CACvB,CACjB,CAAa,EAGL,MAAMC,EAAMlB,EAAO,QAAQnB,CAAO,EAAE,KAAKmB,EAAQ1Y,CAAO,EAExD,OAAK0Y,EAAO,KACRA,EAAO,MAAK,EAGTkB,CACf,EAEgC,CAChC,YAAQ1C,GACA,OAAQwB,EAAO,MACvB,CAAK,CACL,iBCtVImB,GAAe,mEAAmE,MAAM,EAAE,EAKhFC,GAAA,OAAG,SAAUX,EAAQ,CACjC,GAAI,GAAKA,GAAUA,EAASU,GAAa,OACvC,OAAOA,GAAaV,CAAM,EAE5B,MAAM,IAAI,UAAU,6BAA+BA,CAAM,CAC3D,EAMcW,GAAA,OAAG,SAAUb,EAAU,CACnC,IAAIc,EAAO,GACPC,EAAO,GAEPC,EAAU,GACVC,EAAU,IAEVC,EAAO,GACPC,EAAO,GAEPC,EAAO,GACPC,EAAQ,GAERC,EAAe,GACfC,EAAe,GAGnB,OAAIT,GAAQd,GAAYA,GAAYe,EAC1Bf,EAAWc,EAIjBE,GAAWhB,GAAYA,GAAYiB,EAC7BjB,EAAWgB,EAAUM,EAI3BJ,GAAQlB,GAAYA,GAAYmB,EAC1BnB,EAAWkB,EAAOK,EAIxBvB,GAAYoB,EACP,GAILpB,GAAYqB,EACP,GAIF,EACT,EC7BA,IAAIR,GAASW,GAcTC,GAAiB,EAGjBC,GAAW,GAAKD,GAGhBE,GAAgBD,GAAW,EAG3BE,GAAuBF,GAQ3B,SAASG,GAAYC,EAAQ,CAC3B,OAAOA,EAAS,GACV,CAACA,GAAW,GAAK,GAClBA,GAAU,GAAK,CACtB,CAQA,SAASC,GAAcD,EAAQ,CAC7B,IAAIE,GAAcF,EAAS,KAAO,EAC9BG,EAAUH,GAAU,EACxB,OAAOE,EACH,CAACC,EACDA,CACN,CAKAC,GAAA,OAAiB,SAA0BJ,EAAQ,CACjD,IAAIK,EAAU,GACVC,EAEAC,EAAMR,GAAYC,CAAM,EAE5B,GACEM,EAAQC,EAAMV,GACdU,KAASZ,GACLY,EAAM,IAGRD,GAASR,IAEXO,GAAWtB,GAAO,OAAOuB,CAAK,QACvBC,EAAM,GAEf,OAAOF,CACT,EAMcD,GAAA,OAAG,SAA0BI,EAAMC,EAAQC,EAAW,CAClE,IAAIC,EAASH,EAAK,OACdvY,EAAS,EACT2Y,EAAQ,EACRC,EAAcP,EAElB,EAAG,CACD,GAAIG,GAAUE,EACZ,MAAM,IAAI,MAAM,4CAA4C,EAI9D,GADAL,EAAQvB,GAAO,OAAOyB,EAAK,WAAWC,GAAQ,CAAC,EAC3CH,IAAU,GACZ,MAAM,IAAI,MAAM,yBAA2BE,EAAK,OAAOC,EAAS,CAAC,CAAC,EAGpEI,EAAe,CAAC,EAAEP,EAAQR,IAC1BQ,GAAST,GACT5X,EAASA,GAAUqY,GAASM,GAC5BA,GAASjB,EACV,OAAQkB,GAETH,EAAU,MAAQT,GAAchY,CAAM,EACtCyY,EAAU,KAAOD,CACnB,yBC1HA,SAASK,EAAOC,EAAOC,EAAOC,EAAe,CAC3C,GAAID,KAASD,EACX,OAAOA,EAAMC,CAAK,EACb,GAAI,UAAU,SAAW,EAC9B,OAAOC,EAEP,MAAM,IAAI,MAAM,IAAMD,EAAQ,2BAA2B,CAE5D,CACDE,EAAA,OAAiBJ,EAEjB,IAAIK,EAAY,iEACZC,EAAgB,gBAEpB,SAASC,EAASC,EAAM,CACtB,IAAIC,EAAQD,EAAK,MAAMH,CAAS,EAChC,OAAKI,EAGE,CACL,OAAQA,EAAM,CAAC,EACf,KAAMA,EAAM,CAAC,EACb,KAAMA,EAAM,CAAC,EACb,KAAMA,EAAM,CAAC,EACb,KAAMA,EAAM,CAAC,CACjB,EARW,IASV,CACDL,EAAA,SAAmBG,EAEnB,SAASG,EAAYC,EAAY,CAC/B,IAAIC,EAAM,GACV,OAAID,EAAW,SACbC,GAAOD,EAAW,OAAS,KAE7BC,GAAO,KACHD,EAAW,OACbC,GAAOD,EAAW,KAAO,KAEvBA,EAAW,OACbC,GAAOD,EAAW,MAEhBA,EAAW,OACbC,GAAO,IAAMD,EAAW,MAEtBA,EAAW,OACbC,GAAOD,EAAW,MAEbC,CACR,CACDR,EAAA,YAAsBM,EAEtB,IAAIG,EAAoB,GASxB,SAASC,EAAW,EAAG,CACrB,IAAI1V,EAAQ,CAAA,EAEZ,OAAO,SAAS2V,EAAO,CACrB,QAASpO,EAAI,EAAGA,EAAIvH,EAAM,OAAQuH,IAChC,GAAIvH,EAAMuH,CAAC,EAAE,QAAUoO,EAAO,CAC5B,IAAIC,EAAO5V,EAAM,CAAC,EAClB,OAAAA,EAAM,CAAC,EAAIA,EAAMuH,CAAC,EAClBvH,EAAMuH,CAAC,EAAIqO,EACJ5V,EAAM,CAAC,EAAE,MACjB,CAGH,IAAIjE,EAAS,EAAE4Z,CAAK,EAEpB,OAAA3V,EAAM,QAAQ,CACZ,MAAA2V,EACA,OAAA5Z,CACN,CAAK,EAEGiE,EAAM,OAASyV,GACjBzV,EAAM,IAAG,EAGJjE,CACX,CACC,CAaD,IAAI8Z,EAAYH,EAAW,SAAmBI,EAAO,CACnD,IAAIC,EAAOD,EACPN,EAAML,EAASW,CAAK,EACxB,GAAIN,EAAK,CACP,GAAI,CAACA,EAAI,KACP,OAAOM,EAETC,EAAOP,EAAI,IACZ,CAOD,QANIQ,EAAahB,EAAQ,WAAWe,CAAI,EAGpCE,EAAQ,CAAA,EACRhO,GAAQ,EACRV,EAAI,IAIN,GAFAU,GAAQV,EACRA,EAAIwO,EAAK,QAAQ,IAAK9N,EAAK,EACvBV,IAAM,GAAI,CACZ0O,EAAM,KAAKF,EAAK,MAAM9N,EAAK,CAAC,EAC5B,KACN,KAEM,KADAgO,EAAM,KAAKF,EAAK,MAAM9N,GAAOV,CAAC,CAAC,EACxBA,EAAIwO,EAAK,QAAUA,EAAKxO,CAAC,IAAM,KACpCA,IAKN,QAAS2O,GAAMC,GAAK,EAAG5O,EAAI0O,EAAM,OAAS,EAAG1O,GAAK,EAAGA,IACnD2O,GAAOD,EAAM1O,CAAC,EACV2O,KAAS,IACXD,EAAM,OAAO1O,EAAG,CAAC,EACR2O,KAAS,KAClBC,KACSA,GAAK,IACVD,KAAS,IAIXD,EAAM,OAAO1O,EAAI,EAAG4O,EAAE,EACtBA,GAAK,IAELF,EAAM,OAAO1O,EAAG,CAAC,EACjB4O,OAUN,OANAJ,EAAOE,EAAM,KAAK,GAAG,EAEjBF,IAAS,KACXA,EAAOC,EAAa,IAAM,KAGxBR,GACFA,EAAI,KAAOO,EACJT,EAAYE,CAAG,GAEjBO,CACT,CAAC,EACDf,EAAA,UAAoBa,EAkBpB,SAASO,EAAKC,EAAOP,EAAO,CACtBO,IAAU,KACZA,EAAQ,KAENP,IAAU,KACZA,EAAQ,KAEV,IAAIQ,EAAWnB,EAASW,CAAK,EACzBS,EAAWpB,EAASkB,CAAK,EAM7B,GALIE,IACFF,EAAQE,EAAS,MAAQ,KAIvBD,GAAY,CAACA,EAAS,OACxB,OAAIC,IACFD,EAAS,OAASC,EAAS,QAEtBjB,EAAYgB,CAAQ,EAG7B,GAAIA,GAAYR,EAAM,MAAMZ,CAAa,EACvC,OAAOY,EAIT,GAAIS,GAAY,CAACA,EAAS,MAAQ,CAACA,EAAS,KAC1C,OAAAA,EAAS,KAAOT,EACTR,EAAYiB,CAAQ,EAG7B,IAAIC,EAASV,EAAM,OAAO,CAAC,IAAM,IAC7BA,EACAD,EAAUQ,EAAM,QAAQ,OAAQ,EAAE,EAAI,IAAMP,CAAK,EAErD,OAAIS,GACFA,EAAS,KAAOC,EACTlB,EAAYiB,CAAQ,GAEtBC,CACR,CACDxB,EAAA,KAAeoB,EAEfpB,EAAqB,WAAA,SAAUc,EAAO,CACpC,OAAOA,EAAM,OAAO,CAAC,IAAM,KAAOb,EAAU,KAAKa,CAAK,CACxD,EAQA,SAASW,EAASJ,EAAOP,EAAO,CAC1BO,IAAU,KACZA,EAAQ,KAGVA,EAAQA,EAAM,QAAQ,MAAO,EAAE,EAO/B,QADIK,EAAQ,EACLZ,EAAM,QAAQO,EAAQ,GAAG,IAAM,GAAG,CACvC,IAAItK,EAAQsK,EAAM,YAAY,GAAG,EASjC,GARItK,EAAQ,IAOZsK,EAAQA,EAAM,MAAM,EAAGtK,CAAK,EACxBsK,EAAM,MAAM,mBAAmB,GACjC,OAAOP,EAGT,EAAEY,CACH,CAGD,OAAO,MAAMA,EAAQ,CAAC,EAAE,KAAK,KAAK,EAAIZ,EAAM,OAAOO,EAAM,OAAS,CAAC,CACpE,CACDrB,EAAA,SAAmByB,EAEnB,IAAIE,EAAqB,UAAY,CACnC,IAAIC,EAAM,OAAO,OAAO,IAAI,EAC5B,MAAO,EAAE,cAAeA,EACzB,EAAA,EAED,SAASC,EAAUC,EAAG,CACpB,OAAOA,CACR,CAWD,SAASC,EAAYzC,EAAM,CACzB,OAAI0C,EAAc1C,CAAI,EACb,IAAMA,EAGRA,CACR,CACDU,EAAA,YAAsB2B,EAAoBE,EAAWE,EAErD,SAASE,EAAc3C,EAAM,CAC3B,OAAI0C,EAAc1C,CAAI,EACbA,EAAK,MAAM,CAAC,EAGdA,CACR,CACDU,EAAA,cAAwB2B,EAAoBE,EAAWI,EAEvD,SAASD,EAAcF,EAAG,CACxB,GAAI,CAACA,EACH,MAAO,GAGT,IAAII,EAASJ,EAAE,OAMf,GAJII,EAAS,GAITJ,EAAE,WAAWI,EAAS,CAAC,IAAM,IAC7BJ,EAAE,WAAWI,EAAS,CAAC,IAAM,IAC7BJ,EAAE,WAAWI,EAAS,CAAC,IAAM,KAC7BJ,EAAE,WAAWI,EAAS,CAAC,IAAM,KAC7BJ,EAAE,WAAWI,EAAS,CAAC,IAAM,KAC7BJ,EAAE,WAAWI,EAAS,CAAC,IAAM,KAC7BJ,EAAE,WAAWI,EAAS,CAAC,IAAM,KAC7BJ,EAAE,WAAWI,EAAS,CAAC,IAAM,IAC7BJ,EAAE,WAAWI,EAAS,CAAC,IAAM,GAC/B,MAAO,GAGT,QAAS3P,EAAI2P,EAAS,GAAI3P,GAAK,EAAGA,IAChC,GAAIuP,EAAE,WAAWvP,CAAC,IAAM,GACtB,MAAO,GAIX,MAAO,EACR,CAUD,SAAS4P,EAA2BC,EAAUC,EAAUC,EAAqB,CAC3E,IAAIC,EAAMC,EAAOJ,EAAS,OAAQC,EAAS,MAAM,EAqBjD,OApBIE,IAAQ,IAIZA,EAAMH,EAAS,aAAeC,EAAS,aACnCE,IAAQ,KAIZA,EAAMH,EAAS,eAAiBC,EAAS,eACrCE,IAAQ,GAAKD,KAIjBC,EAAMH,EAAS,gBAAkBC,EAAS,gBACtCE,IAAQ,KAIZA,EAAMH,EAAS,cAAgBC,EAAS,cACpCE,IAAQ,GACHA,EAGFC,EAAOJ,EAAS,KAAMC,EAAS,IAAI,CAC3C,CACDrC,EAAA,2BAAqCmC,EAErC,SAASM,EAAmCL,EAAUC,EAAUC,EAAqB,CACnF,IAAIC,EAkBJ,OAhBAA,EAAMH,EAAS,aAAeC,EAAS,aACnCE,IAAQ,IAIZA,EAAMH,EAAS,eAAiBC,EAAS,eACrCE,IAAQ,GAAKD,KAIjBC,EAAMH,EAAS,gBAAkBC,EAAS,gBACtCE,IAAQ,KAIZA,EAAMH,EAAS,cAAgBC,EAAS,cACpCE,IAAQ,GACHA,EAGFC,EAAOJ,EAAS,KAAMC,EAAS,IAAI,CAC3C,CACDrC,EAAA,mCAA6CyC,EAW7C,SAASC,EAAoCN,EAAUC,EAAUM,EAAsB,CACrF,IAAIJ,EAAMH,EAAS,cAAgBC,EAAS,cAqB5C,OApBIE,IAAQ,IAIZA,EAAMH,EAAS,gBAAkBC,EAAS,gBACtCE,IAAQ,GAAKI,KAIjBJ,EAAMC,EAAOJ,EAAS,OAAQC,EAAS,MAAM,EACzCE,IAAQ,KAIZA,EAAMH,EAAS,aAAeC,EAAS,aACnCE,IAAQ,KAIZA,EAAMH,EAAS,eAAiBC,EAAS,eACrCE,IAAQ,GACHA,EAGFC,EAAOJ,EAAS,KAAMC,EAAS,IAAI,CAC3C,CACDrC,EAAA,oCAA8C0C,EAE9C,SAASE,EAA0CR,EAAUC,EAAUM,EAAsB,CAC3F,IAAIJ,EAAMH,EAAS,gBAAkBC,EAAS,gBAgB9C,OAfIE,IAAQ,GAAKI,IAIjBJ,EAAMC,EAAOJ,EAAS,OAAQC,EAAS,MAAM,EACzCE,IAAQ,KAIZA,EAAMH,EAAS,aAAeC,EAAS,aACnCE,IAAQ,KAIZA,EAAMH,EAAS,eAAiBC,EAAS,eACrCE,IAAQ,GACHA,EAGFC,EAAOJ,EAAS,KAAMC,EAAS,IAAI,CAC3C,CACDrC,EAAA,0CAAoD4C,EAEpD,SAASJ,EAAOK,EAAOC,EAAO,CAC5B,OAAID,IAAUC,EACL,EAGLD,IAAU,KACL,EAGLC,IAAU,KACL,GAGLD,EAAQC,EACH,EAGF,EACR,CAMD,SAASC,EAAoCX,EAAUC,EAAU,CAC/D,IAAIE,EAAMH,EAAS,cAAgBC,EAAS,cAqB5C,OApBIE,IAAQ,IAIZA,EAAMH,EAAS,gBAAkBC,EAAS,gBACtCE,IAAQ,KAIZA,EAAMC,EAAOJ,EAAS,OAAQC,EAAS,MAAM,EACzCE,IAAQ,KAIZA,EAAMH,EAAS,aAAeC,EAAS,aACnCE,IAAQ,KAIZA,EAAMH,EAAS,eAAiBC,EAAS,eACrCE,IAAQ,GACHA,EAGFC,EAAOJ,EAAS,KAAMC,EAAS,IAAI,CAC3C,CACDrC,EAAA,oCAA8C+C,EAO9C,SAASC,EAAoB/F,EAAK,CAChC,OAAO,KAAK,MAAMA,EAAI,QAAQ,iBAAkB,EAAE,CAAC,CACpD,CACD+C,EAAA,oBAA8BgD,EAM9B,SAASC,EAAiBC,EAAYC,EAAWC,EAAc,CA8B7D,GA7BAD,EAAYA,GAAa,GAErBD,IAEEA,EAAWA,EAAW,OAAS,CAAC,IAAM,KAAOC,EAAU,CAAC,IAAM,MAChED,GAAc,KAOhBC,EAAYD,EAAaC,GAiBvBC,EAAc,CAChB,IAAIC,EAASlD,EAASiD,CAAY,EAClC,GAAI,CAACC,EACH,MAAM,IAAI,MAAM,kCAAkC,EAEpD,GAAIA,EAAO,KAAM,CAEf,IAAItM,EAAQsM,EAAO,KAAK,YAAY,GAAG,EACnCtM,GAAS,IACXsM,EAAO,KAAOA,EAAO,KAAK,UAAU,EAAGtM,EAAQ,CAAC,EAEnD,CACDoM,EAAY/B,EAAKd,EAAY+C,CAAM,EAAGF,CAAS,CAChD,CAED,OAAOtC,EAAUsC,CAAS,CAC3B,CACDnD,EAAA,iBAA2BiD,kBC1kBvBK,GAAO9E,GACP+E,GAAM,OAAO,UAAU,eACvBC,GAAe,OAAO,KAAQ,YAQlC,SAASC,IAAW,CAClB,KAAK,OAAS,GACd,KAAK,KAAOD,GAAe,IAAI,IAAQ,OAAO,OAAO,IAAI,CAC3D,CAKQE,GAAC,UAAY,SAA4BC,EAAQC,EAAkB,CAEzE,QADIC,EAAM,IAAIJ,GACL,EAAI,EAAGK,EAAMH,EAAO,OAAQ,EAAIG,EAAK,IAC5CD,EAAI,IAAIF,EAAO,CAAC,EAAGC,CAAgB,EAErC,OAAOC,CACT,EAQAJ,GAAS,UAAU,KAAO,UAAyB,CACjD,OAAOD,GAAe,KAAK,KAAK,KAAO,OAAO,oBAAoB,KAAK,IAAI,EAAE,MAC/E,EAOQE,GAAC,UAAU,IAAM,SAAsBpE,EAAMsE,EAAkB,CACrE,IAAIG,EAAOP,GAAelE,EAAOgE,GAAK,YAAYhE,CAAI,EAClD0E,EAAcR,GAAe,KAAK,IAAIlE,CAAI,EAAIiE,GAAI,KAAK,KAAK,KAAMQ,CAAI,EACtE7N,EAAM,KAAK,OAAO,QAClB,CAAC8N,GAAeJ,IAClB,KAAK,OAAO,KAAKtE,CAAI,EAElB0E,IACCR,GACF,KAAK,KAAK,IAAIlE,EAAMpJ,CAAG,EAEvB,KAAK,KAAK6N,CAAI,EAAI7N,EAGxB,EAOQwN,GAAC,UAAU,IAAM,SAAsBpE,EAAM,CACnD,GAAIkE,GACF,OAAO,KAAK,KAAK,IAAIlE,CAAI,EAEzB,IAAIyE,EAAOT,GAAK,YAAYhE,CAAI,EAChC,OAAOiE,GAAI,KAAK,KAAK,KAAMQ,CAAI,CAEnC,EAOQL,GAAC,UAAU,QAAU,SAA0BpE,EAAM,CAC3D,GAAIkE,GAAc,CAChB,IAAItN,EAAM,KAAK,KAAK,IAAIoJ,CAAI,EAC5B,GAAIpJ,GAAO,EACP,OAAOA,CAEf,KAAS,CACL,IAAI6N,EAAOT,GAAK,YAAYhE,CAAI,EAChC,GAAIiE,GAAI,KAAK,KAAK,KAAMQ,CAAI,EAC1B,OAAO,KAAK,KAAKA,CAAI,CAExB,CAED,MAAM,IAAI,MAAM,IAAMzE,EAAO,sBAAsB,CACrD,EAOQoE,GAAC,UAAU,GAAK,SAAqBO,EAAM,CACjD,GAAIA,GAAQ,GAAKA,EAAO,KAAK,OAAO,OAClC,OAAO,KAAK,OAAOA,CAAI,EAEzB,MAAM,IAAI,MAAM,yBAA2BA,CAAI,CACjD,EAOAR,GAAS,UAAU,QAAU,UAA4B,CACvD,OAAO,KAAK,OAAO,OACrB,EAEAS,GAAA,SAAmBT,aCjHfH,GAAO9E,GAMX,SAAS2F,GAAuB/B,EAAUC,EAAU,CAElD,IAAI+B,EAAQhC,EAAS,cACjBiC,EAAQhC,EAAS,cACjBiC,EAAUlC,EAAS,gBACnBmC,EAAUlC,EAAS,gBACvB,OAAOgC,EAAQD,GAASC,GAASD,GAASG,GAAWD,GAC9ChB,GAAK,oCAAoClB,EAAUC,CAAQ,GAAK,CACzE,CAOA,SAASmC,IAAc,CACrB,KAAK,OAAS,GACd,KAAK,QAAU,GAEf,KAAK,MAAQ,CAAC,cAAe,GAAI,gBAAiB,CAAC,CACrD,CAQWC,GAAC,UAAU,gBACpB,SAA6BC,EAAWC,EAAU,CAChD,KAAK,OAAO,QAAQD,EAAWC,CAAQ,CAC3C,EAOWF,GAAC,UAAU,IAAM,SAAyBG,EAAU,CACzDT,GAAuB,KAAK,MAAOS,CAAQ,GAC7C,KAAK,MAAQA,EACb,KAAK,OAAO,KAAKA,CAAQ,IAEzB,KAAK,QAAU,GACf,KAAK,OAAO,KAAKA,CAAQ,EAE7B,EAWAJ,GAAY,UAAU,QAAU,UAA+B,CAC7D,OAAK,KAAK,UACR,KAAK,OAAO,KAAKlB,GAAK,mCAAmC,EACzD,KAAK,QAAU,IAEV,KAAK,MACd,EAEAuB,GAAA,YAAsBL,GCvEtB,IAAIM,GAAYtG,GACZ8E,EAAOyB,GACPtB,GAAWuB,GAAuB,SAClCR,GAAcS,GAA0B,YAU5C,SAASC,GAAmBrF,EAAO,CAC5BA,IACHA,EAAQ,CAAA,GAEV,KAAK,MAAQyD,EAAK,OAAOzD,EAAO,OAAQ,IAAI,EAC5C,KAAK,YAAcyD,EAAK,OAAOzD,EAAO,aAAc,IAAI,EACxD,KAAK,gBAAkByD,EAAK,OAAOzD,EAAO,iBAAkB,EAAK,EACjE,KAAK,sBAAwByD,EAAK,OAAOzD,EAAO,uBAAwB,EAAK,EAC7E,KAAK,SAAW,IAAI4D,GACpB,KAAK,OAAS,IAAIA,GAClB,KAAK,UAAY,IAAIe,GACrB,KAAK,iBAAmB,IAC1B,CAEAU,GAAmB,UAAU,SAAW,EAOxCA,GAAmB,cACjB,SAA0CC,EAAoBC,EAAc,CAC1E,IAAIlC,EAAaiC,EAAmB,WAChCE,EAAY,IAAIH,GAAmB,OAAO,OAAOE,GAAgB,GAAI,CACvE,KAAMD,EAAmB,KACzB,WAAYjC,CACb,CAAA,CAAC,EACF,OAAAiC,EAAmB,YAAY,SAAUG,EAAS,CAChD,IAAIC,EAAa,CACf,UAAW,CACT,KAAMD,EAAQ,cACd,OAAQA,EAAQ,eACjB,CACT,EAEUA,EAAQ,QAAU,OACpBC,EAAW,OAASD,EAAQ,OACxBpC,GAAc,OAChBqC,EAAW,OAASjC,EAAK,SAASJ,EAAYqC,EAAW,MAAM,GAGjEA,EAAW,SAAW,CACpB,KAAMD,EAAQ,aACd,OAAQA,EAAQ,cAC1B,EAEYA,EAAQ,MAAQ,OAClBC,EAAW,KAAOD,EAAQ,OAI9BD,EAAU,WAAWE,CAAU,CACrC,CAAK,EACDJ,EAAmB,QAAQ,QAAQ,SAAUK,EAAY,CACvD,IAAIC,EAAiBD,EACjBtC,IAAe,OACjBuC,EAAiBnC,EAAK,SAASJ,EAAYsC,CAAU,GAGlDH,EAAU,SAAS,IAAII,CAAc,GACxCJ,EAAU,SAAS,IAAII,CAAc,EAGvC,IAAIC,EAAUP,EAAmB,iBAAiBK,CAAU,EACxDE,GAAW,MACbL,EAAU,iBAAiBG,EAAYE,CAAO,CAEtD,CAAK,EACML,CACX,EAYAH,GAAmB,UAAU,WAC3B,SAAuCrF,EAAO,CAC5C,IAAI8F,EAAYrC,EAAK,OAAOzD,EAAO,WAAW,EAC1C+F,EAAWtC,EAAK,OAAOzD,EAAO,WAAY,IAAI,EAC9CnN,EAAS4Q,EAAK,OAAOzD,EAAO,SAAU,IAAI,EAC1C7F,EAAOsJ,EAAK,OAAOzD,EAAO,OAAQ,IAAI,EAEtC,CAAC,KAAK,iBACJ,KAAK,iBAAiB8F,EAAWC,EAAUlT,EAAQsH,CAAI,IAAM,KAK/DtH,GAAU,OACZA,EAAS,OAAOA,CAAM,EACjB,KAAK,SAAS,IAAIA,CAAM,GAC3B,KAAK,SAAS,IAAIA,CAAM,GAIxBsH,GAAQ,OACVA,EAAO,OAAOA,CAAI,EACb,KAAK,OAAO,IAAIA,CAAI,GACvB,KAAK,OAAO,IAAIA,CAAI,GAIxB,KAAK,UAAU,IAAI,CACjB,cAAe2L,EAAU,KACzB,gBAAiBA,EAAU,OAC3B,aAAcC,GAAY,MAAQA,EAAS,KAC3C,eAAgBA,GAAY,MAAQA,EAAS,OAC7C,OAAQlT,EACR,KAAMsH,CACZ,CAAK,EACL,EAKAkL,GAAmB,UAAU,iBAC3B,SAA6CW,EAAaC,EAAgB,CACxE,IAAIpT,EAASmT,EACT,KAAK,aAAe,OACtBnT,EAAS4Q,EAAK,SAAS,KAAK,YAAa5Q,CAAM,GAG7CoT,GAAkB,MAGf,KAAK,mBACR,KAAK,iBAAmB,OAAO,OAAO,IAAI,GAE5C,KAAK,iBAAiBxC,EAAK,YAAY5Q,CAAM,CAAC,EAAIoT,GACzC,KAAK,mBAGd,OAAO,KAAK,iBAAiBxC,EAAK,YAAY5Q,CAAM,CAAC,EACjD,OAAO,KAAK,KAAK,gBAAgB,EAAE,SAAW,IAChD,KAAK,iBAAmB,MAGhC,EAkBAwS,GAAmB,UAAU,eAC3B,SAA2CC,EAAoBU,EAAaE,EAAgB,CAC1F,IAAIP,EAAaK,EAEjB,GAAIA,GAAe,KAAM,CACvB,GAAIV,EAAmB,MAAQ,KAC7B,MAAM,IAAI,MACR,8IAEV,EAEMK,EAAaL,EAAmB,IACjC,CACD,IAAIjC,EAAa,KAAK,YAElBA,GAAc,OAChBsC,EAAalC,EAAK,SAASJ,EAAYsC,CAAU,GAInD,IAAIQ,EAAa,IAAIvC,GACjBwC,EAAW,IAAIxC,GAGnB,KAAK,UAAU,gBAAgB,SAAU6B,EAAS,CAChD,GAAIA,EAAQ,SAAWE,GAAcF,EAAQ,cAAgB,KAAM,CAEjE,IAAIM,EAAWT,EAAmB,oBAAoB,CACpD,KAAMG,EAAQ,aACd,OAAQA,EAAQ,cAC1B,CAAS,EACGM,EAAS,QAAU,OAErBN,EAAQ,OAASM,EAAS,OACtBG,GAAkB,OACpBT,EAAQ,OAAShC,EAAK,KAAKyC,EAAgBT,EAAQ,MAAM,GAEvDpC,GAAc,OAChBoC,EAAQ,OAAShC,EAAK,SAASJ,EAAYoC,EAAQ,MAAM,GAE3DA,EAAQ,aAAeM,EAAS,KAChCN,EAAQ,eAAiBM,EAAS,OAC9BA,EAAS,MAAQ,OACnBN,EAAQ,KAAOM,EAAS,MAG7B,CAED,IAAIlT,EAAS4S,EAAQ,OACjB5S,GAAU,MAAQ,CAACsT,EAAW,IAAItT,CAAM,GAC1CsT,EAAW,IAAItT,CAAM,EAGvB,IAAIsH,EAAOsL,EAAQ,KACftL,GAAQ,MAAQ,CAACiM,EAAS,IAAIjM,CAAI,GACpCiM,EAAS,IAAIjM,CAAI,CAGpB,EAAE,IAAI,EACP,KAAK,SAAWgM,EAChB,KAAK,OAASC,EAGdd,EAAmB,QAAQ,QAAQ,SAAUK,EAAY,CACvD,IAAIE,EAAUP,EAAmB,iBAAiBK,CAAU,EACxDE,GAAW,OACTK,GAAkB,OACpBP,EAAalC,EAAK,KAAKyC,EAAgBP,CAAU,GAE/CtC,GAAc,OAChBsC,EAAalC,EAAK,SAASJ,EAAYsC,CAAU,GAEnD,KAAK,iBAAiBA,EAAYE,CAAO,EAE5C,EAAE,IAAI,CACX,EAaAR,GAAmB,UAAU,iBAC3B,SAA4CgB,EAAYC,EAAWC,EACvBtG,EAAO,CAKjD,GAAIqG,GAAa,OAAOA,EAAU,MAAS,UAAY,OAAOA,EAAU,QAAW,SAAU,CAC3F,IAAIlM,EAAU,+OAId,GAAI,KAAK,sBACP,OAAI,OAAO,SAAY,aAAe,QAAQ,MAC5C,QAAQ,KAAKA,CAAO,EAEf,GAEP,MAAM,IAAI,MAAMA,CAAO,CAE1B,CAED,GAAI,EAAAiM,GAAc,SAAUA,GAAc,WAAYA,GAC/CA,EAAW,KAAO,GAAKA,EAAW,QAAU,GAC5C,CAACC,GAAa,CAACC,GAAW,CAACtG,GAI7B,IAAIoG,GAAc,SAAUA,GAAc,WAAYA,GAC/CC,GAAa,SAAUA,GAAa,WAAYA,GAChDD,EAAW,KAAO,GAAKA,EAAW,QAAU,GAC5CC,EAAU,KAAO,GAAKA,EAAU,QAAU,GAC1CC,EAEV,OAGA,IAAInM,EAAU,oBAAsB,KAAK,UAAU,CACjD,UAAWiM,EACX,OAAQE,EACR,SAAUD,EACV,KAAMrG,CACd,CAAO,EAED,GAAI,KAAK,sBACP,OAAI,OAAO,SAAY,aAAe,QAAQ,MAC5C,QAAQ,KAAK7F,CAAO,EAEf,GAEP,MAAM,IAAI,MAAMA,CAAO,EAG/B,EAMAiL,GAAmB,UAAU,mBAC3B,UAAgD,CAc9C,QAbImB,EAA0B,EAC1BC,EAAwB,EACxBC,EAAyB,EACzBC,EAAuB,EACvBC,EAAe,EACfC,EAAiB,EACjB3f,EAAS,GACTuP,EACAgP,EACAqB,EACAC,EAEAC,EAAW,KAAK,UAAU,QAAO,EAC5BtU,EAAI,EAAGuR,EAAM+C,EAAS,OAAQtU,EAAIuR,EAAKvR,IAAK,CAInD,GAHA+S,EAAUuB,EAAStU,CAAC,EACpB+D,EAAO,GAEHgP,EAAQ,gBAAkBgB,EAE5B,IADAD,EAA0B,EACnBf,EAAQ,gBAAkBgB,GAC/BhQ,GAAQ,IACRgQ,YAIE/T,EAAI,EAAG,CACT,GAAI,CAAC+Q,EAAK,oCAAoCgC,EAASuB,EAAStU,EAAI,CAAC,CAAC,EACpE,SAEF+D,GAAQ,GACT,CAGHA,GAAQwO,GAAU,OAAOQ,EAAQ,gBACJe,CAAuB,EACpDA,EAA0Bf,EAAQ,gBAE9BA,EAAQ,QAAU,OACpBsB,EAAY,KAAK,SAAS,QAAQtB,EAAQ,MAAM,EAChDhP,GAAQwO,GAAU,OAAO8B,EAAYF,CAAc,EACnDA,EAAiBE,EAGjBtQ,GAAQwO,GAAU,OAAOQ,EAAQ,aAAe,EACnBkB,CAAoB,EACjDA,EAAuBlB,EAAQ,aAAe,EAE9ChP,GAAQwO,GAAU,OAAOQ,EAAQ,eACJiB,CAAsB,EACnDA,EAAyBjB,EAAQ,eAE7BA,EAAQ,MAAQ,OAClBqB,EAAU,KAAK,OAAO,QAAQrB,EAAQ,IAAI,EAC1ChP,GAAQwO,GAAU,OAAO6B,EAAUF,CAAY,EAC/CA,EAAeE,IAInB5f,GAAUuP,CACX,CAED,OAAOvP,CACX,EAEAme,GAAmB,UAAU,wBAC3B,SAAmD4B,EAAUC,EAAa,CACxE,OAAOD,EAAS,IAAI,SAAUpU,EAAQ,CACpC,GAAI,CAAC,KAAK,iBACR,OAAO,KAELqU,GAAe,OACjBrU,EAAS4Q,EAAK,SAASyD,EAAarU,CAAM,GAE5C,IAAIsU,EAAM1D,EAAK,YAAY5Q,CAAM,EACjC,OAAO,OAAO,UAAU,eAAe,KAAK,KAAK,iBAAkBsU,CAAG,EAClE,KAAK,iBAAiBA,CAAG,EACzB,IACL,EAAE,IAAI,CACX,EAKA9B,GAAmB,UAAU,OAC3B,UAAqC,CACnC,IAAI+B,EAAM,CACR,QAAS,KAAK,SACd,QAAS,KAAK,SAAS,QAAS,EAChC,MAAO,KAAK,OAAO,QAAS,EAC5B,SAAU,KAAK,mBAAoB,CACzC,EACI,OAAI,KAAK,OAAS,OAChBA,EAAI,KAAO,KAAK,OAEd,KAAK,aAAe,OACtBA,EAAI,WAAa,KAAK,aAEpB,KAAK,mBACPA,EAAI,eAAiB,KAAK,wBAAwBA,EAAI,QAASA,EAAI,UAAU,GAGxEA,CACX,EAKA/B,GAAmB,UAAU,SAC3B,UAAuC,CACrC,OAAO,KAAK,UAAU,KAAK,OAAQ,CAAA,CACvC,EAEA,IAAAgC,GAA6BhC,GCzb7B,MAAMiC,GAAa,IAAI,IAAI,CAAC,SAAU,WAAY,aAAa,CAAC,EAEzD,SAASC,GAAkBC,EAAU,CACxC,MAAMJ,EAAM,IAAI/B,GACVS,EAAY,CACd,KAAM,EACN,OAAQ,CAChB,EACUC,EAAW,CACb,KAAM,EACN,OAAQ,CAChB,EACU0B,EAAqB,CACvB,KAAM,EACN,OAAQ,CAChB,EACUC,EAAmB,CACrB,UAAWD,CACnB,EACI,IAAIxS,EAAO,EACPC,EAAS,EACTyS,EAAsB,GAE1B,MAAMC,EAAmBJ,EAAS,KAClCA,EAAS,KAAO,SAASniB,EAAM,CAC3B,GAAIA,EAAK,KAAOA,EAAK,IAAI,OAASiiB,GAAW,IAAIjiB,EAAK,IAAI,EAAG,CACzD,MAAMwiB,EAAWxiB,EAAK,IAAI,MAAM,KAC1ByiB,EAAaziB,EAAK,IAAI,MAAM,OAAS,GAEvC0gB,EAAS,OAAS8B,GAClB9B,EAAS,SAAW+B,KACpB/B,EAAS,KAAO8B,EAChB9B,EAAS,OAAS+B,EAElBhC,EAAU,KAAO7Q,EACjB6Q,EAAU,OAAS5Q,EAEfyS,IACAA,EAAsB,IAClB7B,EAAU,OAAS2B,EAAmB,MACtC3B,EAAU,SAAW2B,EAAmB,SACxCL,EAAI,WAAWM,CAAgB,GAIvCC,EAAsB,GACtBP,EAAI,WAAW,CACX,OAAQ/hB,EAAK,IAAI,OACjB,SAAA0gB,EACA,UAAAD,CACpB,CAAiB,EAER,CAED8B,EAAiB,KAAK,KAAMviB,CAAI,EAE5BsiB,GAAuBL,GAAW,IAAIjiB,EAAK,IAAI,IAC/CoiB,EAAmB,KAAOxS,EAC1BwS,EAAmB,OAASvS,EAExC,EAEI,MAAM6S,EAAmBP,EAAS,KAClCA,EAAS,KAAO,SAASpkB,EAAO+S,EAAM6R,EAAM,CACxC,QAAStV,EAAI,EAAGA,EAAItP,EAAM,OAAQsP,IAC1BtP,EAAM,WAAWsP,CAAC,IAAM,IACxBuC,IACAC,EAAS,GAETA,IAIR6S,EAAiB3kB,EAAO+S,EAAM6R,CAAI,CAC1C,EAEI,MAAMC,EAAqBT,EAAS,OACpC,OAAAA,EAAS,OAAS,UAAW,CACzB,OAAIG,GACAP,EAAI,WAAWM,CAAgB,EAG5B,CACH,IAAKO,EAAoB,EACzB,IAAAb,CACZ,CACA,EAEWI,CACX,CCxEA,MAAMU,GAAW,GACXC,GAAc,GAEdjX,GAAO,CAACiF,EAAM/S,IAAU,CAK1B,GAJI+S,IAASnG,IACTmG,EAAO/S,GAGP,OAAO+S,GAAS,SAAU,CAC1B,MAAMgH,EAAWhH,EAAK,WAAW,CAAC,EAClC,OAAOgH,EAAW,IAAO,MAASA,GAAY,CACjD,CAED,OAAOhH,CACX,EAQMiS,GAAY,CACd,CAAC5Y,EAAOA,CAAK,EACb,CAACA,EAAOkG,CAAa,EACrB,CAAClG,EAAOM,EAAG,EACX,CAACN,EAAOO,EAAM,EACd,CAACP,EAAO,GAAG,EACX,CAACA,EAAO+N,CAAW,EACnB,CAAC/N,EAAOU,CAAU,EAClB,CAACV,EAAOW,CAAS,EACjB,CAACX,EAAOc,EAAG,EACX,CAACd,EAAOoB,CAAe,EAEvB,CAAClB,EAAWF,CAAK,EACjB,CAACE,EAAWgG,CAAa,EACzB,CAAChG,EAAWI,EAAG,EACf,CAACJ,EAAWK,EAAM,EAClB,CAACL,EAAW,GAAG,EACf,CAACA,EAAW6N,CAAW,EACvB,CAAC7N,EAAWQ,CAAU,EACtB,CAACR,EAAWS,CAAS,EACrB,CAACT,EAAWY,EAAG,EAEf,CAACX,EAAMH,CAAK,EACZ,CAACG,EAAM+F,CAAa,EACpB,CAAC/F,EAAMG,EAAG,EACV,CAACH,EAAMI,EAAM,EACb,CAACJ,EAAM,GAAG,EACV,CAACA,EAAM4N,CAAW,EAClB,CAAC5N,EAAMO,CAAU,EACjB,CAACP,EAAMQ,CAAS,EAChB,CAACR,EAAMW,EAAG,EAEV,CAACH,EAAWX,CAAK,EACjB,CAACW,EAAWuF,CAAa,EACzB,CAACvF,EAAWL,EAAG,EACf,CAACK,EAAWJ,EAAM,EAClB,CAACI,EAAW,GAAG,EACf,CAACA,EAAWoN,CAAW,EACvB,CAACpN,EAAWD,CAAU,EACtB,CAACC,EAAWA,CAAS,EACrB,CAACA,EAAWG,EAAG,EAEf,CAAC,IAAKd,CAAK,EACX,CAAC,IAAKkG,CAAa,EACnB,CAAC,IAAK5F,EAAG,EACT,CAAC,IAAKC,EAAM,EACZ,CAAC,IAAK,GAAG,EACT,CAAC,IAAKwN,CAAW,EACjB,CAAC,IAAKrN,CAAU,EAChB,CAAC,IAAKC,CAAS,EACf,CAAC,IAAKG,EAAG,EAET,CAAC,IAAKd,CAAK,EACX,CAAC,IAAKkG,CAAa,EACnB,CAAC,IAAK5F,EAAG,EACT,CAAC,IAAKC,EAAM,EACZ,CAAC,IAAK,GAAG,EACT,CAAC,IAAKwN,CAAW,EACjB,CAAC,IAAKrN,CAAU,EAChB,CAAC,IAAKC,CAAS,EACf,CAAC,IAAKG,EAAG,EAET,CAACiN,EAAa/N,CAAK,EACnB,CAAC+N,EAAa7H,CAAa,EAC3B,CAAC6H,EAAazN,EAAG,EACjB,CAACyN,EAAaxN,EAAM,EACpB,CAACwN,EAAaA,CAAW,EACzB,CAACA,EAAarN,CAAU,EACxB,CAACqN,EAAapN,CAAS,EACvB,CAACoN,EAAa,GAAG,EACjB,CAACA,EAAajN,EAAG,EAEjB,CAAC,IAAKd,CAAK,EACX,CAAC,IAAKkG,CAAa,EACnB,CAAC,IAAK5F,EAAG,EACT,CAAC,IAAKC,EAAM,EACZ,CAAC,IAAK,GAAG,EACT,CAAC,IAAKO,EAAG,EAET,CAAC,IAAKiN,CAAW,EACjB,CAAC,IAAKrN,CAAU,EAChB,CAAC,IAAKC,CAAS,EAEf,CAAC,IAAKoN,CAAW,EACjB,CAAC,IAAKrN,CAAU,EAChB,CAAC,IAAKC,CAAS,EAEf,CAAC,IAAK,GAAG,CACb,EAEMkY,GAAYD,GAAU,OAAO,CAC/B,CAAC5Y,EAAOG,CAAI,EAEZ,CAACQ,EAAWR,CAAI,EAEhB,CAACA,EAAMA,CAAI,EAEX,CAACD,EAAWkB,CAAe,EAC3B,CAAClB,EAAW4Y,EAAW,EACvB,CAAC5Y,EAAWa,EAAK,EAEjB,CAACL,EAAYA,CAAU,EACvB,CAACA,EAAYC,CAAS,EACtB,CAACD,EAAYwF,CAAa,EAC1B,CAACxF,EAAY,GAAG,EAEhB,CAACW,EAAkBrB,CAAK,EACxB,CAACqB,EAAkB6E,CAAa,EAChC,CAAC7E,EAAkBX,CAAU,EAC7B,CAACW,EAAkBV,CAAS,EAC5B,CAACU,EAAkBlB,CAAI,EACvB,CAACkB,EAAkB,GAAG,CAC1B,CAAC,EAED,SAAS0X,GAAUC,EAAO,CACtB,MAAMC,EAAuB,IAAI,IAC7BD,EAAM,IAAI,CAAC,CAAClP,EAAM7C,CAAI,IAAOvF,GAAKoI,CAAI,GAAK,GAAKpI,GAAKuF,CAAI,CAAE,CACnE,EAEI,OAAO,SAASiS,EAAUvS,EAAM/S,EAAO,CACnC,MAAM6U,EAAW/G,GAAKiF,EAAM/S,CAAK,EAC3BulB,EAAevlB,EAAM,WAAW,CAAC,EAUvC,OARKulB,IAAiBR,IACdhS,IAAS3G,GACT2G,IAAST,GACTS,IAAS7F,IACZqY,IAAiBT,GACZO,EAAqB,IAAIC,GAAY,GAAKC,GAAgB,CAAC,EAC3DF,EAAqB,IAAIC,GAAY,GAAKzQ,CAAQ,IAGxD,KAAK,KAAK,IAAK7H,EAAY,EAAI,EAG5B6H,CACf,CACA,CAEO,MAAM2Q,GAAOL,GAAUH,EAAS,EAC1BS,GAAON,GAAUF,EAAS,gHCjLjCS,GAAiB,GAEvB,SAASC,GAAgB1jB,EAAM2jB,EAAW,CACtC,GAAI,OAAOA,GAAc,WAAY,CACjC,IAAI1P,EAAO,KAEXjU,EAAK,SAAS,QAAQA,GAAQ,CACtBiU,IAAS,MACT0P,EAAU,KAAK,KAAM1P,CAAI,EAG7B,KAAK,KAAKjU,CAAI,EACdiU,EAAOjU,CACnB,CAAS,EAED,MACH,CAEDA,EAAK,SAAS,QAAQ,KAAK,KAAM,IAAI,CACzC,CAEA,SAAS4jB,GAAaC,EAAO,CACzBtT,GAASsT,EAAO,CAAC/S,EAAM/C,EAAOC,IAAQ,CAClC,KAAK,MAAM8C,EAAM+S,EAAM,MAAM9V,EAAOC,CAAG,CAAC,CAChD,CAAK,CACL,CAEO,SAAS8V,GAAgB9M,EAAQ,CACpC,MAAM+M,EAAQ,IAAI,IAElB,OAAS,CAACjP,EAAMnD,CAAI,IAAK,OAAO,QAAQqF,EAAO,IAAI,EAG3C,OAFOrF,EAAK,UAAYA,IAEV,YACdoS,EAAM,IAAIjP,EAAMnD,EAAK,UAAYA,CAAI,EAI7C,OAAO,SAAS3R,EAAMnB,EAAS,CAC3B,IAAIoQ,EAAS,GACToU,EAAW,EACXlB,EAAW,CACX,KAAKniB,EAAM,CACP,GAAI+jB,EAAM,IAAI/jB,EAAK,IAAI,EACnB+jB,EAAM,IAAI/jB,EAAK,IAAI,EAAE,KAAKgkB,EAAWhkB,CAAI,MAEzC,OAAM,IAAI,MAAM,sBAAwBA,EAAK,IAAI,CAExD,EACD,YAAaikB,GACb,MAAMnT,EAAM/S,EAAO,CACfslB,EAAW,KAAK,YAAYA,EAAUvS,EAAM/S,CAAK,EAEjD,KAAK,KAAKA,EAAO+S,EAAM,EAAK,EAExBA,IAASnG,GAAS5M,EAAM,WAAW,CAAC,IAAM0lB,IAC1C,KAAK,KAAK;AAAA,EAAM1Y,EAAY,EAAI,CAEvC,EACD,KAAKhN,EAAO,CACRkR,GAAUlR,CACb,EACD,QAAS,CACL,OAAOkR,CACV,CACb,EAEYpQ,IACI,OAAOA,EAAQ,WAAc,aAC7BsjB,EAAWtjB,EAAQ,UAAUsjB,CAAQ,GAGrCtjB,EAAQ,YACRsjB,EAAWD,GAAkBC,CAAQ,GAGrCtjB,EAAQ,QAAQqlB,KAChB/B,EAAS,YAAc+B,GAAYrlB,EAAQ,IAAI,IAIvD,MAAMmlB,EAAY,CACd,KAAOhkB,GAASmiB,EAAS,KAAKniB,CAAI,EAClC,SAAU0jB,GACV,MAAO,CAAC5S,EAAM/S,IAAUokB,EAAS,MAAMrR,EAAM/S,CAAK,EAClD,SAAU6lB,EACtB,EAEQ,OAAAzB,EAAS,KAAKniB,CAAI,EAEXmiB,EAAS,QACxB,CACA,CC9FO,SAASgC,GAAgBC,EAAM,CAClC,MAAO,CACH,gBAAgB3L,EAAK,CACjB,OAAA2L,EAAK3L,EAAK,CACN,MAAMzY,EAAM,CACJA,EAAK,UAAY,EAAAA,EAAK,oBAAoBgU,KAC1ChU,EAAK,SAAW,IAAIgU,EAAI,EAAG,UAAUhU,EAAK,QAAQ,EAEzD,CACjB,CAAa,EAEMyY,CACV,EACD,cAAcA,EAAK,CACf,OAAA2L,EAAK3L,EAAK,CACN,MAAMzY,EAAM,CACJA,EAAK,UAAYA,EAAK,oBAAoBgU,IAC1ChU,EAAK,SAAWA,EAAK,SAAS,QAAO,EAE5C,CACjB,CAAa,EAEMyY,CACV,CACT,CACA,CC3BA,KAAM,gBAAE4L,EAAc,EAAK,OAAO,UAC5BC,GAAO,UAAW,CAAA,EAExB,SAASC,GAAexmB,EAAO,CAC3B,OAAO,OAAOA,GAAU,WAAaA,EAAQumB,EACjD,CAEA,SAASE,GAAc9S,EAAIZ,EAAM,CAC7B,OAAO,SAAS9Q,EAAM2R,EAAM1P,EAAM,CAC1BjC,EAAK,OAAS8Q,GACdY,EAAG,KAAK,KAAM1R,EAAM2R,EAAM1P,CAAI,CAE1C,CACA,CAEA,SAASwiB,GAAwB3P,EAAM4P,EAAU,CAC7C,MAAMC,EAAYD,EAAS,UACrBE,EAAU,CAAA,EAEhB,UAAW9C,KAAO6C,EAAW,CACzB,GAAIN,GAAe,KAAKM,EAAW7C,CAAG,IAAM,GACxC,SAGJ,IAAI+C,EAAaF,EAAU7C,CAAG,EAC9B,MAAMgD,EAAS,CACX,KAAMhD,EACN,KAAM,GACN,SAAU,EACtB,EAEa,MAAM,QAAQ+C,CAAU,IACzBA,EAAa,CAACA,CAAU,GAG5B,UAAWE,KAAaF,EAChBE,IAAc,KACdD,EAAO,SAAW,GACX,OAAOC,GAAc,SAC5BD,EAAO,KAAO,OACP,MAAM,QAAQC,CAAS,IAC9BD,EAAO,KAAO,QAIlBA,EAAO,MACPF,EAAQ,KAAKE,CAAM,CAE1B,CAED,OAAIF,EAAQ,OACD,CACH,QAASF,EAAS,YAClB,OAAQE,CACpB,EAGW,IACX,CAEA,SAASI,GAAmBhO,EAAQ,CAChC,MAAM+M,EAAQ,CAAA,EAEd,UAAWjP,KAAQkC,EAAO,KACtB,GAAIqN,GAAe,KAAKrN,EAAO,KAAMlC,CAAI,EAAG,CACxC,MAAM4P,EAAW1N,EAAO,KAAKlC,CAAI,EAEjC,GAAI,CAAC4P,EAAS,UACV,MAAM,IAAI,MAAM,gCAAkC5P,EAAO,wBAAwB,EAGrFiP,EAAMjP,CAAI,EAAI2P,GAAwB3P,EAAM4P,CAAQ,CACvD,CAGL,OAAOX,CACX,CAEA,SAASkB,GAAmBjO,EAAQkO,EAAS,CACzC,MAAMC,EAASnO,EAAO,OAAO,MAAK,EAC5BoO,EAAcpO,EAAO,QACrBqO,EAAa,OAAOD,GAAgB,SAE1C,OAAIF,GACAC,EAAO,QAAO,EAGX,SAASnlB,EAAMoW,EAASgO,EAAMkB,EAAa,CAC9C,IAAIC,EAEAF,IACAE,EAAmBnP,EAAQgP,CAAW,EACtChP,EAAQgP,CAAW,EAAIplB,GAG3B,UAAWwlB,KAASL,EAAQ,CACxB,MAAMM,EAAMzlB,EAAKwlB,EAAM,IAAI,EAE3B,GAAI,CAACA,EAAM,UAAYC,GACnB,GAAID,EAAM,OAAS,QAKf,GAJkBN,EACZO,EAAI,YAAYH,EAAa,EAAK,EAClCG,EAAI,OAAOH,EAAa,EAAK,EAG/B,MAAO,WAEJlB,EAAKqB,CAAG,EACf,MAAO,GAGlB,CAEGJ,IACAjP,EAAQgP,CAAW,EAAIG,EAEnC,CACA,CAEA,SAASG,GAAsB,CAC3B,WAAAC,EACA,OAAAC,EACA,KAAAC,EACA,MAAAC,EACA,gBAAAC,CACJ,EAAG,CACC,MAAO,CACH,OAAQ,CACJ,WAAAJ,EACA,OAAAC,EACA,KAAAC,EACA,MAAAC,CACH,EACD,KAAM,CACF,WAAAH,EACA,OAAAC,EACA,KAAAC,EACA,MAAAC,CACH,EACD,YAAa,CACT,WAAAH,EACA,OAAAC,EACA,KAAAC,EACA,MAAAC,EACA,gBAAAC,CACH,CACT,CACA,CAEO,SAASC,GAAahP,EAAQ,CACjC,MAAM+M,EAAQiB,GAAmBhO,CAAM,EACjCiP,EAAmB,CAAA,EACnBC,EAAmB,CAAA,EACnBC,EAAY,OAAO,YAAY,EAC/BC,EAAW,OAAO,WAAW,EAEnC,UAAWtR,KAAQiP,EACXM,GAAe,KAAKN,EAAOjP,CAAI,GAAKiP,EAAMjP,CAAI,IAAM,OACpDmR,EAAiBnR,CAAI,EAAImQ,GAAmBlB,EAAMjP,CAAI,EAAG,EAAK,EAC9DoR,EAAiBpR,CAAI,EAAImQ,GAAmBlB,EAAMjP,CAAI,EAAG,EAAI,GAIrE,MAAMuR,EAAgCX,GAAsBO,CAAgB,EACtEK,EAAgCZ,GAAsBQ,CAAgB,EAEtE9B,EAAO,SAASvc,EAAMhJ,EAAS,CACjC,SAAS0nB,EAASvmB,EAAM2R,EAAM1P,EAAM,CAChC,MAAMukB,EAAWC,EAAM,KAAKrQ,EAASpW,EAAM2R,EAAM1P,CAAI,EAErD,OAAIukB,IAAaL,EACN,GAGPK,IAAaJ,EACN,GAGP,GAAAM,EAAU,eAAe1mB,EAAK,IAAI,GAC9B0mB,EAAU1mB,EAAK,IAAI,EAAEA,EAAMoW,EAASmQ,EAAUjB,CAAW,GAK7DqB,EAAM,KAAKvQ,EAASpW,EAAM2R,EAAM1P,CAAI,IAAMkkB,EAKjD,CAED,IAAIM,EAAQnC,GACRqC,EAAQrC,GACRoC,EAAYT,EACZX,EAAc,CAACsB,EAAKxf,EAAMuK,EAAM1P,IAAS2kB,GAAOL,EAASnf,EAAMuK,EAAM1P,CAAI,EAC7E,MAAMmU,EAAU,CACZ,MAAO+P,EACP,KAAMC,EAEN,KAAAve,EACA,WAAY,KACZ,OAAQ,KACR,cAAe,KACf,KAAM,KACN,SAAU,KACV,MAAO,KACP,YAAa,KACb,SAAU,IACtB,EAEQ,GAAI,OAAOhJ,GAAY,WACnB4nB,EAAQ5nB,UACDA,IACP4nB,EAAQlC,GAAe1lB,EAAQ,KAAK,EACpC8nB,EAAQpC,GAAe1lB,EAAQ,KAAK,EAEhCA,EAAQ,UACR6nB,EAAYR,GAGZrnB,EAAQ,OAAO,CACf,GAAIwnB,EAA8B,eAAexnB,EAAQ,KAAK,EAC1D6nB,EAAY7nB,EAAQ,QACdynB,EAA8BznB,EAAQ,KAAK,EAC3CwnB,EAA8BxnB,EAAQ,KAAK,UAC1C,CAACklB,EAAM,eAAellB,EAAQ,KAAK,EAC1C,MAAM,IAAI,MAAM,cAAgBA,EAAQ,MAAQ,oCAAsC,OAAO,KAAKklB,CAAK,EAAE,KAAM,EAAC,KAAK,IAAI,EAAI,GAAG,EAGpI0C,EAAQjC,GAAciC,EAAO5nB,EAAQ,KAAK,EAC1C8nB,EAAQnC,GAAcmC,EAAO9nB,EAAQ,KAAK,CAC7C,CAGL,GAAI4nB,IAAUnC,IAAQqC,IAAUrC,GAC5B,MAAM,IAAI,MAAM,6EAA8E,EAGlGiC,EAAS1e,CAAI,CACrB,EAEI,OAAAuc,EAAK,MAAQ+B,EACb/B,EAAK,KAAOgC,EAEZhC,EAAK,KAAO,SAAS3L,EAAK/G,EAAI,CAC1B,IAAImV,EAAQ,KAEZ,OAAAzC,EAAK3L,EAAK,SAASzY,EAAM2R,EAAM1P,EAAM,CACjC,GAAIyP,EAAG,KAAK,KAAM1R,EAAM2R,EAAM1P,CAAI,EAC9B,OAAA4kB,EAAQ7mB,EACDmmB,CAEvB,CAAS,EAEMU,CACf,EAEIzC,EAAK,SAAW,SAAS3L,EAAK/G,EAAI,CAC9B,IAAImV,EAAQ,KAEZ,OAAAzC,EAAK3L,EAAK,CACN,QAAS,GACT,MAAMzY,EAAM2R,EAAM1P,EAAM,CACpB,GAAIyP,EAAG,KAAK,KAAM1R,EAAM2R,EAAM1P,CAAI,EAC9B,OAAA4kB,EAAQ7mB,EACDmmB,CAEd,CACb,CAAS,EAEMU,CACf,EAEIzC,EAAK,QAAU,SAAS3L,EAAK/G,EAAI,CAC7B,MAAMmV,EAAQ,CAAA,EAEd,OAAAzC,EAAK3L,EAAK,SAASzY,EAAM2R,EAAM1P,EAAM,CAC7ByP,EAAG,KAAK,KAAM1R,EAAM2R,EAAM1P,CAAI,GAC9B4kB,EAAM,KAAK7mB,CAAI,CAE/B,CAAS,EAEM6mB,CACf,EAEWzC,CACX,CC9RA,SAASE,GAAKvmB,EAAO,CACjB,OAAOA,CACX,CAEA,SAAS+oB,GAAmBC,EAAY,CACpC,KAAM,CAAE,IAAAvpB,EAAK,IAAAC,EAAK,MAAAupB,CAAK,EAAKD,EAE5B,OAAIvpB,IAAQ,GAAKC,IAAQ,EACdupB,EAAQ,KAAO,IAGtBxpB,IAAQ,GAAKC,IAAQ,EACd,IAGPD,IAAQ,GAAKC,IAAQ,EACdupB,EAAQ,IAAM,IAGrBxpB,IAAQ,GAAKC,IAAQ,EACd,IAINupB,EAAQ,IAAM,KACdxpB,IAAQC,EACH,IAAMD,EAAM,IACZ,IAAMA,EAAM,KAAOC,IAAQ,EAAIA,EAAM,IAAM,IAGzD,CAEA,SAASwpB,GAAiBjnB,EAAM,CAC5B,OAAQA,EAAK,KAAI,CACb,IAAK,QACD,MACI,MACCA,EAAK,MAAQ,KAAO,KAAOA,EAAK,KACjC,KACCA,EAAK,MAAQ,KAAO,IAAMA,EAAK,KAChC,IAGR,QACI,MAAM,IAAI,MAAM,sBAAwBA,EAAK,KAAO,GAAG,CAC9D,CACL,CAEA,SAASknB,GAAiBlnB,EAAMmnB,EAAUC,EAAaC,EAAS,CAC5D,MAAMC,EAAatnB,EAAK,aAAe,KAAOqnB,EAAUrnB,EAAK,WAAa,IAAMA,EAAK,WAAa,IAC5F6B,EAAS7B,EAAK,MACf,IAAIunB,GAAQC,GAAiBD,EAAMJ,EAAUC,EAAaC,CAAO,CAAC,EAClE,KAAKC,CAAU,EAEpB,OAAItnB,EAAK,UAAYonB,GACTC,GAAWxlB,EAAO,CAAC,IAAM,IAAM,IAAM,MAAQA,GAAUwlB,EAAU,IAAM,MAG5ExlB,CACX,CAEA,SAAS2lB,GAAiBxnB,EAAMmnB,EAAUC,EAAaC,EAAS,CAC5D,IAAIxlB,EAEJ,OAAQ7B,EAAK,KAAI,CACb,IAAK,QACD6B,EACIqlB,GAAiBlnB,EAAMmnB,EAAUC,EAAaC,CAAO,GACpDrnB,EAAK,cAAgB,IAAM,IAChC,MAEJ,IAAK,aAED,OACIwnB,GAAiBxnB,EAAK,KAAMmnB,EAAUC,EAAaC,CAAO,EAC1DF,EAASL,GAAmB9mB,CAAI,EAAGA,CAAI,EAG/C,IAAK,OACD6B,EAAS,IAAM7B,EAAK,MAAQA,EAAK,KAAOmnB,EAASF,GAAiBjnB,EAAK,IAAI,EAAGA,EAAK,IAAI,EAAI,IAAM,IACjG,MAEJ,IAAK,WACD6B,EAAS,KAAQ7B,EAAK,KAAO,KAC7B,MAEJ,IAAK,UACD6B,EAAS7B,EAAK,KACd,MAEJ,IAAK,YACD6B,EAAS,IAAM7B,EAAK,KACpB,MAEJ,IAAK,WACD6B,EAAS7B,EAAK,KAAO,IACrB,MAEJ,IAAK,SACL,IAAK,QACD6B,EAAS7B,EAAK,MACd,MAEJ,IAAK,QACD6B,EAAS,IACT,MAEJ,QACI,MAAM,IAAI,MAAM,sBAAwB7B,EAAK,KAAO,GAAG,CAC9D,CAED,OAAOmnB,EAAStlB,EAAQ7B,CAAI,CAChC,CAEO,SAASynB,GAASznB,EAAMnB,EAAS,CACpC,IAAIsoB,EAAW7C,GACX8C,EAAc,GACdC,EAAU,GAEd,OAAI,OAAOxoB,GAAY,WACnBsoB,EAAWtoB,EACJA,IACPuoB,EAAc,EAAQvoB,EAAQ,YAC9BwoB,EAAU,EAAQxoB,EAAQ,QACtB,OAAOA,EAAQ,UAAa,aAC5BsoB,EAAWtoB,EAAQ,WAIpB2oB,GAAiBxnB,EAAMmnB,EAAUC,EAAaC,CAAO,CAChE,CC/HA,MAAMK,GAAa,CAAE,OAAQ,EAAG,KAAM,EAAG,OAAQ,GAEjD,SAASC,GAAeC,EAAa5nB,EAAM,CACvC,MAAM4R,EAASgW,EAAY,OACrBC,EAAeD,EAAY,aAC3BE,EAAeD,EAAejW,EAAO,QAASA,EAAOiW,CAAY,EAAE,MAAQ,KAC3EE,EAAUD,IAAiB9nB,EAAO8nB,EAAe,KACvD,IAAIE,EAAiB,EACjBC,EAAiB,EACjBxf,EAAU,EACVlH,EAAM,GACNwM,EACAC,EAEJ,QAASX,EAAI,EAAGA,EAAIuE,EAAO,OAAQvE,IAAK,CACpC,MAAM6a,EAAQtW,EAAOvE,CAAC,EAAE,MAEpBA,IAAMwa,IACNI,EAAiBC,EAAM,OACvBF,EAAiBzmB,EAAI,QAGrBwmB,IAAY,MAAQnW,EAAOvE,CAAC,EAAE,OAAS0a,IACnC1a,GAAKwa,EACLpf,IAEAA,EAAU,GAIlBlH,GAAO2mB,CACV,CAED,OAAIL,IAAiBjW,EAAO,QAAUnJ,EAAU,GAC5CsF,EAAQoa,GAAQJ,GAAW/nB,EAAM,KAAK,GAAKooB,GAASV,GAAYnmB,CAAG,EACnEyM,EAAMoa,GAASra,CAAK,IAEpBA,EAAQoa,GAAQJ,EAAS,OAAO,GAC5BK,GAASD,GAAQnoB,EAAM,OAAO,GAAK0nB,GAAYnmB,EAAI,MAAM,EAAGymB,CAAc,CAAC,EAC/Eha,EAAMma,GAAQJ,EAAS,KAAK,GACxBK,GAASra,EAAOxM,EAAI,OAAOymB,EAAgBC,CAAc,CAAC,GAG3D,CACH,IAAA1mB,EACA,eAAAymB,EACA,eAAAC,EACA,MAAAla,EACA,IAAAC,CACR,CACA,CAEA,SAASma,GAAQnoB,EAAMqoB,EAAO,CAC1B,MAAMtqB,EAAQiC,GAAQA,EAAK,KAAOA,EAAK,IAAIqoB,CAAK,EAEhD,OAAItqB,EACO,SAAUA,EAAQqqB,GAASrqB,CAAK,EAAIA,EAGxC,IACX,CAEA,SAASqqB,GAAS,CAAE,OAAA3a,EAAQ,KAAAmC,EAAM,OAAAC,CAAM,EAAIyY,EAAO,CAC/C,MAAM9P,EAAM,CACR,OAAA/K,EACA,KAAAmC,EACA,OAAAC,CACR,EAEI,GAAIyY,EAAO,CACP,MAAM5Y,EAAQ4Y,EAAM,MAAM,aAAa,EAEvC9P,EAAI,QAAU8P,EAAM,OACpB9P,EAAI,MAAQ9I,EAAM,OAAS,EAC3B8I,EAAI,OAAS9I,EAAM,SAAW,EAAI8I,EAAI,OAAS8P,EAAM,OAAS5Y,EAAM,IAAG,EAAG,OAAS,CACtF,CAED,OAAO8I,CACX,CAEO,MAAM+P,GAAuB,SAASzX,EAAM0X,EAAe,CAC9D,MAAMxT,EAAQH,GACV,uBACA/D,GAAQ0X,EAAgB,KAAOA,EAAgB,IAAM,GAC7D,EAEI,OAAAxT,EAAM,UAAYwT,EAEXxT,CACX,EAEayT,GAAmB,SAAS1T,EAAS2T,EAAQ1oB,EAAM4nB,EAAa,CACzE,MAAM5S,EAAQH,GAAkB,mBAAoBE,CAAO,EACrD,CACF,IAAAxT,EACA,eAAAymB,EACA,eAAAC,EACA,MAAAla,EACA,IAAAC,CACR,EAAQ2Z,GAAeC,EAAa5nB,CAAI,EAEpC,OAAAgV,EAAM,WAAaD,EACnBC,EAAM,OAAS0T,EAASjB,GAASiB,CAAM,EAAI,YAC3C1T,EAAM,IAAMzT,EACZyT,EAAM,eAAiBgT,EACvBhT,EAAM,eAAiBiT,EACvBjT,EAAM,QAAUD,EAAU;AAAA,YACPC,EAAM,OAAS;AAAA,aACdzT,GAAO,kBAAoB;AAAA,YAC5B,IAAI,MAAMyT,EAAM,eAAiB,CAAC,EAAE,KAAK,GAAG,EAAI,IAEnE,OAAO,OAAOA,EAAOjH,CAAK,EAC1BiH,EAAM,IAAM,CACR,OAAShV,GAAQA,EAAK,KAAOA,EAAK,IAAI,QAAW,YACjD,MAAA+N,EACA,IAAAC,CACR,EAEWgH,CACX,EC1HM2T,GAAW,IAAI,IACfC,GAAa,IAAI,IACjB9F,GAAc,GAEP+F,GAAUC,GACVC,GAAWC,GAEjB,SAASC,GAAiBlR,EAAKtK,EAAQ,CAC1C,OAAAA,EAASA,GAAU,EAEZsK,EAAI,OAAStK,GAAU,GACvBsK,EAAI,WAAWtK,CAAM,IAAMqV,IAC3B/K,EAAI,WAAWtK,EAAS,CAAC,IAAMqV,EAC1C,CAEA,SAASoG,GAAgBnR,EAAKtK,EAAQ,CAIlC,GAHAA,EAASA,GAAU,EAGfsK,EAAI,OAAStK,GAAU,GAEnBsK,EAAI,WAAWtK,CAAM,IAAMqV,IAC3B/K,EAAI,WAAWtK,EAAS,CAAC,IAAMqV,GAAa,CAE5C,MAAMqG,EAAkBpR,EAAI,QAAQ,IAAKtK,EAAS,CAAC,EAEnD,GAAI0b,IAAoB,GACpB,OAAOpR,EAAI,UAAUtK,EAAQ0b,EAAkB,CAAC,CAEvD,CAGL,MAAO,EACX,CAEA,SAASL,GAAqBD,EAAS,CACnC,GAAIF,GAAS,IAAIE,CAAO,EACpB,OAAOF,GAAS,IAAIE,CAAO,EAG/B,MAAM/T,EAAO+T,EAAQ,cACrB,IAAIO,EAAaT,GAAS,IAAI7T,CAAI,EAElC,GAAIsU,IAAe,OAAW,CAC1B,MAAMC,EAASJ,GAAiBnU,EAAM,CAAC,EACjCwU,EAAUD,EAAoC,GAA3BH,GAAgBpU,EAAM,CAAC,EAChDsU,EAAa,OAAO,OAAO,CACvB,SAAUtU,EAAK,OAAOwU,EAAO,MAAM,EACnC,KAAAxU,EACA,OAAQwU,EACR,OAAAA,EACA,OAAAD,CACZ,CAAS,CACJ,CAED,OAAAV,GAAS,IAAIE,EAASO,CAAU,EAEzBA,CACX,CAEA,SAASJ,GAAsBD,EAAU,CACrC,GAAIH,GAAW,IAAIG,CAAQ,EACvB,OAAOH,GAAW,IAAIG,CAAQ,EAGlC,IAAIjU,EAAOiU,EACPQ,EAAOR,EAAS,CAAC,EAEjBQ,IAAS,IACTA,EAAOR,EAAS,CAAC,IAAM,IAAM,KAAO,IAC7BQ,IAAS,KACTA,IAAS,KACTA,IAAS,KACTA,IAAS,KACTA,IAAS,KACTA,IAAS,MAChBA,EAAO,IAGX,MAAMF,EAASJ,GAAiBnU,EAAMyU,EAAK,MAAM,EAGjD,GAAI,CAACF,IACDvU,EAAOA,EAAK,cACR8T,GAAW,IAAI9T,CAAI,GAAG,CACtB,MAAMsU,EAAaR,GAAW,IAAI9T,CAAI,EACtC,OAAA8T,GAAW,IAAIG,EAAUK,CAAU,EAC5BA,CACV,CAGL,MAAME,EAAUD,EAA8C,GAArCH,GAAgBpU,EAAMyU,EAAK,MAAM,EACpDC,EAAS1U,EAAK,OAAO,EAAGyU,EAAK,OAASD,EAAO,MAAM,EACnDF,EAAa,OAAO,OAAO,CAC7B,SAAUtU,EAAK,OAAO0U,EAAO,MAAM,EACnC,KAAM1U,EAAK,OAAOyU,EAAK,MAAM,EAC7B,KAAAA,EACA,OAAAD,EACA,OAAAE,EACA,OAAAH,CACR,CAAK,EAED,OAAAT,GAAW,IAAIG,EAAUK,CAAU,EAE5BA,CACX,CCxGO,MAAMK,GAAkB,CAC3B,UACA,UACA,QACA,SACA,cACJ,ECIM5G,GAAW,GACXC,GAAc,GACd3T,GAAI,IACJua,GAAgB,GAChBC,GAAa,GAEnB,SAASC,GAAQ1B,EAAOrc,EAAM,CAC1B,OAAOqc,IAAU,MAAQA,EAAM,OAASvd,GAASud,EAAM,MAAM,WAAW,CAAC,IAAMrc,CACnF,CAEA,SAASge,GAAO3B,EAAOza,EAAQqc,EAAc,CACzC,KAAO5B,IAAU,OAASA,EAAM,OAASnd,GAAcmd,EAAM,OAASvc,IAClEuc,EAAQ4B,EAAa,EAAErc,CAAM,EAGjC,OAAOA,CACX,CAEA,SAASsc,GAAa7B,EAAO8B,EAAaC,EAAcxc,EAAQ,CAC5D,GAAI,CAACya,EACD,MAAO,GAGX,MAAMrc,EAAOqc,EAAM,MAAM,WAAW8B,CAAW,EAE/C,GAAIne,IAASgX,IAAYhX,IAASiX,GAAa,CAC3C,GAAImH,EAEA,MAAO,GAEXD,GACH,CAED,KAAOA,EAAc9B,EAAM,MAAM,OAAQ8B,IACrC,GAAI,CAACpe,GAAQsc,EAAM,MAAM,WAAW8B,CAAW,CAAC,EAE5C,MAAO,GAIf,OAAOvc,EAAS,CACpB,CAIA,SAASyc,GAAShC,EAAOiC,EAASL,EAAc,CAC5C,IAAIpb,EAAO,GACPjB,EAASoc,GAAO3B,EAAOiC,EAASL,CAAY,EAIhD,GAFA5B,EAAQ4B,EAAarc,CAAM,EAEvBya,IAAU,KACV,OAAOiC,EAGX,GAAIjC,EAAM,OAAShQ,EACf,GAAI0R,GAAQ1B,EAAOrF,EAAQ,GAAK+G,GAAQ1B,EAAOpF,EAAW,GAKtD,GAJApU,EAAO,GACPjB,EAASoc,GAAOC,EAAa,EAAErc,CAAM,EAAGA,EAAQqc,CAAY,EAC5D5B,EAAQ4B,EAAarc,CAAM,EAEvBya,IAAU,MAAQA,EAAM,OAAShQ,EACjC,MAAO,OAGX,QAAOiS,EAIf,GAAI,CAACzb,EAAM,CACP,MAAM7C,EAAOqc,EAAM,MAAM,WAAW,CAAC,EACrC,GAAIrc,IAASgX,IAAYhX,IAASiX,GAE9B,MAAO,EAEd,CAED,OAAOiH,GAAa7B,EAAOxZ,EAAO,EAAI,EAAGA,EAAMjB,CAAM,CACzD,CAGe,SAAS2c,GAAQlC,EAAO4B,EAAc,CAEjD,IAAIrc,EAAS,EAEb,GAAI,CAACya,EACD,MAAO,GAIX,GAAIA,EAAM,OAAShQ,EACf,OAAO6R,GAAa7B,EAAO,EAAGyB,GAAYlc,CAAM,EAQ/C,GAAIya,EAAM,OAAS/d,GAAS+d,EAAM,MAAM,WAAW,CAAC,IAAMpF,GAAa,CAExE,GAAI,CAACnV,GAAQua,EAAM,MAAO,EAAG/Y,EAAC,EAC1B,MAAO,GAGX,OAAQ+Y,EAAM,MAAM,OAAM,CAItB,IAAK,GACD,OAAOgC,GAASJ,EAAa,EAAErc,CAAM,EAAGA,EAAQqc,CAAY,EAGhE,IAAK,GACD,OAAI5B,EAAM,MAAM,WAAW,CAAC,IAAMpF,GACvB,GAGXrV,EAASoc,GAAOC,EAAa,EAAErc,CAAM,EAAGA,EAAQqc,CAAY,EAC5D5B,EAAQ4B,EAAarc,CAAM,EAEpBsc,GAAa7B,EAAO,EAAGwB,GAAejc,CAAM,GAGvD,QACI,OAAIya,EAAM,MAAM,WAAW,CAAC,IAAMpF,GACvB,EAGJiH,GAAa7B,EAAO,EAAGwB,GAAejc,CAAM,CAC1D,CACJ,SAOQya,EAAM,OAAS/d,GAAUyf,GAAQ1B,EAAOrF,EAAQ,GAAKiH,EAAarc,EAAS,CAAC,EAAE,OAAStD,EAAQ,CAMpG,GAJI+d,EAAM,OAAS/d,IACf+d,EAAQ4B,EAAa,EAAErc,CAAM,GAG7Bya,IAAU,MAAQ,CAACva,GAAQua,EAAM,MAAO,EAAG/Y,EAAC,EAC5C,MAAO,GAGX,OAAQ+Y,EAAM,MAAM,OAAM,CAItB,IAAK,GACD,OAAOgC,GAASJ,EAAa,EAAErc,CAAM,EAAGA,EAAQqc,CAAY,EAGhE,IAAK,GACD,OAAI5B,EAAM,MAAM,WAAW,CAAC,IAAMpF,GACvB,GAGXrV,EAASoc,GAAOC,EAAa,EAAErc,CAAM,EAAGA,EAAQqc,CAAY,EAC5D5B,EAAQ4B,EAAarc,CAAM,EAEpBsc,GAAa7B,EAAO,EAAGwB,GAAejc,CAAM,GAGvD,QACI,OAAIya,EAAM,MAAM,WAAW,CAAC,IAAMpF,GACvB,EAGJiH,GAAa7B,EAAO,EAAGwB,GAAejc,CAAM,CAC1D,CACJ,SAOQya,EAAM,OAASpd,EAAW,CAC/B,IAAIe,EAAOqc,EAAM,MAAM,WAAW,CAAC,EAC/BxZ,EAAO7C,IAASgX,IAAYhX,IAASiX,GAAc,EAAI,EACvDzV,EAAIqB,EAER,KAAOrB,EAAI6a,EAAM,MAAM,QACdtc,GAAQsc,EAAM,MAAM,WAAW7a,CAAC,CAAC,EADXA,IAC3B,CAUJ,OALIA,IAAMqB,GAKN,CAACf,GAAQua,EAAM,MAAO7a,EAAG8B,EAAC,EACnB,EAMP9B,EAAI,IAAM6a,EAAM,MAAM,OACfgC,GAASJ,EAAa,EAAErc,CAAM,EAAGA,EAAQqc,CAAY,EAExD5B,EAAM,MAAM,WAAW7a,EAAI,CAAC,IAAMyV,GAC3B,EAIPzV,EAAI,IAAM6a,EAAM,MAAM,QACtBza,EAASoc,GAAOC,EAAa,EAAErc,CAAM,EAAGA,EAAQqc,CAAY,EAC5D5B,EAAQ4B,EAAarc,CAAM,EAEpBsc,GAAa7B,EAAO,EAAGwB,GAAejc,CAAM,GAI5Csc,GAAa7B,EAAO7a,EAAI,EAAGqc,GAAejc,CAAM,CAGlE,CAED,MAAO,EACX,CCpOA,MAAMoV,GAAW,GACXC,GAAc,GACduH,GAAe,GACfC,GAAI,IAEV,SAASV,GAAQ1B,EAAOrc,EAAM,CAC1B,OAAOqc,IAAU,MAAQA,EAAM,OAASvd,GAASud,EAAM,MAAM,WAAW,CAAC,IAAMrc,CACnF,CAEA,SAAS0e,GAAWrC,EAAOrc,EAAM,CAC7B,OAAOqc,EAAM,MAAM,WAAW,CAAC,IAAMrc,CACzC,CAEA,SAAS2e,GAAYtC,EAAOza,EAAQgd,EAAW,CAC3C,IAAIC,EAAS,EAEb,QAASvZ,EAAM1D,EAAQ0D,EAAM+W,EAAM,MAAM,OAAQ/W,IAAO,CACpD,MAAMtF,EAAOqc,EAAM,MAAM,WAAW/W,CAAG,EAEvC,GAAItF,IAASiX,IAAe2H,GAAaC,IAAW,EAChD,OAAAF,GAAYtC,EAAOza,EAASid,EAAS,EAAG,EAAK,EACtC,EAOX,GAJI,CAAC5e,GAAWD,CAAI,GAIhB,EAAE6e,EAAS,EACX,MAAO,EAEd,CAED,OAAOA,CACX,CAEA,SAASC,GAAyBC,EAAU5N,EAAQ8M,EAAc,CAC9D,GAAI,CAACc,EACD,MAAO,GAGX,KAAOhB,GAAQE,EAAa9M,CAAM,EAAGqN,EAAY,GAAG,CAChD,GAAI,EAAEO,EAAW,EACb,MAAO,GAGX5N,GACH,CAED,OAAOA,CACX,CAqBe,SAAS6N,GAAO3C,EAAO4B,EAAc,CAChD,IAAI9M,EAAS,EAQb,GALIkL,IAAU,MAAQA,EAAM,OAAS/d,GAAS,CAACwD,GAAQua,EAAM,MAAO,EAAGoC,EAAC,IAIxEpC,EAAQ4B,EAAa,EAAE9M,CAAM,EACzBkL,IAAU,MACV,MAAO,GAKX,GAAI0B,GAAQ1B,EAAOrF,EAAQ,EAEvB,OADAqF,EAAQ4B,EAAa,EAAE9M,CAAM,EACzBkL,IAAU,KACH,EAGPA,EAAM,OAAS/d,EAERwgB,GAAyBH,GAAYtC,EAAO,EAAG,EAAI,EAAG,EAAElL,EAAQ8M,CAAY,EAGnFF,GAAQ1B,EAAOmC,EAAY,EAEpBM,GAAyB,EAAG,EAAE3N,EAAQ8M,CAAY,EAItD,EAMX,GAAI5B,EAAM,OAAShQ,EAAa,CAC5B,MAAM4S,EAAoBN,GAAYtC,EAAO,EAAG,EAAI,EACpD,OAAI4C,IAAsB,EACf,GAGX5C,EAAQ4B,EAAa,EAAE9M,CAAM,EACzBkL,IAAU,KAEHlL,EAGPkL,EAAM,OAASpd,GAAaod,EAAM,OAAShQ,EAGvC,CAACqS,GAAWrC,EAAOpF,EAAW,GAAK,CAAC0H,GAAYtC,EAAO,EAAG,EAAK,EACxD,EAGJlL,EAAS,EAIb2N,GAAyBG,EAAmB9N,EAAQ8M,CAAY,EAC1E,CAGD,OAAI5B,EAAM,OAASpd,EACR6f,GAAyBH,GAAYtC,EAAO,EAAG,EAAI,EAAG,EAAElL,EAAQ8M,CAAY,EAGhF,CACX,CClHA,MAAMiB,GAAoB,CAAC,QAAS,aAAc,eAAe,EAC3D3a,GAAc,IAAI,IAAI,CACxB,CAACC,EAAe7E,CAAgB,EAChC,CAACD,EAAiBC,CAAgB,EAClC,CAACH,GAAmBC,EAAkB,EACtC,CAACG,EAAkBC,EAAiB,CACxC,CAAC,EAGD,SAASsf,GAAWjT,EAAKlG,EAAO,CAC5B,OAAOA,EAAQkG,EAAI,OAASA,EAAI,WAAWlG,CAAK,EAAI,CACxD,CAEA,SAASoZ,GAAMC,EAAQC,EAAU,CAC7B,OAAOrd,GAAOod,EAAQ,EAAGA,EAAO,OAAQC,CAAQ,CACpD,CAEA,SAASC,GAASF,EAAQC,EAAU,CAChC,QAAS9d,EAAI,EAAGA,EAAI8d,EAAS,OAAQ9d,IACjC,GAAI4d,GAAMC,EAAQC,EAAS9d,CAAC,CAAC,EACzB,MAAO,GAIf,MAAO,EACX,CAGA,SAASge,GAAgBtT,EAAKtK,EAAQ,CAClC,OAAIA,IAAWsK,EAAI,OAAS,EACjB,GAIPiT,GAAWjT,EAAKtK,CAAM,IAAM,IAC5B7B,GAAQof,GAAWjT,EAAKtK,EAAS,CAAC,CAAC,CAE3C,CAEA,SAAS6d,GAAWC,EAAMxtB,EAAOytB,EAAQ,CACrC,GAAID,GAAQA,EAAK,OAAS,QAAS,CAC/B,MAAME,EAAM,OACRD,IAAW,QAAaA,IAAWztB,EAAM,OACnCA,EAAM,OAAO,EAAGytB,CAAM,EACtBztB,CAClB,EAcQ,GAZI,MAAM0tB,CAAG,GAMTF,EAAK,MAAQ,MAAQE,EAAMF,EAAK,KAAO,OAAOA,EAAK,KAAQ,UAM3DA,EAAK,MAAQ,MAAQE,EAAMF,EAAK,KAAO,OAAOA,EAAK,KAAQ,SAC3D,MAAO,EAEd,CAED,MAAO,EACX,CAEA,SAASG,GAAgBxD,EAAO4B,EAAc,CAC1C,IAAInZ,EAAmB,EACnBgb,EAAe,CAAA,EACf3O,EAAS,EAGb4O,EACA,EAAG,CACC,OAAQ1D,EAAM,KAAI,CACd,KAAKxc,GACL,KAAKF,EACL,KAAKF,GACD,GAAI4c,EAAM,OAASvX,EACf,MAAMib,EAKV,GAFAjb,EAAmBgb,EAAa,MAE5BA,EAAa,SAAW,EAAG,CAC3B3O,IACA,MAAM4O,CACT,CAED,MAEJ,KAAKvb,EACL,KAAK9E,EACL,KAAKF,GACL,KAAKI,EACDkgB,EAAa,KAAKhb,CAAgB,EAClCA,EAAmBP,GAAY,IAAI8X,EAAM,IAAI,EAC7C,KACP,CAEDlL,GACR,OAAakL,EAAQ4B,EAAa9M,CAAM,GAEpC,OAAOA,CACX,CAKA,SAAS6O,GAAKza,EAAM,CAChB,OAAO,SAAS8W,EAAO4B,EAAcyB,EAAM,CACvC,OAAIrD,IAAU,KACH,EAGPA,EAAM,OAAS7X,GAAiB+a,GAASlD,EAAM,MAAO6C,EAAiB,EAChEW,GAAgBxD,EAAO4B,CAAY,EAGvC1Y,EAAK8W,EAAO4B,EAAcyB,CAAI,CAC7C,CACA,CAEA,SAASta,EAAU6a,EAAmB,CAClC,OAAO,SAAS5D,EAAO,CACnB,OAAIA,IAAU,MAAQA,EAAM,OAAS4D,EAC1B,EAGJ,CACf,CACA,CAaA,SAASC,GAAY7D,EAAO,CACxB,GAAIA,IAAU,MAAQA,EAAM,OAAS/d,EACjC,MAAO,GAGX,MAAM2K,EAAOoT,EAAM,MAAM,YAAW,EAQpC,OALIkD,GAAStW,EAAM2U,EAAe,GAK9BwB,GAAMnW,EAAM,SAAS,EACd,EASJ,CACX,CAKA,SAASkX,GAAY9D,EAAO,CAMxB,OALIA,IAAU,MAAQA,EAAM,OAAS/d,GAKjC6gB,GAAW9C,EAAM,MAAO,CAAC,IAAM,IAAU8C,GAAW9C,EAAM,MAAO,CAAC,IAAM,GACjE,EAGJ,CACX,CAMA,SAAS+D,GAAmB/D,EAAO,CAO/B,MALI,CAAC8D,GAAY9D,CAAK,GAKlBA,EAAM,QAAU,KACT,EAGJ,CACX,CAMA,SAASgE,GAAShE,EAAO,CACrB,GAAIA,IAAU,MAAQA,EAAM,OAAS5d,EACjC,MAAO,GAGX,MAAM0S,EAASkL,EAAM,MAAM,OAG3B,GAAIlL,IAAW,GAAKA,IAAW,GAAKA,IAAW,GAAKA,IAAW,EAC3D,MAAO,GAGX,QAAS3P,EAAI,EAAGA,EAAI2P,EAAQ3P,IACxB,GAAI,CAACvB,GAAWkf,GAAW9C,EAAM,MAAO7a,CAAC,CAAC,EACtC,MAAO,GAIf,MAAO,EACX,CAEA,SAAS8e,GAAWjE,EAAO,CAKvB,OAJIA,IAAU,MAAQA,EAAM,OAAS5d,GAIjC,CAACqC,GAAkBqe,GAAW9C,EAAM,MAAO,CAAC,EAAG8C,GAAW9C,EAAM,MAAO,CAAC,EAAG8C,GAAW9C,EAAM,MAAO,CAAC,CAAC,EAC9F,EAGJ,CACX,CAIA,SAASkE,GAAiBlE,EAAO4B,EAAc,CAC3C,GAAI,CAAC5B,EACD,MAAO,GAGX,IAAIvX,EAAmB,EACnBgb,EAAe,CAAA,EACf3O,EAAS,EAIb4O,EACA,EAAG,CACC,OAAQ1D,EAAM,KAAI,CAEd,KAAK1d,GACL,KAAKE,GACD,MAAMkhB,EAGV,KAAKlgB,GACL,KAAKF,EACL,KAAKF,GACD,GAAI4c,EAAM,OAASvX,EACf,MAAMib,EAGVjb,EAAmBgb,EAAa,MAChC,MAGJ,KAAKxgB,GACD,GAAIwF,IAAqB,EACrB,MAAMib,EAGV,MAGJ,KAAKjhB,EACD,GAAIgG,IAAqB,GAAKuX,EAAM,QAAU,IAC1C,MAAM0D,EAGV,MAEJ,KAAKvb,EACL,KAAK9E,EACL,KAAKF,GACL,KAAKI,EACDkgB,EAAa,KAAKhb,CAAgB,EAClCA,EAAmBP,GAAY,IAAI8X,EAAM,IAAI,EAC7C,KACP,CAEDlL,GACR,OAAakL,EAAQ4B,EAAa9M,CAAM,GAEpC,OAAOA,CACX,CAMA,SAASqP,GAASnE,EAAO4B,EAAc,CACnC,GAAI,CAAC5B,EACD,MAAO,GAGX,IAAIvX,EAAmB,EACnBgb,EAAe,CAAA,EACf3O,EAAS,EAIb4O,EACA,EAAG,CACC,OAAQ1D,EAAM,KAAI,CAEd,KAAK1d,GACL,KAAKE,GACD,MAAMkhB,EAGV,KAAKlgB,GACL,KAAKF,EACL,KAAKF,GACD,GAAI4c,EAAM,OAASvX,EACf,MAAMib,EAGVjb,EAAmBgb,EAAa,MAChC,MAEJ,KAAKtb,EACL,KAAK9E,EACL,KAAKF,GACL,KAAKI,EACDkgB,EAAa,KAAKhb,CAAgB,EAClCA,EAAmBP,GAAY,IAAI8X,EAAM,IAAI,EAC7C,KACP,CAEDlL,GACR,OAAakL,EAAQ4B,EAAa9M,CAAM,GAEpC,OAAOA,CACX,CAMA,SAASsP,GAAUxb,EAAM,CACrB,OAAIA,IACAA,EAAO,IAAI,IAAIA,CAAI,GAGhB,SAASoX,EAAO4B,EAAcyB,EAAM,CACvC,GAAIrD,IAAU,MAAQA,EAAM,OAASpd,EACjC,MAAO,GAGX,MAAMyhB,EAAY9d,GAAcyZ,EAAM,MAAO,CAAC,EAG9C,GAAIpX,IAAS,KAAM,CAEf,MAAM0b,EAAuBtE,EAAM,MAAM,QAAQ,KAAMqE,CAAS,EAC1DE,EAAOD,IAAyB,IAAM,CAACnB,GAAgBnD,EAAM,MAAOsE,CAAoB,EACxFtE,EAAM,MAAM,OAAOqE,CAAS,EAC5BrE,EAAM,MAAM,UAAUqE,EAAWC,CAAoB,EAE3D,GAAI1b,EAAK,IAAI2b,EAAK,YAAa,CAAA,IAAM,GACjC,MAAO,EAEd,CAGD,OAAInB,GAAWC,EAAMrD,EAAM,MAAOqE,CAAS,EAChC,EAGJ,CACf,CACA,CAQA,SAASG,GAAWxE,EAAO4B,EAAcyB,EAAM,CAO3C,OALIrD,IAAU,MAAQA,EAAM,OAASrd,GAKjCygB,GAAWC,EAAMrD,EAAM,MAAOA,EAAM,MAAM,OAAS,CAAC,EAC7C,EAGJ,CACX,CAUA,SAASlP,GAAK5H,EAAM,CAChB,OAAI,OAAOA,GAAS,aAChBA,EAAO,UAAW,CACd,MAAO,EACnB,GAGW,SAAS8W,EAAO4B,EAAcyB,EAAM,CACvC,OAAIrD,IAAU,MAAQA,EAAM,OAAShQ,GAC7B,OAAOgQ,EAAM,KAAK,IAAM,EACjB,EAIR9W,EAAK8W,EAAO4B,EAAcyB,CAAI,CAC7C,CACA,CAMA,SAASvT,GAAOkQ,EAAO4B,EAAcyB,EAAM,CACvC,GAAIrD,IAAU,KACV,MAAO,GAGX,MAAMqE,EAAY9d,GAAcyZ,EAAM,MAAO,CAAC,EAO9C,MALI,EADaqE,IAAcrE,EAAM,MAAM,SAC1B,CAACmD,GAAgBnD,EAAM,MAAOqE,CAAS,GAKpDjB,GAAWC,EAAMrD,EAAM,MAAOqE,CAAS,EAChC,EAGJ,CACX,CAIA,SAASI,GAAQzE,EAAO4B,EAAcyB,EAAM,CAExC,GAAIrD,IAAU,MAAQA,EAAM,OAAShQ,EACjC,MAAO,GAIX,IAAI7K,EAAI2d,GAAW9C,EAAM,MAAO,CAAC,IAAM,IAC/B8C,GAAW9C,EAAM,MAAO,CAAC,IAAM,GAAS,EAAI,EAGpD,KAAO7a,EAAI6a,EAAM,MAAM,OAAQ7a,IAC3B,GAAI,CAACzB,GAAQof,GAAW9C,EAAM,MAAO7a,CAAC,CAAC,EACnC,MAAO,GAKf,OAAIie,GAAWC,EAAMrD,EAAM,MAAO7a,CAAC,EACxB,EAGJ,CACX,CAGO,MAAMuf,GAAa,CACtB,cAAe3b,EAAU9G,CAAK,EAC9B,iBAAkB8G,EAAUZ,CAAa,EACzC,mBAAoBY,EAAU5G,CAAS,EACvC,aAAc4G,EAAU3G,CAAI,EAC5B,eAAgB2G,EAAUgS,EAAW,EACrC,mBAAoBhS,EAAUzG,EAAS,EACvC,YAAayG,EAAUxG,EAAG,EAC1B,gBAAiBwG,EAAUvG,EAAM,EACjC,cAAeuG,EAAUtG,CAAK,EAC9B,eAAgBsG,EAAUiH,CAAW,EACrC,mBAAoBjH,EAAUpG,CAAU,EACxC,kBAAmBoG,EAAUnG,CAAS,EACtC,mBAAoBmG,EAAUlG,CAAU,EACxC,YAAakG,EAAUjG,EAAG,EAC1B,YAAaiG,EAAUhG,EAAG,EAC1B,cAAegG,EAAU/F,EAAK,EAC9B,kBAAmB+F,EAAU9F,EAAS,EACtC,cAAe8F,EAAU7F,EAAK,EAC9B,UAAW6F,EAAU5F,EAAiB,EACtC,UAAW4F,EAAU3F,EAAkB,EACvC,UAAW2F,EAAU1F,CAAe,EACpC,UAAW0F,EAAUzF,CAAgB,EACrC,UAAWyF,EAAUxF,CAAgB,EACrC,UAAWwF,EAAUvF,EAAiB,CAC1C,EAGamhB,GAAkB,CAE3B,OAAU5b,EAAUgS,EAAW,EAC/B,MAAShS,EAAU9G,CAAK,EAGxB,WAAc0hB,GAAKa,EAAU,EAG7B,KAAQ1T,GAAM,EACd,OAAU6S,GAAK7T,EAAM,EACrB,QAAW6T,GAAKc,EAAO,EAGvB,eAAgBZ,GAChB,eAAgBC,GAChB,uBAAwBC,GACxB,YAAaC,GACb,cAAeC,GACf,YAAa/B,GACb,OAAUS,GACV,oBAAqBuB,GACrB,YAAaC,EACjB,EAcO,SAASS,GAAqBC,EAAO,CACxC,KAAM,CACF,MAAAC,EACA,QAAAC,EACA,UAAAC,EACA,KAAAC,EACA,OAAAnQ,EACA,WAAAoQ,EACA,UAAAC,EACA,KAAAC,CACR,EAAQP,GAAS,CAAA,EAEb,MAAO,CACH,UAAalB,GAAKS,GAAU,IAAI,CAAC,EACjC,MAAST,GAAKS,GAAUU,CAAK,CAAC,EAC9B,QAAWnB,GAAKS,GAAUW,CAAO,CAAC,EAClC,UAAapB,GAAKS,GAAUY,CAAS,CAAC,EACtC,KAAQrB,GAAKS,GAAUa,CAAI,CAAC,EAC5B,OAAUtB,GAAK7S,GAAKsT,GAAUtP,CAAM,CAAC,CAAC,EACtC,WAAc6O,GAAKS,GAAUc,CAAU,CAAC,EACxC,UAAavB,GAAKS,GAAUe,CAAS,CAAC,EACtC,KAAQxB,GAAKS,GAAUgB,CAAI,CAAC,CACpC,CACA,CAEO,SAASC,GAAmBR,EAAO,CACtC,OAAO5uB,MAAA,GACAyuB,IACAC,IACAC,GAAqBC,CAAK,EAErC,oECzlBqB,CAAC,MAAO,OAAQ,MAAO,MAAM,UAK3B,CAAC,IAAI,OADR,CAAC,IAAI,YAFA,CAAC,KAAM,KAAK,SAtBf,CAElB,KAAM,KAAM,IAAK,KAAM,KAAM,KAAM,KAEnC,KAAM,MACN,KAAM,MACN,MAAO,OACP,KAAM,MACN,KAAM,MACN,KAAM,MAEN,KAAM,MAAO,MAAO,MACpB,KAAM,MAAO,MAAO,MACpB,KAAM,MAAO,MAAO,MACpB,KAAM,MAAO,MAAO,MACpB,OAAQ,QAAS,QAAS,QAC1B,OAAQ,QAAS,QAAS,QAE1B,MAAO,MAAO,MAAO,MAAO,QAAS,OACzC,aAI0B,CAAC,MAAO,OAAQ,OAAQ,GAAG,YAG5B,CAAC,IAAI,OALV,CAAC,IAAK,IAAI,yCCnBvB,SAAShX,GAAYhB,EAAS0G,EAAOhO,EAAQ,CAChD,OAAO,OAAO,OAAOoH,GAAkB,cAAeE,CAAO,EAAG,CAC5D,MAAA0G,EACA,OAAAhO,EACA,WAAYsH,EACZ,QAASA,EAAU;AAAA,IACR0G,EAAQ;AAAA,IACR,IAAI,OAAOhO,GAAUgO,EAAM,QAAU,CAAC,EAAE,KAAK,GAAG,EAAI,GACvE,CAAK,CACL,CCTA,MAAM+R,GAAM,EACNre,GAAI,GACJC,GAAI,GACJC,GAAI,GACJoe,GAAQ,GAEP,MAAMC,EAAU,CACnB,YAAY3V,EAAK,CACb,KAAK,IAAMA,EACX,KAAK,IAAM,CACd,CACD,WAAW5G,EAAK,CACZ,OAAOA,EAAM,KAAK,IAAI,OAAS,KAAK,IAAI,WAAWA,CAAG,EAAI,CAC7D,CACD,UAAW,CACP,OAAO,KAAK,WAAW,KAAK,GAAG,CAClC,CACD,cAAe,CACX,OAAO,KAAK,WAAW,KAAK,IAAM,CAAC,CACtC,CACD,cAAcA,EAAK,CACf,OAAO,KAAK,WAAW,KAAK,UAAUA,CAAG,CAAC,CAC7C,CACD,QAAS,CACL,KAAK,IAAM,KAAK,UAAU,KAAK,GAAG,CACrC,CACD,UAAUA,EAAK,CACX,KAAOA,EAAM,KAAK,IAAI,OAAQA,IAAO,CACjC,MAAMtF,EAAO,KAAK,IAAI,WAAWsF,CAAG,EACpC,GAAItF,IAASwD,IAAKxD,IAASsD,IAAKtD,IAASuD,IAAKvD,IAAS4hB,IAAS5hB,IAAS2hB,GACrE,KAEP,CAED,OAAOrc,CACV,CACD,eAAenD,EAAK,CAChB,OAAO,KAAK,IAAI,UAAU,KAAK,IAAK,KAAK,IAAMA,CAAG,CACrD,CACD,IAAInC,EAAM,CACF,KAAK,SAAU,IAAKA,GACpB,KAAK,MAAM,WAAa,OAAO,aAAaA,CAAI,EAAI,GAAG,EAG3D,KAAK,KACR,CACD,MAAO,CACH,OAAO,KAAK,IAAM,KAAK,IAAI,OAAS,KAAK,IAAI,OAAO,KAAK,KAAK,EAAI,EACrE,CACD,MAAMkJ,EAAS,CACX,MAAM,IAAIgB,GAAYhB,EAAS,KAAK,IAAK,KAAK,GAAG,CACpD,CACL,CCpDA,MAAMyY,GAAM,EACNre,GAAI,GACJC,GAAI,GACJC,GAAI,GACJoe,GAAQ,GACRlX,GAAkB,GAClBC,GAAa,GACbmX,GAAY,GACZC,GAAa,GACbC,GAAkB,GAClBC,GAAmB,GACnBC,GAAW,GACXlL,GAAW,GACXmL,GAAQ,GACRC,GAAa,GACbC,GAAe,GACfC,GAAkB,GAClB9D,GAAe,GACf+D,GAAe,GACfC,GAAoB,GACpBC,GAAqB,GACrB5X,GAAmB,IACnB6X,GAAe,IACfC,GAAoB,IACpBC,GAAW,KACXC,GAAY,IAAI,WAAW,GAAG,EAAE,IAAI,CAACC,EAAG3d,IAC1C,gBAAgB,KAAK,OAAO,aAAaA,CAAG,CAAC,EAAI,EAAI,CACzD,EACM4d,GAAwB,CAC1B,IAAK,EACL,KAAM,EACN,KAAM,EACN,IAAK,CACT,EAEA,SAASC,GAAWC,EAAW,CAC3B,OAAOA,EAAU,eACbA,EAAU,UAAUA,EAAU,GAAG,CACzC,CACA,CAEA,SAASC,GAASD,EAAW,CACzB,IAAI9gB,EAAM8gB,EAAU,IAEpB,KAAO9gB,EAAM8gB,EAAU,IAAI,OAAQ9gB,IAAO,CACtC,MAAMnC,EAAOijB,EAAU,IAAI,WAAW9gB,CAAG,EACzC,GAAInC,GAAQ,KAAO6iB,GAAU7iB,CAAI,IAAM,EACnC,KAEP,CAED,OAAIijB,EAAU,MAAQ9gB,GAClB8gB,EAAU,MAAM,kBAAkB,EAG/BA,EAAU,eAAe9gB,CAAG,CACvC,CAEA,SAASghB,GAAWF,EAAW,CAC3B,IAAI9gB,EAAM8gB,EAAU,IAEpB,KAAO9gB,EAAM8gB,EAAU,IAAI,OAAQ9gB,IAAO,CACtC,MAAMnC,EAAOijB,EAAU,IAAI,WAAW9gB,CAAG,EACzC,GAAInC,EAAO,IAAMA,EAAO,GACpB,KAEP,CAED,OAAIijB,EAAU,MAAQ9gB,GAClB8gB,EAAU,MAAM,iBAAiB,EAG9BA,EAAU,eAAe9gB,CAAG,CACvC,CAEA,SAASihB,GAAWH,EAAW,CAC3B,MAAM9gB,EAAM8gB,EAAU,IAAI,QAAQ,IAAMA,EAAU,IAAM,CAAC,EAEzD,OAAI9gB,IAAQ,KACR8gB,EAAU,IAAMA,EAAU,IAAI,OAC9BA,EAAU,MAAM,sBAAsB,GAGnCA,EAAU,eAAe9gB,EAAM,CAAC,CAC3C,CAEA,SAASkhB,GAAoBJ,EAAW,CACpC,IAAItxB,EAAM,KACNC,EAAM,KAEV,OAAAqxB,EAAU,IAAIpY,EAAgB,EAC9BoY,EAAU,OAAM,EAEhBtxB,EAAMwxB,GAAWF,CAAS,EAC1BA,EAAU,OAAM,EAEZA,EAAU,SAAU,IAAKd,IACzBc,EAAU,MACVA,EAAU,OAAM,EAEZA,EAAU,SAAU,IAAKN,KACzB/wB,EAAMuxB,GAAWF,CAAS,EAC1BA,EAAU,OAAM,IAGpBrxB,EAAMD,EAGVsxB,EAAU,IAAIN,EAAiB,EAExB,CACH,IAAK,OAAOhxB,CAAG,EACf,IAAKC,EAAM,OAAOA,CAAG,EAAI,CACjC,CACA,CAEA,SAAS0xB,GAAeL,EAAW,CAC/B,IAAIM,EAAQ,KACRpI,EAAQ,GAEZ,OAAQ8H,EAAU,SAAU,EAAA,CACxB,KAAKf,GACDe,EAAU,MAEVM,EAAQ,CACJ,IAAK,EACL,IAAK,CACrB,EAEY,MAEJ,KAAKvM,GACDiM,EAAU,MAEVM,EAAQ,CACJ,IAAK,EACL,IAAK,CACrB,EAEY,MAEJ,KAAK/E,GACDyE,EAAU,MAEVM,EAAQ,CACJ,IAAK,EACL,IAAK,CACrB,EAEY,MAEJ,KAAK5Y,GACDsY,EAAU,MAEV9H,EAAQ,GAEJ8H,EAAU,SAAU,IAAKpY,GACzB0Y,EAAQF,GAAoBJ,CAAS,EAC9BA,EAAU,SAAU,IAAKzE,IAKhCyE,EAAU,MACVM,EAAQ,CACJ,IAAK,EACL,IAAK,CACzB,GAEgBA,EAAQ,CACJ,IAAK,EACL,IAAK,CACzB,EAGY,MAEJ,KAAK1Y,GACD0Y,EAAQF,GAAoBJ,CAAS,EACrC,MAEJ,QACI,OAAO,IACd,CAED,MAAO,CACH,KAAM,aACN,MAAA9H,EACA,IAAKoI,EAAM,IACX,IAAKA,EAAM,IACX,KAAM,IACd,CACA,CAEA,SAASC,GAAgBP,EAAW9uB,EAAM,CACtC,MAAM+mB,EAAaoI,GAAeL,CAAS,EAE3C,OAAI/H,IAAe,MACfA,EAAW,KAAO/mB,EAWd8uB,EAAU,SAAQ,IAAOtY,IACzBsY,EAAU,WAAWA,EAAU,IAAM,CAAC,IAAMjM,GACrCwM,GAAgBP,EAAW/H,CAAU,EAGzCA,GAGJ/mB,CACX,CAEA,SAASsvB,GAAWR,EAAW,CAC3B,MAAMS,EAAKT,EAAU,OAErB,OAAIS,IAAO,GACA,KAGJ,CACH,KAAM,QACN,MAAOA,CACf,CACA,CAEA,SAASC,GAAaV,EAAW,CAC7B,IAAIha,EAEJ,OAAAga,EAAU,IAAIZ,EAAY,EAC1BY,EAAU,IAAIlB,EAAU,EAExB9Y,EAAOia,GAASD,CAAS,EAEzBA,EAAU,IAAIlB,EAAU,EACxBkB,EAAU,IAAIX,EAAe,EAEtBkB,GAAgBP,EAAW,CAC9B,KAAM,WACN,KAAAha,CACR,CAAK,CACL,CASA,SAAS2a,GAAcX,EAAW,CAE9B,IAAItxB,EAAM,KACNC,EAAM,KACNiR,EAAO,EAEX,OAAAogB,EAAU,IAAIT,EAAiB,EAE3BS,EAAU,SAAU,IAAKb,KACzBa,EAAU,KAAI,EACdpgB,EAAO,IAGPA,GAAQ,IAAMogB,EAAU,SAAQ,IAAOL,GACvCK,EAAU,KAAI,GAEdtxB,EAAMkR,EAAO,OAAOsgB,GAAWF,CAAS,CAAC,EAErCJ,GAAUI,EAAU,SAAU,CAAA,IAAM,IACpCtxB,GAAOuxB,GAASD,CAAS,IAIjCD,GAAWC,CAAS,EACpBA,EAAU,IAAId,EAAK,EACnBa,GAAWC,CAAS,EAEhBA,EAAU,SAAU,IAAKL,GACzBK,EAAU,KAAI,GAEdpgB,EAAO,EAEHogB,EAAU,SAAU,IAAKb,KACzBa,EAAU,KAAI,EACdpgB,EAAO,IAGXjR,EAAMiR,EAAO,OAAOsgB,GAAWF,CAAS,CAAC,EAErCJ,GAAUI,EAAU,SAAU,CAAA,IAAM,IACpCrxB,GAAOsxB,GAASD,CAAS,IAIjCA,EAAU,IAAIR,EAAkB,EAEzB,CACH,KAAM,QACN,IAAA9wB,EACA,IAAAC,CACR,CACA,CAEA,SAASiyB,GAASZ,EAAW,CACzB,IAAIha,EACAyW,EAAO,KAEX,OAAAuD,EAAU,IAAIZ,EAAY,EAC1BpZ,EAAOia,GAASD,CAAS,EAErBA,EAAU,SAAQ,IAAOjB,IACzBiB,EAAU,aAAc,IAAKhB,KAC7BgB,EAAU,KAAO,EACjBha,GAAQ,MAGRga,EAAU,WAAWA,EAAU,UAAUA,EAAU,GAAG,CAAC,IAAMT,KAC7DQ,GAAWC,CAAS,EACpBvD,EAAOkE,GAAcX,CAAS,GAGlCA,EAAU,IAAIX,EAAe,EAEtBkB,GAAgBP,EAAW,CAC9B,KAAM,OACN,KAAAha,EACA,KAAAyW,CACR,CAAK,CACL,CAEA,SAASoE,GAAsBb,EAAW,CACtC,MAAMha,EAAOia,GAASD,CAAS,EAE/B,OAAIA,EAAU,SAAU,IAAKjB,IACzBiB,EAAU,MAEH,CACH,KAAM,WACN,KAAAha,CACZ,GAGWua,GAAgBP,EAAW,CAC9B,KAAM,UACN,KAAAha,CACR,CAAK,CACL,CAEA,SAAS8a,GAAaC,EAAOC,EAAa,CACtC,SAASC,EAAYF,EAAOvI,EAAY,CACpC,MAAO,CACH,KAAM,QACN,MAAAuI,EACA,WAAAvI,EACA,cAAe,GACf,SAAU,EACtB,CACK,CAED,IAAIA,EAKJ,IAHAwI,EAAc,OAAO,KAAKA,CAAW,EAChC,KAAK,CAACE,EAAGC,IAAMrB,GAAsBoB,CAAC,EAAIpB,GAAsBqB,CAAC,CAAC,EAEhEH,EAAY,OAAS,GAAG,CAC3BxI,EAAawI,EAAY,QAEzB,IAAI,EAAI,EACJI,EAAgB,EAEpB,KAAO,EAAIL,EAAM,OAAQ,IAAK,CAC1B,MAAMtI,EAAOsI,EAAM,CAAC,EAEhBtI,EAAK,OAAS,eACVA,EAAK,QAAUD,GACX4I,IAAkB,KAClBA,EAAgB,EAAI,GAExBL,EAAM,OAAO,EAAG,CAAC,EACjB,MAEIK,IAAkB,IAAM,EAAIA,EAAgB,IAC5CL,EAAM,OACFK,EACA,EAAIA,EACJH,EAAYF,EAAM,MAAMK,EAAe,CAAC,EAAG5I,CAAU,CACjF,EACwB,EAAI4I,EAAgB,GAExBA,EAAgB,IAG3B,CAEGA,IAAkB,IAAMJ,EAAY,QACpCD,EAAM,OACFK,EACA,EAAIA,EACJH,EAAYF,EAAM,MAAMK,EAAe,CAAC,EAAG5I,CAAU,CACrE,CAEK,CAED,OAAOA,CACX,CAEA,SAAS6I,GAAkBrB,EAAW,CAClC,MAAMe,EAAQ,CAAA,EACRC,EAAc,CAAA,EACpB,IAAI5H,EACAkI,EAAY,KACZC,EAAevB,EAAU,IAE7B,KAAO5G,EAAQoI,GAAKxB,CAAS,GACrB5G,EAAM,OAAS,WACXA,EAAM,OAAS,eAEXkI,IAAc,MAAQA,EAAU,OAAS,gBACzCtB,EAAU,IAAMuB,EAChBvB,EAAU,MAAM,uBAAuB,GAG3CgB,EAAY5H,EAAM,KAAK,EAAI,IACpBkI,IAAc,MAAQA,EAAU,OAAS,eAChDN,EAAY,GAAG,EAAI,GACnBD,EAAM,KAAK,CACP,KAAM,aACN,MAAO,GAC3B,CAAiB,GAGLA,EAAM,KAAK3H,CAAK,EAChBkI,EAAYlI,EACZmI,EAAevB,EAAU,KAKjC,OAAIsB,IAAc,MAAQA,EAAU,OAAS,eACzCtB,EAAU,KAAOuB,EACjBvB,EAAU,MAAM,uBAAuB,GAGpC,CACH,KAAM,QACN,MAAAe,EACA,WAAYD,GAAaC,EAAOC,CAAW,GAAK,IAChD,cAAe,GACf,SAAU,EAClB,CACA,CAEA,SAASS,GAAUzB,EAAW,CAC1B,IAAIjtB,EAEJ,OAAAitB,EAAU,IAAIT,EAAiB,EAC/BxsB,EAASsuB,GAAkBrB,CAAS,EACpCA,EAAU,IAAIR,EAAkB,EAEhCzsB,EAAO,SAAW,GAEditB,EAAU,SAAU,IAAKvY,KACzBuY,EAAU,MACVjtB,EAAO,cAAgB,IAGpBA,CACX,CAEA,SAASyuB,GAAKxB,EAAW,CACrB,IAAIjjB,EAAOijB,EAAU,WAErB,GAAIjjB,EAAO,KAAO6iB,GAAU7iB,CAAI,IAAM,EAClC,OAAO8jB,GAAsBb,CAAS,EAG1C,OAAQjjB,EAAI,CACR,KAAKyiB,GAED,MAEJ,KAAKD,GACD,OAAOgB,GAAgBP,EAAWyB,GAAUzB,CAAS,CAAC,EAE1D,KAAKZ,GACD,OAAOY,EAAU,aAAY,IAAOlB,GAC9B4B,GAAaV,CAAS,EACtBY,GAASZ,CAAS,EAE5B,KAAKP,GACD,MAAO,CACH,KAAM,aACN,MAAOO,EAAU,eACbA,EAAU,KAAOA,EAAU,aAAc,IAAKP,GAAe,EAAI,EACpE,CACjB,EAEQ,KAAKZ,GACD,OAAAmB,EAAU,MACVA,EAAU,IAAInB,EAAS,EAEhB,CACH,KAAM,aACN,MAAO,IACvB,EAEQ,KAAKK,GACD,OAAAc,EAAU,MACH,CACH,KAAM,OACtB,EAEQ,KAAKlB,GACD,OAAOyB,GAAgBP,EAAW,CAC9B,KAAM,SACN,MAAOG,GAAWH,CAAS,CAC3C,CAAa,EAEL,KAAKrB,GACL,KAAKD,GACL,KAAKre,GACL,KAAKE,GACL,KAAKD,GACD,MAAO,CACH,KAAM,SACN,MAAOyf,GAAWC,CAAS,CAC3C,EAEQ,KAAKV,GAGD,OAFAviB,EAAOijB,EAAU,eAEbjjB,EAAO,KAAO6iB,GAAU7iB,CAAI,IAAM,GAClCijB,EAAU,MACH,CACH,KAAM,YACN,KAAMC,GAASD,CAAS,CAC5C,GAGmBQ,GAAWR,CAAS,EAE/B,KAAKf,GACL,KAAKlL,GACL,KAAKwH,GACL,KAAK7T,GACL,KAAKD,GAED,MAEJ,KAAKG,GAKD,GAFA7K,EAAOijB,EAAU,eAEbjjB,EAAO,IAAMA,EAAO,GACpB,OAAOyjB,GAAWR,CAAS,EAG/B,MAEJ,QACI,OAAOQ,GAAWR,CAAS,CAClC,CACL,CAEO,SAAS0B,GAAMhjB,EAAQ,CAC1B,MAAMshB,EAAY,IAAIpB,GAAUlgB,CAAM,EAChC3L,EAASsuB,GAAkBrB,CAAS,EAO1C,OALIA,EAAU,MAAQthB,EAAO,QACzBshB,EAAU,MAAM,kBAAkB,EAIlCjtB,EAAO,MAAM,SAAW,GAAKA,EAAO,MAAM,CAAC,EAAE,OAAS,QAC/CA,EAAO,MAAM,CAAC,EAGlBA,CACX,CC5kBA,MAAMyiB,GAAO,UAAW,CAAA,EAExB,SAASC,GAAexmB,EAAO,CAC3B,OAAO,OAAOA,GAAU,WAAaA,EAAQumB,EACjD,CAEO,SAASF,GAAKpkB,EAAMnB,EAASuX,EAAS,CACzC,SAASgO,EAAKpkB,EAAM,CAGhB,OAFAymB,EAAM,KAAKrQ,EAASpW,CAAI,EAEhBA,EAAK,KAAI,CACb,IAAK,QACDA,EAAK,MAAM,QAAQokB,CAAI,EACvB,MAEJ,IAAK,aACDA,EAAKpkB,EAAK,IAAI,EACd,MAEJ,IAAK,OACL,IAAK,WACL,IAAK,UACL,IAAK,YACL,IAAK,WACL,IAAK,SACL,IAAK,QACL,IAAK,QACD,MAEJ,QACI,MAAM,IAAI,MAAM,iBAAmBA,EAAK,IAAI,CACnD,CAED2mB,EAAM,KAAKvQ,EAASpW,CAAI,CAC3B,CAED,IAAIymB,EAAQnC,GACRqC,EAAQrC,GASZ,GAPI,OAAOzlB,GAAY,WACnB4nB,EAAQ5nB,EACDA,IACP4nB,EAAQlC,GAAe1lB,EAAQ,KAAK,EACpC8nB,EAAQpC,GAAe1lB,EAAQ,KAAK,GAGpC4nB,IAAUnC,IAAQqC,IAAUrC,GAC5B,MAAM,IAAI,MAAM,6EAA8E,EAGlGF,EAAKpkB,CAAa,CACtB,CCjDA,MAAMywB,GAAc,CAChB,UAAUtO,EAAU,CAChB,MAAMvQ,EAAS,CAAA,EACf,IAAI8e,EAAU,KAEd,OAAO/nB,GAAAxK,EAAA,GACAgkB,GADA,CAEH,KAAKniB,EAAM,CACP,MAAM2wB,EAAMD,EACZA,EAAU1wB,EACVmiB,EAAS,KAAK,KAAK,KAAMniB,CAAI,EAC7B0wB,EAAUC,CACb,EACD,KAAK5yB,EAAO+S,EAAM6R,EAAM,CACpB/Q,EAAO,KAAK,CACR,KAAAd,EACA,MAAA/S,EACA,KAAM4kB,EAAO,KAAO+N,CACxC,CAAiB,CACJ,EACD,QAAS,CACL,OAAO9e,CACV,CACb,EACK,CACL,EAEA,SAASgf,GAAe7Y,EAAK,CACzB,MAAMnG,EAAS,CAAA,EAEfrB,OAAAA,GAASwH,EAAK,CAACjH,EAAM/C,EAAOC,IACxB4D,EAAO,KAAK,CACR,KAAAd,EACA,MAAOiH,EAAI,MAAMhK,EAAOC,CAAG,EAC3B,KAAM,IAClB,CAAS,CACT,EAEW4D,CACX,CAEe,SAAAif,GAAS9yB,EAAO2qB,EAAQ,CACnC,OAAI,OAAO3qB,GAAU,SACV6yB,GAAe7yB,CAAK,EAGxB2qB,EAAO,SAAS3qB,EAAO0yB,EAAW,CAC7C,CC/CO,MAAMK,EAAQ,CAAE,KAAM,SAChBC,EAAW,CAAE,KAAM,YACnBC,GAAiB,CAAE,KAAM,iBAEhCnD,GAAkB,GAClBC,GAAmB,GAEzB,SAASmD,GAAgB9V,EAAO+V,EAAYC,EAAY,CAMpD,OAJID,IAAeJ,GAASK,IAAeJ,GAIvC5V,IAAU2V,GAASI,IAAeJ,GAASK,IAAeL,EACnD3V,GAGPA,EAAM,OAAS,MAAQA,EAAM,OAAS4V,GAAYG,IAAeJ,IACjEI,EAAa/V,EAAM,KACnBA,EAAQA,EAAM,OAGX,CACH,KAAM,KACN,MAAAA,EACA,KAAM+V,EACN,KAAMC,CACd,EACA,CAEA,SAASC,GAAetc,EAAM,CAC1B,OACIA,EAAK,OAAS,GACdA,EAAK,WAAWA,EAAK,OAAS,CAAC,IAAM+Y,IACrC/Y,EAAK,WAAWA,EAAK,OAAS,CAAC,IAAMgZ,EAE7C,CAEA,SAASuD,GAAgB9J,EAAM,CAC3B,OACIA,EAAK,OAAS,WACdA,EAAK,OAAS,aACdA,EAAK,OAAS,YACdA,EAAK,OAAS,QAAU6J,GAAe7J,EAAK,IAAI,CAExD,CAEA,SAAS+J,GAAqBhK,EAAYuI,EAAO0B,EAAuB,CACpE,OAAQjK,EAAU,CACd,IAAK,IAAK,CAYN,IAAIzlB,EAASivB,EAEb,QAAS,EAAIjB,EAAM,OAAS,EAAG,GAAK,EAAG,IAAK,CACxC,MAAMtI,EAAOsI,EAAM,CAAC,EAEpBhuB,EAASovB,GACL1J,EACA1lB,EACAkvB,CACpB,CAEA,CACY,OAAOlvB,CACV,CAED,IAAK,IAAK,CAaN,IAAIA,EAASkvB,EACThP,EAAM,KAEV,QAAS1U,EAAIwiB,EAAM,OAAS,EAAGxiB,GAAK,EAAGA,IAAK,CACxC,IAAIka,EAAOsI,EAAMxiB,CAAC,EAGlB,GAAIgkB,GAAgB9J,CAAI,IAChBxF,IAAQ,MAAQ1U,EAAI,GAAKgkB,GAAgBxB,EAAMxiB,EAAI,CAAC,CAAC,IACrD0U,EAAM,OAAO,OAAO,IAAI,EACxBlgB,EAASovB,GACL,CACI,KAAM,OACN,IAAAlP,CACH,EACD+O,EACAjvB,CAC5B,GAGwBkgB,IAAQ,MAAM,CACd,MAAMD,GAAOsP,GAAe7J,EAAK,IAAI,EAAIA,EAAK,KAAK,MAAM,EAAG,EAAE,EAAIA,EAAK,MAAM,cAC7E,GAAI,EAAAzF,KAAOC,GAAe,CACtBA,EAAID,CAAG,EAAIyF,EACX,QACH,CACJ,CAGLxF,EAAM,KAGNlgB,EAASovB,GACL1J,EACAuJ,EACAjvB,CACpB,CAEA,CACY,OAAOA,CACV,CAED,IAAK,KAAM,CAMP,GAAIguB,EAAM,OAAS,EACf,MAAO,CACH,KAAM,YACN,MAAAA,EACA,IAAK,EACzB,EA0BY,IAAIhuB,EAASkvB,EAEb,QAAS,EAAIlB,EAAM,OAAS,EAAG,GAAK,EAAG,IAAK,CACxC,MAAMtI,EAAOsI,EAAM,CAAC,EACpB,IAAI2B,EAEA3B,EAAM,OAAS,EACf2B,EAAaF,GACThK,EACAuI,EAAM,OAAO,SAAS4B,EAAc,CAChC,OAAOA,IAAiBlK,CACpD,CAAyB,EACD,EACxB,EAEoBiK,EAAaV,EAGjBjvB,EAASovB,GACL1J,EACAiK,EACA3vB,CACpB,CAEA,CACY,OAAOA,CACV,CAED,IAAK,KAAM,CAMP,GAAIguB,EAAM,OAAS,EACf,MAAO,CACH,KAAM,YACN,MAAAA,EACA,IAAK,EACzB,EA0BY,IAAIhuB,EAAS0vB,EAAwBT,EAAQC,EAE7C,QAAS,EAAIlB,EAAM,OAAS,EAAG,GAAK,EAAG,IAAK,CACxC,MAAMtI,EAAOsI,EAAM,CAAC,EACpB,IAAI2B,EAEA3B,EAAM,OAAS,EACf2B,EAAaF,GACThK,EACAuI,EAAM,OAAO,SAAS4B,EAAc,CAChC,OAAOA,IAAiBlK,CACpD,CAAyB,EACD,EACxB,EAEoBiK,EAAaV,EAGjBjvB,EAASovB,GACL1J,EACAiK,EACA3vB,CACpB,CAEA,CACY,OAAOA,CACV,CACJ,CACL,CAEA,SAAS6vB,GAA0B1xB,EAAM,CACrC,IAAI6B,EAASivB,EACTa,EAAYC,GAAwB5xB,EAAK,IAAI,EAEjD,GAAIA,EAAK,MAAQ,EAEb2xB,EAAYV,GACRU,EACAX,GACAD,CACZ,EAIQlvB,EAASovB,GACLU,EACA,KACAZ,CACZ,EAEQlvB,EAAO,KAAOovB,GACVH,EACAA,EACAjvB,CACZ,EAEY7B,EAAK,QACL6B,EAAO,KAAK,KAAOovB,GACf,CAAE,KAAM,QAAS,OAAQjxB,CAAM,EAC/B6B,EACAkvB,CAChB,OAIQ,SAAS1jB,EAAIrN,EAAK,KAAO,EAAGqN,GAAKrN,EAAK,IAAKqN,IACnCrN,EAAK,OAAS6B,IAAWivB,IACzBjvB,EAASovB,GACL,CAAE,KAAM,QAAS,OAAQjxB,CAAM,EAC/B6B,EACAkvB,CACpB,GAGYlvB,EAASovB,GACLU,EACAV,GACIH,EACAA,EACAjvB,CACH,EACDkvB,CAChB,EAII,GAAI/wB,EAAK,MAAQ,EAEb6B,EAASovB,GACLH,EACAA,EACAjvB,CACZ,MAGQ,SAASwL,EAAI,EAAGA,EAAIrN,EAAK,IAAM,EAAGqN,IAC1BrN,EAAK,OAAS6B,IAAWivB,IACzBjvB,EAASovB,GACL,CAAE,KAAM,QAAS,OAAQjxB,CAAM,EAC/B6B,EACAkvB,CACpB,GAGYlvB,EAASovB,GACLU,EACA9vB,EACAkvB,CAChB,EAII,OAAOlvB,CACX,CAEA,SAAS+vB,GAAwB5xB,EAAM,CACnC,GAAI,OAAOA,GAAS,WAChB,MAAO,CACH,KAAM,UACN,GAAIA,CAChB,EAGI,OAAQA,EAAK,KAAI,CACb,IAAK,QAAS,CACV,IAAI6B,EAASyvB,GACTtxB,EAAK,WACLA,EAAK,MAAM,IAAI4xB,EAAuB,EACtC,EAChB,EAEY,OAAI5xB,EAAK,gBACL6B,EAASovB,GACLpvB,EACAmvB,GACAD,CACpB,GAGmBlvB,CACV,CAED,IAAK,aACD,OAAO6vB,GAA0B1xB,CAAI,EAEzC,IAAK,OACL,IAAK,WACD,MAAO,CACH,KAAMA,EAAK,KACX,KAAMA,EAAK,KACX,OAAQA,CACxB,EAEQ,IAAK,UACD,MAAO,CACH,KAAMA,EAAK,KACX,KAAMA,EAAK,KAAK,YAAa,EAC7B,OAAQA,CACxB,EAEQ,IAAK,YACD,MAAO,CACH,KAAMA,EAAK,KACX,KAAM,IAAMA,EAAK,KAAK,YAAa,EACnC,OAAQA,CACxB,EAEQ,IAAK,WACD,MAAO,CACH,KAAMA,EAAK,KACX,KAAMA,EAAK,KAAK,YAAa,EAAG,IAChC,OAAQA,CACxB,EAEQ,IAAK,SAED,OAAIA,EAAK,MAAM,SAAW,EACf,CACH,KAAM,QACN,MAAOA,EAAK,MAAM,OAAO,CAAC,EAC1B,OAAQA,CAC5B,EAImB,CACH,KAAMA,EAAK,KACX,MAAOA,EAAK,MAAM,OAAO,EAAGA,EAAK,MAAM,OAAS,CAAC,EAAE,QAAQ,OAAQ,GAAI,EACvE,OAAQA,CACxB,EAEQ,IAAK,QACD,MAAO,CACH,KAAMA,EAAK,KACX,MAAOA,EAAK,MACZ,OAAQA,CACxB,EAEQ,IAAK,QACD,MAAO,CACH,KAAMA,EAAK,KACX,OAAQA,CACxB,EAEQ,QACI,MAAM,IAAI,MAAM,qBAAsBA,EAAK,IAAI,CACtD,CACL,CAEO,SAAS6xB,GAAgBC,EAAYrM,EAAK,CAC7C,OAAI,OAAOqM,GAAe,WACtBA,EAAatB,GAAMsB,CAAU,GAG1B,CACH,KAAM,aACN,MAAOF,GAAwBE,CAAU,EACzC,OAAQrM,GAAO,KACf,OAAQqM,CAChB,CACA,CCpcA,KAAM,gBAAEzN,EAAc,EAAK,OAAO,UAC5B0N,GAAO,EACPC,GAAQ,EACRC,GAAc,EACdC,GAAe,EAEfC,GAAoB,QACpBC,GAAuB,WACvBC,GAA8B,wGAE9BC,GAAkB,KAGxB,SAASC,GAAYtwB,EAAM,CACvB,IAAIgS,EAAO,KACP7C,EAAO,KACPO,EAAO1P,EAEX,KAAO0P,IAAS,MACZP,EAAOO,EAAK,KACZA,EAAK,KAAOsC,EACZA,EAAOtC,EACPA,EAAOP,EAGX,OAAO6C,CACX,CAEA,SAASue,GAA+B5kB,EAASK,EAAc,CAC3D,GAAIL,EAAQ,SAAWK,EAAa,OAChC,MAAO,GAGX,QAASZ,EAAI,EAAGA,EAAIO,EAAQ,OAAQP,IAAK,CACrC,MAAMQ,EAAgBI,EAAa,WAAWZ,CAAC,EAC/C,IAAIa,EAAWN,EAAQ,WAAWP,CAAC,EAOnC,GAJIa,GAAY,IAAUA,GAAY,KAClCA,EAAWA,EAAW,IAGtBA,IAAaL,EACb,MAAO,EAEd,CAED,MAAO,EACX,CAEA,SAAS4kB,GAAmBvK,EAAO,CAC/B,OAAIA,EAAM,OAASjV,EACR,GAKJiV,EAAM,QAAU,GAC3B,CAEA,SAASwK,GAAoBxK,EAAO,CAChC,OAAIA,IAAU,KACH,GAIPA,EAAM,OAAS9U,IACf8U,EAAM,OAAS7V,GACf6V,EAAM,OAAShV,GACfgV,EAAM,OAASvU,IACfuU,EAAM,OAASrU,GACf4e,GAAmBvK,CAAK,CAEhC,CAEA,SAASyK,GAAkBzK,EAAO,CAC9B,OAAIA,IAAU,KACH,GAIPA,EAAM,OAAS/U,GACf+U,EAAM,OAAStU,IACfsU,EAAM,OAASpU,IACdoU,EAAM,OAASjV,GAAciV,EAAM,QAAU,GAEtD,CAEA,SAAS0K,GAAchhB,EAAQhT,EAAOi0B,EAAU,CAC5C,SAASC,GAAkB,CACvB,GACI5hB,IACAgX,EAAQhX,EAAaU,EAAO,OAASA,EAAOV,CAAU,EAAI,WACrDgX,IAAU,OAASA,EAAM,OAASnV,GAAmBmV,EAAM,OAAS5U,GAChF,CAED,SAASwW,EAAarc,EAAQ,CAC1B,MAAMslB,EAAY7hB,EAAazD,EAE/B,OAAOslB,EAAYnhB,EAAO,OAASA,EAAOmhB,CAAS,EAAI,IAC1D,CAED,SAASC,EAAwBC,EAAWhf,EAAM,CAC9C,MAAO,CACH,UAAAgf,EACA,WAAAC,EACA,YAAAC,EACA,UAAAC,EACA,WAAAliB,EACA,KAAA+C,CACZ,CACK,CAED,SAASof,EAAcJ,EAAW,CAC9BG,EAAY,CACR,UAAAH,EACA,WAAAC,EACA,YAAAC,EACA,KAAMC,CAClB,CACK,CAED,SAASE,EAAcL,EAAW,CAC9BM,EAAYP,EAAwBC,EAAWM,CAAS,CAC3D,CAED,SAASC,GAAkB,CACvBN,EAAa,CACT,KAAMlB,GACN,OAAQpzB,EAAM,OACd,MAAAspB,EACA,KAAMgL,CAClB,EAEQJ,IACAW,EAAc,KAEVviB,EAAa2W,IACbA,EAAe3W,EAEtB,CAED,SAASwiB,GAAa,CAClBP,EAAc,CACV,OAAQv0B,EAAM,OACd,KAAMA,EAAM,OAAO,MAASu0B,IAAgB,MAAQA,EAAY,MAAS,KACzE,KAAMA,CAClB,EAEQD,EAAa,CACT,KAAMjB,GACN,OAAQrzB,EAAM,OACd,MAAOs0B,EAAW,MAClB,KAAMA,CAClB,CACK,CAED,SAASS,GAAc,CACfT,EAAW,OAASjB,GACpBiB,EAAaA,EAAW,KAExBA,EAAa,CACT,KAAMhB,GACN,OAAQiB,EAAY,OACpB,MAAOD,EAAW,MAClB,KAAMA,CACtB,EAGQC,EAAcA,EAAY,IAC7B,CAED,IAAIA,EAAc,KACdC,EAAY,KACZG,EAAY,KAKZE,EAAc,KAEdG,EAAiB,EACjBC,EAAa,KAEb3L,EAAQ,KACRhX,EAAa,GACb2W,EAAe,EACfqL,EAAa,CACb,KAAMnB,GACN,OAAQ,KACR,MAAO,KACP,KAAM,IACd,EAII,IAFAe,IAEOe,IAAe,MAAQ,EAAED,EAAiBtB,IAkB7C,OAAQ1zB,EAAM,KAAI,CACd,IAAK,QACD,GAAIw0B,IAAc,KAAM,CAEpB,GAAIlL,IAAU,OAENhX,IAAeU,EAAO,OAAS,GAAMsW,EAAM,QAAU,OAASA,EAAM,QAAU,OAAQ,CACtFtpB,EAAQmyB,EACR,KACH,CAIL8C,EAAa1B,GACb,KACH,CAMD,GAHAvzB,EAAQw0B,EAAU,UAGdx0B,IAAUoyB,GACV,GAAIoC,EAAU,aAAeF,EAAY,CACrCt0B,EAAQmyB,EACR,KACxB,MACwBnyB,EAAQkyB,EAKhB,KAAOsC,EAAU,cAAgBD,GAC7BQ,IAIJP,EAAYA,EAAU,KACtB,MAEJ,IAAK,WAED,GAAIK,IAAgB,MAAQA,IAAgB,IAEpCF,IAAc,MAAQriB,EAAaqiB,EAAU,cAE7CA,EAAYE,EACZA,EAAc,YAEXF,IAAc,KAAM,CAG3BM,EAAazB,GACb,KACH,CAGDxzB,EAAQ20B,EAAU,UAGlBH,EAAYG,EAAU,UACtBJ,EAAcI,EAAU,YACxBL,EAAaK,EAAU,WACvBriB,EAAaqiB,EAAU,WACvBrL,EAAQhX,EAAaU,EAAO,OAASA,EAAOV,CAAU,EAAI,KAG1DqiB,EAAYA,EAAU,KACtB,MAEJ,IAAK,aACD30B,EAAQA,EAAM,MACd,MAEJ,IAAK,KAGGA,EAAM,OAASmyB,GACfuC,EAAc10B,EAAM,IAAI,EAGxBA,EAAM,OAASkyB,GACfuC,EAAcz0B,EAAM,IAAI,EAG5BA,EAAQA,EAAM,MACd,MAEJ,IAAK,YACDA,EAAQ,CACJ,KAAM,kBACN,OAAQA,EACR,MAAO,EACP,KAAM,CAC1B,EACgB,MAEJ,IAAK,kBAAmB,CACpB,MAAMixB,EAAQjxB,EAAM,OAAO,MAE3B,GAAIA,EAAM,QAAUixB,EAAM,OAAQ,CAE9B,GAAIjxB,EAAM,OAAS,GAAKA,EAAM,OAAO,IAAK,CACtCA,EAAQmyB,EACR,KACH,CAGDnyB,EAAQkyB,EACR,KACH,CAGD,GAAIlyB,EAAM,QAAU,GAAKixB,EAAM,QAAU,EAAG,CACxCjxB,EAAQkyB,EACR,KACH,CAED,KAAOlyB,EAAM,MAAQixB,EAAM,OAAQjxB,EAAM,QAAS,CAC9C,MAAMk1B,EAAY,GAAKl1B,EAAM,MAE7B,GAAK,EAAAA,EAAM,KAAOk1B,GAAkB,CAGhCR,EAAc10B,CAAK,EACnBy0B,EAAc,CACV,KAAM,eACN,OAAQz0B,EAAM,OACd,KAAMA,EAAM,KAAOk1B,CAC/C,CAAyB,EAGDl1B,EAAQixB,EAAMjxB,EAAM,OAAO,EAC3B,KACH,CACJ,CACD,KACH,CAED,IAAK,eACDA,EAAQ,CACJ,KAAM,kBACN,OAAQA,EAAM,OACd,MAAO,EACP,KAAMA,EAAM,IAChC,EACgB,MAEJ,IAAK,OACD,GAAIspB,IAAU,KAAM,CAChB,IAAIpT,EAAOoT,EAAM,MAAM,YAAW,EAOlC,GAJIpT,EAAK,QAAQ,IAAI,IAAM,KACvBA,EAAOA,EAAK,QAAQ,YAAa,EAAE,GAGnCuP,GAAe,KAAKzlB,EAAM,IAAKkW,CAAI,EAAG,CACtClW,EAAQA,EAAM,IAAIkW,CAAI,EACtB,KACH,CACJ,CAEDlW,EAAQmyB,EACR,MAEJ,IAAK,UAAW,CACZ,MAAMxF,EAAO4H,IAAgB,KAAOA,EAAY,KAAO,KACjDY,EAAiB7iB,EAAa,KAAK,MAAMtS,EAAM,GAAGspB,EAAO4B,EAAcyB,CAAI,CAAC,EAElF,GAAI,CAAC,MAAMwI,CAAc,GAAKA,EAAiB7iB,EAAY,CACvD,KAAOA,EAAa6iB,GAChBP,IAGJ50B,EAAQkyB,CAC5B,MACoBlyB,EAAQmyB,EAGZ,KACH,CAED,IAAK,OACL,IAAK,WAAY,CACb,MAAMiD,EAAap1B,EAAM,OAAS,OAAS,QAAU,aAC/Cq1B,EAAa5P,GAAe,KAAKwO,EAAUmB,CAAU,EAAInB,EAASmB,CAAU,EAAEp1B,EAAM,IAAI,EAAI,KAElG,GAAI,CAACq1B,GAAc,CAACA,EAAW,MAC3B,MAAM,IAAI,MACN,0BACCr1B,EAAM,OAAS,OACV,IAAMA,EAAM,KAAO,IACnB,KAAQA,EAAM,KAAO,KACnD,EAIgB,GAAI60B,IAAgB,IAASvL,IAAU,MAAQtpB,EAAM,OAAS,SAKrDA,EAAM,OAAS,gBAAkBspB,EAAM,OAAS3V,GAKhD3T,EAAM,OAAS,UAAYspB,EAAM,QAAU,KAEvB,CACjBuL,IAAgB,OAChBA,EAAcT,EAAwBp0B,EAAO20B,CAAS,GAG1D30B,EAAQmyB,EACR,KACH,CAGL2C,IACA90B,EAAQq1B,EAAW,UAAYA,EAAW,MAC1C,KACH,CAED,IAAK,UAAW,CACZ,MAAMnf,EAAOlW,EAAM,KAEnB,GAAIspB,IAAU,KAAM,CAChB,IAAIgM,EAAchM,EAAM,MAOxB,GAJIgM,EAAY,QAAQ,IAAI,IAAM,KAC9BA,EAAcA,EAAY,QAAQ,YAAa,EAAE,GAGjD1B,GAA+B0B,EAAapf,CAAI,EAAG,CACnD0e,IACA50B,EAAQkyB,EACR,KACH,CACJ,CAEDlyB,EAAQmyB,EACR,KACH,CAED,IAAK,YACL,IAAK,WACD,GAAI7I,IAAU,MAAQsK,GAA+BtK,EAAM,MAAOtpB,EAAM,IAAI,EAAG,CAC3E40B,IACA50B,EAAQkyB,EACR,KACH,CAEDlyB,EAAQmyB,EACR,MAEJ,IAAK,QACD,GAAI7I,IAAU,MAAQA,EAAM,QAAUtpB,EAAM,MAAO,CAC/C40B,IACA50B,EAAQkyB,EACR,KACH,CAEDlyB,EAAQmyB,EACR,MAEJ,IAAK,QACG7I,IAAU,MAAQA,EAAM,OAAS9U,GAC7Bsf,GAAoBQ,EAAW,KAAK,EACpCt0B,EAAQmyB,GAERyC,IACA50B,EAAQ+zB,GAAkBzK,CAAK,EAAI6I,EAAWD,GAGlDlyB,EAAQ8zB,GAAoBQ,EAAW,KAAK,GAAKP,GAAkBzK,CAAK,EAAI4I,EAAQC,EAGxF,MAEJ,IAAK,SACD,IAAIoD,EAAS,GACTJ,EAAiB7iB,EAErB,KAAO6iB,EAAiBniB,EAAO,QAAUuiB,EAAO,OAASv1B,EAAM,MAAM,OAAQm1B,IACzEI,GAAUviB,EAAOmiB,CAAc,EAAE,MAGrC,GAAIvB,GAA+B2B,EAAQv1B,EAAM,KAAK,EAAG,CACrD,KAAOsS,EAAa6iB,GAChBP,IAGJ50B,EAAQkyB,CAC5B,MACoBlyB,EAAQmyB,EAGZ,MAEJ,QACI,MAAM,IAAI,MAAM,sBAAwBnyB,EAAM,IAAI,CACzD,CAKL,OAAQi1B,EAAU,CACd,KAAK,KACD,QAAQ,KAAK,+BAAiCvB,GAAkB,aAAa,EAC7EuB,EAAaxB,GACba,EAAa,KACb,MAEJ,KAAKf,GACD,KAAOgB,IAAgB,MACnBQ,IAEJ,MAEJ,QACIT,EAAa,IACpB,CAED,MAAO,CACH,OAAAthB,EACA,OAAQiiB,EACR,WAAYD,EACZ,MAAOV,EACP,aAAArL,CACR,CACA,CAmCO,SAASuM,GAAYxiB,EAAQyiB,EAAYxB,EAAU,CACtD,MAAMjL,EAAcgL,GAAchhB,EAAQyiB,EAAYxB,GAAY,CAAA,CAAE,EAEpE,GAAIjL,EAAY,QAAU,KACtB,OAAOA,EAGX,IAAIjW,EAAOiW,EAAY,MACnBrY,EAAOqY,EAAY,MAAQ,CAC3B,OAAQyM,EAAW,QAAU,KAC7B,MAAO,CAAE,CACjB,EACI,MAAMC,EAAY,CAAC/kB,CAAI,EAMvB,IAHAoC,EAAO4gB,GAAY5gB,CAAI,EAAE,KAGlBA,IAAS,MAAM,CAClB,OAAQA,EAAK,KAAI,CACb,KAAKsgB,GACD1iB,EAAK,MAAM,KAAKA,EAAO,CACnB,OAAQoC,EAAK,OACb,MAAO,CAAE,CAC7B,CAAiB,EACD2iB,EAAU,KAAK/kB,CAAI,EACnB,MAEJ,KAAK2iB,GACDoC,EAAU,IAAG,EACb/kB,EAAO+kB,EAAUA,EAAU,OAAS,CAAC,EACrC,MAEJ,QACI/kB,EAAK,MAAM,KAAK,CACZ,OAAQoC,EAAK,QAAU,KACvB,MAAOA,EAAK,MAAM,MAClB,KAAMA,EAAK,MAAM,IACrC,CAAiB,CACR,CAEDA,EAAOA,EAAK,IACf,CAED,OAAOiW,CACX,CCrnBO,SAAS2M,GAASv0B,EAAM,CAC3B,SAASw0B,EAAiB9L,EAAQ,CAC9B,OAAIA,IAAW,KACJ,GAIPA,EAAO,OAAS,QAChBA,EAAO,OAAS,YAChBA,EAAO,OAAS,SAEvB,CAED,SAAS+L,EAASC,EAAW,CACzB,GAAI,MAAM,QAAQA,EAAU,KAAK,GAE7B,QAASrnB,EAAI,EAAGA,EAAIqnB,EAAU,MAAM,OAAQrnB,IACxC,GAAIonB,EAASC,EAAU,MAAMrnB,CAAC,CAAC,EAC3B,OAAImnB,EAAiBE,EAAU,MAAM,GACjC7yB,EAAO,QAAQ6yB,EAAU,MAAM,EAG5B,WAGRA,EAAU,OAAS10B,EAC1B,OAAA6B,EAAS2yB,EAAiBE,EAAU,MAAM,EACpC,CAACA,EAAU,MAAM,EACjB,GAEC,GAGX,MAAO,EACV,CAED,IAAI7yB,EAAS,KAEb,OAAI,KAAK,UAAY,MACjB4yB,EAAS,KAAK,OAAO,EAGlB5yB,CACX,CAEO,SAAS8yB,GAAO30B,EAAM8Q,EAAM,CAC/B,OAAO8jB,GAAS,KAAM50B,EAAMmb,GAASA,EAAM,OAAS,QAAUA,EAAM,OAASrK,CAAI,CACrF,CAEO,SAAS+jB,GAAW70B,EAAM+oB,EAAU,CACvC,OAAO6L,GAAS,KAAM50B,EAAMmb,GAASA,EAAM,OAAS,YAAcA,EAAM,OAAS4N,CAAQ,CAC7F,CAEO,SAAS+L,GAAU90B,EAAM,CAC5B,OAAO40B,GAAS,KAAM50B,EAAMmb,GAASA,EAAM,OAAS,SAAS,CACjE,CAEA,SAASyZ,GAASzZ,EAAOnb,EAAM0R,EAAI,CAC/B,MAAMqjB,EAAQR,GAAS,KAAKpZ,EAAOnb,CAAI,EAEvC,OAAI+0B,IAAU,KACH,GAGJA,EAAM,KAAKrjB,CAAE,CACxB,sJC/DA,SAASsjB,GAAkBN,EAAW,CAClC,MAAI,SAAUA,EACHA,EAAU,KAGdM,GAAkBN,EAAU,MAAM,CAAC,CAAC,CAC/C,CAEA,SAASO,GAAiBP,EAAW,CACjC,MAAI,SAAUA,EACHA,EAAU,KAGdO,GAAiBP,EAAU,MAAMA,EAAU,MAAM,OAAS,CAAC,CAAC,CACvE,CAEO,SAASQ,GAAeC,EAAO1c,EAAK0C,EAAOrK,EAAMgE,EAAM,CAC1D,SAASsgB,EAAcV,EAAW,CAC9B,GAAIA,EAAU,SAAW,MACrBA,EAAU,OAAO,OAAS5jB,GAC1B4jB,EAAU,OAAO,OAAS5f,EAAM,CAChC,MAAM/G,EAAQinB,GAAkBN,CAAS,EACnC1mB,EAAMinB,GAAiBP,CAAS,EAEtCS,EAAM,OAAO,KAAK1c,EAAK,SAASzY,EAAM2R,EAAM1P,EAAM,CAC9C,GAAIjC,IAAS+N,EAAO,CAChB,MAAMsnB,EAAQ,IAAIrhB,EAElB,EAAG,CAGC,GAFAqhB,EAAM,WAAW1jB,EAAK,IAAI,EAEtBA,EAAK,OAAS3D,EACd,MAGJ2D,EAAOA,EAAK,IACpC,OAA6BA,IAAS,MAElB2jB,EAAU,KAAK,CACX,OAAQrzB,EACR,MAAAozB,CACxB,CAAqB,CACJ,CACjB,CAAa,CACJ,CAEG,MAAM,QAAQX,EAAU,KAAK,GAC7BA,EAAU,MAAM,QAAQU,CAAa,CAE5C,CAED,MAAME,EAAY,CAAA,EAElB,OAAIna,EAAM,UAAY,MAClBia,EAAcja,EAAM,OAAO,EAGxBma,CACX,CC1DA,KAAM,gBAAEjR,EAAc,EAAK,OAAO,UAElC,SAASkR,GAAcx3B,EAAO,CAE1B,OACI,OAAOA,GAAU,UACjB,SAASA,CAAK,GACd,KAAK,MAAMA,CAAK,IAAMA,GACtBA,GAAS,CAEjB,CAEA,SAASy3B,GAAgBhd,EAAK,CAC1B,MACI,EAAQA,GACR+c,GAAc/c,EAAI,MAAM,GACxB+c,GAAc/c,EAAI,IAAI,GACtB+c,GAAc/c,EAAI,MAAM,CAEhC,CAEA,SAASid,GAA2B3kB,EAAMqU,EAAQ,CAC9C,OAAO,SAAmBnlB,EAAM01B,EAAM,CAClC,GAAI,CAAC11B,GAAQA,EAAK,cAAgB,OAC9B,OAAO01B,EAAK11B,EAAM,kCAAkC,EAGxD,QAAS8hB,KAAO9hB,EAAM,CAClB,IAAI21B,EAAQ,GAEZ,GAAItR,GAAe,KAAKrkB,EAAM8hB,CAAG,IAAM,GAIvC,IAAIA,IAAQ,OACJ9hB,EAAK,OAAS8Q,GACd4kB,EAAK11B,EAAM,oBAAsBA,EAAK,KAAO,gBAAkB8Q,EAAO,GAAG,UAEtEgR,IAAQ,MAAO,CACtB,GAAI9hB,EAAK,MAAQ,KACb,SACG,GAAIA,EAAK,KAAOA,EAAK,IAAI,cAAgB,OAC5C,GAAI,OAAOA,EAAK,IAAI,QAAW,SAC3B8hB,GAAO,kBACA,CAAC0T,GAAgBx1B,EAAK,IAAI,KAAK,EACtC8hB,GAAO,iBACA,CAAC0T,GAAgBx1B,EAAK,IAAI,GAAG,EACpC8hB,GAAO,WAEP,UAIR6T,EAAQ,EACX,SAAUxQ,EAAO,eAAerD,CAAG,EAAG,CACnC6T,EAAQ,GAER,QAAStoB,EAAI,EAAG,CAACsoB,GAAStoB,EAAI8X,EAAOrD,CAAG,EAAE,OAAQzU,IAAK,CACnD,MAAM0X,EAAYI,EAAOrD,CAAG,EAAEzU,CAAC,EAE/B,OAAQ0X,EAAS,CACb,KAAK,OACD4Q,EAAQ,OAAO31B,EAAK8hB,CAAG,GAAM,SAC7B,MAEJ,KAAK,QACD6T,EAAQ,OAAO31B,EAAK8hB,CAAG,GAAM,UAC7B,MAEJ,KAAK,KACD6T,EAAQ31B,EAAK8hB,CAAG,IAAM,KACtB,MAEJ,QACQ,OAAOiD,GAAc,SACrB4Q,EAAQ31B,EAAK8hB,CAAG,GAAK9hB,EAAK8hB,CAAG,EAAE,OAASiD,EACjC,MAAM,QAAQA,CAAS,IAC9B4Q,EAAQ31B,EAAK8hB,CAAG,YAAa9N,EAExC,CACJ,CACjB,MACgB0hB,EAAK11B,EAAM,kBAAoB8hB,EAAM,SAAWhR,EAAO,YAAY,EAGlE6kB,GACDD,EAAK11B,EAAM,kBAAoB8Q,EAAO,IAAMgR,EAAM,GAAG,EAE5D,CAED,UAAWA,KAAOqD,EACVd,GAAe,KAAKc,EAAQrD,CAAG,GAC/BuC,GAAe,KAAKrkB,EAAM8hB,CAAG,IAAM,IACnC4T,EAAK11B,EAAM,UAAY8Q,EAAO,IAAMgR,EAAM,aAAa,CAGvE,CACA,CAEA,SAAS8T,GAAa/Q,EAAYhJ,EAAM,CACpC,MAAMga,EAAY,CAAA,EAElB,QAASxoB,EAAI,EAAGA,EAAIwX,EAAW,OAAQxX,IAAK,CACxC,MAAM0X,EAAYF,EAAWxX,CAAC,EAC9B,GAAI0X,IAAc,QAAUA,IAAc,QACtC8Q,EAAU,KAAK9Q,EAAU,KAAK,YAAa,CAAA,UACpCA,IAAc,KACrB8Q,EAAU,KAAK,MAAM,UACd,OAAO9Q,GAAc,SAC5B8Q,EAAU,KAAK9Q,CAAS,UACjB,MAAM,QAAQA,CAAS,EAC9B8Q,EAAU,KAAK,SAAWD,GAAa7Q,EAAWlJ,CAAI,GAAK,OAAS,GAAG,MAEvE,OAAM,IAAI,MAAM,gBAAkBkJ,EAAY,SAAWlJ,EAAO,wBAAwB,CAE/F,CAED,OAAOga,EAAU,KAAK,KAAK,CAC/B,CAEA,SAASC,GAAiBhhB,EAAM4P,EAAU,CACtC,MAAMC,EAAYD,EAAS,UACrBS,EAAS,CACX,KAAM,OACN,IAAK,EACb,EACU4Q,EAAO,CACT,KAAM,IAAMjhB,EAAO,GAC3B,EAEI,UAAWgN,KAAO6C,EAAW,CACzB,GAAIN,GAAe,KAAKM,EAAW7C,CAAG,IAAM,GACxC,SAGJ,MAAM+C,EAAaM,EAAOrD,CAAG,EAAI,MAAM,QAAQ6C,EAAU7C,CAAG,CAAC,EACvD6C,EAAU7C,CAAG,EAAE,MAAO,EACtB,CAAC6C,EAAU7C,CAAG,CAAC,EAErBiU,EAAKjU,CAAG,EAAI8T,GAAa/Q,EAAY/P,EAAO,IAAMgN,CAAG,CACxD,CAED,MAAO,CACH,KAAAiU,EACA,MAAON,GAA2B3gB,EAAMqQ,CAAM,CACtD,CACA,CAEO,SAAS6Q,GAAuBhf,EAAQ,CAC3C,MAAM2N,EAAY,CAAA,EAElB,GAAI3N,EAAO,MACP,UAAWlC,KAAQkC,EAAO,KACtB,GAAIqN,GAAe,KAAKrN,EAAO,KAAMlC,CAAI,EAAG,CACxC,MAAM4P,EAAW1N,EAAO,KAAKlC,CAAI,EAEjC,GAAI4P,EAAS,UACTC,EAAU7P,CAAI,EAAIghB,GAAiBhhB,EAAM4P,CAAQ,MAEjD,OAAM,IAAI,MAAM,gCAAkC5P,EAAO,wBAAwB,CAExF,EAIT,OAAO6P,CACX,CC3JA,MAAMsR,GAAwBpE,GAAgBpI,GAAgB,KAAK,KAAK,CAAC,EAEzE,SAASyM,GAAcnU,EAAKsF,EAAS8O,EAAa,CAC9C,MAAMt0B,EAAS,CAAA,EAEf,UAAWiT,KAAQiN,EACXA,EAAIjN,CAAI,EAAE,SACVjT,EAAOiT,CAAI,EAAIqhB,EACTpU,EAAIjN,CAAI,EAAE,OACV2S,GAAS1F,EAAIjN,CAAI,EAAE,OAAQ,CAAE,QAAAuS,CAAO,CAAE,GAIpD,OAAOxlB,CACX,CAEA,SAASu0B,GAAoBrU,EAAKsF,EAAS8O,EAAa,CACpD,MAAMt0B,EAAS,CAAA,EAEf,SAAW,CAACiT,EAAMuhB,CAAM,IAAK,OAAO,QAAQtU,CAAG,EAC3ClgB,EAAOiT,CAAI,EAAI,CACX,QAASuhB,EAAO,UACZF,EACME,EAAO,QAAQ,OACf5O,GAAS4O,EAAO,QAAQ,OAAQ,CAAE,QAAAhP,CAAO,CAAE,GAErD,YAAagP,EAAO,aAAeH,GAAcG,EAAO,YAAahP,EAAS8O,CAAW,CACrG,EAGI,OAAOt0B,CACX,CAEA,SAASy0B,GAAY1kB,EAAQ,CACzB,QAASvE,EAAI,EAAGA,EAAIuE,EAAO,OAAQvE,IAC/B,GAAIuE,EAAOvE,CAAC,EAAE,MAAM,YAAW,IAAO,OAClC,MAAO,GAIf,MAAO,EACX,CAEA,SAASkpB,GAAiC7N,EAAQ,CAC9C,MAAM8N,EAAa9N,EAAO,MAAM,CAAC,EAEjC,OACIA,EAAO,WAAa,IACpBA,EAAO,MAAM,SAAW,GACxB8N,EAAW,OAAS,cACpBA,EAAW,QAAU,EAE7B,CAEA,SAASC,GAAiBC,EAAS1hB,EAAO2hB,EAAY,CAClD,OAAOx4B,EAAA,CACH,QAAAu4B,EACA,WAAAC,EACA,MAAA3hB,GACG+f,GAEX,CAEA,SAAS6B,GAAYzB,EAAOzM,EAAQ3qB,EAAO84B,EAAoB,CAC3D,MAAMjlB,EAASif,GAAc9yB,EAAOo3B,EAAM,MAAM,EAChD,IAAItzB,EAEJ,OAAIy0B,GAAY1kB,CAAM,EACX6kB,GAAiB,KAAM,IAAI,MAAM,iDAAiD,CAAC,GAG1FI,IACAh1B,EAASuyB,GAAYxiB,EAAQujB,EAAM,sBAAuBA,CAAK,IAG/D,CAAC0B,GAAsB,CAACh1B,EAAO,SAC/BA,EAASuyB,GAAYxiB,EAAQ8W,EAAO,MAAOyM,CAAK,EAC5C,CAACtzB,EAAO,OACD40B,GACH,KACA,IAAIhO,GAAiB5mB,EAAO,OAAQ6mB,EAAO,OAAQ3qB,EAAO8D,CAAM,EAChEA,EAAO,UACvB,EAIW40B,GAAiB50B,EAAO,MAAO,KAAMA,EAAO,UAAU,EACjE,CAEO,MAAMi1B,EAAM,CACf,YAAY9f,EAAQ0R,EAAQ/D,EAAW,CAUnC,GATA,KAAK,sBAAwBsR,GAC7B,KAAK,OAASvN,EACd,KAAK,QAAU,GACf,KAAK,MAAQvqB,EAAA,GAAK4uB,IAClB,KAAK,QAAU,OAAO,OAAO,IAAI,EACjC,KAAK,WAAa,OAAO,OAAO,IAAI,EACpC,KAAK,MAAQ,OAAO,OAAO,IAAI,EAC/B,KAAK,UAAYpI,GAAaqR,GAAuBhf,CAAM,EAEvDA,EAAQ,CACR,GAAIA,EAAO,MACP,UAAW+f,KAAS,OAAO,KAAKhK,EAAK,EAC7B,MAAM,QAAQ/V,EAAO,MAAM+f,CAAK,CAAC,IACjC,KAAK,MAAMA,CAAK,EAAI/f,EAAO,MAAM+f,CAAK,GAKlD,GAAI/f,EAAO,MACP,SAAW,CAAClC,EAAMhE,CAAI,IAAK,OAAO,QAAQkG,EAAO,KAAK,EAClD,KAAK,SAASlC,EAAMhE,CAAI,EAIhC,GAAIkG,EAAO,QAAS,CAChB,KAAK,QAAU,GACf,SAAW,CAAClC,EAAM/W,CAAK,IAAK,OAAO,QAAQwvB,GAAmB,KAAK,KAAK,CAAC,EACrE,KAAK,SAASzY,EAAM/W,CAAK,CAEhC,CAED,GAAIiZ,EAAO,QACP,SAAW,CAAClC,EAAMuhB,CAAM,IAAK,OAAO,QAAQrf,EAAO,OAAO,EACtD,KAAK,WAAWlC,EAAMuhB,CAAM,EAIpC,GAAIrf,EAAO,WACP,SAAW,CAAClC,EAAMiU,CAAQ,IAAK,OAAO,QAAQ/R,EAAO,UAAU,EAC3D,KAAK,aAAalC,EAAMiU,CAAQ,CAG3C,CACJ,CAED,eAAetQ,EAAK,CAChB,SAASue,EAAeh3B,EAAM+U,EAAS,CACnCkiB,EAAM,KAAK,CAAE,KAAAj3B,EAAM,QAAA+U,CAAS,CAAA,CAC/B,CAED,MAAM4P,EAAY,KAAK,UACjBsS,EAAQ,CAAA,EAEd,YAAK,OAAO,KAAKxe,EAAK,SAASzY,EAAM,CAC7B2kB,EAAU,eAAe3kB,EAAK,IAAI,EAClC2kB,EAAU3kB,EAAK,IAAI,EAAE,MAAMA,EAAMg3B,CAAc,EAE/CA,EAAeh3B,EAAM,sBAAwBA,EAAK,KAAO,GAAG,CAE5E,CAAS,EAEMi3B,EAAM,OAASA,EAAQ,EACjC,CAED,iBAAiBvO,EAAQ5X,EAAMgE,EAAMoiB,EAAS,KAAM,CAChD,MAAMzR,EAAM,CACR,KAAA3U,EACA,KAAAgE,CACZ,EACcsU,EAAa,CACf,KAAAtY,EACA,KAAAgE,EACA,OAAAoiB,EACA,aAAc,OAAOxO,GAAW,UAAaA,GAAU,OAAOA,EAAO,MAAS,SAC9E,OAAQ,KACR,MAAO,KACP,SAAU,IACtB,EAEQ,OAAI,OAAOA,GAAW,WAClBU,EAAW,MAAQyI,GAAgBnJ,EAAQjD,CAAG,GAE1C,OAAOiD,GAAW,SAElB,OAAO,eAAeU,EAAY,SAAU,CACxC,KAAM,CACF,cAAO,eAAeA,EAAY,SAAU,CACxC,MAAOoH,GAAM9H,CAAM,CAC/C,CAAyB,EAEMU,EAAW,MACrB,CACrB,CAAiB,EAEDA,EAAW,OAASV,EAIxB,OAAO,eAAeU,EAAY,QAAS,CACvC,KAAM,CACF,cAAO,eAAeA,EAAY,QAAS,CACvC,MAAOyI,GAAgBzI,EAAW,OAAQ3D,CAAG,CACrE,CAAqB,EAEM2D,EAAW,KACrB,CACjB,CAAa,EAEGtY,IAAS,YACT,OAAO,eAAesY,EAAY,WAAY,CAC1C,KAAM,CACF,MAAMV,EAASU,EAAW,OACpBrrB,EAAQw4B,GAAiC7N,CAAM,EAC/CmJ,GAAgBlpB,GAAAxK,EAAA,GACXuqB,GADW,CAEd,MAAO,CAACA,EAAO,MAAM,CAAC,EAAE,IAAI,CAC/B,GAAEjD,CAAG,EACJ,KAEN,cAAO,eAAe2D,EAAY,WAAY,CAC1C,MAAArrB,CAC5B,CAAyB,EAEMA,CACV,CACrB,CAAiB,GAIFqrB,CACV,CACD,WAAWtU,EAAM4T,EAAQ,CAChBA,IAIL,KAAK,QAAQ5T,CAAI,EAAI,CACjB,KAAM,SACN,KAAMA,EACN,QAAS4T,EAAO,QAAU,KAAK,iBAAiBA,EAAO,QAAS,gBAAiB5T,CAAI,EAAI,KACzF,YAAa4T,EAAO,YACd,OAAO,KAAKA,EAAO,WAAW,EAAE,OAC9B,CAAC3G,EAAKoV,KACFpV,EAAIoV,CAAQ,EAAI,KAAK,iBAAiBzO,EAAO,YAAYyO,CAAQ,EAAG,mBAAoBA,EAAUriB,CAAI,EAC/FiN,GAEX,OAAO,OAAO,IAAI,CACrB,EACC,IAClB,EACK,CACD,aAAajN,EAAM4T,EAAQ,CAClBA,IAIL,KAAK,WAAW5T,CAAI,EAAI,KAAK,iBAAiB4T,EAAQ,WAAY5T,CAAI,EACzE,CACD,SAASA,EAAM4T,EAAQ,CACdA,IAIL,KAAK,MAAM5T,CAAI,EAAI,KAAK,iBAAiB4T,EAAQ,OAAQ5T,CAAI,EAChE,CAED,gBAAgBsiB,EAAY,CACxB,GAAI,CAAC,KAAK,UAAUA,CAAU,EAC1B,OAAO,IAAI7O,GAAqB,kBAAmB,IAAM6O,CAAU,CAE1E,CACD,mBAAmBA,EAAYC,EAAS,CACpC,MAAMriB,EAAQ,KAAK,gBAAgBoiB,CAAU,EAE7C,GAAIpiB,EACA,OAAOA,EAGX,MAAMqhB,EAAS,KAAK,UAAUe,CAAU,EAExC,GAAI,CAACf,EAAO,SAAWgB,EACnB,OAAO,IAAI,YAAY,aAAeD,EAAa,gCAAgC,EAGvF,GAAIf,EAAO,SAAW,CAACgB,GACf,CAACT,GAAY,KAAMP,EAAO,QAAS,GAAI,EAAK,EAAE,QAC9C,OAAO,IAAI,YAAY,aAAee,EAAa,4BAA4B,CAG1F,CACD,0BAA0BA,EAAYE,EAAgB,CAClD,MAAMtiB,EAAQ,KAAK,gBAAgBoiB,CAAU,EAE7C,GAAIpiB,EACA,OAAOA,EAGX,MAAMqhB,EAAS,KAAK,UAAUe,CAAU,EAClChO,EAAamO,GAAcD,CAAc,EAE/C,GAAI,CAACjB,EAAO,YACR,OAAO,IAAI,YAAY,aAAee,EAAa,4BAA4B,EAGnF,GAAI,CAACf,EAAO,YAAYjN,EAAW,IAAI,GACnC,CAACiN,EAAO,YAAYjN,EAAW,QAAQ,EACvC,OAAO,IAAIb,GAAqB,6BAA8B+O,CAAc,CAEnF,CACD,kBAAkBE,EAAc,CAC5B,GAAI,CAAC,KAAK,YAAYA,CAAY,EAC9B,OAAO,IAAIjP,GAAqB,mBAAoBiP,CAAY,CAEvE,CAED,mBAAmBJ,EAAYC,EAAS,CACpC,MAAMriB,EAAQ,KAAK,mBAAmBoiB,EAAYC,CAAO,EAEzD,GAAIriB,EACA,OAAOyhB,GAAiB,KAAMzhB,CAAK,EAGvC,MAAMqhB,EAAS,KAAK,UAAUe,CAAU,EAExC,OAAKf,EAAO,QAILO,GAAY,KAAMP,EAAO,QAASgB,GAAW,GAAI,EAAK,EAHlDZ,GAAiB,KAAM,IAAI,CAIzC,CACD,sBAAsBW,EAAYE,EAAgBv5B,EAAO,CACrD,MAAMiX,EAAQ,KAAK,0BAA0BoiB,EAAYE,CAAc,EAEvE,GAAItiB,EACA,OAAOyhB,GAAiB,KAAMzhB,CAAK,EAGvC,MAAMqhB,EAAS,KAAK,UAAUe,CAAU,EAClChO,EAAamO,GAAcD,CAAc,EAE/C,OAAOV,GAAY,KAAMP,EAAO,YAAYjN,EAAW,IAAI,GAAKiN,EAAO,YAAYjN,EAAW,QAAQ,EAAGrrB,EAAO,EAAK,CACxH,CACD,iBAAiBiC,EAAM,CACnB,OAAIA,EAAK,OAAS,cACPy2B,GAAiB,KAAM,IAAI,MAAM,wBAAwB,CAAC,EAG9D,KAAK,cAAcz2B,EAAK,SAAUA,EAAK,KAAK,CACtD,CACD,cAAcw3B,EAAcz5B,EAAO,CAE/B,GAAI05B,GAAeD,CAAY,EAAE,OAC7B,OAAOf,GAAiB,KAAM,IAAI,MAAM,yDAA0D,CAAC,EAGvG,MAAMzhB,EAAQ,KAAK,kBAAkBwiB,CAAY,EAEjD,OAAIxiB,EACOyhB,GAAiB,KAAMzhB,CAAK,EAGhC4hB,GAAY,KAAM,KAAK,YAAYY,CAAY,EAAGz5B,EAAO,EAAI,CACvE,CACD,UAAU25B,EAAU35B,EAAO,CACvB,MAAM45B,EAAa,KAAK,QAAQD,CAAQ,EAExC,OAAKC,EAIEf,GAAY,KAAMe,EAAY55B,EAAO,EAAK,EAHtC04B,GAAiB,KAAM,IAAIlO,GAAqB,eAAgBmP,CAAQ,CAAC,CAIvF,CACD,MAAMhP,EAAQ3qB,EAAO,CACjB,OAAI,OAAO2qB,GAAW,WAAa,CAACA,GAAU,CAACA,EAAO,MAC3C+N,GAAiB,KAAM,IAAIlO,GAAqB,YAAY,CAAC,IAGpE,OAAOG,GAAW,UAAY,CAACA,EAAO,SACtCA,EAAS,KAAK,iBAAiBA,EAAQ,OAAQ,WAAW,GAGvDkO,GAAY,KAAMlO,EAAQ3qB,EAAO,EAAK,EAChD,CAED,mBAAmBy5B,EAAcz5B,EAAO+S,EAAMgE,EAAM,CAChD,OAAOogB,GAAe,KAAMn3B,EAAO,KAAK,cAAcy5B,EAAcz5B,CAAK,EAAG+S,EAAMgE,CAAI,CACzF,CACD,8BAA8B8iB,EAAa9mB,EAAMgE,EAAM,CACnD,OAAOogB,GAAe,KAAM0C,EAAY,MAAO,KAAK,iBAAiBA,CAAW,EAAG9mB,EAAMgE,CAAI,CAChG,CACD,iBAAiB2D,EAAK3H,EAAMgE,EAAM,CAC9B,MAAMjT,EAAS,CAAA,EAEf,YAAK,OAAO,KAAK4W,EAAK,CAClB,MAAO,cACP,MAAQmf,GAAgB,CACpB/1B,EAAO,KAAK,MAAMA,EAAQ,KAAK,8BAA8B+1B,EAAa9mB,EAAMgE,CAAI,CAAC,CACxF,CACb,CAAS,EAEMjT,CACV,CAED,UAAUu1B,EAAYS,EAAmB,GAAM,CAC3C,MAAMxB,EAASkB,GAAcH,CAAU,EAKvC,OAJoBf,EAAO,QAAUwB,EAC/B,KAAK,QAAQxB,EAAO,IAAI,GAAK,KAAK,QAAQA,EAAO,QAAQ,EACzD,KAAK,QAAQA,EAAO,IAAI,IAER,IACzB,CACD,iBAAiBe,EAAYS,EAAmB,GAAM,CAClD,MAAMxB,EAAS,KAAK,UAAUe,EAAYS,CAAgB,EAE1D,OAAOxB,GAAUA,EAAO,SAAW,IACtC,CACD,oBAAoBe,EAAYtiB,EAAM,CAClC,OAAO,KAAK,QAAQ,eAAesiB,CAAU,GAAK,KAAK,QAAQ,aACzD,KAAK,QAAQA,CAAU,EAAE,YAAYtiB,CAAI,GAAK,IAEvD,CACD,YAAY0iB,EAAcK,EAAmB,GAAM,CAC/C,MAAM9O,EAAW0O,GAAeD,CAAY,EAK5C,OAJsBzO,EAAS,QAAU8O,EACnC,KAAK,WAAW9O,EAAS,IAAI,GAAK,KAAK,WAAWA,EAAS,QAAQ,EACnE,KAAK,WAAWA,EAAS,IAAI,IAEX,IAC3B,CACD,QAAQjU,EAAM,CACV,OAAO,eAAe,KAAK,KAAK,MAAOA,CAAI,EAAI,KAAK,MAAMA,CAAI,EAAI,IACrE,CAED,UAAW,CACP,SAASgjB,EAASpP,EAAQ5T,EAAMijB,EAAQ3O,EAAY,CAChD,GAAI2O,EAAO,IAAIjjB,CAAI,EACf,OAAOijB,EAAO,IAAIjjB,CAAI,EAG1BijB,EAAO,IAAIjjB,EAAM,EAAK,EAClBsU,EAAW,SAAW,MACtBhF,GAAKgF,EAAW,OAAQ,SAASppB,EAAM,CACnC,GAAIA,EAAK,OAAS,QAAUA,EAAK,OAAS,WACtC,OAGJ,MAAM+hB,EAAM/hB,EAAK,OAAS,OAAS0oB,EAAO,MAAQA,EAAO,WACnDsP,EAAYh4B,EAAK,OAAS,OAASi4B,EAAcC,GAEnD,CAAC,eAAe,KAAKnW,EAAK/hB,EAAK,IAAI,GAAK83B,EAASpP,EAAQ1oB,EAAK,KAAMg4B,EAAWjW,EAAI/hB,EAAK,IAAI,CAAC,IAC7F+3B,EAAO,IAAIjjB,EAAM,EAAI,CAE5B,EAAE,IAAI,CAEd,CAED,IAAImjB,EAAc,IAAI,IAClBC,EAAmB,IAAI,IAE3B,UAAWpW,KAAO,KAAK,MACnBgW,EAAS,KAAMhW,EAAKmW,EAAa,KAAK,MAAMnW,CAAG,CAAC,EAGpD,UAAWA,KAAO,KAAK,WACnBgW,EAAS,KAAMhW,EAAKoW,EAAkB,KAAK,WAAWpW,CAAG,CAAC,EAM9D,OAHAmW,EAAc,CAAC,GAAGA,EAAY,MAAM,EAAE,OAAOnjB,GAAQmjB,EAAY,IAAInjB,CAAI,CAAC,EAC1EojB,EAAmB,CAAC,GAAGA,EAAiB,MAAM,EAAE,OAAOpjB,GAAQojB,EAAiB,IAAIpjB,CAAI,CAAC,EAErFmjB,EAAY,QAAUC,EAAiB,OAChC,CACH,MAAOD,EACP,WAAYC,CAC5B,EAGe,IACV,CACD,KAAK/B,EAAagC,EAAQ,CACtB,MAAO,CACH,QAAS,KAAK,QACd,MAAO,KAAK,MACZ,MAAOjC,GAAc,KAAK,MAAO,CAACiC,EAAQhC,CAAW,EACrD,WAAYD,GAAc,KAAK,WAAY,CAACiC,EAAQhC,CAAW,EAC/D,QAASC,GAAoB,KAAK,QAAS,CAAC+B,EAAQhC,CAAW,CAC3E,CACK,CACD,UAAW,CACP,OAAO,KAAK,UAAU,KAAK,KAAM,CAAA,CACpC,CACL,CC/eA,SAASiC,GAAYpI,EAAGC,EAAG,CACvB,OAAI,OAAOA,GAAM,UAAY,SAAS,KAAKA,CAAC,EACjC,OAAOD,GAAM,SACdA,EAAIC,EACJA,EAAE,QAAQ,YAAa,EAAE,EAG5BA,GAAK,IAChB,CAEA,SAASoI,GAAW3b,EAAK4b,EAAO,CAC5B,MAAMz2B,EAAS,OAAO,OAAO,IAAI,EAEjC,SAAW,CAACigB,EAAK/jB,CAAK,IAAK,OAAO,QAAQ2e,CAAG,EACzC,GAAI3e,EAAO,CACP8D,EAAOigB,CAAG,EAAI,GACd,UAAWyW,KAAQ,OAAO,KAAKx6B,CAAK,EAC5Bu6B,EAAM,SAASC,CAAI,IACnB12B,EAAOigB,CAAG,EAAEyW,CAAI,EAAIx6B,EAAMw6B,CAAI,EAGzC,CAGL,OAAO12B,CACX,CAEe,SAAS22B,GAAIC,EAAMC,EAAK,CACnC,MAAM72B,EAAS1D,EAAA,GAAKs6B,GAEpB,SAAW,CAACF,EAAMx6B,CAAK,IAAK,OAAO,QAAQ26B,CAAG,EAC1C,OAAQH,EAAI,CACR,IAAK,UACD12B,EAAO02B,CAAI,EAAI,EAAQx6B,EACvB,MAEJ,IAAK,QACD8D,EAAO02B,CAAI,EAAIp6B,EAAA,GAAKs6B,EAAKF,CAAI,GAC7B,SAAW,CAACzjB,EAAM6jB,CAAK,IAAK,OAAO,QAAQ56B,CAAK,EAC5C8D,EAAO02B,CAAI,EAAEzjB,CAAI,EAAI,MAAM,QAAQ6jB,CAAK,EAAIA,EAAQ,GAExD,MAEJ,IAAK,UACD92B,EAAO02B,CAAI,EAAIp6B,EAAA,GAAKs6B,EAAKF,CAAI,GAE7B,SAAW,CAACzjB,EAAMuhB,CAAM,IAAK,OAAO,QAAQt4B,CAAK,EAAG,CAChD,MAAM66B,EAAS/2B,EAAO02B,CAAI,EAAEzjB,CAAI,GAAK,CAAA,EAC/B+jB,EAAUh3B,EAAO02B,CAAI,EAAEzjB,CAAI,EAAI,CACjC,QAAS8jB,EAAO,SAAW,KAC3B,YAAaz6B,EAAA,GACNy6B,EAAO,YAEtC,EAEoB,GAAKvC,EAIL,CAAAwC,EAAQ,QAAUxC,EAAO,QACnB+B,GAAYS,EAAQ,QAASxC,EAAO,OAAO,EAC3CwC,EAAQ,SAAW,KAEzB,SAAW,CAACvB,EAAgBwB,CAAe,IAAK,OAAO,QAAQzC,EAAO,aAAe,CAAA,CAAE,EACnFwC,EAAQ,YAAYvB,CAAc,EAAIwB,EAChCV,GAAYS,EAAQ,YAAYvB,CAAc,EAAGwB,CAAe,EAChE,KAGL,OAAO,KAAKD,EAAQ,WAAW,EAAE,SAClCA,EAAQ,YAAc,MAE7B,CACD,MAEJ,IAAK,QACL,IAAK,aACDh3B,EAAO02B,CAAI,EAAIp6B,EAAA,GAAKs6B,EAAKF,CAAI,GAC7B,SAAW,CAACzjB,EAAM4T,CAAM,IAAK,OAAO,QAAQ3qB,CAAK,EAC7C8D,EAAO02B,CAAI,EAAEzjB,CAAI,EAAIsjB,GAAYv2B,EAAO02B,CAAI,EAAEzjB,CAAI,EAAG4T,CAAM,EAE/D,MAEJ,IAAK,QACL,IAAK,WACD7mB,EAAO02B,CAAI,EAAIp6B,EAAA,GAAKs6B,EAAKF,CAAI,GAC7B,SAAW,CAACzjB,EAAMwjB,CAAK,IAAK,OAAO,QAAQv6B,CAAK,EAC5C8D,EAAO02B,CAAI,EAAEzjB,CAAI,EAAI3W,IAAA,GAAK0D,EAAO02B,CAAI,EAAEzjB,CAAI,GAAMwjB,GAErD,MAEJ,IAAK,eACDz2B,EAAO02B,CAAI,EAAIp6B,IAAA,GACRs6B,EAAKF,CAAI,GACTx6B,GAEP,MAEJ,IAAK,SACL,IAAK,SACD8D,EAAO02B,CAAI,EAAIp6B,IAAA,GACRs6B,EAAKF,CAAI,GACTF,GAAWt6B,EAAO,CAAC,OAAO,CAAC,GAElC,MAEJ,IAAK,OACD8D,EAAO02B,CAAI,EAAIp6B,IAAA,GACRs6B,EAAKF,CAAI,GACTF,GAAWt6B,EAAO,CAAC,OAAQ,YAAa,QAAS,WAAY,aAAa,CAAC,GAElF,KACP,CAGL,OAAO8D,CACX,CC5GA,SAASk3B,GAAa/hB,EAAQ,CAC1B,MAAMwZ,EAAQtZ,GAAaF,CAAM,EAC3BoN,EAAO4B,GAAahP,CAAM,EAC1ByQ,EAAW3D,GAAgB9M,CAAM,EACjC,CAAE,gBAAAgiB,EAAiB,cAAAC,CAAe,EAAG9U,GAAgBC,CAAI,EAEzDsE,EAAS,CACX,MAAO,KACP,YAAa1R,GAAU,IAAI8f,GAAM9f,EAAQ0R,EAAQA,EAAO,MAAM,SAAS,EAE/E,SAAQnY,GACA,MAAAigB,EACA,SAAA/I,EAEA,KAAArD,EACA,KAAMA,EAAK,KACX,SAAUA,EAAK,SACf,QAASA,EAAK,QAEd,gBAAA4U,EACA,cAAAC,EAEA,KAAKC,EAAW,CACZ,MAAMC,EAAOX,GAAI,CAAE,EAAExhB,CAAM,EAE3B,OAAO+hB,GACH,OAAOG,GAAc,WACfA,EAAUC,EAAM,OAAO,MAAM,EAC7BX,GAAIW,EAAMD,CAAS,CACzC,CACS,CACT,EAEI,OAAAxQ,EAAO,MAAQ,IAAIoO,GAAM,CACrB,QAAS9f,EAAO,QAChB,MAAOA,EAAO,MACd,MAAOA,EAAO,MACd,QAASA,EAAO,QAChB,WAAYA,EAAO,WACnB,KAAMA,EAAO,IAChB,EAAE0R,CAAM,EAEFA,CACX,CAEe,MAAA0Q,GAAApiB,GAAU+hB,GAAaP,GAAI,CAAE,EAAExhB,CAAM,CAAC,ECrDtCqiB,GAAA,CACX,QAAW,GACX,MAAS,CACL,MAAS,CACL,MACA,OACA,MACA,MACH,EACD,QAAW,CACP,IACH,EACD,KAAQ,CACJ,IACH,EACD,UAAa,CACT,KACA,KACH,EACD,OAAU,CACN,KACA,KACA,IACA,KACA,KACA,KACA,KACA,KACA,MACA,KACA,MACA,MACA,OACA,KACA,MACA,KACA,MACA,KACA,MACA,KACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,KACA,MACA,MACA,MACA,OACA,QACA,QACA,QACA,OACA,QACA,QACA,QACA,MACA,MACA,MACA,MACA,QACA,OACH,EACD,WAAc,CACV,MACA,OACA,OACA,GACH,EACD,UAAa,CACT,IACH,EACD,KAAQ,CACJ,IACA,IACH,CACJ,EACD,MAAS,CACL,QAAS,oBACT,gBAAiB,iEACjB,SAAU,qBACV,cAAe,wBACf,mBAAoB,uBACpB,qBAAsB,qBACtB,qBAAsB,+BACtB,0BAA2B,2EAC3B,sBAAuB,0CACvB,SAAU,qBACV,SAAU,qBACV,UAAW,mCACX,WAAc,qBACd,SAAU,2DACV,eAAgB,6BAChB,gBAAiB,MACjB,qBAAsB,qGACtB,cAAe,+EACf,kBAAmB,0IACnB,KAAQ,mCACR,oBAAqB,yBACrB,cAAe,wDACf,WAAY,eACZ,WAAY,uFACZ,cAAe,8NACf,UAAW,gDACX,SAAU,mBACV,aAAc,kJACd,IAAO,qCACP,eAAgB,oCAChB,SAAU,qBACV,WAAY,6CACZ,eAAgB,gDAChB,aAAc,mEACd,gBAAiB,8BACjB,iBAAkB,kBAClB,kBAAmB,yBACnB,WAAY,+CACZ,UAAW,0BACX,iBAAkB,oBAClB,cAAe,QACf,MAAS,gGACT,aAAc,yCACd,mBAAoB,0BACpB,oBAAqB,2BACrB,kBAAmB,wEACnB,WAAc,wBACd,oBAAqB,yCACrB,cAAe,6HACf,kBAAmB,+HACnB,uBAAwB,iCACxB,oBAAqB,2CACrB,yBAA0B,uBAC1B,mBAAoB,mEACpB,wBAAyB,sBACzB,mBAAoB,iFACpB,wBAAyB,6BACzB,uBAAwB,kDACxB,eAAgB,8EAChB,mBAAoB,uCACpB,sBAAuB,UACvB,aAAc,oCACd,QAAS,oBACT,QAAW,2BACX,YAAa,+CACb,eAAgB,iBAChB,gBAAiB,kCACjB,qBAAsB,iBACtB,aAAc,2DACd,eAAgB,sDAChB,+BAAgC,0GAChC,0BAA2B,iWAC3B,2BAA4B,uDAC5B,cAAe,gBACf,iBAAkB,sCAClB,mBAAoB,uLACpB,iBAAkB,qEAClB,mBAAoB,mDACpB,kBAAmB,sBACnB,gBAAiB,wCACjB,4BAA6B,mDAC7B,0BAA2B,kCAC3B,YAAa,wFACb,YAAa,mDACb,eAAgB,iBAChB,QAAS,+CACT,QAAS,oBACT,sBAAuB,8CACvB,cAAe,2BACf,oBAAqB,+BACrB,eAAgB,0FAChB,sBAAuB,0DACvB,2BAA4B,yBAC5B,4BAA6B,gCAC7B,iCAAkC,8BAClC,qBAAsB,iBACtB,YAAa,kBACb,kBAAmB,kIACnB,uBAAwB,6BACxB,iBAAkB,6GAClB,gBAAiB,sBACjB,eAAgB,4EAChB,aAAc,+GACd,wBAAyB,oIACzB,qBAAsB,sBACtB,uBAAwB,gCACxB,uBAAwB,2BACxB,mBAAoB,uDACpB,iBAAkB,mGAClB,eAAgB,6CAChB,eAAgB,2CAChB,SAAY,yKACZ,cAAe,mCACf,YAAa,uFACb,wBAAyB,iDACzB,QAAS,wHACT,SAAU,0HACV,IAAO,mBACP,eAAgB,wBAChB,QAAS,wFACT,UAAW,uBACX,MAAS,gFACT,UAAW,oDACX,cAAe,mCACf,mBAAoB,sDACpB,YAAa,iBACb,aAAc,UACd,qBAAsB,mDACtB,UAAW,+DACX,WAAY,gCACZ,iBAAkB,0BAClB,iBAAkB,8CAClB,sBAAuB,oBACvB,oBAAqB,0DACrB,QAAS,0HACT,UAAW,wBACX,aAAc,yBACd,QAAS,0GACT,WAAY,0BACZ,cAAe,8BACf,oBAAqB,wBACrB,eAAgB,kCAChB,aAAc,0BACd,iBAAkB,gCAClB,aAAc,mEACd,aAAc,6BACd,oBAAqB,sBACrB,oBAAqB,+BACrB,oBAAqB,wEACrB,QAAS,kCACT,aAAc,gJACd,gBAAiB,mFACjB,iBAAkB,6BAClB,cAAe,QACf,eAAgB,+BAChB,WAAY,yBACZ,aAAc,4BACd,QAAS,qBACT,YAAa,6CACb,kBAAmB,uDACnB,6BAA8B,4CAC9B,gBAAiB,2CACjB,kBAAmB,2DACnB,YAAa,wBACb,WAAY,4CACZ,cAAe,iFACf,mBAAoB,iBACpB,aAAc,UACd,aAAc,YACd,UAAW,UACX,WAAY,yBACZ,WAAY,gLACZ,WAAY,uCACZ,QAAS,qBACT,WAAY,2HACZ,QAAS,iCACT,cAAe,wDACf,cAAe,48CACf,mBAAoB,UACpB,YAAa,2BACb,oBAAqB,wBACrB,wBAAyB,8BACzB,0BAA2B,yCAC3B,yBAA0B,mCAC1B,IAAO,uBACP,YAAa,mCACb,oBAAqB,cACrB,iBAAkB,wBAClB,YAAa,gEACb,kBAAmB,oDACnB,uBAAwB,oOACxB,qBAAsB,sBACtB,gBAAiB,wCACjB,YAAa,mDACb,SAAU,oCACV,UAAW,0CACX,gBAAiB,uCACjB,YAAa,uEACb,SAAY,qMACZ,QAAS,iCACT,wBAAyB,yDACzB,0BAA2B,+DAC3B,cAAe,6BACf,MAAS,sDACT,oBAAqB,oFACrB,MAAS,qCACT,QAAS,0DACT,WAAY,kEACZ,oBAAqB,mCACrB,yBAA0B,uBAC1B,gBAAiB,iBACjB,QAAS,iCACT,eAAgB,wDAChB,6BAA8B,2FAC9B,8BAA+B,kFAC/B,8BAA+B,8FAC/B,wBAAyB,6BACzB,QAAS,gKACT,SAAU,oKACV,WAAY,6BACZ,aAAc,gEACd,YAAa,8BACb,YAAa,8BACb,YAAa,8BACb,UAAW,0DACX,oBAAqB,0BACrB,aAAc,kCACd,UAAW,yCACX,YAAa,yCACb,WAAY,oCACZ,WAAY,oCACZ,WAAY,oCACZ,WAAY,kCACZ,SAAY,eACZ,gBAAiB,2DACjB,eAAgB,iDAChB,SAAU,qBACV,SAAU,+CACV,UAAW,4BACX,UAAW,4BACX,UAAW,+BACX,OAAU,kCACV,WAAY,4BACZ,MAAS,oFACT,YAAa,mBACb,iBAAkB,6BAClB,QAAS,oBACT,mBAAoB,sPACpB,6BAA8B,6CAC9B,6BAA8B,+BAC9B,mCAAoC,oBACpC,8BAA+B,iBAC/B,4BAA6B,+CAC7B,oBAAqB,sGACrB,6BAA8B,qBAC9B,KAAQ,4FACR,SAAU,qBACV,gBAAiB,oDACjB,uBAAwB,8DACxB,oBAAqB,8EACrB,qBAAsB,4HACtB,qBAAsB,iEACtB,mBAAoB,yCACpB,gBAAiB,oBACjB,uBAAwB,iCACxB,OAAU,kCACV,QAAS,oBACT,OAAU,yDACV,mBAAoB,yEACpB,oBAAqB,qFACrB,gBAAiB,yEACjB,kBAAmB,sBACnB,sBAAuB,wDACvB,kBAAmB,+DACnB,gBAAiB,0DACjB,aAAc,+DACd,eAAgB,4EAChB,aAAc,sGACd,qBAAsB,qQACtB,iBAAkB,wBAClB,4BAA6B,wBAC7B,cAAe,0DACf,gBAAiB,sEACjB,eAAgB,oCAChB,eAAgB,oCAChB,eAAgB,yBAChB,eAAgB,mKAChB,gBAAiB,6BACjB,QAAS,uDACT,SAAU,6CACV,kBAAmB,2BACnB,aAAc,qCACd,UAAW,6BACX,mBAAoB,mJACpB,0BAA2B,uLAC3B,oCAAqC,qNACrC,oCAAqC,kDACrC,0BAA2B,uLAC3B,oCAAqC,qNACrC,oCAAqC,wIACrC,+BAAgC,0EAChC,gCAAiC,iBACjC,qBAAsB,mTACtB,sBAAuB,67BACvB,gCAAiC,8EACjC,yBAA0B,4GAC1B,qBAAsB,+KACtB,qBAAsB,+NACtB,8BAA+B,yFAC/B,yBAA0B,kFAC1B,0BAA2B,wBAC3B,wBAAyB,gBACzB,0BAA2B,uBAC3B,2BAA4B,yBAC5B,sBAAuB,4DACvB,6BAA8B,iFAC9B,6BAA8B,gDAC9B,sBAAuB,kEACvB,0BAA2B,2FAC3B,IAAO,kBACP,YAAa,YACb,gBAAiB,cACjB,UAAW,oBACX,OAAU,gBACV,iBAAkB,iBAClB,sBAAuB,6FACvB,YAAa,kEACb,gBAAiB,+BACjB,OAAU,sBACV,0BAA2B,yDAC3B,mBAAoB,4DACpB,qBAAsB,iDACtB,+BAAgC,mCAChC,KAAQ,gBACR,aAAc,uEACd,iBAAkB,0FAClB,eAAgB,gNAChB,gBAAiB,0DACjB,4BAA6B,8BAC7B,4BAA6B,+DAC7B,iBAAkB,6BAClB,cAAe,mFACf,6BAA8B,sGAC9B,cAAe,qEACf,0BAA2B,yFAC3B,oBAAqB,oBACrB,qBAAsB,iBACtB,2BAA4B,6CAC5B,MAAS,iEACT,qBAAsB,iBACtB,MAAS,gBACT,cAAe,4BACf,YAAa,4BACb,0BAA2B,+BAC3B,mCAAoC,gCACpC,gBAAiB,0BACjB,6BAA8B,2BAC9B,uBAAwB,qBACxB,8BAA+B,4BAC/B,wBAAyB,sDACzB,wBAAyB,2DACzB,yBAA0B,wCAC1B,2BAA4B,qDAC5B,kBAAmB,sCACnB,iCAAkC,6CAClC,+BAAgC,yBAChC,aAAc,iCACd,mBAAoB,6BACpB,IAAO,gBACP,EAAK,WACL,EAAK,WACL,YAAe,wDACf,mBAAoB,uCACpB,IAAO,8CACP,eAAgB,yCAChB,kBAAmB,iBACnB,wBAAyB,iBACzB,UAAW,yDACX,oBAAqB,yCACrB,wBAAyB,mDACzB,iBAAkB,2DAClB,aAAc,8CACd,YAAa,sBACb,UAAW,4HACX,UAAW,4GACX,cAAe,8BACf,kBAAmB,yFACnB,eAAgB,qCAChB,gBAAiB,gBACjB,cAAe,oCACf,kBAAmB,6FACnB,kBAAmB,+DACnB,wBAAyB,yJACzB,aAAc,2uBACd,gBAAiB,yvBACjB,WAAY,oEACZ,cAAe,yFACf,gBAAiB,2EACjB,cAAe,mDACf,iBAAkB,iBAClB,WAAY,0DACZ,aAAc,sCACd,oBAAqB,oBACrB,kBAAmB,uHACnB,qBAAsB,wDACzB,EACD,WAAc,CACV,MAAO,sBACP,kBAAmB,aACnB,wBAAyB,cACzB,4BAA6B,eAC7B,sBAAuB,YACvB,yBAA0B,gEAC1B,6BAA8B,eAC9B,6BAA8B,eAC9B,wBAAyB,mEACzB,+BAAgC,wEAChC,6BAA8B,2BAC9B,aAAc,WACd,gBAAiB,yBACjB,gBAAiB,yBACjB,mBAAoB,sCACpB,gBAAiB,sCACjB,2BAA4B,YAC5B,4BAA6B,sBAC7B,4BAA6B,qBAC7B,2BAA4B,wBAC5B,gBAAiB,aACjB,qBAAsB,+CACtB,8BAA+B,UAC/B,4BAA6B,UAC7B,2BAA4B,UAC5B,iCAAkC,UAClC,2BAA4B,UAC5B,gCAAiC,UACjC,6BAA8B,UAC9B,4BAA6B,UAC7B,sBAAuB,eACvB,mBAAoB,8GACpB,yBAA0B,gBAC1B,yBAA0B,WAC1B,yBAA0B,gBAC1B,yBAA0B,WAC1B,mBAAoB,cACpB,2BAA4B,6FAC5B,2BAA4B,6FAC5B,uBAAwB,2BACxB,oBAAqB,wDACrB,oBAAqB,wDACrB,yBAA0B,8BAC1B,qBAAsB,+EACtB,mBAAoB,gBACpB,kBAAmB,oBACnB,gBAAiB,oCACjB,kBAAmB,WACnB,mBAAoB,YACpB,kBAAmB,6tDACnB,eAAgB,aAChB,4BAA6B,gBAC7B,0BAA2B,gBAC3B,2BAA4B,gBAC5B,yBAA0B,gBAC1B,0BAA2B,kDAC3B,kBAAmB,gDACnB,+BAAgC,MAChC,oBAAqB,eACrB,cAAe,mCACf,sBAAuB,mDACvB,iCAAkC,mBAClC,kCAAmC,mBACnC,8BAA+B,mBAC/B,+BAAgC,mBAChC,oBAAqB,wBACrB,kBAAmB,aACnB,kBAAmB,mFACnB,kBAAmB,6BACnB,mBAAoB,kCACpB,uBAAwB,eACxB,qBAAsB,kCACtB,qBAAsB,8oCACtB,wBAAyB,8CACzB,8BAA+B,UAC/B,8BAA+B,mBAC/B,8BAA+B,mBAC/B,sBAAuB,+CACvB,qBAAsB,iBACtB,eAAgB,sIAChB,0BAA2B,gBAC3B,oBAAqB,uCACrB,yBAA0B,qBAC1B,qBAAsB,oBACtB,sBAAuB,kCACvB,wBAAyB,cACzB,0BAA2B,2CAC3B,0BAA2B,2CAC3B,sBAAuB,kBACvB,wBAAyB,+BACzB,wBAAyB,+BACzB,oBAAqB,aACrB,6BAA8B,aAC9B,8BAA+B,UAC/B,0BAA2B,UAC3B,sBAAuB,oBACvB,4BAA6B,UAC7B,4BAA6B,WAC7B,wBAAyB,eACzB,sBAAuB,iDACvB,eAAgB,eAChB,gBAAiB,4FACjB,cAAe,4EACf,aAAc,+EACd,eAAgB,+FAChB,IAAO,4CACP,cAAe,uBACf,eAAgB,2BAChB,UAAa,sBACb,wBAAyB,kCACzB,kBAAmB,UACnB,sBAAuB,gCACvB,qBAAsB,UACtB,sBAAuB,gCACvB,4BAA6B,sCAC7B,iBAAkB,2BAClB,uBAAwB,iCACxB,kBAAmB,wDACnB,sBAAuB,2EACvB,wBAAyB,2EACzB,4BAA6B,qBAC7B,qBAAsB,+BACtB,WAAc,oDACd,eAAgB,eAChB,QAAW,8HACX,kBAAmB,8BACnB,sBAAuB,iBACvB,WAAc,mCACd,wBAAyB,gBACzB,wBAAyB,gBACzB,kBAAmB,aACnB,mBAAoB,UACpB,mBAAoB,cACpB,oBAAqB,SACrB,sBAAuB,iBACvB,wBAAyB,gEACzB,wBAAyB,gEACzB,oBAAqB,kBACrB,kBAAmB,aACnB,aAAc,YACd,OAAU,sCACV,eAAgB,sDAChB,qBAAsB,4BACtB,qBAAsB,uBACtB,qBAAsB,uBACtB,mBAAoB,sDACpB,yBAA0B,uBAC1B,yBAA0B,uBAC1B,yBAA0B,uBAC1B,qBAAsB,sDACtB,2BAA4B,uBAC5B,2BAA4B,uBAC5B,2BAA4B,uBAC5B,gBAAiB,sCACjB,sBAAuB,uBACvB,4BAA6B,2BAC7B,6BAA8B,2BAC9B,sBAAuB,eACvB,sBAAuB,eACvB,kBAAmB,oBACnB,eAAgB,eAChB,wBAAyB,2BACzB,0BAA2B,2BAC3B,eAAgB,2JAChB,sBAAuB,2BACvB,sBAAuB,oCACvB,qBAAsB,kCACtB,sBAAuB,eACvB,qBAAsB,2CACtB,gBAAiB,sDACjB,oBAAqB,sDACrB,sBAAuB,4BACvB,sBAAuB,uBACvB,sBAAuB,uBACvB,0BAA2B,uBAC3B,0BAA2B,uBAC3B,0BAA2B,uBAC3B,sBAAuB,sDACvB,4BAA6B,uBAC7B,4BAA6B,uBAC7B,4BAA6B,uBAC7B,cAAe,sCACf,oBAAqB,UACrB,oBAAqB,eACrB,oBAAqB,eACrB,gBAAiB,yDACjB,eAAgB,sCAChB,qBAAsB,UACtB,qBAAsB,eACtB,qBAAsB,eACtB,iBAAkB,qBAClB,0BAA2B,2BAC3B,4BAA6B,2BAC7B,eAAgB,oBAChB,aAAc,sCACd,mBAAoB,UACpB,yBAA0B,2BAC1B,0BAA2B,2BAC3B,mBAAoB,eACpB,mBAAoB,eACpB,eAAgB,oBAChB,OAAU,6BACV,YAAa,oCACb,uBAAwB,cACxB,gBAAiB,yBACjB,WAAY,WACZ,iBAAkB,YAClB,YAAa,kBACb,oBAAqB,YACrB,aAAc,qDACd,WAAY,2BACZ,aAAc,iBACd,aAAc,yBACd,cAAe,uGACf,eAAgB,uGAChB,eAAgB,kDAChB,eAAgB,2DAChB,MAAS,mCACT,cAAe,eACf,cAAe,4BACf,MAAS,+CACT,KAAQ,eACR,YAAa,qDACb,YAAa,kBACb,MAAS,UACT,8BAA+B,sBAC/B,eAAgB,6CAChB,eAAgB,iBAChB,cAAe,2BACf,aAAc,6BACd,cAAe,sEACf,oBAAqB,UACrB,oBAAqB,mBACrB,oBAAqB,mBACrB,cAAe,WACf,eAAgB,gBAChB,QAAW,qCACX,QAAW,kEACX,yBAA0B,+BAC1B,+BAAgC,wBAChC,2BAA4B,wBAC5B,gCAAiC,wBACjC,0BAA2B,wBAC3B,UAAa,6CACb,iBAAkB,uBAClB,iBAAkB,6BAClB,QAAW,gFACX,qBAAsB,sBACtB,oBAAqB,oCACrB,gBAAiB,uEACjB,cAAe,oCACf,OAAU,2cACV,EAAK,wBACL,GAAM,wBACN,GAAM,wBACN,UAAa,UACb,QAAW,qIACX,oBAAqB,mIACrB,cAAe,YACf,eAAgB,gBAChB,KAAQ,UACR,eAAgB,oBAChB,YAAa,kBACb,OAAU,yDACV,KAAQ,wDACR,aAAc,oBACd,iBAAkB,wCAClB,YAAa,oCACb,YAAa,WACb,cAAe,WACf,YAAa,2BACb,MAAS,0CACT,KAAQ,6KACR,cAAe,oCACf,wBAAyB,8BACzB,eAAgB,mBAChB,yBAA0B,kBAC1B,sBAAuB,YACvB,eAAgB,yCAChB,0BAA2B,8BAC3B,YAAa,sDACb,mBAAoB,gFACpB,cAAe,6CACf,eAAgB,0BAChB,aAAc,iCACd,iBAAkB,6CAClB,0BAA2B,YAC3B,4BAA6B,YAC7B,uBAAwB,YACxB,wBAAyB,YACzB,eAAgB,6kBAChB,0BAA2B,oPAC3B,oBAAqB,oFACrB,0BAA2B,wEAC3B,qBAAsB,4BACtB,yBAA0B,kHAC1B,uBAAwB,+GACxB,wBAAyB,mBACzB,cAAe,wCACf,sBAAuB,YACvB,IAAO,8BACP,KAAQ,4JACR,YAAa,mCACb,oBAAqB,gBACrB,iBAAkB,sBAClB,iBAAkB,gBAClB,cAAe,+BACf,kBAAmB,cACnB,kBAAmB,sBACnB,oBAAqB,cACrB,WAAY,wCACZ,WAAY,+BACZ,eAAgB,cAChB,eAAgB,sBAChB,iBAAkB,cAClB,gBAAiB,6IACjB,sBAAuB,iBACvB,wBAAyB,gEACzB,qBAAsB,gEACtB,sBAAuB,4CACvB,OAAU,iIACV,sBAAuB,gBACvB,wBAAyB,wBACzB,QAAW,mBACX,oBAAqB,qCACrB,kBAAmB,2FACnB,mBAAoB,oCACpB,WAAY,uCACZ,iBAAkB,+BAClB,uBAAwB,wCACxB,cAAe,YACf,iBAAkB,YAClB,MAAS,eACT,aAAc,oBACd,cAAe,eACf,kBAAmB,UACnB,oBAAqB,UACrB,eAAgB,eAChB,mBAAoB,UACpB,qBAAsB,UACtB,UAAa,eACb,kBAAmB,qFACnB,gBAAiB,0HACjB,eAAgB,4FAChB,iBAAkB,wFAClB,KAAQ,6BACR,iBAAkB,6BAClB,aAAc,oCACd,aAAc,iBACd,cAAe,wCACf,mBAAoB,WACpB,aAAc,qEACd,mBAAoB,eACpB,sBAAuB,iBACvB,kBAAmB,gCACnB,OAAU,oCACV,eAAgB,uBAChB,mBAAoB,kBACpB,qBAAsB,kBACtB,gBAAiB,6BACjB,gBAAiB,uBACjB,oBAAqB,kBACrB,sBAAuB,kBACvB,cAAe,6BACf,eAAgB,6BAChB,aAAc,6BACd,cAAe,mBACf,OAAU,aACV,aAAc,aACd,aAAc,aACd,eAAgB,aAChB,KAAQ,gBACR,cAAe,sJACf,mBAAoB,kBACpB,qBAAsB,2BACtB,qBAAsB,oCACtB,oBAAqB,iCACrB,qBAAsB,eACtB,oBAAqB,2CACrB,YAAa,4BACb,iBAAkB,0BAClB,aAAc,oBACd,YAAa,kBACb,cAAe,kBACf,gBAAiB,cACjB,cAAe,kBACf,YAAa,aACb,YAAa,kBACb,oBAAqB,wCACrB,aAAc,sCACd,aAAc,iBACd,aAAc,iBACd,iBAAkB,gBAClB,aAAc,+HACd,kBAAmB,gBACnB,YAAa,iBACb,YAAa,+HACb,iBAAkB,gBAClB,aAAc,iIACd,kBAAmB,gBACnB,YAAa,iIACb,iBAAkB,4BAClB,aAAc,qCACd,kBAAmB,aACnB,OAAU,8GACV,gBAAiB,kBACjB,kBAAmB,sBACnB,cAAe,kCACf,kBAAmB,yBACnB,gBAAiB,0BACjB,QAAW,gBACX,MAAS,YACT,QAAW,YACX,QAAW,4DACX,gBAAiB,eACjB,iBAAkB,WAClB,gBAAiB,wBACjB,gBAAiB,eACjB,SAAY,kEACZ,kBAAmB,YACnB,iBAAkB,kCAClB,oBAAqB,0BACrB,uBAAwB,+BACxB,kBAAmB,kCACnB,gBAAiB,6BACjB,aAAc,kCACd,aAAc,kCACd,QAAW,YACX,sBAAuB,2BACvB,4BAA6B,oBAC7B,6BAA8B,oBAC9B,wBAAyB,oBACzB,wBAAyB,oBACzB,QAAW,+BACX,gBAAiB,wBACjB,oBAAqB,mBACrB,sBAAuB,mBACvB,iBAAkB,wBAClB,iBAAkB,wBAClB,qBAAsB,mBACtB,uBAAwB,mBACxB,eAAgB,wBAChB,gBAAiB,wBACjB,cAAe,wBACf,KAAQ,sBACR,mBAAoB,2CACpB,oBAAqB,2CACrB,oBAAqB,aACrB,cAAe,iCACf,YAAe,gBACf,qBAAsB,aACtB,gBAAiB,yCACjB,cAAe,qCACf,aAAc,mCACd,iBAAkB,6FAClB,SAAY,uDACZ,kBAAmB,mBACnB,eAAgB,qDAChB,yBAA0B,2DAC1B,qBAAsB,oBACtB,sBAAuB,uDACvB,qBAAsB,gBACtB,OAAU,iCACV,EAAK,wBACL,OAAU,6CACV,MAAS,6BACT,OAAU,4CACV,UAAW,6BACX,aAAc,0CACd,aAAc,yBACd,gBAAiB,4CACjB,GAAM,wBACN,GAAM,wBACN,MAAS,qBACT,kBAAmB,kBACnB,mBAAoB,2BACpB,kBAAmB,iBACnB,kBAAmB,cACnB,gBAAiB,gBACjB,sBAAuB,gBACvB,4BAA6B,WAC7B,0BAA2B,WAC3B,uBAAwB,WACxB,uBAAwB,gBACxB,6BAA8B,WAC9B,2BAA4B,WAC5B,qBAAsB,WACtB,sBAAuB,WACvB,oBAAqB,WACrB,iBAAkB,kCAClB,uBAAwB,kCACxB,6BAA8B,2BAC9B,2BAA4B,2BAC5B,wBAAyB,2BACzB,wBAAyB,kCACzB,8BAA+B,2BAC/B,4BAA6B,2BAC7B,sBAAuB,2BACvB,uBAAwB,2BACxB,qBAAsB,2BACtB,oBAAqB,+BACrB,yBAA0B,mBAC1B,0BAA2B,aAC3B,uBAAwB,qCACxB,uBAAwB,qCACxB,mBAAoB,gBACpB,mBAAoB,sDACpB,qBAAsB,2BACtB,qBAAsB,2BACtB,kBAAmB,wDACnB,uBAAwB,sBACxB,uBAAwB,yBACxB,wBAAyB,gBACzB,eAAgB,sBAChB,gBAAiB,4CACjB,kBAAmB,mDACnB,WAAY,qBACZ,eAAgB,aAChB,aAAc,mDACd,kBAAmB,2CACnB,cAAe,mBACf,uBAAwB,+BACxB,kBAAmB,gHACnB,wBAAyB,UACzB,uBAAwB,+EACxB,uBAAwB,oFACxB,2BAA4B,gBAC5B,wBAAyB,kCACzB,4BAA6B,uCAC7B,gBAAiB,mDACjB,sBAAuB,UACvB,yBAA0B,6BAC1B,sBAAuB,4EACvB,cAAe,4CACf,eAAgB,uCAChB,mBAAoB,yBACpB,gBAAiB,gCACjB,iBAAkB,2DAClB,cAAe,mBACf,mBAAoB,yBACpB,oBAAqB,kEACrB,iBAAkB,gEAClB,wBAAyB,6BACzB,0BAA2B,uCAC3B,YAAa,oCACb,iBAAkB,mBAClB,kBAAmB,6BACnB,iBAAkB,uBAClB,IAAO,6BACP,eAAgB,2FAChB,UAAa,wBACb,gBAAiB,sDACjB,mBAAoB,kJACpB,kBAAmB,mBACnB,WAAc,uBACd,sBAAuB,+BACvB,mBAAoB,UACpB,sBAAuB,UACvB,sBAAuB,qCACvB,6BAA8B,qBAC9B,UAAa,4DACb,eAAgB,6KAChB,cAAe,6BACf,gBAAiB,uEACjB,iBAAkB,kFAClB,gBAAiB,oDACjB,qBAAsB,sBACtB,sBAAuB,qCACvB,qBAAsB,uBACtB,uBAAwB,sBACxB,WAAc,0BACd,cAAe,mHACf,uBAAwB,yEACxB,OAAU,YACV,MAAS,iIACT,cAAe,8BACf,aAAc,mDACd,eAAgB,kBAChB,YAAa,oBACb,eAAgB,mFAChB,EAAK,wBACL,EAAK,wBACL,UAAW,iBACX,KAAQ,qCACR,uBAAwB,iBACxB,gCAAiC,gCACjC,iCAAkC,iCAClC,6BAA8B,6BAC9B,8BAA+B,iCAC/B,oCAAqC,iBACrC,0BAA2B,iBAC3B,mBAAoB,0BACpB,iBAAkB,oCAClB,sBAAuB,yCACvB,qBAAsB,8CACtB,oBAAqB,kBACrB,gBAAiB,sCACjB,iBAAkB,YAClB,oBAAqB,gBACrB,0BAA2B,iBAC3B,yBAA0B,2BAC1B,wBAAyB,2BACzB,qBAAsB,2BACtB,2BAA4B,iCAC5B,0BAA2B,uCAC3B,6BAA8B,oBAC9B,8BAA+B,oBAC/B,8BAA+B,oBAC/B,yBAA0B,6CAC1B,yBAA0B,iFAC1B,6BAA8B,gBAC9B,wBAAyB,0BACzB,oBAAqB,oBACrB,sBAAuB,qBACvB,qBAAsB,mIACtB,iBAAkB,kCAClB,SAAY,SACZ,IAAO,gCACP,YAAa,wBACb,aAAc,wBACd,+BAAgC,UAChC,6BAA8B,UAC9B,QAAW,oBACX,MAAS,oCACT,cAAe,iDACf,eAAgB,iDAChB,KAAQ,kCACR,aAAc,iDACd,cAAe,iDACf,IAAO,yDACP,MAAS,oBACT,WAAY,iEACZ,OAAU,UACV,mBAAoB,wBACpB,oBAAqB,eACrB,iBAAkB,oBAClB,kBAAmB,oBACnB,oBAAqB,0BACrB,iBAAkB,oBAClB,eAAgB,eAChB,gBAAiB,YACjB,gBAAiB,kDACjB,iBAAkB,cAClB,eAAgB,gFAChB,cAAe,iGACf,cAAe,iGACf,aAAc,wDACd,eAAgB,sCAChB,eAAgB,uDAChB,mBAAoB,oDACpB,gBAAiB,sBACpB,EACD,QAAW,CACP,QAAW,CACP,QAAW,WACX,YAAe,IAClB,EACD,gBAAiB,CACb,QAAW,uBACX,YAAe,CACX,mBAAoB,yBACpB,SAAY,uBACZ,SAAY,qBACZ,IAAO,sBACP,OAAU,WACV,MAAS,kCACT,WAAY,4DACZ,OAAU,WACV,QAAW,YACX,OAAU,+FACb,CACJ,EACD,SAAY,CACR,QAAW,mGACX,YAAe,IAClB,EACD,sBAAuB,CACnB,QAAW,iBACX,YAAe,CACX,eAAgB,6BAChB,cAAe,iBACf,kBAAmB,0CACtB,CACJ,EACD,YAAa,CACT,QAAW,KACX,YAAe,CACX,kBAAmB,sBACnB,mBAAoB,sBACpB,eAAgB,sCAChB,cAAe,gBACf,wBAAyB,8BACzB,0BAA2B,8BAC3B,eAAgB,+BAChB,aAAc,qCACd,cAAe,8BACf,oBAAqB,sBACrB,cAAe,eACf,IAAO,yDACP,gBAAiB,WACpB,CACJ,EACD,sBAAuB,CACnB,QAAW,iBACX,YAAe,IAClB,EACD,OAAU,CACN,QAAW,0HACX,YAAe,IAClB,EACD,UAAa,CACT,QAAW,mBACX,YAAe,IAClB,EACD,MAAS,CACL,QAAW,gCACX,YAAe,IAClB,EACD,MAAS,CACL,QAAW,qBACX,YAAe,IAClB,EACD,UAAa,CACT,QAAW,uCACX,YAAe,IAClB,EACD,KAAQ,CACJ,QAAW,uBACX,YAAe,CACX,MAAS,gBACT,MAAS,qBACT,mBAAoB,mCACpB,KAAQ,wDACX,CACJ,EACD,eAAgB,CACZ,QAAW,iBACX,YAAe,CACX,IAAO,UACP,KAAQ,WACR,OAAU,aACV,MAAS,YACT,oBAAqB,wBACrB,kBAAmB,sBACnB,qBAAsB,yBACtB,mBAAoB,uBACpB,cAAe,kBACf,eAAgB,mBAChB,MAAS,YACT,aAAc,iBACd,cAAe,kBACf,gBAAiB,oBACjB,eAAgB,mBAChB,qBAAsB,yBACtB,mBAAoB,uBACpB,sBAAuB,0BACvB,oBAAqB,wBACrB,OAAU,aACV,eAAgB,mBAChB,gBAAiB,oBACjB,MAAS,YACT,OAAU,aACV,YAAa,gBACb,aAAc,iBACd,YAAa,gBACb,aAAc,iBACd,aAAc,iBACd,cAAe,kBACf,iBAAkB,qBAClB,kBAAmB,sBACnB,iBAAkB,qBAClB,kBAAmB,sBACnB,aAAc,+BACd,eAAgB,gCACnB,CACJ,EACD,SAAY,CACR,QAAW,yBACX,YAAe,CACX,OAAU,WACV,SAAY,aACZ,gBAAiB,sBACpB,CACJ,EACD,MAAS,CACL,QAAW,6CACX,YAAe,IAClB,EACD,iBAAkB,CACd,QAAW,KACX,YAAe,IAClB,EACD,SAAY,CACR,QAAW,uBACX,YAAe,IAClB,EACD,UAAa,CACT,QAAW,4CACX,YAAe,IAClB,EACD,KAAQ,CACJ,QAAW,0BACX,YAAe,IAClB,CACJ,CACL,ECxwCMxW,GAAW,GACXC,GAAc,GACd3T,GAAI,IACJua,GAAgB,GAChBC,GAAa,GAEnB,SAASI,GAAatc,EAAQwc,EAAc,CACxC,IAAI9Y,EAAM,KAAK,WAAa1D,EAC5B,MAAM5B,EAAO,KAAK,WAAWsF,CAAG,EAShC,KAPItF,IAASgX,IAAYhX,IAASiX,MAC1BmH,GACA,KAAK,MAAM,4BAA4B,EAE3C9Y,KAGGA,EAAM,KAAK,SAAUA,IACnBvF,GAAQ,KAAK,WAAWuF,CAAG,CAAC,GAC7B,KAAK,MAAM,sBAAuBA,CAAG,CAGjD,CAEA,SAASmoB,GAAoBrP,EAAc,CACvC,OAAOF,GAAa,KAAK,KAAM,EAAGE,CAAY,CAClD,CAEA,SAASsP,GAAe9rB,EAAQ5B,EAAM,CAClC,GAAI,CAAC,KAAK,QAAQ,KAAK,WAAa4B,EAAQ5B,CAAI,EAAG,CAC/C,IAAI2tB,EAAM,GAEV,OAAQ3tB,EAAI,CACR,KAAKsD,GACDqqB,EAAM,gBACN,MACJ,KAAK1W,GACD0W,EAAM,0BACN,KACP,CAED,KAAK,MAAMA,EAAK,KAAK,WAAa/rB,CAAM,CAC3C,CACL,CAIA,SAASyc,IAAW,CAChB,IAAIzc,EAAS,EACTiB,EAAO,EACPoC,EAAO,KAAK,UAEhB,KAAOA,IAAS/F,GAAc+F,IAASnF,GACnCmF,EAAO,KAAK,WAAW,EAAErD,CAAM,EAGnC,GAAIqD,IAASlG,EACT,GAAI,KAAK,QAAQiY,GAAUpV,CAAM,GAC7B,KAAK,QAAQqV,GAAarV,CAAM,EAAG,CACnCiB,EAAO,KAAK,QAAQmU,GAAUpV,CAAM,EAAIoV,GAAWC,GAEnD,GACIhS,EAAO,KAAK,WAAW,EAAErD,CAAM,QAC1BqD,IAAS/F,GAAc+F,IAASnF,GAErCmF,IAASlG,IACT,KAAK,KAAK6C,CAAM,EAChB6rB,GAAoB,KAAK,KAAM5P,EAAa,EAE5D,KACY,QAAO,KAIf,OAAIjc,EAAS,GACT,KAAK,KAAKA,CAAM,EAGhBiB,IAAS,IACToC,EAAO,KAAK,WAAW,KAAK,UAAU,EAClCA,IAAS+R,IAAY/R,IAASgS,IAC9B,KAAK,MAAM,yBAAyB,GAI5CwW,GAAoB,KAAK,KAAM5qB,IAAS,CAAC,EAClCA,IAASoU,GAAc,IAAM,KAAK,QAAQlY,CAAM,EAAI,KAAK,QAAQA,CAAM,CAClF,CAGO,MAAMkK,GAAO,UACP6P,GAAY,CACrB,EAAG,CAAC,OAAQ,IAAI,EAChB,EAAG,CAAC,OAAQ,IAAI,CACpB,EAEO,SAAS6L,IAAQ,CAEpB,MAAMziB,EAAQ,KAAK,WACnB,IAAIiiB,EAAI,KACJC,EAAI,KAGR,GAAI,KAAK,YAAcrlB,EACnB0uB,GAAoB,KAAK,KAAM3P,EAAU,EACzCsG,EAAI,KAAK,QAAQrlB,CAAM,UAQlB,KAAK,YAAcT,GAAS,KAAK,QAAQ,KAAK,WAAY2Y,EAAW,EAK1E,OAJAkN,EAAI,KAEJuJ,GAAe,KAAK,KAAM,EAAGpqB,EAAC,EAEtB,KAAK,SAAW,KAAK,WAAU,CAInC,IAAK,GACD,KAAK,KAAI,EACT8gB,EAAI/F,GAAS,KAAK,IAAI,EACtB,MAGJ,IAAK,GACDqP,GAAe,KAAK,KAAM,EAAGzW,EAAW,EAExC,KAAK,KAAI,EACT,KAAK,OAAM,EAEXwW,GAAoB,KAAK,KAAM5P,EAAa,EAE5CuG,EAAI,IAAM,KAAK,QAAQrlB,CAAM,EAC7B,MAGJ,QACI2uB,GAAe,KAAK,KAAM,EAAGzW,EAAW,EACxCiH,GAAa,KAAK,KAAM,EAAGL,EAAa,EACxC,KAAK,KAAI,EAETuG,EAAI,KAAK,eAAeliB,EAAQ,CAAC,CACxC,SAQI,KAAK,YAAc5D,GAAU,KAAK,QAAQ0Y,EAAQ,GAAK,KAAK,WAAW,CAAC,IAAM1Y,EAAQ,CAC3F,IAAIuE,EAAO,EAWX,OAVAshB,EAAI,IAGA,KAAK,QAAQnN,EAAQ,IACrBnU,EAAO,EACP,KAAK,KAAI,GAGb6qB,GAAe,KAAK,KAAM,EAAGpqB,EAAC,EAEtB,KAAK,SAAW,KAAK,WAAU,CAInC,IAAK,GACD,KAAK,KAAI,EACT8gB,EAAI/F,GAAS,KAAK,IAAI,EACtB,MAGJ,IAAK,GACDqP,GAAe,KAAK,KAAM,EAAGzW,EAAW,EAExC,KAAK,KAAI,EACT,KAAK,OAAM,EAEXwW,GAAoB,KAAK,KAAM5P,EAAa,EAE5CuG,EAAI,IAAM,KAAK,QAAQrlB,CAAM,EAC7B,MAGJ,QACI2uB,GAAe,KAAK,KAAM,EAAGzW,EAAW,EACxCiH,GAAa,KAAK,KAAM,EAAGL,EAAa,EACxC,KAAK,KAAI,EAETuG,EAAI,KAAK,eAAeliB,EAAQW,EAAO,CAAC,CAC/C,CACJ,SAOQ,KAAK,YAAc5D,EAAW,CACnC,MAAMe,EAAO,KAAK,WAAW,KAAK,UAAU,EACtC6C,EAAO7C,IAASgX,IAAYhX,IAASiX,GAC3C,IAAIzV,EAAI,KAAK,WAAaqB,EAE1B,KAAOrB,EAAI,KAAK,UACPzB,GAAQ,KAAK,WAAWyB,CAAC,CAAC,EADTA,IACtB,CAKAA,IAAM,KAAK,WAAaqB,GACxB,KAAK,MAAM,sBAAuB,KAAK,WAAaA,CAAI,EAG5D6qB,GAAe,KAAK,KAAMlsB,EAAI,KAAK,WAAY8B,EAAC,EAChD6gB,EAAI,KAAK,UAAUjiB,EAAOV,CAAC,EAKvBA,EAAI,IAAM,KAAK,UACf,KAAK,KAAI,EACT4iB,EAAI/F,GAAS,KAAK,IAAI,IAEtBqP,GAAe,KAAK,KAAMlsB,EAAI,KAAK,WAAa,EAAGyV,EAAW,EAG1DzV,EAAI,IAAM,KAAK,UACf,KAAK,KAAI,EACT,KAAK,OAAM,EACXisB,GAAoB,KAAK,KAAM5P,EAAa,EAC5CuG,EAAI,IAAM,KAAK,QAAQrlB,CAAM,IAI7Bmf,GAAa,KAAK,KAAM1c,EAAI,KAAK,WAAa,EAAGqc,EAAa,EAC9D,KAAK,KAAI,EACTuG,EAAI,KAAK,eAAe5iB,EAAI,CAAC,GAG7C,MACQ,KAAK,MAAK,EAGd,OAAI2iB,IAAM,MAAQA,EAAE,WAAW,CAAC,IAAMnN,KAClCmN,EAAIA,EAAE,OAAO,CAAC,GAGdC,IAAM,MAAQA,EAAE,WAAW,CAAC,IAAMpN,KAClCoN,EAAIA,EAAE,OAAO,CAAC,GAGX,CACH,KAAM,UACN,IAAK,KAAK,YAAYliB,EAAO,KAAK,UAAU,EAC5C,EAAAiiB,EACA,EAAAC,CACR,CACA,CAEO,SAASxI,GAASznB,EAAM,CAC3B,GAAIA,EAAK,EAAG,CACR,MAAMgwB,EACFhwB,EAAK,IAAM,MAAQ,KACnBA,EAAK,IAAO,KAAO,KACnBA,EAAK,IAAM,MAAQ,MACnBA,EAAK,EAAI,IAEb,GAAIA,EAAK,EAAG,CACR,MAAMiwB,EAAIjwB,EAAK,EAAE,CAAC,IAAM,KAAOA,EAAK,EAAE,CAAC,IAAM,IACvCA,EAAK,EACL,IAAMA,EAAK,EACjB,KAAK,SAASgwB,EAAIC,CAAC,CAC/B,MACY,KAAK,SAASD,CAAC,CAE3B,MACQ,KAAK,SAAShwB,EAAK,CAAC,CAE5B,+IC5RA,SAASy5B,IAAa,CAClB,OAAO,KAAK,IAAI,KAAK,wCAAyC,EAAI,CACtE,CAEA,SAASC,IAA2B,CAChC,QAASjsB,EAAS,EAAGqD,EAAMA,EAAO,KAAK,WAAWrD,CAAM,EAAGA,IAAU,CACjE,GAAIqD,IAASpF,GACT,MAAO,GAGX,GAAIoF,IAASrF,GACTqF,IAASzG,EACT,MAAO,EAEd,CAED,MAAO,EACX,CAGO,MAAMyK,GAAO,SACP6kB,GAAc,SACdhV,GAAY,CACrB,KAAM,OACN,QAAS,CAAC,gBAAiB,MAAO,IAAI,EACtC,MAAO,CAAC,QAAS,IAAI,CACzB,EAEO,SAAS6L,GAAMoJ,EAAgB,GAAO,CACzC,MAAM7rB,EAAQ,KAAK,WACnB,IAAI+G,EACA+kB,EACAxC,EAAU,KACVyC,EAAQ,KAqBZ,OAnBA,KAAK,IAAIzvB,CAAS,EAElByK,EAAO,KAAK,eAAe/G,EAAQ,CAAC,EACpC8rB,EAAgB/kB,EAAK,cACrB,KAAK,OAAM,EAGP,KAAK,MAAQ,IACb,KAAK,YAAcrJ,GACnB,KAAK,YAAcN,KACf,KAAK,mBACLksB,EAAU,KAAK,kBAAkB,KAAK,cAAc,KAAK,KAAMviB,EAAM8kB,CAAa,EAAGH,EAAU,EAE/FpC,EAAUoC,GAAW,KAAK,KAAM,KAAK,UAAU,EAGnD,KAAK,OAAM,GAGP,KAAK,UAAS,CAClB,KAAKtuB,GACD,KAAK,KAAI,EACT,MAEJ,KAAKM,EACD,KAAK,IAAIA,CAAgB,EAErB,eAAe,KAAK,KAAK,OAAQouB,CAAa,GAC9C,OAAO,KAAK,OAAOA,CAAa,EAAE,OAAU,WAC5CC,EAAQ,KAAK,OAAOD,CAAa,EAAE,MAAM,KAAK,KAAMD,CAAa,EAGjEE,EAAQ,KAAK,MAAMJ,GAAyB,KAAK,IAAI,CAAC,EAGrD,KAAK,KACN,KAAK,IAAIhuB,EAAiB,EAG9B,KACP,CAED,MAAO,CACH,KAAM,SACN,IAAK,KAAK,YAAYqC,EAAO,KAAK,UAAU,EAC5C,KAAA+G,EACA,QAAAuiB,EACA,MAAAyC,CACR,CACA,CAEO,SAASrS,GAASznB,EAAM,CAC3B,KAAK,MAAMqK,EAAW,IAAMrK,EAAK,IAAI,EAEjCA,EAAK,UAAY,MACjB,KAAK,KAAKA,EAAK,OAAO,EAGtBA,EAAK,OACL,KAAK,MAAMyL,EAAkB,GAAG,EAChC,KAAK,KAAKzL,EAAK,KAAK,EACpB,KAAK,MAAM0L,GAAmB,GAAG,GAEjC,KAAK,MAAMP,GAAW,GAAG,CAEjC,8JCtGa2J,GAAO,gBACP6kB,GAAc,gBACdhV,GAAY,CACrB,SAAU,CAAC,CAAA,CAAE,CACjB,EAEO,SAAS6L,GAAM1b,EAAM,CACxB,IAAIoB,EAAW,KAEf,OAAIpB,IAAS,OACTA,EAAOA,EAAK,eAGhB,KAAK,OAAM,EAEP,eAAe,KAAK,KAAK,OAAQA,CAAI,GACrC,OAAO,KAAK,OAAOA,CAAI,EAAE,SAAY,WAErCoB,EAAW,KAAK,OAAOpB,CAAI,EAAE,QAAQ,KAAK,IAAI,EAG9CoB,EAAW,KAAK,aAAa,KAAK,MAAM,aAAa,EAGzD,KAAK,OAAM,EAEP,KAAK,MAAQ,IACb,KAAK,YAAczK,GACnB,KAAK,YAAcN,IACnB,KAAK,MAAM,gCAAgC,EAGxC,CACH,KAAM,gBACN,IAAK,KAAK,oBAAoB+K,CAAQ,EACtC,SAAAA,CACR,CACA,CAEO,SAASuR,GAASznB,EAAM,CAC3B,KAAK,SAASA,CAAI,CACtB,8JCtCM+5B,GAAa,GACbhM,GAAW,GACXiM,GAAa,GACbC,GAAmB,GACnB1L,GAAe,IACf2L,GAAQ,IAEd,SAASC,IAAmB,CACpB,KAAK,KACL,KAAK,MAAM,yBAAyB,EAGxC,MAAMpsB,EAAQ,KAAK,WACnB,IAAIqsB,EAAc,GAElB,OAAI,KAAK,QAAQrM,EAAQ,GACrBqM,EAAc,GACd,KAAK,KAAI,GACD,KAAK,QAAQ7L,EAAY,GACjC,KAAK,IAAIpkB,CAAK,EAGd,KAAK,QAAQokB,EAAY,EACrB,KAAK,WAAW,KAAK,WAAa,CAAC,IAAMyL,IACzC,KAAK,KAAI,EACT,KAAK,IAAI7vB,CAAK,GACPiwB,GACP,KAAK,MAAM,yBAA0B,KAAK,QAAQ,EAE/CA,GACP,KAAK,MAAM,2BAA2B,EAGnC,CACH,KAAM,aACN,IAAK,KAAK,YAAYrsB,EAAO,KAAK,UAAU,EAC5C,KAAM,KAAK,eAAeA,CAAK,CACvC,CACA,CAEA,SAASssB,IAAc,CACnB,MAAMtsB,EAAQ,KAAK,WACblC,EAAO,KAAK,WAAWkC,CAAK,EAElC,OAAIlC,IAASmuB,IACTnuB,IAASquB,IACTruB,IAASouB,IACTpuB,IAASkuB,IACTluB,IAASkiB,IACTliB,IAAS0iB,IAET,KAAK,MAAM,wDAAwD,EAGvE,KAAK,KAAI,EAEL1iB,IAASmuB,KACJ,KAAK,QAAQA,EAAU,GACxB,KAAK,MAAM,wBAAwB,EAGvC,KAAK,KAAI,GAGN,KAAK,eAAejsB,CAAK,CACpC,CAIO,MAAM+G,GAAO,oBACP6P,GAAY,CACrB,KAAM,aACN,QAAS,CAAC,OAAQ,IAAI,EACtB,MAAO,CAAC,SAAU,aAAc,IAAI,EACpC,MAAO,CAAC,OAAQ,IAAI,CACxB,EAEO,SAAS6L,IAAQ,CACpB,MAAMziB,EAAQ,KAAK,WACnB,IAAI+G,EACAwlB,EAAU,KACVv8B,EAAQ,KACRw8B,EAAQ,KAEZ,YAAK,IAAIlvB,EAAiB,EAC1B,KAAK,OAAM,EAEXyJ,EAAOqlB,GAAiB,KAAK,IAAI,EACjC,KAAK,OAAM,EAEP,KAAK,YAAc7uB,KAEf,KAAK,YAAcnB,IACnBmwB,EAAUD,GAAY,KAAK,IAAI,EAE/B,KAAK,OAAM,EAEXt8B,EAAQ,KAAK,YAAcklB,GACrB,KAAK,OAAQ,EACb,KAAK,WAAU,EAErB,KAAK,OAAM,GAIX,KAAK,YAAc9Y,IACnBowB,EAAQ,KAAK,QAAQpwB,CAAK,EAE1B,KAAK,OAAM,IAInB,KAAK,IAAImB,EAAkB,EAEpB,CACH,KAAM,oBACN,IAAK,KAAK,YAAYyC,EAAO,KAAK,UAAU,EAC5C,KAAA+G,EACA,QAAAwlB,EACA,MAAAv8B,EACA,MAAAw8B,CACR,CACA,CAEO,SAAS9S,GAASznB,EAAM,CAC3B,KAAK,MAAM2K,EAAO,GAAG,EACrB,KAAK,KAAK3K,EAAK,IAAI,EAEfA,EAAK,UAAY,OACjB,KAAK,SAASA,EAAK,OAAO,EAC1B,KAAK,KAAKA,EAAK,KAAK,GAGpBA,EAAK,QAAU,MACf,KAAK,MAAMmK,EAAOnK,EAAK,KAAK,EAGhC,KAAK,MAAM2K,EAAO,GAAG,CACzB,+IC1IMgjB,GAAY,GAElB,SAAS8L,IAAa,CAClB,OAAO,KAAK,IAAI,KAAM,EAAI,CAC9B,CACA,SAASe,IAAc,CACnB,OAAO,KAAK,kBAAkB,KAAK,KAAMf,EAAU,CACvD,CACA,SAASgB,IAAwB,CAC7B,OAAO,KAAK,IAAI,KAAK,8BAA+B,EAAI,CAC5D,CACA,SAASC,IAAqB,CAC1B,GAAI,KAAK,YAAcvvB,GACnB,OAAOsvB,GAAsB,KAAK,KAAM,KAAK,UAAU,EAG3D,MAAMz6B,EAAO,KAAK,kBAAkB,KAAK,YAAay6B,EAAqB,EAE3E,OAAI,KAAK,YAActvB,IACnB,KAAK,KAAI,EAGNnL,CACX,CAEO,MAAM8U,GAAO,QACP6kB,GAAc,QACdhV,GAAY,CACrB,SAAU,CAAC,CACP,SACA,OACA,aACR,CAAK,CACL,EAEO,SAAS6L,GAAMmK,EAAc,CAChC,MAAMnjB,EAAWmjB,EAAeD,GAAqBF,GAC/CzsB,EAAQ,KAAK,WACnB,IAAImI,EAAW,KAAK,aAEpB0V,EACA,KAAO,CAAC,KAAK,KACT,OAAQ,KAAK,UAAS,CAClB,KAAKlgB,GACD,MAAMkgB,EAEV,KAAK7gB,EACL,KAAKY,EACD,KAAK,KAAI,EACT,MAEJ,KAAKtB,EACD6L,EAAS,KAAK,KAAK,kBAAkB,KAAK,OAAO,KAAK,KAAMykB,CAAY,EAAGlB,EAAU,CAAC,EACtF,MAEJ,QACQkB,GAAgB,KAAK,QAAQhN,EAAS,EACtCzX,EAAS,KAAKskB,GAAY,KAAK,IAAI,CAAC,EAEpCtkB,EAAS,KAAKsB,EAAS,KAAK,IAAI,CAAC,CAE5C,CAGL,MAAO,CACH,KAAM,QACN,IAAK,KAAK,YAAYzJ,EAAO,KAAK,UAAU,EAC5C,SAAAmI,CACR,CACA,CAEO,SAASuR,GAASznB,EAAM,CAC3B,KAAK,SAASA,EAAMiU,GAAQ,CACpBA,EAAK,OAAS,eACd,KAAK,MAAM9I,GAAW,GAAG,CAErC,CAAK,CACL,8JC/Ea2J,GAAO,WACP6P,GAAY,CACrB,SAAU,CAAC,CAAA,CAAE,CACjB,EAEO,SAAS6L,GAAMxa,EAAcC,EAAY,CAC5C,MAAMlI,EAAQ,KAAK,WACnB,IAAImI,EAAW,KAEf,YAAK,IAAI7K,EAAiB,EAE1B6K,EAAWF,EAAa,KAAK,KAAMC,CAAU,EAExC,KAAK,KACN,KAAK,IAAI3K,EAAkB,EAGxB,CACH,KAAM,WACN,IAAK,KAAK,YAAYyC,EAAO,KAAK,UAAU,EAC5C,SAAAmI,CACR,CACA,CAEO,SAASuR,GAASznB,EAAM,CAC3B,KAAK,MAAM2K,EAAO,GAAG,EACrB,KAAK,SAAS3K,CAAI,EAClB,KAAK,MAAM2K,EAAO,GAAG,CACzB,+IChCamK,GAAO,MACP6P,GAAY,CAAA,EAElB,SAAS6L,IAAQ,CACpB,MAAMziB,EAAQ,KAAK,WAEnB,YAAK,IAAI9C,EAAG,EAEL,CACH,KAAM,MACN,IAAK,KAAK,YAAY8C,EAAO,KAAK,UAAU,CACpD,CACA,CAEO,SAAS0Z,IAAW,CACvB,KAAK,MAAMxc,GAAK,KAAK,CACzB,+IChBa6J,GAAO,MACP6P,GAAY,CAAA,EAElB,SAAS6L,IAAQ,CACpB,MAAMziB,EAAQ,KAAK,WAEnB,YAAK,IAAI/C,EAAG,EAEL,CACH,KAAM,MACN,IAAK,KAAK,YAAY+C,EAAO,KAAK,UAAU,CACpD,CACA,CAEO,SAAS0Z,IAAW,CACvB,KAAK,MAAMzc,GAAK,MAAM,CAC1B,+IChBM4vB,GAAW,GAGJ9lB,GAAO,gBACP6P,GAAY,CACrB,KAAM,MACV,EAEO,SAAS6L,IAAQ,CACpB,YAAK,SAASoK,EAAQ,EAEf,CACH,KAAM,gBACN,IAAK,KAAK,YAAY,KAAK,WAAa,EAAG,KAAK,QAAQ,EACxD,KAAM,KAAK,QAAQzwB,CAAK,CAChC,CACA,CAEO,SAASsd,GAASznB,EAAM,CAC3B,KAAK,MAAM2K,EAAO,GAAG,EACrB,KAAK,MAAMR,EAAOnK,EAAK,IAAI,CAC/B,+ICrBM6iB,GAAW,GACXgY,GAAU,GACV1M,GAAkB,GAClB+L,GAAQ,IAEDplB,GAAO,aACP6P,GAAY,CACrB,KAAM,MACV,EAGO,SAAS6L,IAAQ,CACpB,MAAMziB,EAAQ,KAAK,WACnB,IAAI+G,EAEJ,OAAQ,KAAK,UAAS,CAClB,KAAK/J,EACD+J,EAAO,IACP,MAEJ,KAAKnK,EACD,OAAQ,KAAK,WAAW,KAAK,UAAU,EAAC,CACpC,KAAKwjB,GACL,KAAKtL,GACL,KAAKqX,GACD,KAAK,KAAI,EACT,MAEJ,KAAKW,GACD,KAAK,KAAI,EACT,KAAK,SAAS,MAAM,EACpB,KAAK,SAASA,EAAO,EACrB,MAEJ,QACI,KAAK,MAAM,wBAAwB,CAC1C,CAED/lB,EAAO,KAAK,eAAe/G,CAAK,EAChC,KACP,CAED,MAAO,CACH,KAAM,aACN,IAAK,KAAK,YAAYA,EAAO,KAAK,UAAU,EAC5C,KAAA+G,CACR,CACA,CAEO,SAAS2S,GAASznB,EAAM,CAC3B,KAAK,SAASA,EAAK,IAAI,CAC3B,+ICnDM+tB,GAAW,GACX8M,GAAU,GAGH/lB,GAAO,UACP6P,GAAY,CACrB,MAAO,MACX,EAEO,SAAS6L,IAAQ,CACpB,MAAMziB,EAAQ,KAAK,WACnB,IAAIC,EAAM,KAAK,SAEf,YAAK,IAAIrC,CAAO,EAEXqC,EAAMD,EAAQ,GAAM,GACrB,KAAK,WAAWC,EAAM,CAAC,IAAM+f,IAC7B,KAAK,WAAW/f,EAAM,CAAC,IAAM6sB,KAC7B7sB,GAAO,GAGJ,CACH,KAAM,UACN,IAAK,KAAK,YAAYD,EAAO,KAAK,UAAU,EAC5C,MAAO,KAAK,UAAUA,EAAQ,EAAGC,CAAG,CAC5C,CACA,CAEO,SAASyZ,GAASznB,EAAM,CAC3B,KAAK,MAAM2L,EAAS,KAAO3L,EAAK,MAAQ,IAAI,CAChD,+ICrBM86B,GAAqB,IAAI,IAAI,CAAC5vB,GAAOM,EAAkBtB,EAAG,CAAC,EAEpD4K,GAAO,YACP6P,GAAY,CACrB,KAAM,OACN,SAAU,CAAC,CACP,aACA,UACA,kBACA,eACA,qBACR,CAAK,CACL,EAEA,SAASoW,GAAeC,EAAM,CAC1B,OAAI,KAAK,gBAAgB,CAAC,IAAM7wB,GAC5B2wB,GAAmB,IAAI,KAAK,gBAAgB,CAAC,CAAC,EACvC,KAAK,QAAQE,CAAI,EAGrB,KAAK,aAAaA,CAAI,CACjC,CAEA,MAAMC,GAAc,CAChB,MAAOF,GACP,UAAWA,GACX,UAAW,CACP,OAAO,KAAK,qBACf,CACL,EAEO,SAASvK,GAAMwK,EAAO,QAAS,CAClC,MAAM9kB,EAAW,KAAK,aAEtB0V,EAAM,KAAO,CAAC,KAAK,KACf,OAAQ,KAAK,UAAS,CAClB,KAAKjgB,EACL,KAAKZ,EACD,KAAK,KAAI,EACT,SAEJ,KAAKZ,EACD+L,EAAS,KAAK,KAAK,WAAY,CAAA,EAC/B,MAEJ,KAAK3K,EAAiB,CAClB,IAAIgc,EAAO,KAAK,kBACZ,IAAM0T,GAAYD,CAAI,EAAE,KAAK,KAAMA,CAAI,EACvC,IAAM,IAC1B,EAEqBzT,IACDA,EAAO,KAAK,kBACR,IAAM,CACF,KAAK,IAAIhc,CAAe,EACxB,MAAM2vB,EAAM,KAAK,UAAUF,CAAI,EAC/B,YAAK,IAAIxvB,CAAgB,EAClB0vB,CACV,EACD,IACW,KAAK,gBAAgBF,CAAI,CAE5D,GAGgB9kB,EAAS,KAAKqR,CAAI,EAClB,KACH,CAED,KAAKlX,EAAe,CAChB,IAAIkX,EAAO,KAAK,kBACZ,IAAM,KAAK,gBAAgByT,CAAI,EAC/B,IAAM,IAC1B,EAEqBzT,IACDA,EAAO,KAAK,gBAAgByT,CAAI,GAGpC9kB,EAAS,KAAKqR,CAAI,EAClB,KACH,CAED,QACI,MAAMqE,CACb,CAGL,OAAI1V,EAAS,SACT,KAAK,MAAM,uBAAuB,EAG/B,CACH,KAAM,YACN,IAAK,KAAK,oBAAoBA,CAAQ,EACtC,KAAA8kB,EACA,SAAA9kB,CACR,CACA,CAEO,SAASuR,GAASznB,EAAM,CAC3BA,EAAK,SAAS,QAAQqW,GAAS,CACvBA,EAAM,OAAS,aACf,KAAK,MAAM9K,EAAiB,GAAG,EAC/B,KAAK,KAAK8K,CAAK,EACf,KAAK,MAAM7K,EAAkB,GAAG,GAEhC,KAAK,KAAK6K,CAAK,CAE3B,CAAK,CACL,+IC/GME,GAAkB,GAClBC,GAAa,GACbujB,GAAa,GACbpM,GAAY,GACZI,GAAW,GACXlL,GAAW,GACXgY,GAAU,GAEhB,SAASM,IAAkB,CACvB,OAAO,KAAK,IAAI,KAAK,uCAAwC,EAAI,CACrE,CAEA,SAASC,IAA2B,CAChC,OAAO,KAAK,IAAI,KAAK,uCAAwC,EAAK,CACtE,CAEA,SAASC,IAAe,CACpB,MAAMC,EAAkB,KAAK,WACvBv9B,EAAQ,KAAK,QAEnB,OAAIA,EAAM,OAAS,OACf,KAAK,MAAQ,IACb,KAAK,YAAcoN,IACnB,KAAK,QAAQoL,EAAe,IAAM,IAClC,KAAK,cAAc+kB,CAAe,IAAM,IACxC,KAAK,MAAK,EAGPv9B,CACX,CAEO,MAAM+W,GAAO,cACP6kB,GAAc,cACdhV,GAAY,CACrB,UAAW,CAAC,QAAS,MAAM,EAC3B,SAAU,OACV,MAAO,CAAC,QAAS,KAAK,CAC1B,EAEO,SAAS6L,IAAQ,CACpB,MAAMziB,EAAQ,KAAK,WACbsD,EAAa,KAAK,WAClB0X,EAAWyG,GAAa,KAAK,IAAI,EACjC+L,EAAiBtS,GAAiBF,CAAQ,EAC1CyS,EAAaD,EAAiB,KAAK,oBAAsB,KAAK,WAC9D9B,EAAa8B,EAAiBH,GAA2BD,GAC/D,IAAIM,EAAY,GACZ19B,EAEJ,KAAK,OAAM,EACX,KAAK,IAAImN,EAAK,EAEd,MAAMwwB,EAAa,KAAK,WAYxB,GAVKH,GACD,KAAK,OAAM,EAGXC,EACAz9B,EAAQ,KAAK,kBAAkBs9B,GAAc5B,CAAU,EAEvD17B,EAAQ07B,EAAW,KAAK,KAAM,KAAK,UAAU,EAG7C8B,GAAkBx9B,EAAM,OAAS,SAAWA,EAAM,SAAS,SAC3D,QAAS0P,EAASiuB,EAAa,KAAK,WAAYjuB,GAAU,EAAGA,IACzD,GAAI,KAAK,WAAWA,CAAM,IAAM1C,EAAY,CACxChN,EAAM,SAAS,WAAW,CACtB,KAAM,aACN,IAAK,KACL,MAAO,GAC3B,CAAiB,EACD,KACH,EAIT,OAAI,KAAK,QAAQwY,EAAe,IAC5BklB,EAAYE,GAAa,KAAK,IAAI,EAClC,KAAK,OAAM,GAMX,KAAK,MAAQ,IACb,KAAK,YAAcxwB,IACnB,KAAK,cAAckG,CAAU,IAAM,IACnC,KAAK,MAAK,EAGP,CACH,KAAM,cACN,IAAK,KAAK,YAAYtD,EAAO,KAAK,UAAU,EAC5C,UAAA0tB,EACA,SAAA1S,EACA,MAAAhrB,CACR,CACA,CAEO,SAAS0pB,GAASznB,EAAM,CAC3B,KAAK,MAAMmK,EAAOnK,EAAK,QAAQ,EAC/B,KAAK,MAAMkL,GAAO,GAAG,EACrB,KAAK,KAAKlL,EAAK,KAAK,EAEhBA,EAAK,YACL,KAAK,MAAM2K,EAAO,GAAG,EACrB,KAAK,MAAMR,EAAOnK,EAAK,YAAc,GAAO,YAAcA,EAAK,SAAS,EAEhF,CAEA,SAASwvB,IAAe,CACpB,MAAMzhB,EAAQ,KAAK,WAGnB,GAAI,KAAK,YAAcpD,EACnB,OAAQ,KAAK,WAAW,KAAK,UAAU,EAAC,CACpC,KAAKojB,GACL,KAAKgM,GACL,KAAKlX,GACL,KAAKrM,GACL,KAAKmX,GACD,KAAK,KAAI,EACT,MAGJ,KAAKkN,GACD,KAAK,KAAI,EACL,KAAK,QAAQA,EAAO,GACpB,KAAK,KAAI,EAEb,KACP,CAGL,OAAI,KAAK,YAAcvwB,EACnB,KAAK,IAAIA,CAAI,EAEb,KAAK,IAAIH,CAAK,EAGX,KAAK,eAAe4D,CAAK,CACpC,CAGA,SAAS4tB,IAAe,CACpB,KAAK,IAAIhxB,CAAK,EACd,KAAK,OAAM,EAEX,MAAM8wB,EAAY,KAAK,QAAQtxB,CAAK,EAIpC,OAAOsxB,IAAc,YAAc,GAAOA,CAC9C,8JC7JM9N,GAAY,GAElB,SAAS8L,IAAa,CAClB,OAAO,KAAK,IAAI,KAAK,8BAA+B,EAAI,CAC5D,CAEO,MAAM3kB,GAAO,kBACP6P,GAAY,CACrB,SAAU,CAAC,CACP,cACA,SACA,MACR,CAAK,CACL,EAEO,SAAS6L,IAAQ,CACpB,MAAMta,EAAW,KAAK,aAGtB,KAAO,CAAC,KAAK,KACT,OAAQ,KAAK,UAAS,CAClB,KAAKnL,EACL,KAAKY,EACL,KAAKR,GACD,KAAK,KAAI,EACT,MAEJ,KAAKd,EACD6L,EAAS,KAAK,KAAK,kBAAkB,KAAK,OAAO,KAAK,KAAM,EAAI,EAAGujB,EAAU,CAAC,EAC9E,MAEJ,QACQ,KAAK,QAAQ9L,EAAS,EACtBzX,EAAS,KAAK,KAAK,kBAAkB,KAAK,KAAMujB,EAAU,CAAC,EAE3DvjB,EAAS,KAAK,KAAK,kBAAkB,KAAK,YAAaujB,EAAU,CAAC,CAE7E,CAGL,MAAO,CACH,KAAM,kBACN,IAAK,KAAK,oBAAoBvjB,CAAQ,EACtC,SAAAA,CACR,CACA,CAEO,SAASuR,GAASznB,EAAM,CAC3B,KAAK,SAASA,EAAMiU,GAAQ,CACpBA,EAAK,OAAS,eACd,KAAK,MAAM9I,GAAW,GAAG,CAErC,CAAK,CACL,+IC1Da2J,GAAO,YACP6P,GAAY,CACrB,MAAO,OACP,KAAM,MACV,EAEO,SAAS6L,IAAQ,CACpB,MAAMziB,EAAQ,KAAK,WACbhQ,EAAQ,KAAK,cAAc+M,CAAS,EAE1C,MAAO,CACH,KAAM,YACN,IAAK,KAAK,YAAYiD,EAAO,KAAK,UAAU,EAC5C,MAAAhQ,EACA,KAAM,KAAK,UAAUgQ,EAAQhQ,EAAM,OAAQ,KAAK,UAAU,CAClE,CACA,CAEO,SAAS0pB,GAASznB,EAAM,CAC3B,KAAK,MAAM8K,EAAW9K,EAAK,MAAQA,EAAK,IAAI,CAChD,+ICXM66B,GAAU,GAEH/lB,GAAO,UACP6P,GAAY,CACrB,KAAM,OACN,KAAM,OACN,MAAO,CAAC,aAAc,SAAU,YAAa,QAAS,WAAY,IAAI,CAC1E,EAEO,SAAS6L,GAAMwK,EAAM,CACxB,MAAMjtB,EAAQ,KAAK,WACnB,IAAI+G,EACA/W,EAAQ,KAQZ,GANA,KAAK,IAAIwN,CAAe,EACxB,KAAK,OAAM,EAEXuJ,EAAO,KAAK,QAAQ3K,CAAK,EACzB,KAAK,OAAM,EAEP,KAAK,YAAcqB,EAAkB,CAIrC,OAHA,KAAK,IAAIN,EAAK,EACd,KAAK,OAAM,EAEH,KAAK,UAAS,CAClB,KAAKN,EACG,KAAK,gBAAgB,CAAC,IAAMD,EAC5B5M,EAAQ,KAAK,QAEbA,EAAQ,KAAK,SAGjB,MAEJ,KAAK+M,EACD/M,EAAQ,KAAK,YACb,MAEJ,KAAKoM,EACDpM,EAAQ,KAAK,aACb,MAEJ,KAAKsS,EACDtS,EAAQ,KAAK,kBACT,IAAM,CACF,MAAMm9B,EAAM,KAAK,SAAS,KAAK,aAAc,KAAK,MAAM,KAAK,EAE7D,YAAK,OAAM,EAEP,KAAK,QAAQL,EAAO,GACpB,KAAK,MAAK,EAGPK,CACV,EACD,IACW,KAAK,OAEpC,EACgB,MAEJ,QACI,KAAK,MAAM,oDAAoD,CACtE,CAED,KAAK,OAAM,CACd,CAED,OAAK,KAAK,KACN,KAAK,IAAI1vB,CAAgB,EAGtB,CACH,KAAM,UACN,IAAK,KAAK,YAAYuC,EAAO,KAAK,UAAU,EAC5C,KAAAitB,EACA,KAAAlmB,EACA,MAAA/W,CACR,CACA,CAEO,SAAS0pB,GAASznB,EAAM,CAC3B,KAAK,MAAMuL,EAAiB,GAAG,EAC/B,KAAK,MAAMpB,EAAOnK,EAAK,IAAI,EAEvBA,EAAK,QAAU,OACf,KAAK,MAAMkL,GAAO,GAAG,EACrB,KAAK,KAAKlL,EAAK,KAAK,GAGxB,KAAK,MAAMwL,EAAkB,GAAG,CACpC,+ICjGasJ,GAAO,kBACP6P,GAAY,CACrB,KAAM,OACN,QAAS,OACT,MAAO,CAAC,cAAe,UAAU,CACrC,EAEA,SAASiX,GAAiBZ,EAAMlmB,EAAM,CAElC,MAAMyC,GADiB,KAAK,SAASyjB,CAAI,GAAK,CAAA,GAChBlmB,CAAI,EAElC,OAAI,OAAOyC,GAAW,YAClB,KAAK,MAAM,mBAAmBzC,CAAI,IAAI,EAGnCyC,CACX,CAEO,SAASiZ,GAAMwK,EAAO,UAAW,CACpC,MAAMjtB,EAAQ,KAAK,WACb8tB,EAAe,KAAK,sBACpBC,EAAcF,GAAiB,KAAK,KAAMZ,EAAMa,EAAa,YAAW,CAAE,EAEhF,KAAK,OAAM,EAEX,MAAM99B,EAAQ,KAAK,kBACf,IAAM,CACF,MAAMu9B,EAAkB,KAAK,WACvBv9B,EAAQ+9B,EAAY,KAAK,IAAI,EAEnC,OAAI,KAAK,MAAQ,IACb,KAAK,cAAcR,CAAe,IAAM,IACxC,KAAK,MAAK,EAGPv9B,CACV,EACD,IAAM,KAAK,IAAI,KAAM,EAAK,CAClC,EAEI,OAAK,KAAK,KACN,KAAK,IAAIyN,CAAgB,EAGtB,CACH,KAAM,kBACN,IAAK,KAAK,YAAYuC,EAAO,KAAK,UAAU,EAC5C,KAAAitB,EACA,QAASa,EACT,MAAA99B,CACR,CACA,CAEO,SAAS0pB,GAASznB,EAAM,CAC3B,KAAK,MAAMqQ,EAAerQ,EAAK,QAAU,GAAG,EAC5C,KAAK,KAAKA,EAAK,KAAK,EACpB,KAAK,MAAMwL,EAAkB,GAAG,CACpC,+ICrDMqvB,GAAU,GACV3M,GAAe,GACf8L,GAAa,GACb7L,GAAkB,GAEXrZ,GAAO,eACP6P,GAAY,CACrB,KAAM,OACN,KAAM,CAAC,aAAc,SAAU,YAAa,QAAS,UAAU,EAC/D,eAAgB,OAChB,OAAQ,CAAC,aAAc,SAAU,YAAa,QAAS,UAAU,EACjE,gBAAiB,CAAC,OAAQ,IAAI,EAC9B,MAAO,CAAC,aAAc,SAAU,YAAa,QAAS,WAAY,IAAI,CAC1E,EAEA,SAASoX,IAAW,CAGhB,OAFA,KAAK,OAAM,EAEH,KAAK,UAAS,CAClB,KAAKnxB,EACD,OAAI,KAAK,QAAQiwB,GAAS,KAAK,kBAAkB,CAAC,CAAC,EACxC,KAAK,QAEL,KAAK,SAGpB,KAAK/vB,EACD,OAAO,KAAK,YAEhB,KAAKX,EACD,OAAO,KAAK,aAEhB,KAAKkG,EACD,OAAO,KAAK,kBACR,IAAM,CACF,MAAM6qB,EAAM,KAAK,SAAS,KAAK,aAAc,KAAK,MAAM,KAAK,EAE7D,YAAK,OAAM,EAEP,KAAK,QAAQL,EAAO,GACpB,KAAK,MAAK,EAGPK,CACV,EACD,IACW,KAAK,OAEhC,EAEQ,QACI,KAAK,MAAM,oDAAoD,CACtE,CACL,CAEA,SAASc,GAAeC,EAAa,CAGjC,GAFA,KAAK,OAAM,EAEP,KAAK,QAAQ/N,EAAY,GACzB,KAAK,QAAQC,EAAe,EAAG,CAC/B,MAAMpwB,EAAQ,KAAK,OAAO,KAAK,UAAU,EAIzC,OAFA,KAAK,KAAI,EAEL,KAAK,QAAQi8B,EAAU,GACvB,KAAK,KAAI,EACFj8B,EAAQ,KAGZA,CACV,CAED,GAAI,KAAK,QAAQi8B,EAAU,EACvB,MAAO,IAGX,KAAK,MAAM,YAAYiC,EAAc,QAAU,EAAE,sBAAsB,CAC3E,CAEO,SAASzL,GAAMwK,EAAO,UAAW,CACpC,MAAMjtB,EAAQ,KAAK,WAEnB,KAAK,OAAM,EACX,KAAK,IAAIxC,CAAe,EAExB,MAAMrH,EAAO63B,GAAS,KAAK,IAAI,EACzBG,EAAiBF,GAAe,KAAK,KAAM93B,EAAK,OAAS,YAAY,EACrEi4B,EAASJ,GAAS,KAAK,IAAI,EACjC,IAAIK,EAAkB,KAClBC,EAAQ,KAEZ,OAAI,KAAK,gBAAgB,CAAC,IAAM7wB,IAC5B4wB,EAAkBJ,GAAe,KAAK,IAAI,EAC1CK,EAAQN,GAAS,KAAK,IAAI,GAG9B,KAAK,OAAM,EACX,KAAK,IAAIvwB,CAAgB,EAElB,CACH,KAAM,eACN,IAAK,KAAK,YAAYuC,EAAO,KAAK,UAAU,EAC5C,KAAAitB,EACA,KAAA92B,EACA,eAAAg4B,EACA,OAAAC,EACA,gBAAAC,EACA,MAAAC,CACR,CACA,CAEO,SAAS5U,GAASznB,EAAM,CAC3B,KAAK,MAAMuL,EAAiB,GAAG,EAC/B,KAAK,KAAKvL,EAAK,IAAI,EACnB,KAAK,SAASA,EAAK,cAAc,EACjC,KAAK,KAAKA,EAAK,MAAM,EAEjBA,EAAK,QACL,KAAK,SAASA,EAAK,eAAe,EAClC,KAAK,KAAKA,EAAK,KAAK,GAGxB,KAAK,MAAMwL,EAAkB,GAAG,CACpC,+IC9HasJ,GAAO,WACP6kB,GAAc,WACdhV,GAAY,CACrB,KAAM,OACN,SAAU,CAAC,CAAA,CAAE,CACjB,EAGO,SAAS6L,GAAMxa,EAAcC,EAAY,CAC5C,MAAMlI,EAAQ,KAAK,WACb+G,EAAO,KAAK,sBACZ+kB,EAAgB/kB,EAAK,cAC3B,IAAIoB,EAEJ,OAAAA,EAAWD,EAAW,eAAe4jB,CAAa,EAC5C5jB,EAAW4jB,CAAa,EAAE,KAAK,KAAM5jB,CAAU,EAC/CD,EAAa,KAAK,KAAMC,CAAU,EAEnC,KAAK,KACN,KAAK,IAAIzK,CAAgB,EAGtB,CACH,KAAM,WACN,IAAK,KAAK,YAAYuC,EAAO,KAAK,UAAU,EAC5C,KAAA+G,EACA,SAAAoB,CACR,CACA,CAEO,SAASuR,GAASznB,EAAM,CAC3B,KAAK,MAAMqQ,EAAerQ,EAAK,KAAO,GAAG,EACzC,KAAK,SAASA,CAAI,EAClB,KAAK,MAAMwL,EAAkB,GAAG,CACpC,8JCjCasJ,GAAO,kBACP6P,GAAY,CACrB,KAAM,OACN,SAAU,CAAC,OAAQ,IAAI,EACvB,SAAU,CAAC,CAAA,CAAE,CACjB,EAIO,SAAS6L,GAAMwK,EAAM,CACxB,MAAMjtB,EAAQ,KAAK,WACnB,IAAI8tB,EAAe,KAEf,KAAK,YAAcxrB,EACnBwrB,EAAe,KAAK,sBAEpB,KAAK,IAAItwB,CAAe,EAG5B,MAAM2K,EAAW,KAAK,kBAClB,IAAM,CACF,MAAMolB,EAAkB,KAAK,WACvBplB,EAAW,KAAK,aAAa,KAAK,MAAM,KAAK,EAEnD,OAAI,KAAK,MAAQ,IACb,KAAK,cAAcolB,CAAe,IAAM,IACxC,KAAK,MAAK,EAGPplB,CACV,EACD,IAAM,KAAK,qBACP,KAAK,IAAI,KAAM,EAAK,CACvB,CACT,EAEI,OAAK,KAAK,KACN,KAAK,IAAI1K,CAAgB,EAGtB,CACH,KAAM,kBACN,IAAK,KAAK,YAAYuC,EAAO,KAAK,UAAU,EAC5C,KAAAitB,EACA,SAAUa,EACV,SAAA3lB,CACR,CACA,CAEO,SAASuR,GAASznB,EAAM,CACvBA,EAAK,SACL,KAAK,MAAMqQ,EAAerQ,EAAK,SAAW,GAAG,EAE7C,KAAK,MAAMuL,EAAiB,GAAG,EAGnC,KAAK,SAASvL,CAAI,EAClB,KAAK,MAAMwL,EAAkB,GAAG,CACpC,+IC9Da8wB,GAAM,MACNxnB,GAAO,OACP6P,GAAY,CACrB,MAAO,MACX,EACO,SAAS6L,IAAQ,CACpB,MAAMziB,EAAQ,KAAK,WAEnB,YAAK,IAAIzD,CAAI,EAEN,CACH,KAAM,OACN,IAAK,KAAK,YAAYyD,EAAO,KAAK,UAAU,EAC5C,MAAO,KAAK,eAAeA,EAAQ,CAAC,CAC5C,CACA,CACO,SAAS0Z,GAASznB,EAAM,CAC3B,KAAK,MAAMsK,EAAM,IAAMtK,EAAK,KAAK,CACrC,sJCnBa8U,GAAO,aACP6P,GAAY,CACrB,KAAM,MACV,EAEO,SAAS6L,IAAQ,CACpB,MAAO,CACH,KAAM,aACN,IAAK,KAAK,YAAY,KAAK,WAAY,KAAK,QAAQ,EACpD,KAAM,KAAK,QAAQrmB,CAAK,CAChC,CACA,CAEO,SAASsd,GAASznB,EAAM,CAC3B,KAAK,MAAMmK,EAAOnK,EAAK,IAAI,CAC/B,+ICfa8U,GAAO,aACP6P,GAAY,CACrB,KAAM,MACV,EAEO,SAAS6L,IAAQ,CACpB,MAAMziB,EAAQ,KAAK,WAGnB,YAAK,IAAIzD,CAAI,EAEN,CACH,KAAM,aACN,IAAK,KAAK,YAAYyD,EAAO,KAAK,UAAU,EAC5C,KAAM,KAAK,eAAeA,EAAQ,CAAC,CAC3C,CACA,CAEO,SAAS0Z,GAASznB,EAAM,CAI3B,KAAK,MAAM2K,EAAO,IAAM3K,EAAK,IAAI,CACrC,+ICvBM46B,GAAW,GAEJ9lB,GAAO,QACP6P,GAAY,CACrB,KAAM,MACV,EAEO,SAAS6L,IAAQ,CACpB,IAAI1b,EAAO,KAAK,QAAQ3K,CAAK,EAE7B,KAAO,KAAK,QAAQywB,EAAQ,GACxB,KAAK,IAAIjwB,CAAK,EACdmK,GAAQ,IAAM,KAAK,QAAQ3K,CAAK,EAGpC,MAAO,CACH,KAAM,QACN,IAAK,KAAK,YAAY,KAAK,WAAY,KAAK,QAAQ,EACpD,KAAA2K,CACR,CACA,CAEO,SAAS2S,GAASznB,EAAM,CAC3B,KAAK,SAASA,EAAK,IAAI,CAC3B,+ICxBa8U,GAAO,YACP6P,GAAY,CACrB,SAAU,CAAC,CACP,OACR,CAAK,CACL,EAEO,SAAS6L,IAAQ,CACpB,MAAMta,EAAW,KAAK,aAItB,IAFA,KAAK,OAAM,EAEJ,CAAC,KAAK,MACTA,EAAS,KAAK,KAAK,MAAO,CAAA,EAEtB,KAAK,gBAAgB,CAAC,IAAM9K,KAIhC,KAAK,OAAM,EACX,KAAK,KAAI,EACT,KAAK,OAAM,EAGf,MAAO,CACH,KAAM,YACN,IAAK,KAAK,oBAAoB8K,CAAQ,EACtC,SAAAA,CACR,CACA,CAEO,SAASuR,GAASznB,EAAM,CAC3B,KAAK,SAASA,EAAM,IAAM,KAAK,MAAMoL,GAAO,GAAG,CAAC,CACpD,+ICzBa0J,GAAO,aACP6P,GAAY,CACrB,SAAU,CAAC,OAAQ,IAAI,EACvB,UAAW,CAAC,OAAQ,IAAI,EACxB,UAAW,CAAC,YAAa,IAAI,CACjC,EAEO,SAAS6L,IAAQ,CACpB,MAAMziB,EAAQ,KAAK,WACnB,IAAIwuB,EAAW,KACXC,EAAY,KACZC,EAAY,KAIhB,GAFA,KAAK,OAAM,EAEP,KAAK,YAActyB,GAAS,KAAK,gBAAgB,CAAC,IAAMoB,EAAiB,CAEzE,MAAMmxB,EAAQ,KAAK,QAAQvyB,CAAK,EAC1BwyB,EAAiBD,EAAM,cAU7B,OARIC,IAAmB,OAASA,IAAmB,QAC/C,KAAK,OAAM,EACXJ,EAAWI,EACXH,EAAY,KAAK,QAAQryB,CAAK,GAE9BqyB,EAAYE,EAGR,KAAK,gBAAgB,CAAC,EAAC,CAC3B,KAAKvyB,EAAO,CAER,KAAK,OAAM,EACX,KAAK,SAAS,KAAK,EACnBsyB,EAAY,KAAK,UAAU,OAAO,EAClC,KACH,CAED,KAAKhxB,EACL,KAAKN,GACL,KAAKC,GACL,KAAKlB,GACD,MAEJ,QACI,KAAK,MAAM,uCAAuC,CACzD,CACT,KACQ,QAAQ,KAAK,UAAS,CAClB,KAAKC,EACL,KAAKoB,EACL,KAAK8E,EAAe,CAEhBosB,EAAY,KAAK,UAAU,OAAO,EAClC,KACH,CAED,KAAKhxB,EACL,KAAKN,GACL,KAAKjB,GACD,MAEJ,QACI,KAAK,MAAM,uCAAuC,CACzD,CAGL,MAAO,CACH,KAAM,aACN,IAAK,KAAK,YAAY6D,EAAO,KAAK,UAAU,EAC5C,SAAAwuB,EACA,UAAAC,EACA,UAAAC,CACR,CACA,CAEO,SAAShV,GAASznB,EAAM,CACvBA,EAAK,WACDA,EAAK,UACL,KAAK,MAAMmK,EAAOnK,EAAK,QAAQ,EAGnC,KAAK,MAAMmK,EAAOnK,EAAK,SAAS,EAE5BA,EAAK,YACL,KAAK,MAAMmK,EAAO,KAAK,EACvB,KAAK,KAAKnK,EAAK,SAAS,IAErBA,EAAK,WACZ,KAAK,KAAKA,EAAK,SAAS,CAEhC,+IClGa8U,GAAO,iBACP6P,GAAY,CACrB,SAAU,CAAC,CACP,YACR,CAAK,CACL,EAEO,SAAS6L,IAAQ,CACpB,MAAMta,EAAW,KAAK,aAItB,IAFA,KAAK,OAAM,EAEJ,CAAC,KAAK,MACTA,EAAS,KAAK,KAAK,WAAY,CAAA,EAE3B,KAAK,YAAc9K,KAIvB,KAAK,KAAI,EAGb,MAAO,CACH,KAAM,iBACN,IAAK,KAAK,oBAAoB8K,CAAQ,EACtC,SAAAA,CACR,CACA,CAEO,SAASuR,GAASznB,EAAM,CAC3B,KAAK,SAASA,EAAM,IAAM,KAAK,MAAMoL,GAAO,GAAG,CAAC,CACpD,+IC/BMuiB,GAAY,GAEL7Y,GAAO,kBACP6P,GAAY,CACzB,EAEO,SAAS6L,IAAQ,CACpB,MAAMziB,EAAQ,KAAK,WAEnB,YAAK,SAAS4f,EAAS,EAEhB,CACH,KAAM,kBACN,IAAK,KAAK,YAAY5f,EAAO,KAAK,UAAU,CACpD,CACA,CAEO,SAAS0Z,IAAW,CACvB,KAAK,MAAM9c,EAAO,GAAG,CACzB,+ICnBamK,GAAO,MACP6P,GAAY,CACrB,IAAK,CAAC,UAAW,YAAY,EAC7B,SAAU,CAAC,eAAgB,IAAI,CACnC,EAEO,SAAS6L,IAAQ,CACpB,KAAK,OAAM,EAEX,MAAMziB,EAAQ,KAAK,WACnB,IAAIC,EAAMD,EACN9M,EAAW,KACX27B,EAEJ,OAAI,KAAK,YAAY,EAAG,KAAK,GAAK,KAAK,YAAY,EAAG,MAAM,EACxDA,EAAM,KAAK,aAEXA,EAAM,KAAK,UAGf5uB,EAAM,KAAK,WACX,KAAK,OAAM,EAEP,KAAK,YAAY,EAAG,IAAI,IACxB,KAAK,KAAI,EAET/M,EAAW,KAAK,eAChB+M,EAAM,KAAK,YAGR,CACH,KAAM,MACN,IAAK,KAAK,YAAYD,EAAOC,CAAG,EAChC,IAAA4uB,EACA,SAAA37B,CACR,CACA,CAEO,SAASwmB,GAASznB,EAAM,CAC3B,KAAK,KAAKA,EAAK,GAAG,EACdA,EAAK,WAAa,OAClB,KAAK,MAAMmK,EAAO,IAAI,EACtB,KAAK,KAAKnK,EAAK,QAAQ,EAE/B,+IC5Ca8U,GAAO,SACP6P,GAAY,CACrB,MAAO,MACX,EAEO,SAAS6L,IAAQ,CACpB,MAAO,CACH,KAAM,SACN,IAAK,KAAK,YAAY,KAAK,WAAY,KAAK,QAAQ,EACpD,MAAO,KAAK,QAAQtY,CAAW,CACvC,CACA,CAEO,SAASuP,GAASznB,EAAM,CAC3B,KAAK,MAAMkY,EAAalY,EAAK,KAAK,CACtC,+IChBa8U,GAAO,WACP6P,GAAY,CACrB,MAAO,MACX,EAEO,SAAS6L,IAAQ,CACpB,MAAMziB,EAAQ,KAAK,WAEnB,YAAK,KAAI,EAEF,CACH,KAAM,WACN,IAAK,KAAK,YAAYA,EAAO,KAAK,UAAU,EAC5C,MAAO,KAAK,eAAeA,CAAK,CACxC,CACA,CAEO,SAAS0Z,GAASznB,EAAM,CAC3B,KAAK,SAASA,EAAK,KAAK,CAC5B,+ICfa8U,GAAO,cACP6P,GAAY,CACrB,SAAU,CAAC,CAAA,CAAE,CACjB,EAEO,SAAS6L,GAAMxa,EAAcC,EAAY,CAC5C,MAAMlI,EAAQ,KAAK,WACnB,IAAImI,EAAW,KAEf,YAAK,IAAI3K,CAAe,EAExB2K,EAAWF,EAAa,KAAK,KAAMC,CAAU,EAExC,KAAK,KACN,KAAK,IAAIzK,CAAgB,EAGtB,CACH,KAAM,cACN,IAAK,KAAK,YAAYuC,EAAO,KAAK,UAAU,EAC5C,SAAAmI,CACR,CACA,CAEO,SAASuR,GAASznB,EAAM,CAC3B,KAAK,MAAMuL,EAAiB,GAAG,EAC/B,KAAK,SAASvL,CAAI,EAClB,KAAK,MAAMwL,EAAkB,GAAG,CACpC,+IC/BasJ,GAAO,aACP6P,GAAY,CACrB,MAAO,MACX,EAEO,SAAS6L,IAAQ,CACpB,MAAO,CACH,KAAM,aACN,IAAK,KAAK,YAAY,KAAK,WAAY,KAAK,QAAQ,EACpD,MAAO,KAAK,cAAc3lB,CAAU,CAC5C,CACA,CAEO,SAAS4c,GAASznB,EAAM,CAC3B,KAAK,MAAM6K,EAAY7K,EAAK,MAAQ,GAAG,CAC3C,+ICTa8U,GAAO,sBACP6kB,GAAc,WACdhV,GAAY,CACrB,KAAM,OACN,SAAU,CAAC,CAAC,KAAK,EAAG,IAAI,CAC5B,EAGO,SAAS6L,IAAQ,CACpB,MAAMziB,EAAQ,KAAK,WACnB,IAAImI,EAAW,KACXpB,EACA+kB,EAEJ,YAAK,IAAI3uB,EAAK,EAEV,KAAK,YAAcmF,GACnByE,EAAO,KAAK,sBACZ+kB,EAAgB/kB,EAAK,cAEjB,KAAK,gBAAgB,CAAC,GAAKtJ,EAC3B0K,EAAW,KAAK,aACT,eAAe,KAAK,KAAK,OAAQ2jB,CAAa,GACrD,KAAK,OAAM,EACX3jB,EAAW,KAAK,OAAO2jB,CAAa,EAAE,KAAK,IAAI,EAC/C,KAAK,OAAM,IAEX3jB,EAAW,KAAK,aAChBA,EAAS,KACL,KAAK,IAAI,KAAM,EAAK,CACpC,GAGQ,KAAK,IAAI1K,CAAgB,GAEzBsJ,EAAO,KAAK,QAAQ3K,CAAK,EAGtB,CACH,KAAM,sBACN,IAAK,KAAK,YAAY4D,EAAO,KAAK,UAAU,EAC5C,KAAA+G,EACA,SAAAoB,CACR,CACA,CAEO,SAASuR,GAASznB,EAAM,CAC3B,KAAK,MAAMkL,GAAO,GAAG,EAEjBlL,EAAK,WAAa,KAClB,KAAK,MAAMmK,EAAOnK,EAAK,IAAI,GAE3B,KAAK,MAAMqQ,EAAerQ,EAAK,KAAO,GAAG,EACzC,KAAK,SAASA,CAAI,EAClB,KAAK,MAAMwL,EAAkB,GAAG,EAExC,8JCzDasJ,GAAO,wBACP6kB,GAAc,WACdhV,GAAY,CACrB,KAAM,OACN,SAAU,CAAC,CAAC,KAAK,EAAG,IAAI,CAC5B,EAGO,SAAS6L,IAAQ,CACpB,MAAMziB,EAAQ,KAAK,WACnB,IAAImI,EAAW,KACXpB,EACA+kB,EAEJ,YAAK,IAAI3uB,EAAK,EACd,KAAK,IAAIA,EAAK,EAEV,KAAK,YAAcmF,GACnByE,EAAO,KAAK,sBACZ+kB,EAAgB/kB,EAAK,cAEjB,KAAK,gBAAgB,CAAC,GAAKtJ,EAC3B0K,EAAW,KAAK,aACT,eAAe,KAAK,KAAK,OAAQ2jB,CAAa,GACrD,KAAK,OAAM,EACX3jB,EAAW,KAAK,OAAO2jB,CAAa,EAAE,KAAK,IAAI,EAC/C,KAAK,OAAM,IAEX3jB,EAAW,KAAK,aAChBA,EAAS,KACL,KAAK,IAAI,KAAM,EAAK,CACpC,GAGQ,KAAK,IAAI1K,CAAgB,GAEzBsJ,EAAO,KAAK,QAAQ3K,CAAK,EAGtB,CACH,KAAM,wBACN,IAAK,KAAK,YAAY4D,EAAO,KAAK,UAAU,EAC5C,KAAA+G,EACA,SAAAoB,CACR,CACA,CAEO,SAASuR,GAASznB,EAAM,CAC3B,KAAK,MAAMkL,GAAO,GAAG,EACrB,KAAK,MAAMA,GAAO,GAAG,EAEjBlL,EAAK,WAAa,KAClB,KAAK,MAAMmK,EAAOnK,EAAK,IAAI,GAE3B,KAAK,MAAMqQ,EAAerQ,EAAK,KAAO,GAAG,EACzC,KAAK,SAASA,CAAI,EAClB,KAAK,MAAMwL,EAAkB,GAAG,EAExC,8JC3DMqvB,GAAU,GAYhB,SAASgC,IAAc,CAGnB,OAFA,KAAK,OAAM,EAEH,KAAK,UAAS,CAClB,KAAK3kB,EACD,OAAO,KAAK,SAEhB,KAAK7H,EACD,OAAO,KAAK,SAAS,KAAK,aAAc,KAAK,MAAM,KAAK,EAE5D,QACI,KAAK,MAAM,gCAAgC,CAClD,CACL,CAEO,MAAMyE,GAAO,QACP6P,GAAY,CACrB,KAAM,CAAC,SAAU,UAAU,EAC3B,MAAO,CAAC,SAAU,WAAY,IAAI,CACtC,EAGO,SAAS6L,IAAQ,CACpB,MAAMziB,EAAQ,KAAK,WACb7J,EAAO24B,GAAY,KAAK,IAAI,EAClC,IAAIR,EAAQ,KAEZ,YAAK,OAAM,EACP,KAAK,QAAQxB,EAAO,IACpB,KAAK,SAASA,EAAO,EACrBwB,EAAQQ,GAAY,KAAK,IAAI,GAG1B,CACH,KAAM,QACN,IAAK,KAAK,YAAY9uB,EAAO,KAAK,UAAU,EAC5C,KAAA7J,EACA,MAAAm4B,CACR,CACA,CAEO,SAAS5U,GAASznB,EAAM,CAC3B,KAAK,KAAKA,EAAK,IAAI,EACnB,KAAK,MAAM2K,EAAO,GAAG,EACjB3K,EAAK,MACL,KAAK,KAAKA,EAAK,KAAK,EAEpB,KAAK,KAAKkY,EAAa,CAAC,CAEhC,+ICjEA,SAAS4kB,IAAqB,CAC1B,OAAI,KAAK,WAAa,GACd,KAAK,WAAW,EAAE,IAAM/xB,EACjB,KAAK,WAAa,EACnB,KAAK,cAAc,KAAK,WAAa,CAAC,EACtC,KAAK,gBAIZ,KAAK,UAChB,CAEO,MAAM+J,GAAO,MACP6P,GAAY,CACrB,MAAO,MACX,EAEO,SAAS6L,GAAMuM,EAAcC,EAAmB,CACnD,MAAMvtB,EAAc,KAAK,cAAc,KAAK,UAAU,EACtD,IAAIwtB,EAEJ,YAAK,kBAAkB,KAAK,WAAYF,GAAgB,KAAK,sBAAsB,EAE/EC,GAAqB,KAAK,WAAavtB,EACvCwtB,EAAYH,GAAmB,KAAK,IAAI,EAExCG,EAAY,KAAK,WAGd,CACH,KAAM,MACN,IAAK,KAAK,YAAYxtB,EAAawtB,CAAS,EAC5C,MAAO,KAAK,UAAUxtB,EAAawtB,CAAS,CACpD,CACA,CAEO,SAASxV,GAASznB,EAAM,CAC3B,KAAK,SAASA,EAAK,KAAK,CAC5B,+ICtCA,SAASy5B,IAAa,CAClB,OAAO,KAAK,IAAI,KAAK,6BAA8B,EAAI,CAC3D,CAEA,SAASyD,IAAiB,CACtB,MAAM7F,EAAU,KAAK,eAErB,OAAIA,EAAQ,OAAS,OACjB,KAAK,MAAQ,IACb,KAAK,YAAc5rB,GACnB,KAAK,MAAK,EAGP4rB,CACX,CAEO,MAAMviB,GAAO,OACP6kB,GAAc,OACdhV,GAAY,CACrB,QAAS,CAAC,eAAgB,KAAK,EAC/B,MAAO,CAAC,OAAO,CACnB,EAEO,SAAS6L,IAAQ,CACpB,MAAMnf,EAAa,KAAK,WAClB5B,EAAc,KAAK,WACzB,IAAI4nB,EACAyC,EAEJ,OAAI,KAAK,iBACLzC,EAAU,KAAK,kBAAkB6F,GAAgBzD,EAAU,EAE3DpC,EAAUoC,GAAW,KAAK,KAAMpoB,CAAU,EAG9C,KAAK,OAAM,EACX,KAAK,IAAI5F,CAAgB,EAEzBquB,EAAQ,KAAK,MAAM,EAAI,EAElB,KAAK,KACN,KAAK,IAAIpuB,EAAiB,EAGvB,CACH,KAAM,OACN,IAAK,KAAK,YAAY+D,EAAa,KAAK,UAAU,EAClD,QAAA4nB,EACA,MAAAyC,CACR,CACA,CACO,SAASrS,GAASznB,EAAM,CAC3B,KAAK,KAAKA,EAAK,OAAO,EACtB,KAAK,MAAMyL,EAAkB,GAAG,EAChC,KAAK,KAAKzL,EAAK,KAAK,EACpB,KAAK,MAAM0L,GAAmB,GAAG,CACrC,8JCpDaoJ,GAAO,QACP6P,GAAY,CACrB,KAAM,CAAC,eAAgB,MAAO,IAAI,EAClC,MAAO,CAAC,eAAgB,MAAO,IAAI,CACvC,EAEO,SAAS6L,IAAQ,CACpB,IAAI3oB,EAAO,KACPs1B,EAAQ,KAEZ,KAAK,OAAM,EAEX,MAAM1tB,EAAc,KAAK,WACzB,OAAI,KAAK,YAAclE,IACnB,KAAK,KAAI,EACT,KAAK,OAAM,EACX1D,EAAO,KAAK,kBACR,KAAK,aACL,IAAM,KAAK,IAAI,GAAO,EAAI,CACtC,EACQ,KAAK,OAAM,EACX,KAAK,IAAI2D,CAAgB,GAGzB,KAAK,gBAAgB,CAAC,IAAMrB,IAC5B,KAAK,OAAM,EACX,KAAK,SAAS,IAAI,EAClB,KAAK,OAAM,EACX,KAAK,IAAIoB,CAAe,EACxB,KAAK,OAAM,EACX4xB,EAAQ,KAAK,kBACT,KAAK,aACL,IAAM,KAAK,IAAI,GAAO,EAAI,CACtC,EACQ,KAAK,OAAM,EACX,KAAK,IAAI3xB,CAAgB,GAGtB,CACH,KAAM,QACN,IAAK,KAAK,YAAYiE,EAAa,KAAK,UAAU,EAClD,KAAA5H,EACA,MAAAs1B,CACR,CACA,CAEO,SAAS1V,GAASznB,EAAM,CACvBA,EAAK,OACL,KAAK,MAAMuL,EAAiB,GAAG,EAC/B,KAAK,KAAKvL,EAAK,IAAI,EACnB,KAAK,MAAMwL,EAAkB,GAAG,GAGhCxL,EAAK,QACL,KAAK,MAAMmK,EAAO,IAAI,EACtB,KAAK,MAAMoB,EAAiB,GAAG,EAC/B,KAAK,KAAKvL,EAAK,KAAK,EACpB,KAAK,MAAMwL,EAAkB,GAAG,EAExC,+ICjEasJ,GAAO,WACP6P,GAAY,CACrB,SAAU,CAAC,CACP,eACA,aACA,gBACA,oBACA,sBACA,wBACA,YACR,CAAK,CACL,EAEO,SAAS6L,IAAQ,CACpB,MAAMta,EAAW,KAAK,aAAa,KAAK,MAAM,QAAQ,EAGtD,OAAI,KAAK,iBAAiBA,CAAQ,IAAM,MACpC,KAAK,MAAM,sBAAsB,EAG9B,CACH,KAAM,WACN,IAAK,KAAK,oBAAoBA,CAAQ,EACtC,SAAAA,CACR,CACA,CAEO,SAASuR,GAASznB,EAAM,CAC3B,KAAK,SAASA,CAAI,CACtB,+IC5Ba8U,GAAO,eACP6kB,GAAc,WACdhV,GAAY,CACrB,SAAU,CAAC,CACP,WACA,KACR,CAAK,CACL,EAEO,SAAS6L,IAAQ,CACpB,MAAMta,EAAW,KAAK,aAEtB,KAAO,CAAC,KAAK,KAAK,CAGd,GAFAA,EAAS,KAAK,KAAK,SAAU,CAAA,EAEzB,KAAK,YAAc9K,GAAO,CAC1B,KAAK,KAAI,EACT,QACH,CAED,KACH,CAED,MAAO,CACH,KAAM,eACN,IAAK,KAAK,oBAAoB8K,CAAQ,EACtC,SAAAA,CACR,CACA,CAEO,SAASuR,GAASznB,EAAM,CAC3B,KAAK,SAASA,EAAM,IAAM,KAAK,MAAMoL,GAAO,GAAG,CAAC,CACpD,8JC1BMgyB,GAAkB,GAClBC,GAAiB,GACjBzP,GAAa,GAEZ,SAAS0P,GAAOvlB,EAAK,CACxB,MAAM6G,EAAM7G,EAAI,OACVwlB,EAAYxlB,EAAI,WAAW,CAAC,EAC5BhK,EAAQwvB,IAAcF,IAAkBE,IAAc3P,GAAa,EAAI,EACvE5f,EAAMD,IAAU,GAAK6Q,EAAM,GAAK7G,EAAI,WAAW6G,EAAM,CAAC,IAAM2e,EAAY3e,EAAM,EAAIA,EAAM,EAC9F,IAAI4e,EAAU,GAEd,QAASnwB,EAAIU,EAAOV,GAAKW,EAAKX,IAAK,CAC/B,IAAIxB,EAAOkM,EAAI,WAAW1K,CAAC,EAE3B,GAAIxB,IAASuxB,GAAiB,CAE1B,GAAI/vB,IAAMW,EAAK,CAGPX,IAAMuR,EAAM,IACZ4e,EAAUzlB,EAAI,OAAO1K,EAAI,CAAC,GAE9B,KACH,CAKD,GAHAxB,EAAOkM,EAAI,WAAW,EAAE1K,CAAC,EAGrBb,GAAc4wB,GAAiBvxB,CAAI,EAAG,CACtC,MAAM4xB,EAAcpwB,EAAI,EAClBqwB,EAAYpvB,GAAeyJ,EAAK0lB,CAAW,EAEjDpwB,EAAIqwB,EAAY,EAChBF,GAAW5uB,GAAcmJ,EAAI,UAAU0lB,EAAc,EAAGC,CAAS,CAAC,CAClF,MAEoB7xB,IAAS,IAAUkM,EAAI,WAAW1K,EAAI,CAAC,IAAM,IAC7CA,GAGpB,MACYmwB,GAAWzlB,EAAI1K,CAAC,CAEvB,CAED,OAAOmwB,CACX,CAIO,SAASG,GAAO5lB,EAAK6lB,EAAY,CACpC,MAAMC,EAA4B,IAC5BC,EAAsCT,GAC5C,IAAIpjB,EAAU,GACV8jB,EAAsB,GAE1B,QAAS1wB,EAAI,EAAGA,EAAI0K,EAAI,OAAQ1K,IAAK,CACjC,MAAMxB,EAAOkM,EAAI,WAAW1K,CAAC,EAG7B,GAAIxB,IAAS,EAAQ,CACjBoO,GAAW,IACX,QACH,CAKD,GAAIpO,GAAQ,IAAUA,IAAS,IAAQ,CACnCoO,GAAW,KAAOpO,EAAK,SAAS,EAAE,EAClCkyB,EAAsB,GACtB,QACH,CAGGlyB,IAASiyB,GAAajyB,IAASuxB,IAC/BnjB,GAAW,KAAOlC,EAAI,OAAO1K,CAAC,EAC9B0wB,EAAsB,KAElBA,IAAwBjyB,GAAWD,CAAI,GAAKU,GAAaV,CAAI,KAC7DoO,GAAW,KAIfA,GAAWlC,EAAI,OAAO1K,CAAC,EACvB0wB,EAAsB,GAE7B,CAED,OAAOF,EAAQ5jB,EAAU4jB,CAC7B,CC/FO,MAAM/oB,GAAO,SACP6P,GAAY,CACrB,MAAO,MACX,EAEO,SAAS6L,IAAQ,CACpB,MAAO,CACH,KAAM,SACN,IAAK,KAAK,YAAY,KAAK,WAAY,KAAK,QAAQ,EACpD,MAAO8M,GAAO,KAAK,QAAQra,EAAW,CAAC,CAC/C,CACA,CAEO,SAASwE,GAASznB,EAAM,CAC3B,KAAK,MAAMijB,GAAa0a,GAAO39B,EAAK,KAAK,CAAC,CAC9C,+ICVMuW,GAAkB,GAExB,SAASkjB,IAAa,CAClB,OAAO,KAAK,IAAI,KAAM,EAAK,CAC/B,CAEO,MAAM3kB,GAAO,aACP6kB,GAAc,aACdhV,GAAY,CACrB,SAAU,CAAC,CACP,UACA,MACA,MACA,SACA,OACA,KACR,CAAK,CACL,EAEO,SAAS6L,IAAQ,CACpB,MAAMziB,EAAQ,KAAK,WACbmI,EAAW,KAAK,aACtB,IAAIG,EAGJ,KAAO,CAAC,KAAK,KAAK,CACd,OAAQ,KAAK,UAAS,CAClB,KAAKtL,EACD,KAAK,KAAI,EACT,SAEJ,KAAKY,EAED,GAAI,KAAK,WAAW,KAAK,WAAa,CAAC,IAAM4K,GAAiB,CAC1D,KAAK,KAAI,EACT,QACH,CAEDF,EAAQ,KAAK,UACb,MAEJ,KAAKrL,GACDqL,EAAQ,KAAK,MACb,MAEJ,KAAKpL,GACDoL,EAAQ,KAAK,MACb,MAKJ,KAAKhM,EACDgM,EAAQ,KAAK,kBAAkB,KAAK,OAAQojB,EAAU,EACtD,MAGJ,QACIpjB,EAAQ,KAAK,kBAAkB,KAAK,KAAMojB,EAAU,CAC3D,CAEDvjB,EAAS,KAAKG,CAAK,CACtB,CAED,MAAO,CACH,KAAM,aACN,IAAK,KAAK,YAAYtI,EAAO,KAAK,UAAU,EAC5C,SAAAmI,CACR,CACA,CAEO,SAASuR,GAASznB,EAAM,CAC3B,KAAK,SAASA,CAAI,CACtB,8JC5Ea8U,GAAO,sBACP6P,GAAY,CACrB,YAAa,aACjB,EAEO,SAAS6L,IAAQ,CACpB,MAAMziB,EAAQ,KAAK,WAEnB,KAAK,IAAIxC,CAAe,EACxB,KAAK,OAAM,EAEX,MAAMqsB,EAAc,KAAK,cAEzB,OAAK,KAAK,KACN,KAAK,IAAIpsB,CAAgB,EAGtB,CACH,KAAM,sBACN,IAAK,KAAK,YAAYuC,EAAO,KAAK,UAAU,EAC5C,YAAA6pB,CACR,CACA,CAEO,SAASnQ,GAASznB,EAAM,CAC3B,KAAK,MAAMuL,EAAiB,GAAG,EAC/B,KAAK,KAAKvL,EAAK,WAAW,EAC1B,KAAK,MAAMwL,EAAkB,GAAG,CACpC,+IC/BMuiB,GAAW,GACXQ,GAAe,IAErB,SAASyP,IAA0B,CAC3B,KAAK,YAAc7zB,GACnB,KAAK,QAAQ4jB,EAAQ,IAAM,IAC3B,KAAK,MAAM,oCAAoC,EAGnD,KAAK,KAAI,CACb,CAEO,MAAMjZ,GAAO,eACP6P,GAAY,CACrB,KAAM,MACV,EAUO,SAAS6L,IAAQ,CACpB,MAAMziB,EAAQ,KAAK,WAEnB,OAAI,KAAK,QAAQwgB,EAAY,GACzB,KAAK,KAAI,EACTyP,GAAwB,KAAK,IAAI,IAEjCA,GAAwB,KAAK,IAAI,EAE7B,KAAK,QAAQzP,EAAY,IACzB,KAAK,KAAI,EACTyP,GAAwB,KAAK,IAAI,IAIlC,CACH,KAAM,eACN,IAAK,KAAK,YAAYjwB,EAAO,KAAK,UAAU,EAC5C,KAAM,KAAK,eAAeA,CAAK,CACvC,CACA,CAEO,SAAS0Z,GAASznB,EAAM,CAC3B,KAAK,SAASA,EAAK,IAAI,CAC3B,+IC5CM6iB,GAAW,GACXC,GAAc,GACduH,GAAe,GAErB,SAAS4T,GAAexwB,EAAQgd,EAAW,CACvC,IAAI7L,EAAM,EAEV,QAASzN,EAAM,KAAK,WAAa1D,EAAQ0D,EAAM,KAAK,SAAUA,IAAO,CACjE,MAAMtF,EAAO,KAAK,WAAWsF,CAAG,EAEhC,GAAItF,IAASiX,IAAe2H,GAAa7L,IAAQ,EAC7C,OAAAqf,GAAe,KAAK,KAAMxwB,EAASmR,EAAM,EAAG,EAAK,EAC1C,GAGN9S,GAAWD,CAAI,GAChB,KAAK,MACD4e,GAAa7L,IAAQ,EACf,gBAAkBA,EAAM,EAAI,gBAAkB,IAAM,eACnDA,EAAM,EAAI,wBAA0B,mBAC3CzN,CAChB,EAGY,EAAEyN,EAAM,GACR,KAAK,MAAM,sBAAuBzN,CAAG,CAE5C,CAED,YAAK,KAAI,EACFyN,CACX,CAEA,SAASsf,GAAwBzgC,EAAK,CAClC,IAAI0gC,EAAQ,EAEZ,KAAO,KAAK,QAAQ9T,EAAY,GACxB,EAAE8T,EAAQ1gC,GACV,KAAK,MAAM,yBAAyB,EAGxC,KAAK,KAAI,CAEjB,CAEA,SAAS8sB,GAAW1e,EAAM,CAClB,KAAK,WAAW,KAAK,UAAU,IAAMA,GACrC,KAAK,OAAOA,IAASgX,GAAW,YAAc,gBAAkB,cAAc,CAEtF,CAqBA,SAASub,IAAmB,CACxB,IAAIC,EAAY,EAEhB,OAAQ,KAAK,UAAS,CAClB,KAAKzzB,EAMD,GAFAyzB,EAAYJ,GAAe,KAAK,KAAM,EAAG,EAAI,EAEzC,KAAK,QAAQ5T,EAAY,EAAG,CAC5B6T,GAAwB,KAAK,KAAM,EAAIG,CAAS,EAChD,KACH,CAED,GAAI,KAAK,YAAcvzB,GACnB,KAAK,YAAcF,EAAQ,CAC3B2f,GAAW,KAAK,KAAMzH,EAAW,EACjCmb,GAAe,KAAK,KAAM,EAAG,EAAK,EAClC,KACH,CAED,MAEJ,KAAKnzB,EAEDuzB,EAAYJ,GAAe,KAAK,KAAM,EAAG,EAAI,EAEzCI,EAAY,GACZH,GAAwB,KAAK,KAAM,EAAIG,CAAS,EAGpD,MAEJ,QAKI,GAFA,KAAK,SAASxb,EAAQ,EAElB,KAAK,YAAc1Y,EAAO,CAC1Bk0B,EAAYJ,GAAe,KAAK,KAAM,EAAG,EAAI,EACzCI,EAAY,GACZH,GAAwB,KAAK,KAAM,EAAIG,CAAS,EAEpD,KACH,CAED,GAAI,KAAK,QAAQhU,EAAY,EAAG,CAC5B,KAAK,KAAI,EACT6T,GAAwB,KAAK,KAAM,CAAC,EACpC,KACH,CAED,KAAK,MAAM,wCAAwC,CAC1D,CACL,CAEO,MAAMppB,GAAO,eACP6P,GAAY,CACrB,MAAO,MACX,EAEO,SAAS6L,IAAQ,CACpB,MAAMziB,EAAQ,KAAK,WAGnB,YAAK,SAAS,GAAG,EACjBqwB,GAAiB,KAAK,IAAI,EAEnB,CACH,KAAM,eACN,IAAK,KAAK,YAAYrwB,EAAO,KAAK,UAAU,EAC5C,MAAO,KAAK,eAAeA,CAAK,CACxC,CACA,CAEO,SAAS0Z,GAASznB,EAAM,CAC3B,KAAK,SAASA,EAAK,KAAK,CAC5B,+ICnJMytB,GAAQ,GACR2P,GAAkB,GAClBC,GAAiB,GACjBzP,GAAa,GACbC,GAAkB,GAClBC,GAAmB,GAElB,SAASwP,GAAOvlB,EAAK,CACxB,MAAM6G,EAAM7G,EAAI,OAChB,IAAIhK,EAAQ,EACRC,EAAM+J,EAAI,WAAW6G,EAAM,CAAC,IAAMkP,GAAmBlP,EAAM,EAAIA,EAAM,EACrE4e,EAAU,GAEd,KAAOzvB,EAAQC,GAAOzB,GAAawL,EAAI,WAAWhK,CAAK,CAAC,GACpDA,IAGJ,KAAOA,EAAQC,GAAOzB,GAAawL,EAAI,WAAW/J,CAAG,CAAC,GAClDA,IAGJ,QAASX,EAAIU,EAAOV,GAAKW,EAAKX,IAAK,CAC/B,IAAIxB,EAAOkM,EAAI,WAAW1K,CAAC,EAE3B,GAAIxB,IAASuxB,GAAiB,CAE1B,GAAI/vB,IAAMW,EAAK,CAGPX,IAAMuR,EAAM,IACZ4e,EAAUzlB,EAAI,OAAO1K,EAAI,CAAC,GAE9B,KACH,CAKD,GAHAxB,EAAOkM,EAAI,WAAW,EAAE1K,CAAC,EAGrBb,GAAc4wB,GAAiBvxB,CAAI,EAAG,CACtC,MAAM4xB,EAAcpwB,EAAI,EAClBqwB,EAAYpvB,GAAeyJ,EAAK0lB,CAAW,EAEjDpwB,EAAIqwB,EAAY,EAChBF,GAAW5uB,GAAcmJ,EAAI,UAAU0lB,EAAc,EAAGC,CAAS,CAAC,CAClF,MAEoB7xB,IAAS,IAAUkM,EAAI,WAAW1K,EAAI,CAAC,IAAM,IAC7CA,GAGpB,MACYmwB,GAAWzlB,EAAI1K,CAAC,CAEvB,CAED,OAAOmwB,CACX,CAEO,SAASG,GAAO5lB,EAAK,CACxB,IAAIkC,EAAU,GACV8jB,EAAsB,GAE1B,QAAS1wB,EAAI,EAAGA,EAAI0K,EAAI,OAAQ1K,IAAK,CACjC,MAAMxB,EAAOkM,EAAI,WAAW1K,CAAC,EAG7B,GAAIxB,IAAS,EAAQ,CACjBoO,GAAW,IACX,QACH,CAKD,GAAIpO,GAAQ,IAAUA,IAAS,IAAQ,CACnCoO,GAAW,KAAOpO,EAAK,SAAS,EAAE,EAClCkyB,EAAsB,GACtB,QACH,CAEGlyB,IAAS4hB,IACT5hB,IAASuxB,IACTvxB,IAASwxB,IACTxxB,IAAS+hB,IACT/hB,IAASgiB,IACThiB,IAASiiB,IACT7T,GAAW,KAAOlC,EAAI,OAAO1K,CAAC,EAC9B0wB,EAAsB,KAElBA,GAAuBjyB,GAAWD,CAAI,IACtCoO,GAAW,KAGfA,GAAWlC,EAAI,OAAO1K,CAAC,EACvB0wB,EAAsB,GAE7B,CAED,MAAO,OAAS9jB,EAAU,GAC9B,CClGO,MAAMnF,GAAO,MACP6P,GAAY,CACrB,MAAO,MACX,EAGO,SAAS6L,IAAQ,CACpB,MAAMziB,EAAQ,KAAK,WACnB,IAAIhQ,EAEJ,OAAQ,KAAK,UAAS,CAClB,KAAK0M,GACD1M,EAAQugC,GAAW,KAAK,QAAQ7zB,EAAG,CAAC,EACpC,MAEJ,KAAK4F,EACI,KAAK,OAAO,KAAK,WAAY,KAAK,SAAU,MAAM,GACnD,KAAK,MAAM,6BAA6B,EAG5C,KAAK,IAAIA,CAAa,EACtB,KAAK,OAAM,EACXtS,EAAQwgC,GAAc,KAAK,QAAQtb,EAAW,CAAC,EAC/C,KAAK,OAAM,EACN,KAAK,KACN,KAAK,IAAIzX,CAAgB,EAE7B,MAEJ,QACI,KAAK,MAAM,6BAA6B,CAC/C,CAED,MAAO,CACH,KAAM,MACN,IAAK,KAAK,YAAYuC,EAAO,KAAK,UAAU,EAC5C,MAAAhQ,CACR,CACA,CAEO,SAAS0pB,GAASznB,EAAM,CAC3B,KAAK,MAAMyK,GAAK+zB,GAAWx+B,EAAK,KAAK,CAAC,CAC1C,+ICnDa8U,GAAO,QACP6P,GAAY,CACrB,SAAU,CAAC,CAAA,CAAE,CACjB,EAEO,SAAS6L,IAAQ,CACpB,MAAMziB,EAAQ,KAAK,WACbmI,EAAW,KAAK,aAAa,KAAK,MAAM,KAAK,EAEnD,MAAO,CACH,KAAM,QACN,IAAK,KAAK,YAAYnI,EAAO,KAAK,UAAU,EAC5C,SAAAmI,CACR,CACA,CAEO,SAASuR,GAASznB,EAAM,CAC3B,KAAK,SAASA,CAAI,CACtB,+IChBMytB,GAAQ,OAAO,OAAO,CACxB,KAAM,aACN,IAAK,KACL,MAAO,GACX,CAAC,EAEY3Y,GAAO,aACP6P,GAAY,CACrB,MAAO,MACX,EAEO,SAAS6L,IAAQ,CACpB,YAAK,IAAIzlB,CAAU,EACZ0iB,EAOX,CAEO,SAAShG,GAASznB,EAAM,CAC3B,KAAK,MAAM+K,EAAY/K,EAAK,KAAK,CACrC,y3BCvBey+B,GAAA91B,GAAAxK,EAAA,CACX,QAAS,IACNk7B,IAFQ,CAGf,KAAIr5B,EACJ,GCQMwW,GAAa,GACbuX,GAAW,GACXlL,GAAW,GACXC,GAAc,GACd+X,GAAU,GACVvQ,GAAI,IAEK,SAASoU,GAAkBtoB,EAAS,CAC/C,OAAQ,KAAK,UAAS,CAClB,KAAK9L,EACD,OAAO,KAAK,OAEhB,KAAKc,GACD,OAAO,KAAK,WAEhB,KAAKG,EACD,OAAO,KAAK,YAAY,KAAK,aAAc6K,EAAQ,UAAU,EAEjE,KAAK/K,GACD,OAAO,KAAK,SAAS,KAAK,aAAc+K,EAAQ,UAAU,EAE9D,KAAK6M,GACD,OAAO,KAAK,SAEhB,KAAKnY,EACD,OAAO,KAAK,YAEhB,KAAKD,EACD,OAAO,KAAK,aAEhB,KAAKqN,EACD,OAAO,KAAK,SAEhB,KAAK7H,EACD,OAAO,KAAK,OAAO,KAAK,WAAY,KAAK,SAAU,MAAM,EACnD,KAAK,IAAK,EACV,KAAK,SAAS,KAAK,aAAc+F,EAAQ,UAAU,EAE7D,KAAK3L,GACD,OAAO,KAAK,MAEhB,KAAKN,EAED,OAAI,KAAK,QAAQ,KAAK,WAAYmgB,EAAC,GAC/B,KAAK,QAAQ,KAAK,WAAa,EAAGzH,EAAQ,EACnC,KAAK,eAEL,KAAK,aAGpB,KAAKlY,EAAO,CACR,MAAMkB,EAAO,KAAK,WAAW,KAAK,UAAU,EAE5C,GAAIA,IAASgvB,IACThvB,IAASkiB,IACTliB,IAASgX,IACThX,IAASiX,GACT,OAAO,KAAK,WAKZjX,IAAS2K,IACT,KAAK,MAAM,gCAAiC,KAAK,WAAa,CAAC,EAGnE,KACH,CACJ,CACL,CClFe,MAAAmoB,GAAA,CACf,QAAIC,EACJ,ECOMpoB,GAAa,GACbmX,GAAY,GACZI,GAAW,GACXlL,GAAW,GACXgY,GAAU,GACVD,GAAW,GACXzM,GAAkB,GAClBI,GAAe,IACf2L,GAAQ,IAEd,SAAS2E,GAAaztB,EAAM8E,EAAU,CAC9BA,EAAS,OAAS,MAAQA,EAAS,KAAK,OAAS,cACjD9E,IAAS,MAAQA,EAAK,OAAS,cAC/B8E,EAAS,KAAK,CACV,KAAM,aACN,IAAK,KACL,KAAM,GAClB,CAAS,CAET,CAEA,SAAS0oB,IAAU,CACf,OAAQ,KAAK,UAAS,CAClB,KAAKvzB,GACD,OAAO,KAAK,oBAEhB,KAAKf,EACD,OAAO,KAAK,aAEhB,KAAKY,GACD,OAAI,KAAK,WAAW,CAAC,IAAMA,GAChB,KAAK,wBAEL,KAAK,sBAGpB,KAAKf,EACD,OAAO,KAAK,eAEhB,KAAK+N,EACL,KAAKrN,EACD,OAAO,KAAK,aAEhB,KAAKC,EAEG,KAAK,WAAW,KAAK,UAAU,IAAM8vB,IACrC,KAAK,MAAM,yBAA0B,KAAK,WAAa,CAAC,EAE5D,MAEJ,KAAKjwB,EAAO,CAGR,OAFa,KAAK,WAAW,KAAK,UAAU,EAEhC,CACR,KAAKkY,GACL,KAAKsL,GACL,KAAK+L,GACL,KAAKW,GACD,OAAO,KAAK,aAEhB,KAAKD,GACD,OAAO,KAAK,gBAEhB,KAAK7M,GACL,KAAKQ,GACD,OAAO,KAAK,eAEhB,KAAK/X,GACD,OAAO,KAAK,aAEhB,KAAKmX,GACD,OAAO,KAAK,iBACnB,CAED,KACH,CACJ,CACL,CAEe,MAAAmR,GAAA,CACX,aAAAD,GACA,QAAAD,EACJ,EC3Fe,SAAAG,IAAW,CACtB,OAAO,KAAK,qBACR,KAAK,IAAI,KAAM,EAAK,CAC5B,CACA,CCHe,SAAAC,IAAW,CACtB,MAAM9oB,EAAW,KAAK,aAStB,GAPA,KAAK,OAAM,EAGXA,EAAS,KAAK,KAAK,WAAY,CAAA,EAE/B,KAAK,OAAM,EAEP,KAAK,YAAc9K,GAAO,CAC1B8K,EAAS,KAAK,KAAK,SAAU,CAAA,EAE7B,MAAMwB,EAAa,KAAK,WAClB3Z,EAAQ,KAAK,oBACb,KAAK,MAAM,IAAI,EACf,KAAK,IAAI,KAAK,uCAAwC,EAAK,EAEjE,GAAIA,EAAM,OAAS,SAAWA,EAAM,SAAS,SACzC,QAAS0P,EAASiK,EAAa,KAAK,WAAYjK,GAAU,EAAGA,IACzD,GAAI,KAAK,WAAWA,CAAM,IAAM1C,EAAY,CACxChN,EAAM,SAAS,WAAW,CACtB,KAAM,aACN,IAAK,KACL,MAAO,GAC/B,CAAqB,EACD,KACH,EAITmY,EAAS,KAAKnY,CAAK,CACtB,CAED,OAAOmY,CACX,CClCA,SAAS+oB,GAAoBj/B,EAAM,CAC/B,OACIA,IAAS,MACTA,EAAK,OAAS,aACbA,EAAK,MAAMA,EAAK,MAAM,OAAS,CAAC,IAAM,KAAOA,EAAK,MAAMA,EAAK,MAAM,OAAS,CAAC,IAAM,IAE5F,iGAEe,CACf,QAAI4+B,GACA,aAAaxtB,EAAM8E,EAAU,CACrB+oB,GAAoB7tB,CAAI,IACxBA,EAAK,MAAQ,IAAMA,EAAK,OAExB6tB,GAAoB/oB,EAAS,IAAI,IACjCA,EAAS,KAAK,OAAS,IAE9B,EACD,WAAc6oB,GACd,IAAOC,EACX,yCCpBME,GAA2B,IAAI,IAAI,CAAC,OAAQ,MAAO,MAAO,IAAI,CAAC,EAEtDC,GAAA,CACX,MAAO,CACH,SAAU,CACN,MAAMjpB,EAAW,KAAK,aAEtB,GAAI,KAAK,YAAc/L,EAAO,CAC1B,MAAM2K,EAAO,KAAK,UAAU,KAAK,WAAY,KAAK,QAAQ,EAErDoqB,GAAyB,IAAIpqB,EAAK,YAAa,CAAA,GAChDoB,EAAS,KAAK,KAAK,WAAY,CAAA,CAEtC,CAED,OAAAA,EAAS,KAAK,KAAK,UAAU,WAAW,CAAC,EAElCA,CACV,EACD,MAAMkpB,EAAS,GAAO,CAClB,OAAO,KAAK,MAAMA,CAAM,CAC3B,CACJ,CACL,EC3BeC,GAAA,CACX,MAAO,CACH,QAAS,KACT,OAAQ,CACJ,OAAO,KAAK,MAAM,EAAI,CACzB,CACJ,CACL,ECEA,SAASC,GAAkB9O,EAAO/Y,EAAU,CACxC,OAAO,KAAK,kBACR,IAAM,CACF,GAAI,CACA,OAAO+Y,EAAM,KAAK,IAAI,CACtC,QAAsB,CACN,KAAK,OAAM,EACP,KAAK,gBAAgB,CAAC,IAAMhlB,GAC5B,KAAK,MAAK,CAEjB,CACJ,EACDiM,IAAa,IAAM,KAAK,IAAI,KAAM,EAAI,EAC9C,CACA,CAEA,MAAM8nB,GAAiB,CACnB,OAAQ,CACJ,KAAK,OAAM,EAEX,MAAMrpB,EAAW,KAAK,aAChBlW,EAAOs/B,GAAkB,KAAK,KAAM,KAAK,KAAK,EAEpD,OAAIt/B,EAAK,OAAS,OAASA,EAAK,QAAU,KACtCkW,EAAS,KAAKlW,CAAI,EAGfkW,CACV,EACD,UAAW,CACP,KAAK,OAAM,EAEX,MAAMA,EAAW,KAAK,aAChBlW,EAAOs/B,GAAkB,KAC3B,KACA,KAAK,YACL,IAAMA,GAAkB,KAAK,KAAM,IAAM,KAAK,UAAU,UAAU,CAAC,CAC/E,EAEQ,OAAIt/B,EAAK,OAAS,OAASA,EAAK,QAAU,KACtCkW,EAAS,KAAKlW,CAAI,EAGfkW,CACV,CACL,EC3CemgB,GAAA,CACX,UAAA8I,GACA,YAAaE,GACb,OD0CW,CACX,MAAO,CACH,SAAU,CACN,MAAMnpB,EAAW,KAAK,aAEtB,OAAQ,KAAK,UAAS,CAClB,KAAK+M,GACD/M,EAAS,KAAK,KAAK,OAAQ,CAAA,EAC3B,MAEJ,KAAKzL,GACL,KAAK4F,EACD6F,EAAS,KAAK,KAAK,IAAK,CAAA,EACxB,MAEJ,QACI,KAAK,MAAM,6BAA6B,CAC/C,CAED,YAAK,OAAM,EAEP,KAAK,YAAc/L,GACnB,KAAK,OAAO,KAAK,WAAY,KAAK,SAAU,OAAO,EACnD+L,EAAS,KAAK,KAAK,WAAY,CAAA,EAE/B,KAAK,YAAc7F,GACnB,KAAK,OAAO,KAAK,WAAY,KAAK,SAAU,QAAQ,GAEpD6F,EAAS,KAAK,KAAK,SAAS,KAAMqpB,EAAc,CAAC,EAGrD,KAAK,OAAM,EAEP,KAAK,YAAclvB,GACnB,KAAK,OAAO,KAAK,WAAY,KAAK,SAAU,WAAW,GACvD6F,EAAS,KAAK,KAAK,SAAS,KAAMqpB,EAAc,CAAC,GAGjD,KAAK,gBAAgB,CAAC,IAAMp1B,GAC5B,KAAK,gBAAgB,CAAC,IAAMoB,IAC5B2K,EAAS,KAAK,KAAK,eAAgB,CAAA,EAGhCA,CACV,EACD,MAAO,IACV,CACL,ECxFI,MCfW,CACX,MAAO,CACH,SAAU,CACN,OAAO,KAAK,qBACR,KAAK,UAAW,CAChC,CACS,EACD,OAAQ,CACJ,OAAO,KAAK,MAAM,EAAK,CAC1B,CACJ,CACL,EDKI,MEhBW,CACX,MAAO,CACH,SAAU,CACN,OAAO,KAAK,qBACR,KAAK,eAAgB,CACrC,CACS,EACD,MAAMkpB,EAAS,GAAO,CAClB,OAAO,KAAK,MAAMA,CAAM,CAC3B,CACJ,CACL,EFMI,KGjBW,CACX,MAAO,CACH,SAAU,CACN,OAAO,KAAK,qBACR,KAAK,aAAc,CACnC,CACS,EACD,OAAQ,CACJ,OAAO,KAAK,MAAM,EAAI,CACzB,CACJ,CACL,EHOI,KIlBW,CACX,MAAO,CACH,SAAU,CACN,OAAO,KAAK,qBACR,KAAK,aAAc,CACnC,CACS,EACD,OAAQ,CACJ,OAAO,KAAK,MAAM,EAAI,CACzB,CACJ,CACL,EJQI,MKnBW,CACX,MAAO,CACH,SAAU,CACN,OAAO,KAAK,qBACR,KAAK,MAAO,CAC5B,CACS,EACD,MAAMA,EAAS,GAAO,CAClB,OAAO,KAAK,MAAMA,CAAM,CAC3B,CACJ,CACL,ELSI,iBMpBW,CACX,MAAO,CACH,QAAS,KACT,MAAMA,EAAS,GAAO,CAClB,OAAO,KAAK,MAAMA,CAAM,CAC3B,CACJ,CACL,ENcI,SOrBW,CACX,MAAO,CACH,SAAU,CACN,OAAO,KAAK,qBACR,KAAK,UAAU,UAAU,CACzC,CACS,EACD,MAAMA,EAAS,GAAO,CAClB,OAAO,KAAK,MAAMA,CAAM,CAC3B,CACJ,CACL,CPWA,EQpBO,SAASI,IAAyB,CACrC,MAAMtpB,EAAW,KAAK,aAEtB,KAAK,OAAM,EAEXzE,EAAM,KAAO,CAAC,KAAK,KAAK,CACpB,OAAQ,KAAK,UAAS,CAClB,KAAKtH,EACD+L,EAAS,KAAK,KAAK,WAAY,CAAA,EAC/B,MAEJ,KAAK+M,GACD/M,EAAS,KAAK,KAAK,OAAQ,CAAA,EAC3B,MAEJ,KAAK9K,GACD8K,EAAS,KAAK,KAAK,SAAU,CAAA,EAC7B,MAEJ,KAAK1K,EACD,MAAMiG,EAEV,QACI,KAAK,MAAM,yCAAyC,CAC3D,CAED,KAAK,OAAM,CACd,CAED,OAAOyE,CACX,CC9BA,MAAMupB,GAAe,CACjB,OAAQ,CACJ,OAAO,KAAK,qBACR,KAAK,aAAc,CAC/B,CACK,CACL,EAEMx+B,GAAW,CACb,OAAQ,CACJ,OAAO,KAAK,qBACR,KAAK,SAAU,CAC3B,CACK,CACL,EAEMy+B,GAAY,CACd,OAAQ,CACJ,OAAO,KAAK,qBACR,KAAK,WAAY,CAC7B,CACK,CACL,EAEMC,GAAW,CACb,MAAOH,EACX,EAEM5C,GAAM,CACR,OAAQ,CACJ,OAAO,KAAK,qBACR,KAAK,IAAK,CACtB,CACK,CACL,EC/BegD,GAAA,CACX,aAAc,CACV,QAAS,aACT,WAAY,aACZ,OAAQ,SACR,cAAc/gC,EAAS,CACnB,OAAO,KAAK,cAAcA,EAAQ,OAAS,OAAOA,EAAQ,MAAM,EAAI,IAAI,CAC3E,EACD,eAAgB,iBAChB,WAAY,aACZ,UAAUA,EAAS,CACf,OAAO,KAAK,UAAUA,EAAQ,IAAI,CACrC,EACD,KAAM,OACN,aAAc,eACd,SAAU,WACV,OAAQ,CACJ,OAAO,KAAK,MAAM,EAAI,CACzB,EACD,gBAAiB,kBACjB,YAAa,cACb,MAAO,OACV,EACD,SAAU,CACN,SAAU,CACN,UAAW,CACP,OAAO,KAAK,UACf,CACJ,EACD,UAAW,CACP,OAAQ,CACJ,OAAO,KAAK,aACf,CACJ,CACJ,EACL,MAAIghC,GACA,OAAAxJ,GACA,ODJW,CACX,IAAOqJ,GACP,IAAOD,GACP,KAAQE,GACR,QAAWF,GACX,GAAMA,GACN,WAAYA,GACZ,cAAeA,GACf,MAASA,GACT,IAAOA,GACP,YAAa7C,GACb,iBAAkBA,GAClB,mBAAoBA,GACpB,cAAeA,GACf,QAAW37B,GACX,KAAQA,GACR,eAAgBA,EACpB,ECZI,ivBACJ,EC1Ce6+B,GAAA,CACf,KAAI9/B,EACJ,ECCA0oB,GAAeqQ,GAAa56B,MAAA,GACrBsgC,IACAmB,IACAE,GACN,ECPM,SAASC,GAAM//B,EAAM,CACxB,MAAM6B,EAAS,CAAA,EAEf,UAAWigB,KAAO,OAAO,KAAK9hB,CAAI,EAAG,CACjC,IAAIjC,EAAQiC,EAAK8hB,CAAG,EAEhB/jB,IACI,MAAM,QAAQA,CAAK,GAAKA,aAAiBiW,EACzCjW,EAAQA,EAAM,IAAIgiC,EAAK,EAChBhiC,EAAM,cAAgB,SAC7BA,EAAQgiC,GAAMhiC,CAAK,IAI3B8D,EAAOigB,CAAG,EAAI/jB,CACjB,CAED,OAAO8D,CACX,CCPO,KAAM,CACT,SAAA0O,GACA,MAAAigB,GACA,SAAA/I,GACA,MAAA0N,GACA,YAAA6K,GAEA,KAAA5b,GACA,KAAA6b,GACA,SAAAC,GACA,QAAAC,GAEA,cAAAlH,GACA,gBAAAD,GAEA,KAAAoH,EACJ,EAAI1X,GC7BJ,IAAI2X,GACF,mEAWSC,GAAS,CAACpxB,EAAO,KAAO,CACjC,IAAIqxB,EAAK,GACLlzB,EAAI6B,EACR,KAAO7B,KACLkzB,GAAMF,GAAa,KAAK,OAAQ,EAAG,GAAM,CAAC,EAE5C,OAAOE,CACT,ECdO,MAAMC,GAAgBF,GAAO,EAQ7B,SAASG,GACdzgC,EAC8B,CAC9B,MAAO,GAAQA,GAAQA,EAAK,OAAS,YAAcA,EAAK,OAAS,SACnE,CAEO,SAAS0gC,GAAOC,EAAiB,CAC/B,OAAAC,GAAcD,EAAS,CAC5B,mBAAoB,GACpB,oBAAqB,EAAA,CACtB,CACH,CAEO,SAASE,GAAYpoB,EAAsB,CACzC,OAAAqoB,GAAiBroB,EAAK,CAG3B,KAAM,MAAA,CACP,CACH,CAEO,SAASmhB,GACd55B,EAC8B,CAC9B,OAAOA,EAAK,OAAS,aACvB,CAeO,SAAS+gC,GAAe9+B,EAAqC,CAC3D,OAAAA,EAAK,UAAU,OACpB,CAACwS,EAA6B4B,IACxBA,EAAM,OAAS,YAAcA,EAAM,QAAU,KAC3C5B,EAAA,KAAK,CAAA,CAAE,EACJA,IAEL4B,EAAM,OAAS,cACjB5B,EAAIA,EAAI,OAAS,CAAC,EAAE,KAAK4B,CAAK,EAGzB5B,GAET,CAAC,EAAE,CAAA,CAEP,CAEO,SAASusB,GAAaC,EAAwC,CAC/D,OAACA,EAEGA,EAAK,SACV,IAAKhgC,GAAa,OACb,IAAAigC,IAEAC,EAAAlgC,EAAS,SAAS,OAAlB,YAAAkgC,EAAwB,QAAS,0BACxBlgC,EAAAmgC,GAAcngC,CAAQ,EACbigC,EAAAL,GAAY5/B,EAAS,SAAS,IAAK,EACvDA,EAAS,SAAS,OAGd,MAAAogC,EAAcR,GAAY5/B,CAAQ,EAEjC,MAAA,CACL,SAAUogC,GAAeH,GAAA,KAAAA,EAAqB,IAC9C,YAAAG,EACA,kBAAAH,CAAA,CACF,CACD,EACA,QAAQ,EApBO,EAqBpB,CC7EO,MAAMI,GAA6C,CACxD,kBAAmB,qBAAqBd,EAAa,GACrD,eAAgB,kBAAkBA,EAAa,GAC/C,cAAe,iBAAiBA,EAAa,GAC7C,KAAM,UAAUA,EAAa,GAC7B,MAAO,WAAWA,EAAa,GAC/B,IAAK,SAASA,EAAa,GAC3B,OAAQ,YAAYA,EAAa,GACjC,oBAAqB,uBAAuBA,EAAa,GACzD,kBAAmB,qBAAqBA,EAAa,GACrD,qBAAsB,wBAAwBA,EAAa,GAC3D,mBAAoB,sBAAsBA,EAAa,GACvD,cAAe,iBAAiBA,EAAa,GAC7C,eAAgB,kBAAkBA,EAAa,GAC/C,MAAO,WAAWA,EAAa,EACjC,EAMA,SAASe,GACPvhC,EACA85B,EACA,CACA,OAAIF,GAAc55B,CAAI,GAAKshC,GAAmBthC,EAAK,QAAQ,GAAK85B,GAC9DA,EAAM,SAAS,WAAWnxB,GAAAxK,EAAA,GACrB6B,GADqB,CAExB,SAAUshC,GAAmBthC,EAAK,QAAQ,CAAA,EAC3C,EACM,CAAE,QAAS,KAEb,EACT,CAMO,SAASwhC,GAAWC,EAAwB,CACjD,UAAWC,KAAYD,EAAW,CAChC,IAAIE,EAAU,GACR,MAAAlpB,EAAMioB,GAAOgB,EAAS,GAAG,EAC/BE,GAAanpB,EAAK,CAChB,MAAO,cACP,MAAMzY,EAAM,OACJ,MAAA85B,GAAQqH,EAAA,KAAK,OAAL,YAAAA,EAAW,MACnB,CAAE,QAAAU,CAAY,EAAAN,GAA2BvhC,EAAM85B,CAAK,EACtD+H,IACQF,EAAA,GAEd,CAAA,CACD,EAEGA,IAEOD,EAAA,IAAMb,GAAYpoB,CAAG,EAC9BipB,EAAS,QAAU,GAEvB,CACA,OAAOD,EAAU,KAAMC,GAAaA,EAAS,UAAY,EAAI,CAC/D,CChDkB,IAAAI,IAAAA,IAChBA,EAAA,IAAM,MACNA,EAAA,KAAO,OAFSA,IAAAA,IAAA,CAAA,CAAA,EAWF,SAAAC,GACd/7B,EACAuyB,EACA,OACO,OAAAA,GAAA4I,EAAAG,GAAmB/I,CAAI,IAAvB,KAAA4I,EAA4B5I,GAEjCvyB,aAAc,YAAc,iBAAiBA,CAAE,EAAIA,EAAG,eACnC,iBAAiBuyB,CAAI,EAAE,KAAK,CACnD,CASgB,SAAAyJ,GACdviC,EACAwiC,EACAlkC,EACA,CACO,OAAAgkC,GAAoBtiC,EAASwiC,CAAW,IAAMlkC,CACvD,CAKA,SAASmkC,GACPziC,EACA,CAAE,SAAAwB,EAAU,kBAAAigC,GACZ,CAKM,MAAA/6B,EAAgB,iBAAiB1G,EAASyhC,CAAiB,EAC3DiB,EAAoB,SAAS,cAAc,KAAK,EAChDC,EAAQ,SAAS,cAAc,OAAO,EAE1BD,EAAA,GAAK,uBAAuB7B,GAAA,CAAQ,GAItD,UAAWvX,KAAY,MAAM,KAAK5iB,CAAa,EAAG,CAC1C,MAAApI,EAAQoI,EAAc,iBAAiB4iB,CAAQ,EACnCoZ,EAAA,MAAM,YAAYpZ,EAAUhrB,CAAK,CACrD,CAIMqkC,EAAA,aAAe,IAAID,EAAkB,EAAE,GAAGjB,CAAiB,eAAe/6B,EAAc,OAAO,MAE/Fi8B,EAAA,aAAe,GAAGnhC,CAAQ,iCAEvB,SAAA,KAAK,OAAOmhC,CAAK,EAEpB,MAAAC,EACJnB,IAAsB,WAAa,aAAe,YAC5C,OAAAzhC,EAAA,sBAAsB4iC,EAAgBF,CAAiB,EACxD,CAAE,kBAAAA,EAAmB,MAAAC,EAAO,cAAAj8B,EACrC,CAMA,SAASm8B,GAA0B7iC,EAAsB,CACvD,IAAI8iC,EAAqC9iC,EAEzC,KAAO8iC,GAAgB,CACrB,GAAIP,GAASO,EAAgB,WAAY,QAAQ,EACxC,OAAAA,EAGTA,EAAiBA,EAAe,aAClC,CAEO,OAAAA,CACT,CAMA,SAASC,GAA2B/iC,EAAsB,CACpD,IAAAgjC,EAGOH,GAA0B7iC,CAAO,EAGxC,OAAAgjC,IAA4B,SAAS,kBACbA,EAAA,MAGrBA,GAAA,KAAAA,EAA2B,CAAE,UAAW,EAAG,WAAY,CAAE,CAClE,CAMO,SAASC,GAAsBzhC,EAAoB,CAClD,KAAA,CAAE,YAAAogC,EAAa,kBAAAH,CAAsB,EAAAjgC,EACrCY,EAA0C,CAAA,EAKhD,GAAIq/B,GAAqB,EAJRA,IAAsB,YACvBA,IAAsB,WAGkB,OAAAr/B,EAExD,MAAM3C,EAAW,MAAM,KACrB,SAAS,iBAA8BmiC,CAAW,CAAA,EAGpD,GAAI,CAACH,EACI,OAAAr/B,EAAA,KAAK,GAAG3C,CAAQ,EAChB2C,EAGT,UAAWpC,KAAWP,EAAU,CAC9B,KAAM,CAAE,kBAAAijC,EAAmB,MAAAC,EAAO,cAAAj8B,CAAkB,EAAA+7B,GAClDziC,EACAwB,CAAA,EAGI0hC,EAAqBR,EAAkB,wBACvC,CAAE,QAASS,EAAiB,QAASC,GAAoB,WACzDJ,EAA0BD,GAA2B/iC,CAAO,EAElEoC,EAAO,KAAK,CACV,kBAAAsgC,EACA,cAAAh8B,EAEA,yBAA0B,CACxBg8B,EAAkB,OAAO,EACzBC,EAAM,OAAO,CACf,EAIA,eAAgB3iC,EAGhB,uBAAwB,CAChB,KAAA,CAAE,QAAAqjC,EAAS,QAAAC,CAAY,EAAA,WACvB,CAAE,UAAAC,EAAW,WAAAC,CAAe,EAAAR,EAElC,OAAO,QAAQ,SAAS,CACtB,EACEE,EAAmB,GAClBC,EAAkBE,IAClBL,EAAwB,UAAYO,GACvC,EACEL,EAAmB,GAClBE,EAAkBE,IAClBN,EAAwB,WAAaQ,GAExC,MAAON,EAAmB,MAC1B,OAAQA,EAAmB,MAAA,CAC5B,CACH,CAAA,CACD,CACH,CAEO,OAAA9gC,CACT,CAUgB,SAAAqhC,GACdl9B,EACAm9B,EACA,CACM,MAAAC,EAAqBrB,GAAoB/7B,EAAI,aAAa,EAChE,OAAKm9B,EAGEC,EACJ,MAAM,GAAG,EACT,IAAKtuB,GAASA,EAAK,KAAM,CAAA,EACzB,SAASquB,CAAU,EALb,CAACC,CAMZ,CASgB,SAAAC,GACdr9B,EACAm9B,EACA,CACM,MAAAG,EAAsBvB,GAAoB/7B,EAAI,cAAc,EAEhE,OAAAs9B,IAAwBH,GACxBG,IAAwB,KAE5B,CClPA,MAAMC,GAA0B,kBAEzB,SAASC,GAAYC,EAAgD,CACnE,MAAA,IACJA,EAAK,OAAS,YAAcA,EAAK,MAAQ,eAAiBA,EAAK,KAEpE,CAEA,SAASC,GAAiBD,EAAwC,CAChE,MAAME,EAAS,IAAI,IAAIF,EAAK,KAAM,SAAS,OAAO,EAClD,GAAID,GAAYC,CAAI,GAAKE,EAAO,SAAW,SAAS,OAC3C,OAAAA,CAEX,CAEA,SAAeC,GACbC,EACsB,QAAA/kC,EAAA,sBAmCtB,OAlCgB,MAAM,QAAQ,IAC5B+kC,EAAQ,IAAWz8B,GAAStI,EAAA,4BACtB,GAAA,CAACsI,EAAK,IACD,OAAAA,EAIJ,IAAA+5B,EAAA/5B,EAAK,KAAL,MAAA+5B,EAAyC,SAErC,OAAA,KAGL,GAAA,CACF,MAAM2C,EAAW,MAAM,MAAM18B,EAAK,IAAI,UAAU,EAC1C0J,EAAOgzB,EAAS,QAAQ,IAAI,cAAc,EAChD,GAAI,EAAChzB,GAAA,MAAAA,EAAM,WAAW,aAAa,CACjC,MAAMkE,EAAQ,IAAI,MAChB,iBAAiB5N,EAAK,GAAG,4CAA4C0J,CAAI,IAAA,EAE3E,MAAAkE,EAAM,KAAOuuB,GACPvuB,CACR,CACM,MAAAzT,EAAM,MAAMuiC,EAAS,OACpB,OAAAn7B,GAAAxK,EAAA,GAAKiJ,GAAL,CAAW,IAAA7F,UACXyT,EAAO,CACd,GAAIA,aAAiB,OAASA,EAAM,OAASuuB,GAE3C,eAAQ,KAAKvuB,CAAK,EACX,KAEH,MAAAA,CACR,CAAA,EACD,CAAA,GAEY,OAAQ+uB,GAAWA,IAAW,IAAI,CACnD,GAEA,MAAMC,GAA2C,oBAKjD,SAASC,GAAkB/kC,EAA0B,CAC7C,MAAAglC,EAAgDhlC,EAClDA,EAAS,OACN8G,GACCA,aAAc,aACdA,EAAG,QAAQg+B,EAAwC,GAEvD,MAAM,KACJ,SAAS,iBAAiBA,EAAwC,CAAA,EAElEG,EAAqC,CAAA,EAGxC,OAAAD,EAAA,OAAQl+B,GAAOA,aAAc,WAAW,EACxC,QAASA,GAAO,CACT,MAAA/E,EAAWq/B,GAAO,EAAE,EACpB8D,EAAgB,yBACnBp+B,EAAA,aAAao+B,EAAenjC,CAAQ,EACjC,MAAAojC,EAASr+B,EAAG,aAAa,OAAO,EAChCzE,EAAM,IAAI6iC,CAAa,KAAKnjC,CAAQ,QAAQojC,CAAM,KACxDF,EAAa,KAAK,CAAE,GAAAn+B,EAAI,IAAAzE,CAAK,CAAA,CAAA,CAC9B,EAEI4iC,CACT,CAEsB,SAAAG,GACpBplC,EACAqlC,EACsB,QAAAzlC,EAAA,sBACtB,MAAM0lC,EACJtlC,GAAA,KAAAA,EAAY,MAAM,KAAK,SAAS,iBAAiB,aAAa,CAAC,EAC3D2kC,EAAgC,CAAA,EAGnCW,EAAA,OAAQx+B,GAAOA,aAAc,WAAW,EACxC,QAASA,GAAO,CACf,GAAIA,EAAG,QAAQ,YAAY,IAAM,OAAQ,CACjC,MAAAsV,EAAMooB,GAAiB19B,CAAqB,EAC9CsV,GACFuoB,EAAQ,KAAK,CAAE,GAAA79B,EAAI,IAAAsV,CAAK,CAAA,CAE5B,CACItV,EAAG,QAAQ,YAAY,IAAM,SAC/B69B,EAAQ,KAAK,CAAE,GAAA79B,EAAI,IAAKA,EAAG,UAAW,CACxC,CACD,EAEH,MAAMy+B,EAAqBF,EAAuBrlC,GAAA,KAAAA,EAAY,CAAM,EAAA,OAE9DwlC,EAAUT,GAAkBQ,CAAkB,EAEpD,OAAO,MAAMb,GAAuB,CAAC,GAAGC,EAAS,GAAGa,CAAO,CAAC,CAC9D,GCpHO,MAAMC,GAAc,CACzB,OACA,QACA,MACA,SACA,oBACA,kBACA,qBACA,mBACA,cACA,eACA,OACF,EAIO,SAASC,GACd7b,EAC2B,CACpB,OAAA4b,GAAY,SAAS5b,CAAyB,CACvD,CAGO,MAAM8b,GAAoB,CAC/B,qBACA,mBACA,eACA,sBACA,oBACA,gBACA,gBACA,cACA,eACA,aACA,QACF,EAIO,SAASC,GAAa/b,EAA8C,CAClE,OAAA8b,GAAkB,SAAS9b,CAA0B,CAC9D,CAGO,MAAMgc,GAAe,CAC1B,QACA,SACA,YACA,aACA,YACA,aACA,aACA,cACA,iBACA,kBACA,iBACA,iBACF,EAIO,SAASC,GAAajc,EAA8C,CAClE,OAAAgc,GAAa,SAAShc,CAA0B,CACzD,CAGO,MAAMkc,GAAuB,CAClC,eACA,aACA,YACF,EAIO,SAASC,GACdnc,EACmC,CAC5B,OAAAkc,GAAqB,SAASlc,CAAiC,CACxE,CAGO,MAAMoc,GAAmC,CAC9C,GAAGR,GACH,GAAGE,GACH,GAAGE,GACH,GAAGE,GACH,kBACA,eACF,EAMaG,GAAe,CAC1B,MACA,OACA,QACA,SACA,QACA,MACA,aACA,WACA,QACF,EAKO,SAASC,GAAatc,EAAiD,CACrE,OAAAqc,GAAa,SAASrc,CAA6B,CAC5D,CAGO,MAAMuc,GAAe,CAC1B,QACA,SACA,QACA,SACA,aACA,aACF,EAIO,SAASC,GAAaxc,EAA0C,CAC9D,OAAAuc,GAAa,SAASvc,CAAsB,CACrD,CC9EA,MAAMyc,GAAsB,CAC1B,OACA,SACA,QACA,YACA,aACA,UACA,QACA,eACA,aACA,eACA,aACA,oBACA,kBACA,WACA,MACA,SACA,WACA,cACA,UACA,QACA,eACA,aACA,eACA,aACA,oBACA,kBACA,cACA,YACA,mBACA,iBACA,eACA,aACA,oBACA,kBACA,mBACA,iBACA,wBACA,sBACA,oBACA,kBACA,yBACA,uBACA,QACA,MACA,aACA,WACA,aACA,WACA,kBACA,eACF,EAoBMC,GAAsB,CAC1B,SACA,aACA,cACA,kBACA,kBACF,EAIMC,GAAuB,CAC3B,aACA,cACA,YACF,EA6BO,SAASC,GACd5c,EACkC,CAC3B,OAAAyc,GAAoB,SAASzc,CAAgC,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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126]}